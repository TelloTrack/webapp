(self.webpackChunktrackify=self.webpackChunktrackify||[]).push([[179],{2011:(Ee,pe,U)=>{"use strict";U.d(pe,{Dh:()=>be,GT:()=>Ne,Ot:()=>Me,cc:()=>de,hO:()=>Ge,on:()=>ne,pX:()=>De,xv:()=>ge});var O=U(4650),f=U(127),G=U(880);Ee=U.hmd(Ee);const he=["ngOnDestroy"],De=(ae,Se,Fe,He={})=>new Proxy(ae,{get:(Ve,Be)=>Fe.runOutsideAngular(()=>{var st;if(ae[Be])return!(null===(st=He?.spy)||void 0===st)&&st.get&&He.spy.get(Be,ae[Be]),ae[Be];if(he.indexOf(Be)>-1)return()=>{};const ue=Se.toPromise().then(Re=>{const je=Re&&Re[Be];return"function"==typeof je?je.bind(Re):je&&je.then?je.then(fe=>Fe.run(()=>fe)):Fe.run(()=>je)});return new Proxy(()=>{},{get:(Re,je)=>ue[je],apply:(Re,je,fe)=>ue.then(me=>{var Ie;const ke=me&&me(...fe);return!(null===(Ie=He?.spy)||void 0===Ie)&&Ie.apply&&He.spy.apply(Be,fe,ke),ke})})})}),Ne=(ae,Se)=>{Se.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(He=>{Object.defineProperty(ae.prototype,He,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,He))})})};class Me{constructor(Se){return Se}}const be=new O.OlP("angularfire2.app.options"),ge=new O.OlP("angularfire2.app.name");function ne(ae,Se,Fe){const Ve="object"==typeof Fe&&Fe||{};Ve.name=Ve.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const st=f.Z.apps.filter(ue=>ue&&ue.name===Ve.name)[0]||Se.runOutsideAngular(()=>f.Z.initializeApp(ae,Ve));try{JSON.stringify(ae)!==JSON.stringify(st.options)&&te("error",`${st.name} Firebase App already initialized with different options${Ee.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Me(st)}const te=(ae,...Se)=>{(0,O.X6Q)()&&typeof console<"u"&&console[ae](...Se)},ce={provide:Me,useFactory:ne,deps:[be,O.R0b,[new O.FiY,ge]]};let Ge=(()=>{class ae{constructor(Fe){f.Z.registerVersion("angularfire",G.q4.full,"core"),f.Z.registerVersion("angularfire",G.q4.full,"app-compat"),f.Z.registerVersion("angular",O.q4F.full,Fe.toString())}static initializeApp(Fe,He){return{ngModule:ae,providers:[{provide:be,useValue:Fe},{provide:ge,useValue:He}]}}}return ae.\u0275fac=function(Fe){return new(Fe||ae)(O.LFG(O.Lbi))},ae.\u0275mod=O.oAB({type:ae}),ae.\u0275inj=O.cJS({providers:[ce]}),ae})();function de(ae,Se,Fe,He,Ve){const[,Be,st]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===ae)||[];if(Be)return function ze(ae,Se){try{return ae.toString()===Se.toString()}catch{return ae===Se}}(Ve,st)||(X("error",`${Se} was already initialized on the ${Fe} Firebase App with different settings.${J?" You may need to reload as Firebase is not HMR aware.":""}`),X("warn",{is:Ve,was:st})),Be;{const ue=He();return globalThis.\u0275AngularfireInstanceCache.push([ae,ue,Ve]),ue}}const J=!!Ee.hot,X=(ae,...Se)=>{(0,O.X6Q)()&&typeof console<"u"&&console[ae](...Se)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(Ee,pe,U)=>{"use strict";U.d(pe,{q4:()=>i_,iC:()=>vu,HU:()=>yu,vb:()=>o_,JM:()=>mu,nk:()=>gl});var O=U(4650),f=U(5867),G=U(5861),he=U(9681),De=U(2090),Ne=U(4859),Me=U(1877);U(2833);const ge="@firebase/remote-config",de=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xt{constructor(z,se,Ae,rt){this.client=z,this.storage=se,this.storageCache=Ae,this.logger=rt}isCachedDataFresh(z,se){if(!se)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ae=Date.now()-se,rt=Ae<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${rt}.`),rt}fetch(z){var se=this;return(0,G.Z)(function*(){const[Ae,rt]=yield Promise.all([se.storage.getLastSuccessfulFetchTimestampMillis(),se.storage.getLastSuccessfulFetchResponse()]);if(rt&&se.isCachedDataFresh(z.cacheMaxAgeMillis,Ae))return rt;z.eTag=rt&&rt.eTag;const it=yield se.client.fetch(z),Ht=[se.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===it.status&&Ht.push(se.storage.setLastSuccessfulFetchResponse(it)),yield Promise.all(Ht),it})()}}function wn(q=navigator){return q.languages&&q.languages[0]||q.language}class bn{constructor(z,se,Ae,rt,it,Ht){this.firebaseInstallations=z,this.sdkVersion=se,this.namespace=Ae,this.projectId=rt,this.apiKey=it,this.appId=Ht}fetch(z){var se=this;return(0,G.Z)(function*(){var Ae,rt,it;const[Ht,Dn]=yield Promise.all([se.firebaseInstallations.getId(),se.firebaseInstallations.getToken()]),rr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${se.projectId}/namespaces/${se.namespace}:fetch?key=${se.apiKey}`,fr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},un={sdk_version:se.sdkVersion,app_instance_id:Ht,app_instance_id_token:Dn,app_id:se.appId,language_code:wn()},Fi={method:"POST",headers:fr,body:JSON.stringify(un)},Ei=fetch(rr,Fi),Pa=new Promise((Kt,Fa)=>{z.signal.addEventListener(()=>{const wc=new Error("The operation was aborted.");wc.name="AbortError",Fa(wc)})});let ko;try{yield Promise.race([Ei,Pa]),ko=yield Ei}catch(Kt){let Fa="fetch-client-network";throw"AbortError"===(null===(Ae=Kt)||void 0===Ae?void 0:Ae.name)&&(Fa="fetch-timeout"),de.create(Fa,{originalErrorMessage:null===(rt=Kt)||void 0===rt?void 0:rt.message})}let ea=ko.status;const uo=ko.headers.get("ETag")||void 0;let La,ta;if(200===ko.status){let Kt;try{Kt=yield ko.json()}catch(Fa){throw de.create("fetch-client-parse",{originalErrorMessage:null===(it=Fa)||void 0===it?void 0:it.message})}La=Kt.entries,ta=Kt.state}if("INSTANCE_STATE_UNSPECIFIED"===ta?ea=500:"NO_CHANGE"===ta?ea=304:("NO_TEMPLATE"===ta||"EMPTY_CONFIG"===ta)&&(La={}),304!==ea&&200!==ea)throw de.create("fetch-status",{httpStatus:ea});return{status:ea,eTag:uo,config:La}})()}}class Wt{constructor(z,se){this.client=z,this.storage=se}fetch(z){var se=this;return(0,G.Z)(function*(){const Ae=(yield se.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return se.attemptFetch(z,Ae)})()}attemptFetch(z,{throttleEndTimeMillis:se,backoffCount:Ae}){var rt=this;return(0,G.Z)(function*(){yield function Ft(q,z){return new Promise((se,Ae)=>{const rt=Math.max(z-Date.now(),0),it=setTimeout(se,rt);q.addEventListener(()=>{clearTimeout(it),Ae(de.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,se);try{const it=yield rt.client.fetch(z);return yield rt.storage.deleteThrottleMetadata(),it}catch(it){if(!function Xt(q){if(!(q instanceof De.ZR&&q.customData))return!1;const z=Number(q.customData.httpStatus);return 429===z||500===z||503===z||504===z}(it))throw it;const Ht={throttleEndTimeMillis:Date.now()+(0,De.$s)(Ae),backoffCount:Ae+1};return yield rt.storage.setThrottleMetadata(Ht),rt.attemptFetch(z,Ht)}})()}}class tn{constructor(z,se,Ae,rt,it){this.app=z,this._client=se,this._storageCache=Ae,this._storage=rt,this._logger=it,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kt(q,z){var se;const Ae=q.target.error||void 0;return de.create(z,{originalErrorMessage:Ae&&(null===(se=Ae)||void 0===se?void 0:se.message)})}const Ln="app_namespace_store";class Pr{constructor(z,se,Ae,rt=function cr(){return new Promise((q,z)=>{var se;try{const Ae=indexedDB.open("firebase_remote_config",1);Ae.onerror=rt=>{z(kt(rt,"storage-open"))},Ae.onsuccess=rt=>{q(rt.target.result)},Ae.onupgradeneeded=rt=>{0===rt.oldVersion&&rt.target.result.createObjectStore(Ln,{keyPath:"compositeKey"})}}catch(Ae){z(de.create("storage-open",{originalErrorMessage:null===(se=Ae)||void 0===se?void 0:se.message}))}})}()){this.appId=z,this.appName=se,this.namespace=Ae,this.openDbPromise=rt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var se=this;return(0,G.Z)(function*(){const Ae=yield se.openDbPromise;return new Promise((rt,it)=>{var Ht;const _r=Ae.transaction([Ln],"readonly").objectStore(Ln),rr=se.createCompositeKey(z);try{const fr=_r.get(rr);fr.onerror=un=>{it(kt(un,"storage-get"))},fr.onsuccess=un=>{const Fi=un.target.result;rt(Fi?Fi.value:void 0)}}catch(fr){it(de.create("storage-get",{originalErrorMessage:null===(Ht=fr)||void 0===Ht?void 0:Ht.message}))}})})()}set(z,se){var Ae=this;return(0,G.Z)(function*(){const rt=yield Ae.openDbPromise;return new Promise((it,Ht)=>{var Dn;const rr=rt.transaction([Ln],"readwrite").objectStore(Ln),fr=Ae.createCompositeKey(z);try{const un=rr.put({compositeKey:fr,value:se});un.onerror=Fi=>{Ht(kt(Fi,"storage-set"))},un.onsuccess=()=>{it()}}catch(un){Ht(de.create("storage-set",{originalErrorMessage:null===(Dn=un)||void 0===Dn?void 0:Dn.message}))}})})()}delete(z){var se=this;return(0,G.Z)(function*(){const Ae=yield se.openDbPromise;return new Promise((rt,it)=>{var Ht;const _r=Ae.transaction([Ln],"readwrite").objectStore(Ln),rr=se.createCompositeKey(z);try{const fr=_r.delete(rr);fr.onerror=un=>{it(kt(un,"storage-delete"))},fr.onsuccess=()=>{rt()}}catch(fr){it(de.create("storage-delete",{originalErrorMessage:null===(Ht=fr)||void 0===Ht?void 0:Ht.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class ki{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,G.Z)(function*(){const se=z.storage.getLastFetchStatus(),Ae=z.storage.getLastSuccessfulFetchTimestampMillis(),rt=z.storage.getActiveConfig(),it=yield se;it&&(z.lastFetchStatus=it);const Ht=yield Ae;Ht&&(z.lastSuccessfulFetchTimestampMillis=Ht);const Dn=yield rt;Dn&&(z.activeConfig=Dn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function ri(){return jr.apply(this,arguments)}function jr(){return(jr=(0,G.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,he._registerComponent)(new Ne.wA("remote-config",function q(z,{instanceIdentifier:se}){const Ae=z.getProvider("app").getImmediate(),rt=z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw de.create("registration-window");if(!(0,De.hl)())throw de.create("indexed-db-unavailable");const{projectId:it,apiKey:Ht,appId:Dn}=Ae.options;if(!it)throw de.create("registration-project-id");if(!Ht)throw de.create("registration-api-key");if(!Dn)throw de.create("registration-app-id");const _r=new Pr(Dn,Ae.name,se=se||"firebase"),rr=new ki(_r),fr=new Me.Yd(ge);fr.logLevel=Me.in.ERROR;const un=new bn(rt,he.SDK_VERSION,se,it,Ht,Dn),Fi=new Wt(un,_r),Ei=new xt(Fi,_r,rr,fr),Pa=new tn(Ae,Ei,rr,_r,fr);return function st(q){const z=(0,De.m9)(q);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(Pa),Pa},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(ge,"0.3.15"),(0,he.registerVersion)(ge,"0.3.15","esm2017")}();var vn=U(8766);const It="/firebase-messaging-sw.js",Ir="/firebase-cloud-messaging-push-scope",Yr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$r="google.c.a.c_id",Lr="google.c.a.c_l",En="google.c.a.ts",Bn="google.c.a.e";var ft=(()=>{return(q=ft||(ft={})).PUSH_RECEIVED="push-received",q.NOTIFICATION_CLICKED="notification-clicked",ft;var q})();function Hn(q){const z=new Uint8Array(q);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hr(q){const se=(q+"=".repeat((4-q.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ae=atob(se),rt=new Uint8Array(Ae.length);for(let it=0;it<Ae.length;++it)rt[it]=Ae.charCodeAt(it);return rt}const Cr="fcm_token_details_db",ar="fcm_token_object_Store";function Yn(q){return In.apply(this,arguments)}function In(){return In=(0,G.Z)(function*(q){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(it=>it.name).includes(Cr))return null;let z=null;return(yield(0,vn.X3)(Cr,5,{upgrade:(Ae=(0,G.Z)(function*(rt,it,Ht,Dn){var _r;if(it<2||!rt.objectStoreNames.contains(ar))return;const rr=Dn.objectStore(ar),fr=yield rr.index("fcmSenderId").get(q);if(yield rr.clear(),fr)if(2===it){const un=fr;if(!un.auth||!un.p256dh||!un.endpoint)return;z={token:un.fcmToken,createTime:null!==(_r=un.createTime)&&void 0!==_r?_r:Date.now(),subscriptionOptions:{auth:un.auth,p256dh:un.p256dh,endpoint:un.endpoint,swScope:un.swScope,vapidKey:"string"==typeof un.vapidKey?un.vapidKey:Hn(un.vapidKey)}}}else if(3===it){const un=fr;z={token:un.fcmToken,createTime:un.createTime,subscriptionOptions:{auth:Hn(un.auth),p256dh:Hn(un.p256dh),endpoint:un.endpoint,swScope:un.swScope,vapidKey:Hn(un.vapidKey)}}}else if(4===it){const un=fr;z={token:un.fcmToken,createTime:un.createTime,subscriptionOptions:{auth:Hn(un.auth),p256dh:Hn(un.p256dh),endpoint:un.endpoint,swScope:un.swScope,vapidKey:Hn(un.vapidKey)}}}}),function(it,Ht,Dn,_r){return Ae.apply(this,arguments)})})).close(),yield(0,vn.Lj)(Cr),yield(0,vn.Lj)("fcm_vapid_details_db"),yield(0,vn.Lj)("undefined"),Gr(z)?z:null;var Ae}),In.apply(this,arguments)}function Gr(q){if(!q||!q.subscriptionOptions)return!1;const{subscriptionOptions:z}=q;return"number"==typeof q.createTime&&q.createTime>0&&"string"==typeof q.token&&q.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}const Je="firebase-messaging-store";let We=null;function gt(){return We||(We=(0,vn.X3)("firebase-messaging-database",1,{upgrade:(q,z)=>{0===z&&q.createObjectStore(Je)}})),We}function Ot(q){return $t.apply(this,arguments)}function $t(){return($t=(0,G.Z)(function*(q){const z=V(q),Ae=yield(yield gt()).transaction(Je).objectStore(Je).get(z);if(Ae)return Ae;{const rt=yield Yn(q.appConfig.senderId);if(rt)return yield dn(q,rt),rt}})).apply(this,arguments)}function dn(q,z){return re.apply(this,arguments)}function re(){return(re=(0,G.Z)(function*(q,z){const se=V(q),rt=(yield gt()).transaction(Je,"readwrite");return yield rt.objectStore(Je).put(z,se),yield rt.done,z})).apply(this,arguments)}function Y(q){return H.apply(this,arguments)}function H(){return(H=(0,G.Z)(function*(q){const z=V(q),Ae=(yield gt()).transaction(Je,"readwrite");yield Ae.objectStore(Je).delete(z),yield Ae.done})).apply(this,arguments)}function V({appConfig:q}){return q.appId}const j=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ie(q,z){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,G.Z)(function*(q,z){var se;const Ae=yield Qn(q),rt=Gn(z),it={method:"POST",headers:Ae,body:JSON.stringify(rt)};let Ht;try{Ht=yield(yield fetch(Qt(q.appConfig),it)).json()}catch(Dn){throw j.create("token-subscribe-failed",{errorInfo:null===(se=Dn)||void 0===se?void 0:se.toString()})}if(Ht.error)throw j.create("token-subscribe-failed",{errorInfo:Ht.error.message});if(!Ht.token)throw j.create("token-subscribe-no-token");return Ht.token})).apply(this,arguments)}function Qe(q,z){return qe.apply(this,arguments)}function qe(){return(qe=(0,G.Z)(function*(q,z){var se;const Ae=yield Qn(q),rt=Gn(z.subscriptionOptions),it={method:"PATCH",headers:Ae,body:JSON.stringify(rt)};let Ht;try{Ht=yield(yield fetch(`${Qt(q.appConfig)}/${z.token}`,it)).json()}catch(Dn){throw j.create("token-update-failed",{errorInfo:null===(se=Dn)||void 0===se?void 0:se.toString()})}if(Ht.error)throw j.create("token-update-failed",{errorInfo:Ht.error.message});if(!Ht.token)throw j.create("token-update-no-token");return Ht.token})).apply(this,arguments)}function Dt(q,z){return mt.apply(this,arguments)}function mt(){return(mt=(0,G.Z)(function*(q,z){var se;const rt={method:"DELETE",headers:yield Qn(q)};try{const Ht=yield(yield fetch(`${Qt(q.appConfig)}/${z}`,rt)).json();if(Ht.error)throw j.create("token-unsubscribe-failed",{errorInfo:Ht.error.message})}catch(it){throw j.create("token-unsubscribe-failed",{errorInfo:null===(se=it)||void 0===se?void 0:se.toString()})}})).apply(this,arguments)}function Qt({projectId:q}){return`https://fcmregistrations.googleapis.com/v1/projects/${q}/registrations`}function Qn(q){return zt.apply(this,arguments)}function zt(){return(zt=(0,G.Z)(function*({appConfig:q,installations:z}){const se=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q.apiKey,"x-goog-firebase-installations-auth":`FIS ${se}`})})).apply(this,arguments)}function Gn({p256dh:q,auth:z,endpoint:se,vapidKey:Ae}){const rt={web:{endpoint:se,auth:z,p256dh:q}};return Ae!==Yr&&(rt.web.applicationPubKey=Ae),rt}const Ao=6048e5;function xa(q){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,G.Z)(function*(q){const z=yield dr(q.swRegistration,q.vapidKey),se={vapidKey:q.vapidKey,swScope:q.swRegistration.scope,endpoint:z.endpoint,auth:Hn(z.getKey("auth")),p256dh:Hn(z.getKey("p256dh"))},Ae=yield Ot(q.firebaseDependencies);if(Ae){if(Cn(Ae.subscriptionOptions,se))return Date.now()>=Ae.createTime+Ao?_e(q,{token:Ae.token,createTime:Date.now(),subscriptionOptions:se}):Ae.token;try{yield Dt(q.firebaseDependencies,Ae.token)}catch(rt){console.warn(rt)}return ot(q.firebaseDependencies,se)}return ot(q.firebaseDependencies,se)})).apply(this,arguments)}function cu(q){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,G.Z)(function*(q){const z=yield Ot(q.firebaseDependencies);z&&(yield Dt(q.firebaseDependencies,z.token),yield Y(q.firebaseDependencies));const se=yield q.swRegistration.pushManager.getSubscription();return!se||se.unsubscribe()})).apply(this,arguments)}function _e(q,z){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,G.Z)(function*(q,z){try{const se=yield Qe(q.firebaseDependencies,z),Ae=Object.assign(Object.assign({},z),{token:se,createTime:Date.now()});return yield dn(q.firebaseDependencies,Ae),se}catch(se){throw yield cu(q),se}})).apply(this,arguments)}function ot(q,z){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,G.Z)(function*(q,z){const Ae={token:yield ie(q,z),createTime:Date.now(),subscriptionOptions:z};return yield dn(q,Ae),Ae.token})).apply(this,arguments)}function dr(q,z){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,G.Z)(function*(q,z){return(yield q.pushManager.getSubscription())||q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hr(z)})})).apply(this,arguments)}function Cn(q,z){return z.vapidKey===q.vapidKey&&z.endpoint===q.endpoint&&z.auth===q.auth&&z.p256dh===q.p256dh}function jn(q){const z={from:q.from,collapseKey:q.collapse_key,messageId:q.fcmMessageId};return function _i(q,z){if(!z.notification)return;q.notification={};const se=z.notification.title;se&&(q.notification.title=se);const Ae=z.notification.body;Ae&&(q.notification.body=Ae);const rt=z.notification.image;rt&&(q.notification.image=rt);const it=z.notification.icon;it&&(q.notification.icon=it)}(z,q),function hr(q,z){!z.data||(q.data=z.data)}(z,q),function qi(q,z){var se,Ae,rt,it,Ht;if(!(z.fcmOptions||null!==(se=z.notification)&&void 0!==se&&se.click_action))return;q.fcmOptions={};const Dn=null!==(rt=null===(Ae=z.fcmOptions)||void 0===Ae?void 0:Ae.link)&&void 0!==rt?rt:null===(it=z.notification)||void 0===it?void 0:it.click_action;Dn&&(q.fcmOptions.link=Dn);const _r=null===(Ht=z.fcmOptions)||void 0===Ht?void 0:Ht.analytics_label;_r&&(q.fcmOptions.analyticsLabel=_r)}(z,q),z}function Tt(q){return"object"==typeof q&&!!q&&$r in q}function rn(q,z){const se=[];for(let Ae=0;Ae<q.length;Ae++)se.push(q.charAt(Ae)),Ae<z.length&&se.push(z.charAt(Ae));return se.join("")}function yi(q){return j.create("missing-app-config-values",{valueName:q})}rn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ws{constructor(z,se,Ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const rt=function Dr(q){if(!q||!q.options)throw yi("App Configuration Object");if(!q.name)throw yi("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:se}=q;for(const Ae of z)if(!se[Ae])throw yi(Ae);return{appName:q.name,projectId:se.projectId,apiKey:se.apiKey,appId:se.appId,senderId:se.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:rt,installations:se,analyticsProvider:Ae}}_delete(){return Promise.resolve()}}function xr(q){return io.apply(this,arguments)}function io(){return(io=(0,G.Z)(function*(q){var z;try{q.swRegistration=yield navigator.serviceWorker.register(It,{scope:Ir}),q.swRegistration.update().catch(()=>{})}catch(se){throw j.create("failed-service-worker-registration",{browserErrorMessage:null===(z=se)||void 0===z?void 0:z.message})}})).apply(this,arguments)}function Tr(q,z){return fs.apply(this,arguments)}function fs(){return(fs=(0,G.Z)(function*(q,z){if(!z&&!q.swRegistration&&(yield xr(q)),z||!q.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw j.create("invalid-sw-registration");q.swRegistration=z}})).apply(this,arguments)}function Na(q,z){return an.apply(this,arguments)}function an(){return(an=(0,G.Z)(function*(q,z){z?q.vapidKey=z:q.vapidKey||(q.vapidKey=Yr)})).apply(this,arguments)}function so(){return(so=(0,G.Z)(function*(q,z){if(!navigator)throw j.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw j.create("permission-blocked");return yield Na(q,z?.vapidKey),yield Tr(q,z?.serviceWorkerRegistration),xa(q)})).apply(this,arguments)}function cl(q,z,se){return No.apply(this,arguments)}function No(){return(No=(0,G.Z)(function*(q,z,se){const Ae=di(z);(yield q.firebaseDependencies.analyticsProvider.get()).logEvent(Ae,{message_id:se[$r],message_name:se[Lr],message_time:se[En],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function di(q){switch(q){case ft.NOTIFICATION_CLICKED:return"notification_open";case ft.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zs(){return(zs=(0,G.Z)(function*(q,z){const se=z.data;if(!se.isFirebaseMessaging)return;q.onMessageHandler&&se.messageType===ft.PUSH_RECEIVED&&("function"==typeof q.onMessageHandler?q.onMessageHandler(jn(se)):q.onMessageHandler.next(jn(se)));const Ae=se.data;Tt(Ae)&&"1"===Ae[Bn]&&(yield cl(q,se.messageType,Ae))})).apply(this,arguments)}const Oi="@firebase/messaging",vc=q=>{const z=new Ws(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),q.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",se=>function Ma(q,z){return zs.apply(this,arguments)}(z,se)),z},Nn=q=>{const z=q.getProvider("messaging").getImmediate();return{getToken:Ae=>function xo(q,z){return so.apply(this,arguments)}(z,Ae)}};function du(){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,G.Z)(function*(){try{yield(0,De.eu)()}catch{return!1}return typeof window<"u"&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qs(){(0,he._registerComponent)(new Ne.wA("messaging",vc,"PUBLIC")),(0,he._registerComponent)(new Ne.wA("messaging-internal",Nn,"PRIVATE")),(0,he.registerVersion)(Oi,"0.11.0"),(0,he.registerVersion)(Oi,"0.11.0","esm2017")}();var hl=U(7982),Oa=U(4408),t_=U(7565);const oo=new class qd extends t_.v{}(class Li extends Oa.o{constructor(z,se){super(z,se),this.scheduler=z,this.work=se}schedule(z,se=0){return se>0?super.schedule(z,se):(this.delay=se,this.state=z,this.scheduler.flush(this),this)}execute(z,se){return se>0||this.closed?super.execute(z,se):this._execute(z,se)}requestAsyncId(z,se,Ae=0){return null!=Ae&&Ae>0||null==Ae&&this.delay>0?super.requestAsyncId(z,se,Ae):(z.flush(this),0)}});var fu=U(4986),_p=U(8505),n_=U(9468),r_=U(5363);const i_=new O.GfV("7.5.0"),ao="__angularfire_symbol__analyticsIsSupportedValue",fl="__angularfire_symbol__analyticsIsSupported",pu="__angularfire_symbol__remoteConfigIsSupportedValue",yp="__angularfire_symbol__remoteConfigIsSupported",pl="__angularfire_symbol__messagingIsSupportedValue",gu="__angularfire_symbol__messagingIsSupported";globalThis[fl]||(globalThis[fl]=(0,hl.Gb)().then(q=>globalThis[ao]=q).catch(()=>globalThis[ao]=!1)),globalThis[gu]||(globalThis[gu]=du().then(q=>globalThis[pl]=q).catch(()=>globalThis[pl]=!1)),globalThis[yp]||(globalThis[yp]=ri().then(q=>globalThis[pu]=q).catch(()=>globalThis[pu]=!1));const gl={async:()=>globalThis[fl],sync:()=>{const q=globalThis[ao];if(void 0===q)throw new Error((q=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${q} in the constructor, first ensure that ${q} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${q})\`.`)("Analytics"));return q}};function mu(q,z,se){if(z){if(1===z.length)return z[0];const it=z.filter(Ht=>Ht.app===se);if(1===it.length)return it[0]}return se.container.getProvider(q).getImmediate({optional:!0})}const o_=(q,z)=>{const se=z?[z]:(0,f.C6)(),Ae=[];return se.forEach(rt=>{rt.container.getProvider(q).instances.forEach(Ht=>{Ae.includes(Ht)||Ae.push(Ht)})}),Ae};function _u(){}class Xo{constructor(z,se=oo){this.zone=z,this.delegate=se}now(){return this.delegate.now()}schedule(z,se,Ae){const rt=this.zone;return this.delegate.schedule(function(Ht){rt.runGuarded(()=>{z.apply(this,[Ht])})},se,Ae)}}class Ec{constructor(z){this.zone=z,this.task=null}call(z,se){const Ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_u,{},_u,_u)),se.pipe((0,_p.b)({next:Ae,complete:Ae,error:Ae})).subscribe(z).add(Ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yu=(()=>{class q{constructor(se){this.ngZone=se,this.outsideAngular=se.runOutsideAngular(()=>new Xo(Zone.current)),this.insideAngular=se.run(()=>new Xo(Zone.current,fu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return q.\u0275fac=function(se){return new(se||q)(O.LFG(O.R0b))},q.\u0275prov=O.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();function Ns(){const q=globalThis.\u0275AngularFireScheduler;if(!q)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return q}function vu(q){return Ns(),function _l(q){return function(se){return(se=se.lift(new Ec(q.ngZone))).pipe((0,n_.R)(q.outsideAngular),(0,r_.Q)(q.insideAngular))}}(Ns())(q)}},8247:(Ee,pe,U)=>{"use strict";U.d(pe,{$:()=>Ht,A:()=>te,B:()=>de,G:()=>Ue,H:()=>Cn,J:()=>qs,L:()=>re,M:()=>qd,N:()=>_p,P:()=>mR,Q:()=>n_,R:()=>EE,T:()=>r_,U:()=>fu,V:()=>pu,W:()=>yp,X:()=>vp,Y:()=>yl,Z:()=>q,_:()=>se,a:()=>Cu,a0:()=>un,a1:()=>Ei,a2:()=>ko,a3:()=>uo,a4:()=>ta,a5:()=>Fa,a6:()=>hi,a7:()=>GD,a8:()=>uE,a9:()=>WD,aA:()=>Y,aB:()=>ja,aC:()=>_s,aD:()=>A_,aE:()=>Fr,aI:()=>Ms,aL:()=>ao,aa:()=>lE,ab:()=>Zi,ac:()=>Ic,af:()=>fR,ag:()=>cE,ah:()=>wp,ak:()=>Xo,al:()=>c_,an:()=>QD,ao:()=>mE,ap:()=>je,aq:()=>mt,ar:()=>Qe,as:()=>Fe,at:()=>Rs,au:()=>sa,av:()=>Qt,aw:()=>He,ax:()=>ue,ay:()=>Nu,az:()=>me,b:()=>Dc,c:()=>T_,d:()=>Ys,e:()=>yR,f:()=>iT,g:()=>x_,h:()=>TE,i:()=>rh,j:()=>Pc,k:()=>M_,l:()=>ah,m:()=>ph,o:()=>be,r:()=>Rc,s:()=>Dl,u:()=>gR});var O=U(5861),f=U(2090),G=U(9681),he=U(1877),De=U(655),Ne=U(4859);const be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},te={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const de=function ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},J=new f.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ae=new he.Yd("@firebase/auth");function Se(C,...y){ae.logLevel<=he.in.ERROR&&ae.error(`Auth (${G.SDK_VERSION}): ${C}`,...y)}function Fe(C,...y){throw st(C,...y)}function He(C,...y){return st(C,...y)}function Ve(C,y,w){const S=Object.assign(Object.assign({},ze()),{[y]:w});return new f.LL("auth","Firebase",S).create(y,{appName:C.name})}function Be(C,y,w){if(!(y instanceof w))throw w.name!==y.constructor.name&&Fe(C,"argument-error"),Ve(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(C,...y){if("string"!=typeof C){const w=y[0],S=[...y.slice(1)];return S[0]&&(S[0].appName=C.name),C._errorFactory.create(w,...S)}return J.create(C,...y)}function ue(C,y,...w){if(!C)throw st(y,...w)}function Re(C){const y="INTERNAL ASSERTION FAILED: "+C;throw Se(y),new Error(y)}function je(C,y){C||Re(y)}const fe=new Map;function me(C){je(C instanceof Function,"Expected a class definition");let y=fe.get(C);return y?(je(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,fe.set(C,y),y)}function Te(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function nt(){return"http:"===xt()||"https:"===xt()}function xt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Ft{constructor(y,w){this.shortDelay=y,this.longDelay=w,je(w>y,"Short delay should be less than long delay!"),this.isMobile=(0,f.uI)()||(0,f.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nt()||(0,f.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xt(C,y){je(C.emulator,"Emulator should always be set here");const{url:w}=C.emulator;return y?`${w}${y.startsWith("/")?y.slice(1):y}`:w}class Wt{static initialize(y,w,S){this.fetchImpl=y,w&&(this.headersImpl=w),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},kr=new Ft(3e4,6e4);function tn(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function kt(C,y,w,S){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(C,y,w,S,L={}){return Or(C,L,(0,O.Z)(function*(){let W={},ve={};S&&("GET"===y?ve=S:W={body:JSON.stringify(S)});const Ke=(0,f.xO)(Object.assign({key:C.config.apiKey},ve)).slice(1),wt=yield C._getAdditionalHeaders();return wt["Content-Type"]="application/json",C.languageCode&&(wt["X-Firebase-Locale"]=C.languageCode),Wt.fetch()(ki(C,C.config.apiHost,w,Ke),Object.assign({method:y,headers:wt,referrerPolicy:"no-referrer"},W))}))})).apply(this,arguments)}function Or(C,y,w){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(C,y,w){C._canInitEmulator=!1;const S=Object.assign(Object.assign({},qn),y);try{const L=new ni(C),W=yield Promise.race([w(),L.promise]);L.clearNetworkTimeout();const ve=yield W.json();if("needConfirmation"in ve)throw br(C,"account-exists-with-different-credential",ve);if(W.ok&&!("errorMessage"in ve))return ve;{const Ke=W.ok?ve.errorMessage:ve.error.message,[wt,Vt]=Ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw br(C,"credential-already-in-use",ve);if("EMAIL_EXISTS"===wt)throw br(C,"email-already-in-use",ve);if("USER_DISABLED"===wt)throw br(C,"user-disabled",ve);const gn=S[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(Vt)throw Ve(C,gn,Vt);Fe(C,gn)}}catch(L){if(L instanceof f.ZR)throw L;Fe(C,"network-request-failed")}})).apply(this,arguments)}function cr(C,y,w,S){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(C,y,w,S,L={}){const W=yield kt(C,y,w,S,L);return"mfaPendingCredential"in W&&Fe(C,"multi-factor-auth-required",{_serverResponse:W}),W})).apply(this,arguments)}function ki(C,y,w,S){const L=`${y}${w}?${S}`;return C.config.emulator?Xt(C.config,L):`${C.config.apiScheme}://${L}`}class ni{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((w,S)=>{this.timer=setTimeout(()=>S(He(this.auth,"network-request-failed")),kr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function br(C,y,w){const S={appName:C.name};w.email&&(S.email=w.email),w.phoneNumber&&(S.phoneNumber=w.phoneNumber);const L=He(C,y,S);return L.customData._tokenResponse=w,L}function ri(){return(ri=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function jr(C,y){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function It(C,y){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Yr(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function Lr(){return(Lr=(0,O.Z)(function*(C,y=!1){const w=(0,f.m9)(C),S=yield w.getIdToken(y),L=Bn(S);ue(L&&L.exp&&L.auth_time&&L.iat,w.auth,"internal-error");const W="object"==typeof L.firebase?L.firebase:void 0,ve=W?.sign_in_provider;return{claims:L,token:S,authTime:Yr(En(L.auth_time)),issuedAtTime:Yr(En(L.iat)),expirationTime:Yr(En(L.exp)),signInProvider:ve||null,signInSecondFactor:W?.sign_in_second_factor||null}})).apply(this,arguments)}function En(C){return 1e3*Number(C)}function Bn(C){var y;const[w,S,L]=C.split(".");if(void 0===w||void 0===S||void 0===L)return Se("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,f.tV)(S);return W?JSON.parse(W):(Se("Failed to decode base64 JWT payload"),null)}catch(W){return Se("Caught error parsing JWT payload as JSON",null===(y=W)||void 0===y?void 0:y.toString()),null}}function ft(C,y){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(C,y,w=!1){if(w)return y;try{return yield y}catch(S){throw S instanceof f.ZR&&Hr(S)&&C.auth.currentUser===C&&(yield C.auth.signOut()),S}})).apply(this,arguments)}function Hr({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Cr{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var w;if(y){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const L=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(y=!1){var w=this;if(!this.isRunning)return;const S=this.getInterval(y);this.timerId=setTimeout((0,O.Z)(function*(){yield w.iteration()}),S)}iteration(){var y=this;return(0,O.Z)(function*(){var w;try{yield y.user.getIdToken(!0)}catch(S){return void("auth/network-request-failed"===(null===(w=S)||void 0===w?void 0:w.code)&&y.schedule(!0))}y.schedule()})()}}class ci{constructor(y,w){this.createdAt=y,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(C){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(C){var y;const w=C.auth,S=yield C.getIdToken(),L=yield ft(C,It(w,{idToken:S}));ue(L?.users.length,w,"internal-error");const W=L.users[0];C._notifyReloadListener(W);const ve=null!==(y=W.providerUserInfo)&&void 0!==y&&y.length?Wr(W.providerUserInfo):[],Ke=nn(C.providerData,ve),gn=!!C.isAnonymous&&!(C.email&&W.passwordHash||Ke?.length),gr={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:Ke,metadata:new ci(W.createdAt,W.lastLoginAt),isAnonymous:gn};Object.assign(C,gr)})).apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(C){const y=(0,f.m9)(C);yield ar(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function nn(C,y){return[...C.filter(S=>!y.some(L=>L.providerId===S.providerId)),...y]}function Wr(C){return C.map(y=>{var{providerId:w}=y,S=(0,De._T)(y,["providerId"]);return{providerId:w,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function We(){return(We=(0,O.Z)(function*(C,y){const w=yield Or(C,{},(0,O.Z)(function*(){const S=(0,f.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:L,apiKey:W}=C.config,ve=ki(C,L,"/v1/token",`key=${W}`),Ke=yield C._getAdditionalHeaders();return Ke["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(ve,{method:"POST",headers:Ke,body:S})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){ue(y.idToken,"internal-error"),ue(typeof y.idToken<"u","internal-error"),ue(typeof y.refreshToken<"u","internal-error");const w="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Nt(C){const y=Bn(C);return ue(y,"internal-error"),ue(typeof y.exp<"u","internal-error"),ue(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,w)}getToken(y,w=!1){var S=this;return(0,O.Z)(function*(){return ue(!S.accessToken||S.refreshToken,y,"user-token-expired"),w||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(y,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,w){var S=this;return(0,O.Z)(function*(){const{accessToken:L,refreshToken:W,expiresIn:ve}=yield function Je(C,y){return We.apply(this,arguments)}(y,w);S.updateTokensAndExpiration(L,W,Number(ve))})()}updateTokensAndExpiration(y,w,S){this.refreshToken=w||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(y,w){const{refreshToken:S,accessToken:L,expirationTime:W}=w,ve=new gt;return S&&(ue("string"==typeof S,"internal-error",{appName:y}),ve.refreshToken=S),L&&(ue("string"==typeof L,"internal-error",{appName:y}),ve.accessToken=L),W&&(ue("number"==typeof W,"internal-error",{appName:y}),ve.expirationTime=W),ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new gt,this.toJSON())}_performRefresh(){return Re("not implemented")}}function Ot(C,y){ue("string"==typeof C||typeof C>"u","internal-error",{appName:y})}class $t{constructor(y){var{uid:w,auth:S,stsTokenManager:L}=y,W=(0,De._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=S,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=W.displayName||null,this.email=W.email||null,this.emailVerified=W.emailVerified||!1,this.phoneNumber=W.phoneNumber||null,this.photoURL=W.photoURL||null,this.isAnonymous=W.isAnonymous||!1,this.tenantId=W.tenantId||null,this.providerData=W.providerData?[...W.providerData]:[],this.metadata=new ci(W.createdAt||void 0,W.lastLoginAt||void 0)}getIdToken(y){var w=this;return(0,O.Z)(function*(){const S=yield ft(w,w.stsTokenManager.getToken(w.auth,y));return ue(S,w.auth,"internal-error"),w.accessToken!==S&&(w.accessToken=S,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),S})()}getIdTokenResult(y){return function $r(C){return Lr.apply(this,arguments)}(this,y)}reload(){return function In(C){return Gr.apply(this,arguments)}(this)}_assign(y){this!==y&&(ue(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(w=>Object.assign({},w)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new $t(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,w=!1){var S=this;return(0,O.Z)(function*(){let L=!1;y.idToken&&y.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(y),L=!0),w&&(yield ar(S)),yield S.auth._persistUserIfCurrent(S),L&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var y=this;return(0,O.Z)(function*(){const w=yield y.getIdToken();return yield ft(y,function Br(C,y){return ri.apply(this,arguments)}(y.auth,{idToken:w})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,w){var S,L,W,ve,Ke,wt,Vt,gn;const gr=null!==(S=w.displayName)&&void 0!==S?S:void 0,lo=null!==(L=w.email)&&void 0!==L?L:void 0,Vo=null!==(W=w.phoneNumber)&&void 0!==W?W:void 0,ku=null!==(ve=w.photoURL)&&void 0!==ve?ve:void 0,zc=null!==(Ke=w.tenantId)&&void 0!==Ke?Ke:void 0,Nl=null!==(wt=w._redirectEventId)&&void 0!==wt?wt:void 0,O_=null!==(Vt=w.createdAt)&&void 0!==Vt?Vt:void 0,Vp=null!==(gn=w.lastLoginAt)&&void 0!==gn?gn:void 0,{uid:Up,emailVerified:la,isAnonymous:P_,providerData:Bp,stsTokenManager:yh}=w;ue(Up&&yh,y,"internal-error");const jp=gt.fromJSON(this.name,yh);ue("string"==typeof Up,y,"internal-error"),Ot(gr,y.name),Ot(lo,y.name),ue("boolean"==typeof la,y,"internal-error"),ue("boolean"==typeof P_,y,"internal-error"),Ot(Vo,y.name),Ot(ku,y.name),Ot(zc,y.name),Ot(Nl,y.name),Ot(O_,y.name),Ot(Vp,y.name);const vh=new $t({uid:Up,auth:y,email:lo,emailVerified:la,displayName:gr,isAnonymous:P_,photoURL:ku,phoneNumber:Vo,tenantId:zc,stsTokenManager:jp,createdAt:O_,lastLoginAt:Vp});return Bp&&Array.isArray(Bp)&&(vh.providerData=Bp.map(L_=>Object.assign({},L_))),Nl&&(vh._redirectEventId=Nl),vh}static _fromIdTokenResponse(y,w,S=!1){return(0,O.Z)(function*(){const L=new gt;L.updateFromServerResponse(w);const W=new $t({uid:w.localId,auth:y,stsTokenManager:L,isAnonymous:S});return yield ar(W),W})()}}const re=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.Z)(function*(){return!0})()}_set(w,S){var L=this;return(0,O.Z)(function*(){L.storage[w]=S})()}_get(w){var S=this;return(0,O.Z)(function*(){const L=S.storage[w];return void 0===L?null:L})()}_remove(w){var S=this;return(0,O.Z)(function*(){delete S.storage[w]})()}_addListener(w,S){}_removeListener(w,S){}}return C.type="NONE",C})();function Y(C,y,w){return`firebase:${C}:${y}:${w}`}class H{constructor(y,w,S){this.persistence=y,this.auth=w,this.userKey=S;const{config:L,name:W}=this.auth;this.fullUserKey=Y(this.userKey,L.apiKey,W),this.fullPersistenceKey=Y("persistence",L.apiKey,W),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,O.Z)(function*(){const w=yield y.persistence._get(y.fullUserKey);return w?$t._fromJSON(y.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var w=this;return(0,O.Z)(function*(){if(w.persistence===y)return;const S=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=y,S?w.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,w,S="authUser"){return(0,O.Z)(function*(){if(!w.length)return new H(me(re),y,S);const L=(yield Promise.all(w.map(function(){var Vt=(0,O.Z)(function*(gn){if(yield gn._isAvailable())return gn});return function(gn){return Vt.apply(this,arguments)}}()))).filter(Vt=>Vt);let W=L[0]||me(re);const ve=Y(S,y.config.apiKey,y.name);let Ke=null;for(const Vt of w)try{const gn=yield Vt._get(ve);if(gn){const gr=$t._fromJSON(y,gn);Vt!==W&&(Ke=gr),W=Vt;break}}catch{}const wt=L.filter(Vt=>Vt._shouldAllowMigration);return W._shouldAllowMigration&&wt.length?(W=wt[0],Ke&&(yield W._set(ve,Ke.toJSON())),yield Promise.all(w.map(function(){var Vt=(0,O.Z)(function*(gn){if(gn!==W)try{yield gn._remove(ve)}catch{}});return function(gn){return Vt.apply(this,arguments)}}())),new H(W,y,S)):new H(W,y,S)})()}}function V(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Ce(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(k(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(qe(y))return"Blackberry";if(Dt(y))return"Webos";if(j(y))return"Safari";if((y.includes("chrome/")||ie(y))&&!y.includes("edge/"))return"Chrome";if(Qe(y))return"Android";{const S=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===S?.length)return S[1]}return"Other"}function k(C=(0,f.z$)()){return/firefox\//i.test(C)}function j(C=(0,f.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function ie(C=(0,f.z$)()){return/crios\//i.test(C)}function Ce(C=(0,f.z$)()){return/iemobile/i.test(C)}function Qe(C=(0,f.z$)()){return/android/i.test(C)}function qe(C=(0,f.z$)()){return/blackberry/i.test(C)}function Dt(C=(0,f.z$)()){return/webos/i.test(C)}function mt(C=(0,f.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function Qt(C=(0,f.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function Gn(C=(0,f.z$)()){return mt(C)||Qe(C)||Dt(C)||qe(C)||/windows phone/i.test(C)||Ce(C)}function xa(C,y=[]){let w;switch(C){case"Browser":w=V((0,f.z$)());break;case"Worker":w=`${V((0,f.z$)())}-${C}`;break;default:w=C}const S=y.length?y.join(","):"FirebaseCore-web";return`${w}/JsCore/${G.SDK_VERSION}/${S}`}class Jo{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,w){const S=W=>new Promise((ve,Ke)=>{try{ve(y(W))}catch(wt){Ke(wt)}});S.onAbort=w,this.queue.push(S);const L=this.queue.length-1;return()=>{this.queue[L]=()=>Promise.resolve()}}runMiddleware(y){var w=this;return(0,O.Z)(function*(){var S;if(w.auth.currentUser===y)return;const L=[];try{for(const W of w.queue)yield W(y),W.onAbort&&L.push(W.onAbort)}catch(W){L.reverse();for(const ve of L)try{ve()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:null===(S=W)||void 0===S?void 0:S.message})}})()}}class cu{constructor(y,w,S){this.app=y,this.heartbeatServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _e(this),this.idTokenSubscription=new _e(this),this.beforeStateQueue=new Jo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(y,w){var S=this;return w&&(this._popupRedirectResolver=me(w)),this._initializationPromise=this.queue((0,O.Z)(function*(){var L,W;if(!S._deleted&&(S.persistenceManager=yield H.create(S,y),!S._deleted)){if(null!==(L=S._popupRedirectResolver)&&void 0!==L&&L._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch{}yield S.initializeCurrentUser(w),S.lastNotifiedUid=(null===(W=S.currentUser)||void 0===W?void 0:W.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,O.Z)(function*(){if(y._deleted)return;const w=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||w){if(y.currentUser&&w&&y.currentUser.uid===w.uid)return y._currentUser._assign(w),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(w,!0)}})()}initializeCurrentUser(y){var w=this;return(0,O.Z)(function*(){var S;const L=yield w.assertedPersistence.getCurrentUser();let W=L,ve=!1;if(y&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const Ke=null===(S=w.redirectUser)||void 0===S?void 0:S._redirectEventId,wt=W?._redirectEventId,Vt=yield w.tryRedirectSignIn(y);(!Ke||Ke===wt)&&Vt?.user&&(W=Vt.user,ve=!0)}if(!W)return w.directlySetCurrentUser(null);if(!W._redirectEventId){if(ve)try{yield w.beforeStateQueue.runMiddleware(W)}catch(Ke){W=L,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(Ke))}return W?w.reloadAndSetCurrentUserOrClear(W):w.directlySetCurrentUser(null)}return ue(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===W._redirectEventId?w.directlySetCurrentUser(W):w.reloadAndSetCurrentUserOrClear(W)})()}tryRedirectSignIn(y){var w=this;return(0,O.Z)(function*(){let S=null;try{S=yield w._popupRedirectResolver._completeRedirectFn(w,y,!0)}catch{yield w._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(y){var w=this;return(0,O.Z)(function*(){var S;try{yield ar(y)}catch(L){if("auth/network-request-failed"!==(null===(S=L)||void 0===S?void 0:S.code))return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function bn(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,O.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var w=this;return(0,O.Z)(function*(){const S=y?(0,f.m9)(y):null;return S&&ue(S.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(S&&S._clone(w))})()}_updateCurrentUser(y,w=!1){var S=this;return(0,O.Z)(function*(){if(!S._deleted)return y&&ue(S.tenantId===y.tenantId,S,"tenant-id-mismatch"),w||(yield S.beforeStateQueue.runMiddleware(y)),S.queue((0,O.Z)(function*(){yield S.directlySetCurrentUser(y),S.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,O.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var w=this;return this.queue((0,O.Z)(function*(){yield w.assertedPersistence.setPersistence(me(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new f.LL("auth","Firebase",y())}onAuthStateChanged(y,w,S){return this.registerStateListener(this.authStateSubscription,y,w,S)}beforeAuthStateChanged(y,w){return this.beforeStateQueue.pushCallback(y,w)}onIdTokenChanged(y,w,S){return this.registerStateListener(this.idTokenSubscription,y,w,S)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,w){var S=this;return(0,O.Z)(function*(){const L=yield S.getOrInitRedirectPersistenceManager(w);return null===y?L.removeCurrentUser():L.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var w=this;return(0,O.Z)(function*(){if(!w.redirectPersistenceManager){const S=y&&me(y)||w._popupRedirectResolver;ue(S,w,"argument-error"),w.redirectPersistenceManager=yield H.create(w,[me(S._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(y){var w=this;return(0,O.Z)(function*(){var S,L;return w._isInitialized&&(yield w.queue((0,O.Z)(function*(){}))),(null===(S=w._currentUser)||void 0===S?void 0:S._redirectEventId)===y?w._currentUser:(null===(L=w.redirectUser)||void 0===L?void 0:L._redirectEventId)===y?w.redirectUser:null})()}_persistUserIfCurrent(y){var w=this;return(0,O.Z)(function*(){if(y===w.currentUser)return w.queue((0,O.Z)(function*(){return w.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(w=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,w,S,L){if(this._deleted)return()=>{};const W="function"==typeof w?w:w.next.bind(w),ve=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(ve,this,"internal-error"),ve.then(()=>W(this.currentUser)),"function"==typeof w?y.addObserver(w,S,L):y.addObserver(w)}directlySetCurrentUser(y){var w=this;return(0,O.Z)(function*(){w.currentUser&&w.currentUser!==y&&w._currentUser._stopProactiveRefresh(),y&&w.isProactiveRefreshEnabled&&y._startProactiveRefresh(),w.currentUser=y,y?yield w.assertedPersistence.setCurrentUser(y):yield w.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=xa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,O.Z)(function*(){var w;const S={"X-Client-Version":y.clientVersion};y.app.options.appId&&(S["X-Firebase-gmpid"]=y.app.options.appId);const L=yield null===(w=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return L&&(S["X-Firebase-Client"]=L),S})()}}function Fr(C){return(0,f.m9)(C)}class _e{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,f.ne)(w=>this.observer=w)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ue(C,y,w){const S=Fr(C);ue(S._canInitEmulator,S,"emulator-config-failed"),ue(/^https?:\/\//.test(y),S,"invalid-emulator-scheme");const L=!!w?.disableWarnings,W=ot(y),{host:ve,port:Ke}=function Bt(C){const y=ot(C),w=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!w)return{host:"",port:null};const S=w[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(S);if(L){const W=L[1];return{host:W,port:dr(S.substr(W.length+1))}}{const[W,ve]=S.split(":");return{host:W,port:dr(ve)}}}(y);S.config.emulator={url:`${W}//${ve}${null===Ke?"":`:${Ke}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:ve,port:Ke,protocol:W.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function Pt(){function C(){const y=document.createElement("p"),w=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function ot(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function dr(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class Cn{constructor(y,w){this.providerId=y,this.signInMethod=w}toJSON(){return Re("not implemented")}_getIdTokenResponse(y){return Re("not implemented")}_linkToIdToken(y,w){return Re("not implemented")}_getReauthenticationResolver(y){return Re("not implemented")}}function jn(C,y){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:resetPassword",tn(C,y))})).apply(this,arguments)}function hr(C,y){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Tt(C,y){return rn.apply(this,arguments)}function rn(){return(rn=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:update",tn(C,y))})).apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithPassword",tn(C,y))})).apply(this,arguments)}function Ws(C,y){return xr.apply(this,arguments)}function xr(){return(xr=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:sendOobCode",tn(C,y))})).apply(this,arguments)}function io(C,y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,O.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function fs(C,y){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function an(C,y){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function so(C,y){return cl.apply(this,arguments)}function cl(){return(cl=(0,O.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithEmailLink",tn(C,y))})).apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithEmailLink",tn(C,y))})).apply(this,arguments)}class Oi extends Cn{constructor(y,w,S,L=null){super("password",S),this._email=y,this._password=w,this._tenantId=L}static _fromEmailAndPassword(y,w){return new Oi(y,w,"password")}static _fromEmailAndCode(y,w,S=null){return new Oi(y,w,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y;if(w?.email&&w?.password){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(y){var w=this;return(0,O.Z)(function*(){switch(w.signInMethod){case"password":return function Dr(C,y){return yi.apply(this,arguments)}(y,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function No(C,y){return di.apply(this,arguments)}(y,{email:w._email,oobCode:w._password});default:Fe(y,"internal-error")}})()}_linkToIdToken(y,w){var S=this;return(0,O.Z)(function*(){switch(S.signInMethod){case"password":return hr(y,{idToken:w,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function Ma(C,y){return zs.apply(this,arguments)}(y,{idToken:w,email:S._email,oobCode:S._password});default:Fe(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Ki(C,y){return vc.apply(this,arguments)}function vc(){return(vc=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithIdp",tn(C,y))})).apply(this,arguments)}class qs extends Cn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const w=new qs(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(w.idToken=y.idToken),y.accessToken&&(w.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(w.nonce=y.nonce),y.pendingToken&&(w.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(w.accessToken=y.oauthToken,w.secret=y.oauthTokenSecret):Fe("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y,{providerId:S,signInMethod:L}=w,W=(0,De._T)(w,["providerId","signInMethod"]);if(!S||!L)return null;const ve=new qs(S,L);return ve.idToken=W.idToken||void 0,ve.accessToken=W.accessToken||void 0,ve.secret=W.secret,ve.nonce=W.nonce,ve.pendingToken=W.pendingToken||null,ve}_getIdTokenResponse(y){return Ki(y,this.buildRequest())}_linkToIdToken(y,w){const S=this.buildRequest();return S.idToken=w,Ki(y,S)}_getReauthenticationResolver(y){const w=this.buildRequest();return w.autoCreate=!1,Ki(y,w)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),y.postBody=(0,f.xO)(w)}return y}}function du(C,y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:sendVerificationCode",tn(C,y))})).apply(this,arguments)}function ps(){return(ps=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithPhoneNumber",tn(C,y))})).apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(C,y){const w=yield cr(C,"POST","/v1/accounts:signInWithPhoneNumber",tn(C,y));if(w.temporaryProof)throw br(C,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const e_={USER_NOT_FOUND:"user-not-found"};function gs(){return(gs=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithPhoneNumber",tn(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),e_)})).apply(this,arguments)}class Mo extends Cn{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,w){return new Mo({verificationId:y,verificationCode:w})}static _fromTokenResponse(y,w){return new Mo({phoneNumber:y,temporaryProof:w})}_getIdTokenResponse(y){return function dl(C,y){return ps.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,w){return function ka(C,y){return vi.apply(this,arguments)}(y,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function Pi(C,y){return gs.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:w,verificationId:S,verificationCode:L}=this.params;return y&&w?{temporaryProof:y,phoneNumber:w}:{sessionInfo:S,code:L}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:w,verificationCode:S,phoneNumber:L,temporaryProof:W}=y;return S||w||L||W?new Mo({verificationId:w,verificationCode:S,phoneNumber:L,temporaryProof:W}):null}}class Li{constructor(y){var w,S,L,W,ve,Ke;const wt=(0,f.zd)((0,f.pd)(y)),Vt=null!==(w=wt.apiKey)&&void 0!==w?w:null,gn=null!==(S=wt.oobCode)&&void 0!==S?S:null,gr=function hl(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=wt.mode)&&void 0!==L?L:null);ue(Vt&&gn&&gr,"argument-error"),this.apiKey=Vt,this.operation=gr,this.code=gn,this.continueUrl=null!==(W=wt.continueUrl)&&void 0!==W?W:null,this.languageCode=null!==(ve=wt.languageCode)&&void 0!==ve?ve:null,this.tenantId=null!==(Ke=wt.tenantId)&&void 0!==Ke?Ke:null}static parseLink(y){const w=function Oa(C){const y=(0,f.zd)((0,f.pd)(C)).link,w=y?(0,f.zd)((0,f.pd)(y)).deep_link_id:null,S=(0,f.zd)((0,f.pd)(C)).deep_link_id;return(S?(0,f.zd)((0,f.pd)(S)).link:null)||S||w||y||C}(y);try{return new Li(w)}catch{return null}}}let qd=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(w,S){return Oi._fromEmailAndPassword(w,S)}static credentialWithLink(w,S){const L=Li.parseLink(S);return ue(L,"argument-error"),Oi._fromEmailAndCode(w,L.code,L.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class oo{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class hu extends oo{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class fu extends hu{static credentialFromJSON(y){const w="string"==typeof y?JSON.parse(y):y;return ue("providerId"in w&&"signInMethod"in w,"argument-error"),qs._fromParams(w)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return ue(y.idToken||y.accessToken,"argument-error"),qs._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return fu.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return fu.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:w,oauthAccessToken:S,oauthTokenSecret:L,pendingToken:W,nonce:ve,providerId:Ke}=y;if(!S&&!L&&!w&&!W||!Ke)return null;try{return new fu(Ke)._credential({idToken:w,accessToken:S,nonce:ve,pendingToken:W})}catch{return null}}}let _p=(()=>{class C extends hu{constructor(){super("facebook.com")}static credential(w){return qs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),n_=(()=>{class C extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(w,S){return qs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:S})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:S,oauthAccessToken:L}=w;if(!S&&!L)return null;try{return C.credential(S,L)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),r_=(()=>{class C extends hu{constructor(){super("github.com")}static credential(w){return qs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class ao extends Cn{constructor(y,w){super(y,y),this.pendingToken=w}_getIdTokenResponse(y){return Ki(y,this.buildRequest())}_linkToIdToken(y,w){const S=this.buildRequest();return S.idToken=w,Ki(y,S)}_getReauthenticationResolver(y){const w=this.buildRequest();return w.autoCreate=!1,Ki(y,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y,{providerId:S,signInMethod:L,pendingToken:W}=w;return S&&L&&W&&S===L?new ao(S,W):null}static _create(y,w){return new ao(y,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pu extends oo{constructor(y){ue(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return pu.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return pu.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const w=ao.fromJSON(y);return ue(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:w,providerId:S}=y;if(!w||!S)return null;try{return ao._create(S,w)}catch{return null}}}let yp=(()=>{class C extends hu{constructor(){super("twitter.com")}static credential(w,S){return qs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:S})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:S,oauthTokenSecret:L}=w;if(!S||!L)return null;try{return C.credential(S,L)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function pl(C,y){return gu.apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signUp",tn(C,y))})).apply(this,arguments)}class is{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,w,S,L=!1){return(0,O.Z)(function*(){const W=yield $t._fromIdTokenResponse(y,S,L),ve=s_(S);return new is({user:W,providerId:ve,_tokenResponse:S,operationType:w})})()}static _forOperation(y,w,S){return(0,O.Z)(function*(){yield y._updateTokensIfNecessary(S,!0);const L=s_(S);return new is({user:y,providerId:L,_tokenResponse:S,operationType:w})})()}}function s_(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function vp(C){return gl.apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(C){var y;const w=Fr(C);if(yield w._initializationPromise,null!==(y=w.currentUser)&&void 0!==y&&y.isAnonymous)return new is({user:w.currentUser,providerId:null,operationType:"signIn"});const S=yield pl(w,{returnSecureToken:!0}),L=yield is._fromIdTokenResponse(w,"signIn",S,!0);return yield w._updateCurrentUser(L.user),L})).apply(this,arguments)}class mu extends f.ZR{constructor(y,w,S,L){var W;super(w.code,w.message),this.operationType=S,this.user=L,Object.setPrototypeOf(this,mu.prototype),this.customData={appName:y.name,tenantId:null!==(W=y.tenantId)&&void 0!==W?W:void 0,_serverResponse:w.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(y,w,S,L){return new mu(y,w,S,L)}}function o_(C,y,w,S){return("reauthenticate"===y?w._getReauthenticationResolver(C):w._getIdTokenResponse(C)).catch(W=>{throw"auth/multi-factor-auth-required"===W.code?mu._fromErrorAndOperation(C,W,y,S):W})}function _u(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function Xo(C,y){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,O.Z)(function*(C,y){const w=(0,f.m9)(C);yield ml(!0,w,y);const{providerUserInfo:S}=yield jr(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[y]}),L=_u(S||[]);return w.providerData=w.providerData.filter(W=>L.has(W.providerId)),L.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function yu(C,y){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,O.Z)(function*(C,y,w=!1){const S=yield ft(C,y._linkToIdToken(C.auth,yield C.getIdToken()),w);return is._forOperation(C,"link",S)})).apply(this,arguments)}function ml(C,y,w){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(C,y,w){yield ar(y);const L=!1===C?"provider-already-linked":"no-such-provider";ue(_u(y.providerData).has(w)===C,y.auth,L)})).apply(this,arguments)}function Kd(C,y){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,O.Z)(function*(C,y,w=!1){var S;const{auth:L}=C,W="reauthenticate";try{const ve=yield ft(C,o_(L,W,y,C),w);ue(ve.idToken,L,"internal-error");const Ke=Bn(ve.idToken);ue(Ke,L,"internal-error");const{sub:wt}=Ke;return ue(C.uid===wt,L,"user-mismatch"),is._forOperation(C,W,ve)}catch(ve){throw"auth/user-not-found"===(null===(S=ve)||void 0===S?void 0:S.code)&&Fe(L,"user-mismatch"),ve}})).apply(this,arguments)}function vu(C,y){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(C,y,w=!1){const S="signIn",L=yield o_(C,S,y),W=yield is._fromIdTokenResponse(C,S,L);return w||(yield C._updateCurrentUser(W.user)),W})).apply(this,arguments)}function yl(C,y){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(C,y){return vu(Fr(C),y)})).apply(this,arguments)}function q(C,y){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(C,y){const w=(0,f.m9)(C);return yield ml(!1,w,y.providerId),yu(w,y)})).apply(this,arguments)}function se(C,y){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,O.Z)(function*(C,y){return Kd((0,f.m9)(C),y)})).apply(this,arguments)}function rt(C,y){return it.apply(this,arguments)}function it(){return(it=(0,O.Z)(function*(C,y){return cr(C,"POST","/v1/accounts:signInWithCustomToken",tn(C,y))})).apply(this,arguments)}function Ht(C,y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(C,y){const w=Fr(C),S=yield rt(w,{token:y,returnSecureToken:!0}),L=yield is._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(L.user),L})).apply(this,arguments)}class _r{constructor(y,w){this.factorId=y,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(y,w){return"phoneInfo"in w?rr._fromServerResponse(y,w):Fe(y,"internal-error")}}class rr extends _r{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,w){return new rr(w)}}function fr(C,y,w){var S;ue((null===(S=w.url)||void 0===S?void 0:S.length)>0,C,"invalid-continue-uri"),ue(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=w.url,y.dynamicLinkDomain=w.dynamicLinkDomain,y.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ue(w.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=w.iOS.bundleId),w.android&&(ue(w.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=w.android.installApp,y.androidMinimumVersionCode=w.android.minimumVersion,y.androidPackageName=w.android.packageName)}function un(C,y,w){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C),L={requestType:"PASSWORD_RESET",email:y};w&&fr(S,L,w),yield fs(S,L)})).apply(this,arguments)}function Ei(C,y,w){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,O.Z)(function*(C,y,w){yield jn((0,f.m9)(C),{oobCode:y,newPassword:w})})).apply(this,arguments)}function ko(C,y){return ea.apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(C,y){yield Tt((0,f.m9)(C),{oobCode:y})})).apply(this,arguments)}function uo(C,y){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(C,y){const w=(0,f.m9)(C),S=yield jn(w,{oobCode:y}),L=S.requestType;switch(ue(L,w,"internal-error"),L){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(S.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(S.mfaInfo,w,"internal-error");default:ue(S.email,w,"internal-error")}let W=null;return S.mfaInfo&&(W=_r._fromServerResponse(Fr(w),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:W},operation:L}})).apply(this,arguments)}function ta(C,y){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(C,y){const{data:w}=yield uo((0,f.m9)(C),y);return w.email})).apply(this,arguments)}function Fa(C,y,w){return wc.apply(this,arguments)}function wc(){return(wc=(0,O.Z)(function*(C,y,w){const S=Fr(C),L=yield pl(S,{returnSecureToken:!0,email:y,password:w}),W=yield is._fromIdTokenResponse(S,"signIn",L);return yield S._updateCurrentUser(W.user),W})).apply(this,arguments)}function hi(C,y,w){return yl((0,f.m9)(C),qd.credential(y,w))}function GD(C,y,w){return a_.apply(this,arguments)}function a_(){return(a_=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C),L={requestType:"EMAIL_SIGNIN",email:y};ue(w.handleCodeInApp,S,"argument-error"),w&&fr(S,L,w),yield an(S,L)})).apply(this,arguments)}function uE(C,y){return"EMAIL_SIGNIN"===Li.parseLink(y)?.operation}function WD(C,y,w){return u_.apply(this,arguments)}function u_(){return(u_=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C),L=qd.credentialWithLink(y,w||Te());return ue(L._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),yl(S,L)})).apply(this,arguments)}function Ze(C,y){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:createAuthUri",tn(C,y))})).apply(this,arguments)}function lE(C,y){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,O.Z)(function*(C,y){const S={identifier:y,continueUri:nt()?Te():"http://localhost"},{signinMethods:L}=yield Ze((0,f.m9)(C),S);return L||[]})).apply(this,arguments)}function Zi(C,y){return bc.apply(this,arguments)}function bc(){return(bc=(0,O.Z)(function*(C,y){const w=(0,f.m9)(C),L={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&fr(w.auth,L,y);const{email:W}=yield io(w.auth,L);W!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ic(C,y,w){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C),W={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};w&&fr(S.auth,W,w);const{email:ve}=yield so(S.auth,W);ve!==C.email&&(yield C.reload())})).apply(this,arguments)}function Cc(C,y){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(C,y){return kt(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function fR(C,y){return l_.apply(this,arguments)}function l_(){return(l_=(0,O.Z)(function*(C,{displayName:y,photoURL:w}){if(void 0===y&&void 0===w)return;const S=(0,f.m9)(C),W={idToken:yield S.getIdToken(),displayName:y,photoUrl:w,returnSecureToken:!0},ve=yield ft(S,Cc(S.auth,W));S.displayName=ve.displayName||null,S.photoURL=ve.photoUrl||null;const Ke=S.providerData.find(({providerId:wt})=>"password"===wt);Ke&&(Ke.displayName=S.displayName,Ke.photoURL=S.photoURL),yield S._updateTokensIfNecessary(ve)})).apply(this,arguments)}function cE(C,y){return Yi((0,f.m9)(C),y,null)}function wp(C,y){return Yi((0,f.m9)(C),null,y)}function Yi(C,y,w){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(C,y,w){const{auth:S}=C,W={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(W.email=y),w&&(W.password=w);const ve=yield ft(C,hr(S,W));yield C._updateTokensIfNecessary(ve,!0)})).apply(this,arguments)}class Oo{constructor(y,w,S={}){this.isNewUser=y,this.providerId=w,this.profile=S}}class ra extends Oo{constructor(y,w,S,L){super(y,w,S),this.username=L}}class zD extends Oo{constructor(y,w){super(y,"facebook.com",w)}}class hE extends ra{constructor(y,w){super(y,"github.com",w,"string"==typeof w?.login?w?.login:null)}}class qD extends Oo{constructor(y,w){super(y,"google.com",w)}}class KD extends ra{constructor(y,w,S){super(y,"twitter.com",w,S)}}function c_(C){const{user:y,_tokenResponse:w}=C;return y.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function dE(C){var y,w;if(!C)return null;const{providerId:S}=C,L=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},W=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!S&&C?.idToken){const ve=null===(w=null===(y=Bn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===w?void 0:w.sign_in_provider;if(ve)return new Oo(W,"anonymous"!==ve&&"custom"!==ve?ve:null)}if(!S)return null;switch(S){case"facebook.com":return new zD(W,L);case"github.com":return new hE(W,L);case"google.com":return new qD(W,L);case"twitter.com":return new KD(W,L,C.screenName||null);case"custom":case"anonymous":return new Oo(W,null);default:return new Oo(W,S,L)}}(w)}class Eu{constructor(y,w,S){this.type=y,this.credential=w,this.auth=S}static _fromIdtoken(y,w){return new Eu("enroll",y,w)}static _fromMfaPendingCredential(y){return new Eu("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var w,S;if(y?.multiFactorSession){if(null!==(w=y.multiFactorSession)&&void 0!==w&&w.pendingCredential)return Eu._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(S=y.multiFactorSession)&&void 0!==S&&S.idToken)return Eu._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Yd{constructor(y,w,S){this.session=y,this.hints=w,this.signInResolver=S}static _fromError(y,w){const S=Fr(y),L=w.customData._serverResponse,W=(L.mfaInfo||[]).map(Ke=>_r._fromServerResponse(S,Ke));ue(L.mfaPendingCredential,S,"internal-error");const ve=Eu._fromMfaPendingCredential(L.mfaPendingCredential);return new Yd(ve,W,function(){var Ke=(0,O.Z)(function*(wt){const Vt=yield wt._process(S,ve);delete L.mfaInfo,delete L.mfaPendingCredential;const gn=Object.assign(Object.assign({},L),{idToken:Vt.idToken,refreshToken:Vt.refreshToken});switch(w.operationType){case"signIn":const gr=yield is._fromIdTokenResponse(S,w.operationType,gn);return yield S._updateCurrentUser(gr.user),gr;case"reauthenticate":return ue(w.user,S,"internal-error"),is._forOperation(w.user,w.operationType,gn);default:Fe(S,"internal-error")}});return function(wt){return Ke.apply(this,arguments)}}())}resolveSignIn(y){var w=this;return(0,O.Z)(function*(){return w.signInResolver(y)})()}}function QD(C,y){var w;const S=(0,f.m9)(C),L=y;return ue(y.customData.operationType,S,"argument-error"),ue(null===(w=L.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,S,"argument-error"),Yd._fromError(S,L)}function JD(C,y){return kt(C,"POST","/v2/accounts/mfaEnrollment:start",tn(C,y))}class pr{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(S=>_r._fromServerResponse(y.auth,S)))})}static _fromUser(y){return new pr(y)}getSession(){var y=this;return(0,O.Z)(function*(){return Eu._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,w){var S=this;return(0,O.Z)(function*(){const L=y,W=yield S.getSession(),ve=yield ft(S.user,L._process(S.user.auth,W,w));return yield S.user._updateTokensIfNecessary(ve),S.user.reload()})()}unenroll(y){var w=this;return(0,O.Z)(function*(){var S;const L="string"==typeof y?y:y.uid,W=yield w.user.getIdToken(),ve=yield ft(w.user,function wu(C,y){return kt(C,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(C,y))}(w.user.auth,{idToken:W,mfaEnrollmentId:L}));w.enrolledFactors=w.enrolledFactors.filter(({uid:Ke})=>Ke!==L),yield w.user._updateTokensIfNecessary(ve);try{yield w.user.reload()}catch(Ke){if("auth/user-token-expired"!==(null===(S=Ke)||void 0===S?void 0:S.code))throw Ke}})()}}const bu=new WeakMap;function mE(C){const y=(0,f.m9)(C);return bu.has(y)||bu.set(y,pr._fromUser(y)),bu.get(y)}const Iu="__sak";class h_{constructor(y,w){this.storageRetriever=y,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(Iu,"1"),this.storage.removeItem(Iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,w){return this.storage.setItem(y,JSON.stringify(w)),Promise.resolve()}_get(y){const w=this.storage.getItem(y);return Promise.resolve(w?JSON.parse(w):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dc=(()=>{class C extends h_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,S)=>this.onStorageEvent(w,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function f_(){const C=(0,f.z$)();return j(C)||mt(C)}()&&function Ao(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Gn(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const S of Object.keys(this.listeners)){const L=this.storage.getItem(S),W=this.localCache[S];L!==W&&w(S,W,L)}}onStorageEvent(w,S=!1){if(!w.key)return void this.forAllChangedKeys((Ke,wt,Vt)=>{this.notifyListeners(Ke,Vt)});const L=w.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ke=this.storage.getItem(L);if(w.newValue!==Ke)null!==w.newValue?this.storage.setItem(L,w.newValue):this.storage.removeItem(L);else if(this.localCache[L]===w.newValue&&!S)return}const W=()=>{const Ke=this.storage.getItem(L);!S&&this.localCache[L]===Ke||this.notifyListeners(L,Ke)},ve=this.storage.getItem(L);!function zt(){return(0,f.w1)()&&10===document.documentMode}()||ve===w.newValue||w.newValue===w.oldValue?W():setTimeout(W,10)}notifyListeners(w,S){this.localCache[w]=S;const L=this.listeners[w];if(L)for(const W of Array.from(L))W(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,S,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:S,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(S)}_removeListener(w,S){this.listeners[w]&&(this.listeners[w].delete(S),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,S){var L=()=>super._set,W=this;return(0,O.Z)(function*(){yield L().call(W,w,S),W.localCache[w]=JSON.stringify(S)})()}_get(w){var S=()=>super._get,L=this;return(0,O.Z)(function*(){const W=yield S().call(L,w);return L.localCache[w]=JSON.stringify(W),W})()}_remove(w){var S=()=>super._remove,L=this;return(0,O.Z)(function*(){yield S().call(L,w),delete L.localCache[w]})()}}return C.type="LOCAL",C})(),Cu=(()=>{class C extends h_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,S){}_removeListener(w,S){}}return C.type="SESSION",C})();let Du=(()=>{class C{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const S=this.receivers.find(W=>W.isListeningto(w));if(S)return S;const L=new C(w);return this.receivers.push(L),L}isListeningto(w){return this.eventTarget===w}handleEvent(w){var S=this;return(0,O.Z)(function*(){const L=w,{eventId:W,eventType:ve,data:Ke}=L.data,wt=S.handlersMap[ve];if(!wt?.size)return;L.ports[0].postMessage({status:"ack",eventId:W,eventType:ve});const Vt=Array.from(wt).map(function(){var gr=(0,O.Z)(function*(lo){return lo(L.origin,Ke)});return function(lo){return gr.apply(this,arguments)}}()),gn=yield function p_(C){return Promise.all(C.map(function(){var y=(0,O.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(S){return{fulfilled:!1,reason:S}}});return function(w){return y.apply(this,arguments)}}()))}(Vt);L.ports[0].postMessage({status:"done",eventId:W,eventType:ve,response:gn})})()}_subscribe(w,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(S)}_unsubscribe(w,S){this.handlersMap[w]&&S&&this.handlersMap[w].delete(S),(!S||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Ms(C="",y=10){let w="";for(let S=0;S<y;S++)w+=Math.floor(10*Math.random());return C+w}class g_{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,w,S=50){var L=this;return(0,O.Z)(function*(){const W=typeof MessageChannel<"u"?new MessageChannel:null;if(!W)throw new Error("connection_unavailable");let ve,Ke;return new Promise((wt,Vt)=>{const gn=Ms("",20);W.port1.start();const gr=setTimeout(()=>{Vt(new Error("unsupported_event"))},S);Ke={messageChannel:W,onMessage(lo){const Vo=lo;if(Vo.data.eventId===gn)switch(Vo.data.status){case"ack":clearTimeout(gr),ve=setTimeout(()=>{Vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ve),wt(Vo.data.response);break;default:clearTimeout(gr),clearTimeout(ve),Vt(new Error("invalid_response"))}}},L.handlers.add(Ke),W.port1.addEventListener("message",Ke.onMessage),L.target.postMessage({eventType:y,eventId:gn,data:w},[W.port2])}).finally(()=>{Ke&&L.removeMessageHandler(Ke)})})()}}function Qr(){return window}function vl(){return typeof Qr().WorkerGlobalScope<"u"&&"function"==typeof Qr().importScripts}function Dp(){return(Dp=(0,O.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Jd="firebaseLocalStorageDb",El="firebaseLocalStorage",xc="fbase_key";class Va{constructor(y){this.request=y}toPromise(){return new Promise((y,w)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Tu(C,y){return C.transaction([El],y?"readwrite":"readonly").objectStore(El)}function eh(){const C=indexedDB.open(Jd,1);return new Promise((y,w)=>{C.addEventListener("error",()=>{w(C.error)}),C.addEventListener("upgradeneeded",()=>{const S=C.result;try{S.createObjectStore(El,{keyPath:xc})}catch(L){w(L)}}),C.addEventListener("success",(0,O.Z)(function*(){const S=C.result;S.objectStoreNames.contains(El)?y(S):(S.close(),yield function Xd(){const C=indexedDB.deleteDatabase(Jd);return new Va(C).toPromise()}(),y(yield eh()))}))})}function wl(C,y,w){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,O.Z)(function*(C,y,w){const S=Tu(C,!0).put({[xc]:y,value:w});return new Va(S).toPromise()})).apply(this,arguments)}function __(){return(__=(0,O.Z)(function*(C,y){const w=Tu(C,!1).get(y),S=yield new Va(w).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function nh(C,y){const w=Tu(C,!0).delete(y);return new Va(w).toPromise()}const rh=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,O.Z)(function*(){return w.db||(w.db=yield eh()),w.db})()}_withRetries(w){var S=this;return(0,O.Z)(function*(){let L=0;for(;;)try{const W=yield S._openDb();return yield w(W)}catch(W){if(L++>3)throw W;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,O.Z)(function*(){return vl()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,O.Z)(function*(){w.receiver=Du._getInstance(function eT(){return vl()?self:null}()),w.receiver._subscribe("keyChanged",function(){var S=(0,O.Z)(function*(L,W){return{keyProcessed:(yield w._poll()).includes(W.key)}});return function(L,W){return S.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var S=(0,O.Z)(function*(L,W){return["keyChanged"]});return function(L,W){return S.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,O.Z)(function*(){var S,L;if(w.activeServiceWorker=yield function m_(){return Dp.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new g_(w.activeServiceWorker);const W=yield w.sender._send("ping",{},800);!W||(null===(S=W[0])||void 0===S?void 0:S.fulfilled)&&(null===(L=W[0])||void 0===L?void 0:L.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var S=this;return(0,O.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function XD(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:w},S.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.Z)(function*(){try{if(!indexedDB)return!1;const w=yield eh();return yield wl(w,Iu,"1"),yield nh(w,Iu),!0}catch{}return!1})()}_withPendingWrite(w){var S=this;return(0,O.Z)(function*(){S.pendingWrites++;try{yield w()}finally{S.pendingWrites--}})()}_set(w,S){var L=this;return(0,O.Z)(function*(){return L._withPendingWrite((0,O.Z)(function*(){return yield L._withRetries(W=>wl(W,w,S)),L.localCache[w]=S,L.notifyServiceWorker(w)}))})()}_get(w){var S=this;return(0,O.Z)(function*(){const L=yield S._withRetries(W=>function th(C,y){return __.apply(this,arguments)}(W,w));return S.localCache[w]=L,L})()}_remove(w){var S=this;return(0,O.Z)(function*(){return S._withPendingWrite((0,O.Z)(function*(){return yield S._withRetries(L=>nh(L,w)),delete S.localCache[w],S.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,O.Z)(function*(){const S=yield w._withRetries(ve=>{const Ke=Tu(ve,!1).getAll();return new Va(Ke).toPromise()});if(!S)return[];if(0!==w.pendingWrites)return[];const L=[],W=new Set;for(const{fbase_key:ve,value:Ke}of S)W.add(ve),JSON.stringify(w.localCache[ve])!==JSON.stringify(Ke)&&(w.notifyListeners(ve,Ke),L.push(ve));for(const ve of Object.keys(w.localCache))w.localCache[ve]&&!W.has(ve)&&(w.notifyListeners(ve,null),L.push(ve));return L})()}notifyListeners(w,S){this.localCache[w]=S;const L=this.listeners[w];if(L)for(const W of Array.from(L))W(S)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,O.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(S)}_removeListener(w,S){this.listeners[w]&&(this.listeners[w].delete(S),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Tp(C,y){return kt(C,"POST","/v2/accounts/mfaSignIn:start",tn(C,y))}function ih(){return(ih=(0,O.Z)(function*(C){return(yield kt(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function E_(C){return new Promise((y,w)=>{const S=document.createElement("script");S.setAttribute("src",C),S.onload=y,S.onerror=L=>{const W=He("internal-error");W.customData=L,w(W)},S.type="text/javascript",S.charset="UTF-8",function Ap(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(S)})}function xp(C){return`__${C}${Math.floor(1e6*Math.random())}`}const bl=1e12;class b_{constructor(y){this.auth=y,this.counter=bl,this._widgets=new Map}render(y,w){const S=this.counter;return this._widgets.set(S,new Mc(y,this.auth.name,w||{})),this.counter++,S}reset(y){var w;const S=y||bl;null===(w=this._widgets.get(S))||void 0===w||w.delete(),this._widgets.delete(S)}getResponse(y){var w;return(null===(w=this._widgets.get(y||bl))||void 0===w?void 0:w.getResponse())||""}execute(y){var w=this;return(0,O.Z)(function*(){var S;return null===(S=w._widgets.get(y||bl))||void 0===S||S.execute(),""})()}}class Mc{constructor(y,w,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof y?document.getElementById(y):y;ue(L,"argument-error",{appName:w}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Il(C){const y=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<C;S++)y.push(w.charAt(Math.floor(Math.random()*w.length)));return y.join("")}(50);const{callback:y,"expired-callback":w}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const I_=xp("rcb"),C_=new Ft(3e4,6e4);class Cl{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=Qr().grecaptcha)||void 0===y||!y.render)}load(y,w=""){return ue(function Mp(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(w),y,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Qr().grecaptcha):new Promise((S,L)=>{const W=Qr().setTimeout(()=>{L(He(y,"network-request-failed"))},C_.get());Qr()[I_]=()=>{Qr().clearTimeout(W),delete Qr()[I_];const Ke=Qr().grecaptcha;if(!Ke)return void L(He(y,"internal-error"));const wt=Ke.render;Ke.render=(Vt,gn)=>{const gr=wt(Vt,gn);return this.counter++,gr},this.hostLanguage=w,S(Ke)},E_(`https://www.google.com/recaptcha/api.js??${(0,f.xO)({onload:I_,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(W),L(He(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var w;return!(null===(w=Qr().grecaptcha)||void 0===w||!w.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D_{load(y){return(0,O.Z)(function*(){return new b_(y)})()}clearedOneInstance(){}}const sh="recaptcha",tT={theme:"light",type:"image"};class EE{constructor(y,w=Object.assign({},tT),S){this.parameters=w,this.type=sh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fr(S),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof y?document.getElementById(y):y;ue(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D_:new Cl,this.validateStartingState()}verify(){var y=this;return(0,O.Z)(function*(){y.assertNotDestroyed();const w=yield y.render(),S=y.getAssertedRecaptcha();return S.getResponse(w)||new Promise(W=>{const ve=Ke=>{!Ke||(y.tokenChangeListeners.delete(ve),W(Ke))};y.tokenChangeListeners.add(ve),y.isInvisible&&S.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return w=>{if(this.tokenChangeListeners.forEach(S=>S(w)),"function"==typeof y)y(w);else if("string"==typeof y){const S=Qr()[y];"function"==typeof S&&S(w)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,O.Z)(function*(){if(yield y.init(),!y.widgetId){let w=y.container;if(!y.isInvisible){const S=document.createElement("div");w.appendChild(S),w=S}y.widgetId=y.getAssertedRecaptcha().render(w,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,O.Z)(function*(){ue(nt()&&!vl(),y.auth,"internal-error"),yield function oh(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const w=yield function Sp(C){return ih.apply(this,arguments)}(y.auth);ue(w,y.auth,"internal-error"),y.parameters.sitekey=w})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class os{constructor(y,w){this.verificationId=y,this.onConfirmation=w}confirm(y){const w=Mo._fromVerification(this.verificationId,y);return this.onConfirmation(w)}}function Dl(C,y,w){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(C,y,w){const S=Fr(C),L=yield Rp(S,y,(0,f.m9)(w));return new os(L,W=>yl(S,W))})).apply(this,arguments)}function ah(C,y,w){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C);yield ml(!1,S,"phone");const L=yield Rp(S.auth,y,(0,f.m9)(w));return new os(L,W=>q(S,W))})).apply(this,arguments)}function Rc(C,y,w){return wE.apply(this,arguments)}function wE(){return(wE=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C),L=yield Rp(S.auth,y,(0,f.m9)(w));return new os(L,W=>se(S,W))})).apply(this,arguments)}function Rp(C,y,w){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*(C,y,w){var S;const L=yield w.verify();try{let W;if(ue("string"==typeof L,C,"argument-error"),ue(w.type===sh,C,"argument-error"),W="string"==typeof y?{phoneNumber:y}:y,"session"in W){const ve=W.session;if("phoneNumber"in W)return ue("enroll"===ve.type,C,"internal-error"),(yield JD(C,{idToken:ve.credential,phoneEnrollmentInfo:{phoneNumber:W.phoneNumber,recaptchaToken:L}})).phoneSessionInfo.sessionInfo;{ue("signin"===ve.type,C,"internal-error");const Ke=(null===(S=W.multiFactorHint)||void 0===S?void 0:S.uid)||W.multiFactorUid;return ue(Ke,C,"missing-multi-factor-info"),(yield Tp(C,{mfaPendingCredential:ve.credential,mfaEnrollmentId:Ke,phoneSignInInfo:{recaptchaToken:L}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ve}=yield du(C,{phoneNumber:W.phoneNumber,recaptchaToken:L});return ve}}finally{w._reset()}})).apply(this,arguments)}function gR(C,y){return bE.apply(this,arguments)}function bE(){return(bE=(0,O.Z)(function*(C,y){yield yu((0,f.m9)(C),y)})).apply(this,arguments)}let mR=(()=>{class C{constructor(w){this.providerId=C.PROVIDER_ID,this.auth=Fr(w)}verifyPhoneNumber(w,S){return Rp(this.auth,w,(0,f.m9)(S))}static credential(w,S){return Mo._fromVerification(w,S)}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:S,temporaryProof:L}=w;return S&&L?Mo._fromTokenResponse(S,L):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function kc(C,y){return y?me(y):(ue(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class IE extends Cn{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Ki(y,this._buildIdpRequest())}_linkToIdToken(y,w){return Ki(y,this._buildIdpRequest(w))}_getReauthenticationResolver(y){return Ki(y,this._buildIdpRequest())}_buildIdpRequest(y){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(w.idToken=y),w}}function nT(C){return vu(C.auth,new IE(C),C.bypassAuthState)}function _R(C){const{auth:y,user:w}=C;return ue(w,y,"internal-error"),Kd(w,new IE(C),C.bypassAuthState)}function uh(C){return CE.apply(this,arguments)}function CE(){return(CE=(0,O.Z)(function*(C){const{auth:y,user:w}=C;return ue(w,y,"internal-error"),yu(w,new IE(C),C.bypassAuthState)})).apply(this,arguments)}class rT{constructor(y,w,S,L,W=!1){this.auth=y,this.resolver=S,this.user=L,this.bypassAuthState=W,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var y=this;return new Promise(function(){var w=(0,O.Z)(function*(S,L){y.pendingPromise={resolve:S,reject:L};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(W){y.reject(W)}});return function(S,L){return w.apply(this,arguments)}}())}onAuthEvent(y){var w=this;return(0,O.Z)(function*(){const{urlResponse:S,sessionId:L,postBody:W,tenantId:ve,error:Ke,type:wt}=y;if(Ke)return void w.reject(Ke);const Vt={auth:w.auth,requestUri:S,sessionId:L,tenantId:ve||void 0,postBody:W||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(wt)(Vt))}catch(gn){w.reject(gn)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return nT;case"linkViaPopup":case"linkViaRedirect":return uh;case"reauthViaPopup":case"reauthViaRedirect":return _R;default:Fe(this.auth,"internal-error")}}resolve(y){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wi=new Ft(2e3,1e4);function T_(C,y,w){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,O.Z)(function*(C,y,w){const S=Fr(C);Be(C,y,oo);const L=kc(S,w);return new Po(S,"signInViaPopup",y,L).executeNotNull()})).apply(this,arguments)}function yR(C,y,w){return kp.apply(this,arguments)}function kp(){return(kp=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C);Be(S.auth,y,oo);const L=kc(S.auth,w);return new Po(S.auth,"reauthViaPopup",y,L,S).executeNotNull()})).apply(this,arguments)}function Ys(C,y,w){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C);Be(S.auth,y,oo);const L=kc(S.auth,w);return new Po(S.auth,"linkViaPopup",y,L,S).executeNotNull()})).apply(this,arguments)}let Po=(()=>{class C extends rT{constructor(w,S,L,W,ve){super(w,S,W,ve),this.provider=L,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var w=this;return(0,O.Z)(function*(){const S=yield w.execute();return ue(S,w.auth,"internal-error"),S})()}onExecution(){var w=this;return(0,O.Z)(function*(){je(1===w.filter.length,"Popup operations only handle one event");const S=Ms();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],S),w.authWindow.associatedEvent=S,w.resolver._originValidation(w.auth).catch(L=>{w.reject(L)}),w.resolver._isIframeWebStorageSupported(w.auth,L=>{L||w.reject(He(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const w=()=>{var S,L;this.pollId=null!==(L=null===(S=this.authWindow)||void 0===S?void 0:S.window)&&void 0!==L&&L.closed?window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,wi.get())};w()}}return C.currentPopupAction=null,C})();const Vi=new Map;class Qs extends rT{constructor(y,w,S=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,S),this.eventId=null}execute(){var y=()=>super.execute,w=this;return(0,O.Z)(function*(){let S=Vi.get(w.auth._key());if(!S){try{const W=(yield function DE(C,y){return Su.apply(this,arguments)}(w.resolver,w.auth))?yield y().call(w):null;S=()=>Promise.resolve(W)}catch(L){S=()=>Promise.reject(L)}Vi.set(w.auth._key(),S)}return w.bypassAuthState||Vi.set(w.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(y){var w=()=>super.onAuthEvent,S=this;return(0,O.Z)(function*(){if("signInViaRedirect"===y.type)return w().call(S,y);if("unknown"!==y.type){if(y.eventId){const L=yield S.auth._redirectUserForId(y.eventId);if(L)return S.user=L,w().call(S,y);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,O.Z)(function*(){})()}cleanUp(){}}function Su(){return(Su=(0,O.Z)(function*(C,y){const w=Ba(y),S=lh(C);if(!(yield S._isAvailable()))return!1;const L="true"===(yield S._get(w));return yield S._remove(w),L})).apply(this,arguments)}function Js(C,y){return S_.apply(this,arguments)}function S_(){return(S_=(0,O.Z)(function*(C,y){return lh(C)._set(Ba(y),"true")})).apply(this,arguments)}function A_(){Vi.clear()}function _s(C,y){Vi.set(C._key(),y)}function lh(C){return me(C._redirectPersistence)}function Ba(C){return Y("pendingRedirect",C.config.apiKey,C.name)}function iT(C,y,w){return function Au(C,y,w){return At.apply(this,arguments)}(C,y,w)}function At(){return(At=(0,O.Z)(function*(C,y,w){const S=Fr(C);Be(C,y,oo);const L=kc(S,w);return yield Js(L,S),L._openRedirect(S,y,"signInViaRedirect")})).apply(this,arguments)}function TE(C,y,w){return function SE(C,y,w){return ch.apply(this,arguments)}(C,y,w)}function ch(){return(ch=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C);Be(S.auth,y,oo);const L=kc(S.auth,w);yield Js(L,S.auth);const W=yield Al(S);return L._openRedirect(S.auth,y,"reauthViaRedirect",W)})).apply(this,arguments)}function x_(C,y,w){return function Jr(C,y,w){return Oc.apply(this,arguments)}(C,y,w)}function Oc(){return(Oc=(0,O.Z)(function*(C,y,w){const S=(0,f.m9)(C);Be(S.auth,y,oo);const L=kc(S.auth,w);yield ml(!1,S,y.providerId),yield Js(L,S.auth);const W=yield Al(S);return L._openRedirect(S.auth,y,"linkViaRedirect",W)})).apply(this,arguments)}function Pc(C,y){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(C,y){return yield Fr(C)._initializationPromise,ja(C,y,!1)})).apply(this,arguments)}function ja(C,y){return $a.apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(C,y,w=!1){const S=Fr(C),L=kc(S,y),ve=yield new Qs(S,L,w).execute();return ve&&!w&&(delete ve.user._redirectEventId,yield S._persistUserIfCurrent(ve.user),yield S._setRedirectUser(null,y)),ve})).apply(this,arguments)}function Al(C){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,O.Z)(function*(C){const y=Ms(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class Nu{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let w=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(y,S)&&(w=!0,this.sendToConsumer(y,S),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Uc(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vc(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=y,w=!0)),w}sendToConsumer(y,w){var S;if(y.error&&!Vc(y)){const L=(null===(S=y.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";w.onError(He(this.auth,L))}else w.onAuthEvent(y)}isEventForConsumer(y,w){const S=null===w.eventId||!!y.eventId&&y.eventId===w.eventId;return w.filter.includes(y.type)&&S}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lo(y))}saveEventToCache(y){this.cachedEventUids.add(Lo(y)),this.lastProcessedEventTime=Date.now()}}function Lo(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function Vc({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===y?.code}function sa(C){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(C,y={}){return kt(C,"GET","/v1/projects",y)})).apply(this,arguments)}const zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Op=/^https?/;function ir(){return(ir=(0,O.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield sa(C);for(const w of y)try{if(xl(w))return}catch{}Fe(C,"unauthorized-domain")})).apply(this,arguments)}function xl(C){const y=Te(),{protocol:w,hostname:S}=new URL(y);if(C.startsWith("chrome-extension://")){const ve=new URL(C);return""===ve.hostname&&""===S?"chrome-extension:"===w&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===w&&ve.hostname===S}if(!Op.test(w))return!1;if(zr.test(C))return S===C;const L=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(S)}const dh=new Ft(3e4,6e4);function ys(){const C=Qr().___jsl;if(C?.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let w=0;w<C.CP.length;w++)C.CP[w]=null}let Mu=null;function Bc(C){return Mu=Mu||function Qi(C){return new Promise((y,w)=>{var S,L,W;function ve(){ys(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{ys(),w(He(C,"network-request-failed"))},timeout:dh.get()})}if(null!==(L=null===(S=Qr().gapi)||void 0===S?void 0:S.iframes)&&void 0!==L&&L.Iframe)y(gapi.iframes.getContext());else{if(null===(W=Qr().gapi)||void 0===W||!W.load){const Ke=xp("iframefcb");return Qr()[Ke]=()=>{gapi.load?ve():w(He(C,"network-request-failed"))},E_(`https://apis.google.com/js/api.js?onload=${Ke}`).catch(wt=>w(wt))}ve()}}).catch(y=>{throw Mu=null,y})}(C),Mu}const N_=new Ft(5e3,15e3),as={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ua=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sT(C){const y=C.config;ue(y.authDomain,C,"auth-domain-config-required");const w=y.emulator?Xt(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,S={apiKey:y.apiKey,appName:C.name,v:G.SDK_VERSION},L=ua.get(C.config.apiHost);L&&(S.eid=L);const W=C._getFrameworks();return W.length&&(S.fw=W.join(",")),`${w}?${(0,f.xO)(S).slice(1)}`}function jc(){return jc=(0,O.Z)(function*(C){const y=yield Bc(C),w=Qr().gapi;return ue(w,C,"internal-error"),y.open({where:document.body,url:sT(C),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:as,dontclear:!0},S=>new Promise(function(){var L=(0,O.Z)(function*(W,ve){yield S.restyle({setHideOnLeave:!1});const Ke=He(C,"network-request-failed"),wt=Qr().setTimeout(()=>{ve(Ke)},N_.get());function Vt(){Qr().clearTimeout(wt),W(S)}S.ping(Vt).then(Vt,()=>{ve(Ke)})});return function(W,ve){return L.apply(this,arguments)}}()))}),jc.apply(this,arguments)}const hh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hc{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rs(C,y,w,S,L,W){ue(C.config.authDomain,C,"auth-domain-config-required"),ue(C.config.apiKey,C,"invalid-api-key");const ve={apiKey:C.config.apiKey,appName:C.name,authType:w,redirectUrl:S,v:G.SDK_VERSION,eventId:L};if(y instanceof oo){y.setDefaultLanguage(C.languageCode),ve.providerId=y.providerId||"",(0,f.xb)(y.getCustomParameters())||(ve.customParameters=JSON.stringify(y.getCustomParameters()));for(const[wt,Vt]of Object.entries(W||{}))ve[wt]=Vt}if(y instanceof hu){const wt=y.getScopes().filter(Vt=>""!==Vt);wt.length>0&&(ve.scopes=wt.join(","))}C.tenantId&&(ve.tid=C.tenantId);const Ke=ve;for(const wt of Object.keys(Ke))void 0===Ke[wt]&&delete Ke[wt];return`${function fh({config:C}){return C.emulator?Xt(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,f.xO)(Ke).slice(1)}`}const Wc="webStorageSupport",M_=class Pp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cu,this._completeRedirectFn=ja,this._overrideRedirectResult=_s}_openPopup(y,w,S,L){var W=this;return(0,O.Z)(function*(){var ve;je(null===(ve=W.eventManagers[y._key()])||void 0===ve?void 0:ve.manager,"_initialize() not called before _openPopup()");const Ke=Rs(y,w,S,Te(),L);return function uT(C,y,w,S=500,L=600){const W=Math.max((window.screen.availHeight-L)/2,0).toString(),ve=Math.max((window.screen.availWidth-S)/2,0).toString();let Ke="";const wt=Object.assign(Object.assign({},hh),{width:S.toString(),height:L.toString(),top:W,left:ve}),Vt=(0,f.z$)().toLowerCase();w&&(Ke=ie(Vt)?"_blank":w),k(Vt)&&(y=y||"http://localhost",wt.scrollbars="yes");const gn=Object.entries(wt).reduce((lo,[Vo,ku])=>`${lo}${Vo}=${ku},`,"");if(function Qn(C=(0,f.z$)()){var y;return mt(C)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(Vt)&&"_self"!==Ke)return function Gc(C,y){const w=document.createElement("a");w.href=C,w.target=y;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(S)}(y||"",Ke),new Hc(null);const gr=window.open(y||"",Ke,gn);ue(gr,C,"popup-blocked");try{gr.focus()}catch{}return new Hc(gr)}(y,Ke,Ms())})()}_openRedirect(y,w,S,L){var W=this;return(0,O.Z)(function*(){return yield W._originValidation(y),function Sc(C){Qr().location.href=C}(Rs(y,w,S,Te(),L)),new Promise(()=>{})})()}_initialize(y){const w=y._key();if(this.eventManagers[w]){const{manager:L,promise:W}=this.eventManagers[w];return L?Promise.resolve(L):(je(W,"If manager is not set, promise should be"),W)}const S=this.initAndGetManager(y);return this.eventManagers[w]={promise:S},S.catch(()=>{delete this.eventManagers[w]}),S}initAndGetManager(y){var w=this;return(0,O.Z)(function*(){const S=yield function Ru(C){return jc.apply(this,arguments)}(y),L=new Nu(y);return S.register("authEvent",W=>(ue(W?.authEvent,y,"invalid-auth-event"),{status:L.onEvent(W.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[y._key()]={manager:L},w.iframes[y._key()]=S,L})()}_isIframeWebStorageSupported(y,w){this.iframes[y._key()].send(Wc,{type:Wc},L=>{var W;const ve=null===(W=L?.[0])||void 0===W?void 0:W[Wc];void 0!==ve&&w(!!ve),Fe(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const w=y._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function AE(C){return ir.apply(this,arguments)}(y)),this.originValidationPromises[w]}get _shouldInitProactively(){return Gn()||j()||mt()}};class yr{constructor(y){this.factorId=y}_process(y,w,S){switch(w.type){case"enroll":return this._finalizeEnroll(y,w.credential,S);case"signin":return this._finalizeSignIn(y,w.credential);default:return Re("unexpected MultiFactorSessionType")}}}class Fo extends yr{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Fo(y)}_finalizeEnroll(y,w,S){return function ms(C,y){return kt(C,"POST","/v2/accounts/mfaEnrollment:finalize",tn(C,y))}(y,{idToken:w,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,w){return function v_(C,y){return kt(C,"POST","/v2/accounts/mfaSignIn:finalize",tn(C,y))}(y,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ph=(()=>{class C{constructor(){}static assertion(w){return Fo._fromCredential(w)}}return C.FACTOR_ID="phone",C})();var R_="@firebase/auth",gh="0.20.11";class mh{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var w=this;return(0,O.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const w=this.auth.onIdTokenChanged(S=>{var L;y((null===(L=S)||void 0===L?void 0:L.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,w),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const w=this.internalListeners.get(y);!w||(this.internalListeners.delete(y),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,f.Pz)("authIdTokenMaxAge"),function k_(C){(0,G._registerComponent)(new Ne.wA("auth",(y,{options:w})=>{const S=y.getProvider("app").getImmediate(),L=y.getProvider("heartbeat"),{apiKey:W,authDomain:ve}=S.options;return((Ke,wt)=>{ue(W&&!W.includes(":"),"invalid-api-key",{appName:Ke.name}),ue(!ve?.includes(":"),"argument-error",{appName:Ke.name});const Vt={apiKey:W,authDomain:ve,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xa(C)},gn=new cu(Ke,wt,Vt);return function ke(C,y){const w=y?.persistence||[],S=(Array.isArray(w)?w:[w]).map(me);y?.errorMap&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(S,y?.popupRedirectResolver)}(gn,w),gn})(S,L)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,w,S)=>{y.getProvider("auth-internal").initialize()})),(0,G._registerComponent)(new Ne.wA("auth-internal",y=>{const w=Fr(y.getProvider("auth").getImmediate());return new mh(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,G.registerVersion)(R_,gh,function NE(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,G.registerVersion)(R_,gh,"esm2017")}("Browser")},2090:(Ee,pe,U)=>{"use strict";U.d(pe,{$s:()=>gt,BH:()=>bn,DV:()=>br,Dv:()=>Hn,G6:()=>Be,GJ:()=>ki,L:()=>be,LL:()=>qn,Pz:()=>wn,Sg:()=>Ft,UG:()=>ze,UI:()=>ri,US:()=>Ne,Wj:()=>ci,Wl:()=>Ln,Yr:()=>Ve,ZB:()=>te,ZR:()=>Wt,aH:()=>xt,b$:()=>ae,cI:()=>kt,dS:()=>Yn,eu:()=>ue,g5:()=>G,gK:()=>Hr,gQ:()=>$r,h$:()=>Me,hl:()=>st,hu:()=>f,jU:()=>J,lb:()=>ar,m9:()=>dn,ne:()=>Lr,p$:()=>ne,pd:()=>Zn,r3:()=>ni,ru:()=>X,tV:()=>ge,uI:()=>de,ug:()=>In,vZ:()=>jr,w1:()=>Fe,w9:()=>Pr,xO:()=>Ir,xb:()=>Br,z$:()=>Ge,zI:()=>Re,zd:()=>Yr});const f=function(re,Y){if(!re)throw G(Y)},G=function(re){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+re)},he=function(re){const Y=[];let H=0;for(let V=0;V<re.length;V++){let k=re.charCodeAt(V);k<128?Y[H++]=k:k<2048?(Y[H++]=k>>6|192,Y[H++]=63&k|128):55296==(64512&k)&&V+1<re.length&&56320==(64512&re.charCodeAt(V+1))?(k=65536+((1023&k)<<10)+(1023&re.charCodeAt(++V)),Y[H++]=k>>18|240,Y[H++]=k>>12&63|128,Y[H++]=k>>6&63|128,Y[H++]=63&k|128):(Y[H++]=k>>12|224,Y[H++]=k>>6&63|128,Y[H++]=63&k|128)}return Y},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,Y){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let k=0;k<re.length;k+=3){const j=re[k],ie=k+1<re.length,Ce=ie?re[k+1]:0,Qe=k+2<re.length,qe=Qe?re[k+2]:0;let Qt=(15&Ce)<<2|qe>>6,Qn=63&qe;Qe||(Qn=64,ie||(Qt=64)),V.push(H[j>>2],H[(3&j)<<4|Ce>>4],H[Qt],H[Qn])}return V.join("")},encodeString(re,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(re):this.encodeByteArray(he(re),Y)},decodeString(re,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(re):function(re){const Y=[];let H=0,V=0;for(;H<re.length;){const k=re[H++];if(k<128)Y[V++]=String.fromCharCode(k);else if(k>191&&k<224){const j=re[H++];Y[V++]=String.fromCharCode((31&k)<<6|63&j)}else if(k>239&&k<365){const Qe=((7&k)<<18|(63&re[H++])<<12|(63&re[H++])<<6|63&re[H++])-65536;Y[V++]=String.fromCharCode(55296+(Qe>>10)),Y[V++]=String.fromCharCode(56320+(1023&Qe))}else{const j=re[H++],ie=re[H++];Y[V++]=String.fromCharCode((15&k)<<12|(63&j)<<6|63&ie)}}return Y.join("")}(this.decodeStringToByteArray(re,Y))},decodeStringToByteArray(re,Y){this.init_();const H=Y?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let k=0;k<re.length;){const j=H[re.charAt(k++)],Ce=k<re.length?H[re.charAt(k)]:0;++k;const qe=k<re.length?H[re.charAt(k)]:64;++k;const mt=k<re.length?H[re.charAt(k)]:64;if(++k,null==j||null==Ce||null==qe||null==mt)throw Error();V.push(j<<2|Ce>>4),64!==qe&&(V.push(Ce<<4&240|qe>>2),64!==mt&&V.push(qe<<6&192|mt))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}},Me=function(re){const Y=he(re);return Ne.encodeByteArray(Y,!0)},be=function(re){return Me(re).replace(/\./g,"")},ge=function(re){try{return Ne.decodeString(re,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function ne(re){return te(void 0,re)}function te(re,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return Y}for(const H in Y)!Y.hasOwnProperty(H)||!ce(H)||(re[H]=te(re[H],Y[H]));return re}function ce(re){return"__proto__"!==re}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function J(){return"object"==typeof self&&self.self===self}function X(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){const re=Ge();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function Ve(){return!1}function Be(){return!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function st(){return"object"==typeof indexedDB}function ue(){return new Promise((re,Y)=>{try{let H=!0;const V="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(V);k.onsuccess=()=>{k.result.close(),H||self.indexedDB.deleteDatabase(V),re(!0)},k.onupgradeneeded=()=>{H=!1},k.onerror=()=>{var j;Y((null===(j=k.error)||void 0===j?void 0:j.message)||"")}}catch(H){Y(H)}})}function Re(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ke=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const re=process.env.__FIREBASE_DEFAULTS__;return re?JSON.parse(re):void 0})()||(()=>{if(typeof document>"u")return;let re;try{re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Y=re&&ge(re[1]);return Y&&JSON.parse(Y)})()}catch(re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${re}`)}},xt=()=>{var re;return null===(re=ke())||void 0===re?void 0:re.config},wn=re=>{var Y;return null===(Y=ke())||void 0===Y?void 0:Y[`_${re}`]};class bn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,H)=>{this.resolve=Y,this.reject=H})}wrapCallback(Y){return(H,V)=>{H?this.reject(H):this.resolve(V),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(H):Y(H,V))}}}function Ft(re,Y){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=Y||"demo-project",k=re.iat||0,j=re.sub||re.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ie=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:k,exp:k+3600,auth_time:k,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},re);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(ie)),""].join(".")}class Wt extends Error{constructor(Y,H,V){super(H),this.code=Y,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,Wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qn.prototype.create)}}class qn{constructor(Y,H,V){this.service=Y,this.serviceName=H,this.errors=V}create(Y,...H){const V=H[0]||{},k=`${this.service}/${Y}`,j=this.errors[Y],ie=j?function kr(re,Y){return re.replace(tn,(H,V)=>{const k=Y[V];return null!=k?String(k):`<${V}?>`})}(j,V):"Error";return new Wt(k,`${this.serviceName}: ${ie} (${k}).`,V)}}const tn=/\{\$([^}]+)}/g;function kt(re){return JSON.parse(re)}function Ln(re){return JSON.stringify(re)}const Or=function(re){let Y={},H={},V={},k="";try{const j=re.split(".");Y=kt(ge(j[0])||""),H=kt(ge(j[1])||""),k=j[2],V=H.d||{},delete H.d}catch{}return{header:Y,claims:H,data:V,signature:k}},Pr=function(re){const H=Or(re).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},ki=function(re){const Y=Or(re).claims;return"object"==typeof Y&&!0===Y.admin};function ni(re,Y){return Object.prototype.hasOwnProperty.call(re,Y)}function br(re,Y){if(Object.prototype.hasOwnProperty.call(re,Y))return re[Y]}function Br(re){for(const Y in re)if(Object.prototype.hasOwnProperty.call(re,Y))return!1;return!0}function ri(re,Y,H){const V={};for(const k in re)Object.prototype.hasOwnProperty.call(re,k)&&(V[k]=Y.call(H,re[k],k,re));return V}function jr(re,Y){if(re===Y)return!0;const H=Object.keys(re),V=Object.keys(Y);for(const k of H){if(!V.includes(k))return!1;const j=re[k],ie=Y[k];if(vn(j)&&vn(ie)){if(!jr(j,ie))return!1}else if(j!==ie)return!1}for(const k of V)if(!H.includes(k))return!1;return!0}function vn(re){return null!==re&&"object"==typeof re}function Ir(re){const Y=[];for(const[H,V]of Object.entries(re))Array.isArray(V)?V.forEach(k=>{Y.push(encodeURIComponent(H)+"="+encodeURIComponent(k))}):Y.push(encodeURIComponent(H)+"="+encodeURIComponent(V));return Y.length?"&"+Y.join("&"):""}function Yr(re){const Y={};return re.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[k,j]=V.split("=");Y[decodeURIComponent(k)]=decodeURIComponent(j)}}),Y}function Zn(re){const Y=re.indexOf("?");if(!Y)return"";const H=re.indexOf("#",Y);return re.substring(Y,H>0?H:void 0)}class $r{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,H){H||(H=0);const V=this.W_;if("string"==typeof Y)for(let mt=0;mt<16;mt++)V[mt]=Y.charCodeAt(H)<<24|Y.charCodeAt(H+1)<<16|Y.charCodeAt(H+2)<<8|Y.charCodeAt(H+3),H+=4;else for(let mt=0;mt<16;mt++)V[mt]=Y[H]<<24|Y[H+1]<<16|Y[H+2]<<8|Y[H+3],H+=4;for(let mt=16;mt<80;mt++){const Qt=V[mt-3]^V[mt-8]^V[mt-14]^V[mt-16];V[mt]=4294967295&(Qt<<1|Qt>>>31)}let qe,Dt,k=this.chain_[0],j=this.chain_[1],ie=this.chain_[2],Ce=this.chain_[3],Qe=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?(qe=Ce^j&(ie^Ce),Dt=1518500249):(qe=j^ie^Ce,Dt=1859775393):mt<60?(qe=j&ie|Ce&(j|ie),Dt=2400959708):(qe=j^ie^Ce,Dt=3395469782);const Qt=(k<<5|k>>>27)+qe+Qe+Dt+V[mt]&4294967295;Qe=Ce,Ce=ie,ie=4294967295&(j<<30|j>>>2),j=k,k=Qt}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+ie&4294967295,this.chain_[3]=this.chain_[3]+Ce&4294967295,this.chain_[4]=this.chain_[4]+Qe&4294967295}update(Y,H){if(null==Y)return;void 0===H&&(H=Y.length);const V=H-this.blockSize;let k=0;const j=this.buf_;let ie=this.inbuf_;for(;k<H;){if(0===ie)for(;k<=V;)this.compress_(Y,k),k+=this.blockSize;if("string"==typeof Y){for(;k<H;)if(j[ie]=Y.charCodeAt(k),++ie,++k,ie===this.blockSize){this.compress_(j),ie=0;break}}else for(;k<H;)if(j[ie]=Y[k],++ie,++k,ie===this.blockSize){this.compress_(j),ie=0;break}}this.inbuf_=ie,this.total_+=H}digest(){const Y=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&H,H/=256;this.compress_(this.buf_);let V=0;for(let k=0;k<5;k++)for(let j=24;j>=0;j-=8)Y[V]=this.chain_[k]>>j&255,++V;return Y}}function Lr(re,Y){const H=new En(re,Y);return H.subscribe.bind(H)}class En{constructor(Y,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{Y(this)}).catch(V=>{this.error(V)})}next(Y){this.forEachObserver(H=>{H.next(Y)})}error(Y){this.forEachObserver(H=>{H.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,H,V){let k;if(void 0===Y&&void 0===H&&void 0===V)throw new Error("Missing Observer.");k=function Nt(re,Y){if("object"!=typeof re||null===re)return!1;for(const H of Y)if(H in re&&"function"==typeof re[H])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:H,complete:V},void 0===k.next&&(k.next=ft),void 0===k.error&&(k.error=ft),void 0===k.complete&&(k.complete=ft);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),j}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,Y)}sendOne(Y,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{H(this.observers[Y])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ft(){}const Hn=function(re,Y,H,V){let k;if(V<Y?k="at least "+Y:V>H&&(k=0===H?"none":"no more than "+H),k)throw new Error(re+" failed: Was called with "+V+(1===V?" argument.":" arguments.")+" Expects "+k+".")};function Hr(re,Y){return`${re} failed: ${Y} argument `}function ci(re,Y,H,V){if((!V||H)&&"function"!=typeof H)throw new Error(Hr(re,Y)+"must be a valid function.")}function ar(re,Y,H,V){if((!V||H)&&("object"!=typeof H||null===H))throw new Error(Hr(re,Y)+"must be a valid context object.")}const Yn=function(re){const Y=[];let H=0;for(let V=0;V<re.length;V++){let k=re.charCodeAt(V);if(k>=55296&&k<=56319){const j=k-55296;V++,f(V<re.length,"Surrogate pair missing trail surrogate."),k=65536+(j<<10)+(re.charCodeAt(V)-56320)}k<128?Y[H++]=k:k<2048?(Y[H++]=k>>6|192,Y[H++]=63&k|128):k<65536?(Y[H++]=k>>12|224,Y[H++]=k>>6&63|128,Y[H++]=63&k|128):(Y[H++]=k>>18|240,Y[H++]=k>>12&63|128,Y[H++]=k>>6&63|128,Y[H++]=63&k|128)}return Y},In=function(re){let Y=0;for(let H=0;H<re.length;H++){const V=re.charCodeAt(H);V<128?Y++:V<2048?Y+=2:V>=55296&&V<=56319?(Y+=4,H++):Y+=3}return Y};function gt(re,Y=1e3,H=2){const V=Y*Math.pow(H,re),k=Math.round(.5*V*(Math.random()-.5)*2);return Math.min(144e5,V+k)}function dn(re){return re&&re._delegate?re._delegate:re}},3460:(Ee,pe,U)=>{"use strict";var O={};U.r(O),U.d(O,{afterMain:()=>KG,afterRead:()=>WG,afterWrite:()=>QG,applyStyles:()=>iV,arrow:()=>s5,auto:()=>EN,basePlacements:()=>n0,beforeMain:()=>zG,beforeRead:()=>HG,beforeWrite:()=>ZG,bottom:()=>wa,clippingParents:()=>jG,computeStyles:()=>uV,createPopper:()=>gV,createPopperBase:()=>Cte,createPopperLite:()=>Ste,detectOverflow:()=>l0,end:()=>r0,eventListeners:()=>lV,flip:()=>d5,hide:()=>p5,left:()=>wo,main:()=>qG,modifierPhases:()=>JG,offset:()=>g5,placements:()=>nV,popper:()=>s0,popperGenerator:()=>DN,popperOffsets:()=>pV,preventOverflow:()=>m5,read:()=>GG,reference:()=>$G,right:()=>ba,start:()=>Cm,top:()=>Eo,variationPlacements:()=>tV,viewport:()=>eV,write:()=>YG});var f=U(4650);let G=null;function he(){return G}class Me{}const be=new f.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ne(){return(0,f.LFG)(ce)}()},providedIn:"platform"}),n})();const te=new f.OlP("Location Initialized");let ce=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return he().getBaseHref(this._doc)}onPopState(t){const r=he().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=he().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Ge()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Ge()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function de(){return new ce((0,f.LFG)(be))}()},providedIn:"platform"}),n})();function Ge(){return!!window.history.pushState}function ze(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function J(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Fe)},providedIn:"root"}),n})();const Se=new f.OlP("appBaseHref");let Fe=(()=>{class n extends ae{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ze(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+X(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+X(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge),f.LFG(Se,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),He=(()=>{class n extends ae{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ze(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+X(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+X(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge),f.LFG(Se,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=J(ue(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function st(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=X,n.joinWithSlash=ze,n.stripTrailingSlash=J,n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Be(){return new Ve((0,f.LFG)(ae))}()},providedIn:"root"}),n})();function ue(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Format=0]="Format",me[me.Standalone=1]="Standalone",me))(),Ie=(()=>((Ie=Ie||{})[Ie.Narrow=0]="Narrow",Ie[Ie.Abbreviated=1]="Abbreviated",Ie[Ie.Wide=2]="Wide",Ie[Ie.Short=3]="Short",Ie))(),ke=(()=>((ke=ke||{})[ke.Short=0]="Short",ke[ke.Medium=1]="Medium",ke[ke.Long=2]="Long",ke[ke.Full=3]="Full",ke))(),Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Group=1]="Group",Te[Te.List=2]="List",Te[Te.PercentSign=3]="PercentSign",Te[Te.PlusSign=4]="PlusSign",Te[Te.MinusSign=5]="MinusSign",Te[Te.Exponential=6]="Exponential",Te[Te.SuperscriptingExponent=7]="SuperscriptingExponent",Te[Te.PerMille=8]="PerMille",Te[Te.Infinity=9]="Infinity",Te[Te.NaN=10]="NaN",Te[Te.TimeSeparator=11]="TimeSeparator",Te[Te.CurrencyDecimal=12]="CurrencyDecimal",Te[Te.CurrencyGroup=13]="CurrencyGroup",Te))();function kr(n,e){return vn((0,f.cg1)(n)[f.wAp.DateFormat],e)}function tn(n,e){return vn((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function kt(n,e){return vn((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function Ln(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Te.CurrencyDecimal)return t[f.wAp.NumberSymbols][Te.Decimal];if(e===Te.CurrencyGroup)return t[f.wAp.NumberSymbols][Te.Group]}return r}function br(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function It(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const $r=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lr={},En=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Bn=(()=>((Bn=Bn||{})[Bn.Short=0]="Short",Bn[Bn.ShortGMT=1]="ShortGMT",Bn[Bn.Long=2]="Long",Bn[Bn.Extended=3]="Extended",Bn))(),Nt=(()=>((Nt=Nt||{})[Nt.FullYear=0]="FullYear",Nt[Nt.Month=1]="Month",Nt[Nt.Date=2]="Date",Nt[Nt.Hours=3]="Hours",Nt[Nt.Minutes=4]="Minutes",Nt[Nt.Seconds=5]="Seconds",Nt[Nt.FractionalSeconds=6]="FractionalSeconds",Nt[Nt.Day=7]="Day",Nt))(),ft=(()=>((ft=ft||{})[ft.DayPeriods=0]="DayPeriods",ft[ft.Days=1]="Days",ft[ft.Months=2]="Months",ft[ft.Eras=3]="Eras",ft))();function Hn(n,e,t,r){let i=function ie(n){if(Qe(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,c=1]=n.split("-").map(p=>+p);return Hr(i,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match($r))return function Ce(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,v=Number(n[6]||0),I=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,v,I),e}(r)}const e=new Date(n);if(!Qe(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Cr(t,e)||e;let p,c=[];for(;e;){if(p=En.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const A=c.pop();if(!A)break;e=A}}let v=i.getTimezoneOffset();r&&(v=V(r,v),i=function j(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function k(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(V(e,i)-i))}(i,r,!0));let I="";return c.forEach(A=>{const M=function H(n){if(Y[n])return Y[n];let e;switch(n){case"G":case"GG":case"GGG":e=nn(ft.Eras,Ie.Abbreviated);break;case"GGGG":e=nn(ft.Eras,Ie.Wide);break;case"GGGGG":e=nn(ft.Eras,Ie.Narrow);break;case"y":e=In(Nt.FullYear,1,0,!1,!0);break;case"yy":e=In(Nt.FullYear,2,0,!0,!0);break;case"yyy":e=In(Nt.FullYear,3,0,!1,!0);break;case"yyyy":e=In(Nt.FullYear,4,0,!1,!0);break;case"Y":e=re(1);break;case"YY":e=re(2,!0);break;case"YYY":e=re(3);break;case"YYYY":e=re(4);break;case"M":case"L":e=In(Nt.Month,1,1);break;case"MM":case"LL":e=In(Nt.Month,2,1);break;case"MMM":e=nn(ft.Months,Ie.Abbreviated);break;case"MMMM":e=nn(ft.Months,Ie.Wide);break;case"MMMMM":e=nn(ft.Months,Ie.Narrow);break;case"LLL":e=nn(ft.Months,Ie.Abbreviated,me.Standalone);break;case"LLLL":e=nn(ft.Months,Ie.Wide,me.Standalone);break;case"LLLLL":e=nn(ft.Months,Ie.Narrow,me.Standalone);break;case"w":e=dn(1);break;case"ww":e=dn(2);break;case"W":e=dn(1,!0);break;case"d":e=In(Nt.Date,1);break;case"dd":e=In(Nt.Date,2);break;case"c":case"cc":e=In(Nt.Day,1);break;case"ccc":e=nn(ft.Days,Ie.Abbreviated,me.Standalone);break;case"cccc":e=nn(ft.Days,Ie.Wide,me.Standalone);break;case"ccccc":e=nn(ft.Days,Ie.Narrow,me.Standalone);break;case"cccccc":e=nn(ft.Days,Ie.Short,me.Standalone);break;case"E":case"EE":case"EEE":e=nn(ft.Days,Ie.Abbreviated);break;case"EEEE":e=nn(ft.Days,Ie.Wide);break;case"EEEEE":e=nn(ft.Days,Ie.Narrow);break;case"EEEEEE":e=nn(ft.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=nn(ft.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=nn(ft.DayPeriods,Ie.Wide);break;case"aaaaa":e=nn(ft.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=nn(ft.DayPeriods,Ie.Abbreviated,me.Standalone,!0);break;case"bbbb":e=nn(ft.DayPeriods,Ie.Wide,me.Standalone,!0);break;case"bbbbb":e=nn(ft.DayPeriods,Ie.Narrow,me.Standalone,!0);break;case"B":case"BB":case"BBB":e=nn(ft.DayPeriods,Ie.Abbreviated,me.Format,!0);break;case"BBBB":e=nn(ft.DayPeriods,Ie.Wide,me.Format,!0);break;case"BBBBB":e=nn(ft.DayPeriods,Ie.Narrow,me.Format,!0);break;case"h":e=In(Nt.Hours,1,-12);break;case"hh":e=In(Nt.Hours,2,-12);break;case"H":e=In(Nt.Hours,1);break;case"HH":e=In(Nt.Hours,2);break;case"m":e=In(Nt.Minutes,1);break;case"mm":e=In(Nt.Minutes,2);break;case"s":e=In(Nt.Seconds,1);break;case"ss":e=In(Nt.Seconds,2);break;case"S":e=In(Nt.FractionalSeconds,1);break;case"SS":e=In(Nt.FractionalSeconds,2);break;case"SSS":e=In(Nt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Je(Bn.Short);break;case"ZZZZZ":e=Je(Bn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Je(Bn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Je(Bn.Long);break;default:return null}return Y[n]=e,e}(A);I+=M?M(i,t,v):"''"===A?"'":A.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),I}function Hr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Cr(n,e){const t=function xt(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(Lr[t]=Lr[t]||{},Lr[t][e])return Lr[t][e];let r="";switch(e){case"shortDate":r=kr(n,ke.Short);break;case"mediumDate":r=kr(n,ke.Medium);break;case"longDate":r=kr(n,ke.Long);break;case"fullDate":r=kr(n,ke.Full);break;case"shortTime":r=tn(n,ke.Short);break;case"mediumTime":r=tn(n,ke.Medium);break;case"longTime":r=tn(n,ke.Long);break;case"fullTime":r=tn(n,ke.Full);break;case"short":const i=Cr(n,"shortTime"),u=Cr(n,"shortDate");r=ci(kt(n,ke.Short),[i,u]);break;case"medium":const c=Cr(n,"mediumTime"),p=Cr(n,"mediumDate");r=ci(kt(n,ke.Medium),[c,p]);break;case"long":const v=Cr(n,"longTime"),I=Cr(n,"longDate");r=ci(kt(n,ke.Long),[v,I]);break;case"full":const A=Cr(n,"fullTime"),M=Cr(n,"fullDate");r=ci(kt(n,ke.Full),[A,M])}return r&&(Lr[t][e]=r),r}function ci(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function ar(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.slice(c.length-e)),u+c}function In(n,e,t=0,r=!1,i=!1){return function(u,c){let p=function Gr(n,e){switch(n){case Nt.FullYear:return e.getFullYear();case Nt.Month:return e.getMonth();case Nt.Date:return e.getDate();case Nt.Hours:return e.getHours();case Nt.Minutes:return e.getMinutes();case Nt.Seconds:return e.getSeconds();case Nt.FractionalSeconds:return e.getMilliseconds();case Nt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===Nt.Hours)0===p&&-12===t&&(p=12);else if(n===Nt.FractionalSeconds)return function Yn(n,e){return ar(n,3).substring(0,e)}(p,e);const v=Ln(c,Te.MinusSign);return ar(p,e,v,r,i)}}function nn(n,e,t=me.Format,r=!1){return function(i,u){return function Wr(n,e,t,r,i,u){switch(t){case ft.Months:return function Ft(n,e,t){const r=(0,f.cg1)(n),u=vn([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return vn(u,t)}(e,i,r)[n.getMonth()];case ft.Days:return function bn(n,e,t){const r=(0,f.cg1)(n),u=vn([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return vn(u,t)}(e,i,r)[n.getDay()];case ft.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const I=function Br(n){const e=(0,f.cg1)(n);return br(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?It(r):[It(r[0]),It(r[1])])}(e),A=function ri(n,e,t){const r=(0,f.cg1)(n);br(r);const u=vn([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return vn(u,t)||[]}(e,i,r),M=I.findIndex(P=>{if(Array.isArray(P)){const[$,Q]=P,le=c>=$.hours&&p>=$.minutes,ye=c<Q.hours||c===Q.hours&&p<Q.minutes;if($.hours<Q.hours){if(le&&ye)return!0}else if(le||ye)return!0}else if(P.hours===c&&P.minutes===p)return!0;return!1});if(-1!==M)return A[M]}return function wn(n,e,t){const r=(0,f.cg1)(n),u=vn([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return vn(u,t)}(e,i,r)[c<12?0:1];case ft.Eras:return function Xt(n,e){return vn((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function Je(n){return function(e,t,r){const i=-1*r,u=Ln(t,Te.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Bn.Short:return(i>=0?"+":"")+ar(c,2,u)+ar(Math.abs(i%60),2,u);case Bn.ShortGMT:return"GMT"+(i>=0?"+":"")+ar(c,1,u);case Bn.Long:return"GMT"+(i>=0?"+":"")+ar(c,2,u)+":"+ar(Math.abs(i%60),2,u);case Bn.Extended:return 0===r?"Z":(i>=0?"+":"")+ar(c,2,u)+":"+ar(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function $t(n){return Hr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function dn(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+u)/7)}else{const u=$t(t),c=function Ot(n){const e=Hr(n,0,1).getDay();return Hr(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();i=1+Math.round(p/6048e5)}return ar(i,n,Ln(r,Te.MinusSign))}}function re(n,e=!1){return function(t,r){return ar($t(t).getFullYear(),n,Ln(r,Te.MinusSign),e)}}const Y={};function V(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Qe(n){return n instanceof Date&&!isNaN(n.valueOf())}let Tt=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ws{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ws(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),io(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{io(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function io(n,e){n.context.$implicit=e.item}let fs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Na,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){an("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){an("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Na{constructor(){this.$implicit=null,this.ngIf=null}}function an(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}function Nn(n,e){return new f.vHH(2100,!1)}class qs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class du{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Ra=new du,dl=new qs;let ps=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return Ra;if((0,f.F4k)(t))return dl;throw Nn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const Mo=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),hl=new f.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Oa=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,u){if(null==t||""===t||t!=t)return null;try{return Hn(t,r??this.defaultOptions?.dateFormat??"mediumDate",u||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(c){throw Nn()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(Mo,24),f.Y36(hl,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),fu=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=_p}transform(t,r=_p){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const i=this.differ.diff(t),u=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(c=>{this.keyValues.push(function hu(n,e){return{key:n,value:e}}(c.key,c.currentValue))})),(i||u)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.aQg,16))},n.\u0275pipe=f.Yjl({name:"keyvalue",type:n,pure:!1,standalone:!0}),n})();function _p(n,e){const t=n.key,r=e.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const i=String(t),u=String(r);return i==u?0:i<u?-1:1}let pl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const gu="browser";function mu(n){return"server"===n}let Ec=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new yu((0,f.LFG)(be),window)}),n})();class yu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ml(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ns(this.window.history)||Ns(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ns(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wu extends Me{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pr extends wu{static makeCurrent(){!function Ne(n){G||(G=n)}(new pr)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function mE(){return bu=bu||document.querySelector("base"),bu?bu.getAttribute("href"):null}();return null==t?null:function h_(n){Iu=Iu||document.createElement("a"),Iu.setAttribute("href",n);const e=Iu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Iu,bu=null;const f_=new f.OlP("TRANSITION_ID"),Qd=[{provide:f.ip1,useFactory:function _E(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=he(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[f_,be,f.zs3],multi:!0}];let Dc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Tc=new f.OlP("EventManagerPlugins");let Cu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Tc),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class p_{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=he().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Du=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n extends Du{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(g_),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(g_))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function g_(n){he().remove(n)}const Qr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Sc=/%COMP%/g;function Ac(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ac(n,i,t):(i=i.replace(Sc,n),t.push(i))}return t}function El(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Va=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Tu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Nc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new th(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ac(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cu),f.LFG(Ms),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Tu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(wl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Qr[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Qr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,El(r)):this.eventManager.addEventListener(e,t,El(r))}}function wl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nc extends Tu{constructor(e,t,r,i){super(e),this.component=r;const u=Ac(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function eT(n){return"_ngcontent-%COMP%".replace(Sc,n)}(i+"-"+r.id),this.hostAttr=function Jd(n){return"_nghost-%COMP%".replace(Sc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class th extends Tu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ac(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let __=(()=>{class n extends p_{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nh=["alt","control","meta","shift"],y_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ia=(()=>{class n extends p_{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>he().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),nh.forEach(I=>{const A=r.indexOf(I);A>-1&&(r.splice(A,1),c+=I+".")}),c+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=i,v.fullKey=c,v}static matchEventFullKeyCode(t,r){let i=y_[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nh.forEach(c=>{c!==i&&(0,yE[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const w_=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:gu},{provide:f.g9A,useValue:function Ap(){pr.makeCurrent()},multi:!0},{provide:be,useFactory:function xp(){return(0,f.RDi)(document),document},deps:[]}]),bl=new f.OlP(""),b_=[{provide:f.rWj,useClass:class Cp{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(v){c=c||v,u--,0==u&&r(c)};i.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?he().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Mc=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function E_(){return new f.qLn},deps:[]},{provide:Tc,useClass:__,multi:!0,deps:[be,f.R0b,f.Lbi]},{provide:Tc,useClass:ia,multi:!0,deps:[be]},{provide:Va,useClass:Va,deps:[Cu,Ms,f.AFp]},{provide:f.FYo,useExisting:Va},{provide:Du,useExisting:Ms},{provide:Ms,useClass:Ms,deps:[be]},{provide:Cu,useClass:Cu,deps:[Tc,f.R0b]},{provide:class Kd{},useClass:Dc,deps:[]},[]];let Il=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:f_,useExisting:f.AFp},Qd]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bl,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Mc,...b_],imports:[pl,f.hGG]}),n})(),Mp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Cl(){return new Mp((0,f.LFG)(be))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var $n=U(8996),Po=U(7669);function St(...n){const e=(0,Po.yG)(n);return(0,$n.D)(n,e)}var Vi=U(7579);class Qs extends Vi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Su=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Js=U(9751);const{isArray:S_}=Array,{getPrototypeOf:A_,prototype:_s,keys:lh}=Object;function Ba(n){if(1===n.length){const e=n[0];if(S_(e))return{args:e,keys:null};if(function iT(n){return n&&"object"==typeof n&&A_(n)===_s}(e)){const t=lh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Au=U(4671),At=U(4004);const{isArray:TE}=Array;function ch(n){return(0,At.U)(e=>function SE(n,e){return TE(e)?n(...e):n(e)}(n,e))}function x_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Jr=U(5403),Oc=U(9672);function Pc(...n){const e=(0,Po.yG)(n),t=(0,Po.jO)(n),{args:r,keys:i}=Ba(n);if(0===r.length)return(0,$n.D)([],e);const u=new Js.y(function Lc(n,e,t=Au.y){return r=>{ja(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let v=0;v<i;v++)ja(e,()=>{const I=(0,$n.D)(n[v],e);let A=!1;I.subscribe((0,Jr.x)(r,M=>{u[v]=M,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>x_(i,c):Au.y));return t?u.pipe(ch(t)):u}function ja(n,e,t){n?(0,Oc.f)(t,n,e):e()}var $a=U(8189);function Fc(...n){return function Al(){return(0,$a.J)(1)}()((0,$n.D)(n,(0,Po.yG)(n)))}var xu=U(8421);function Nu(n){return new Js.y(e=>{(0,xu.Xf)(n()).subscribe(e)})}var Lo=U(9635),Vc=U(576);function Uc(n,e){const t=(0,Vc.m)(n)?n:()=>n,r=i=>i.error(t());return new Js.y(e?i=>e.schedule(r,0,i):r)}var sa=U(515),oa=U(727),zr=U(4482);function Op(){return(0,zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Jr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class AE extends Js.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new oa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=oa.w0.EMPTY)}return e}refCount(){return Op()(this)}}function ir(n,e){return(0,zr.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,Jr.x)(r,v=>{i?.unsubscribe();let I=0;const A=u++;(0,xu.Xf)(n(v,A)).subscribe(i=(0,Jr.x)(r,M=>r.next(e?e(v,M,A,I++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}function xl(n){return n<=0?()=>sa.E:(0,zr.e)((e,t)=>{let r=0;e.subscribe((0,Jr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dh(...n){const e=(0,Po.yG)(n);return(0,zr.e)((t,r)=>{(e?Fc(n,t,e):Fc(n,t)).subscribe(r)})}function ys(n,e){return(0,zr.e)((t,r)=>{let i=0;t.subscribe((0,Jr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Qi=U(5577);function Mu(n){return(0,zr.e)((e,t)=>{let r=!1;e.subscribe((0,Jr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Bc(n=N_){return(0,zr.e)((e,t)=>{let r=!1;e.subscribe((0,Jr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function N_(){return new Su}function aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ys((i,u)=>n(i,u,r)):Au.y,xl(1),t?Mu(e):Bc(()=>new Su))}function Ha(n,e){return(0,Vc.m)(e)?(0,Qi.z)(n,e,1):(0,Qi.z)(n,1)}var as=U(8505);function ua(n){return(0,zr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Jr.x)(t,void 0,void 0,c=>{u=(0,xu.Xf)(n(c,ua(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function sT(n,e,t,r,i){return(u,c)=>{let p=t,v=e,I=0;u.subscribe((0,Jr.x)(c,A=>{const M=I++;v=p?n(v,A,M):(p=!0,A),r&&c.next(v)},i&&(()=>{p&&c.next(v),c.complete()})))}}function Ru(n,e){return(0,zr.e)(sT(n,e,arguments.length>=2,!0))}function jc(n){return n<=0?()=>sa.E:(0,zr.e)((e,t)=>{let r=[];e.subscribe((0,Jr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ys((i,u)=>n(i,u,r)):Au.y,jc(1),t?Mu(e):Bc(()=>new Su))}function $c(n){return(0,zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tn="primary",Hc=Symbol("RouteTitle");class uT{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gc(n){return new uT(n)}function lT(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Rs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!fh(n[i],e[i]))return!1;return!0}function fh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Wc(n){return Array.prototype.concat.apply([],n)}function Pp(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fo(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,$n.D)(Promise.resolve(n)):St(n)}const ph=!1,R_={exact:function k_(n,e,t){if(!S(n.segments,e.segments)||!_h(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!k_(n.children[r],e.children[r],t))return!1;return!0},subset:Lp},gh={exact:function NE(n,e){return Rs(n,e)},subset:function ME(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fh(n[t],e[t]))},ignored:()=>!0};function mh(n,e,t){return R_[t.paths](n.root,e.root,t.matrixParams)&&gh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lp(n,e,t){return Fp(n,e,e.segments,t)}function Fp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!S(i,t)||e.hasChildren()||!_h(i,t,r))}if(n.segments.length===t.length){if(!S(n.segments,t)||!_h(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Lp(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(S(n.segments,i)&&_h(n.segments,i,r)&&n.children[Tn])&&Fp(n.children[Tn],e,u,r)}}function _h(n,e,t){return e.every((r,i)=>gh[t](n[i].parameters,r.parameters))}class fi{constructor(e=new C([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gc(this.queryParams)),this._queryParamMap}toString(){return Ke.serialize(this)}}class C{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wt(this)}}class y{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gc(this.parameters)),this._parameterMap}toString(){return Nl(this)}}function S(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new ve},providedIn:"root"}),n})();class ve{parse(e){const t=new vh(e);return new fi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vt(e.root,!0)}`,r=function Vp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gr(t)}=${gr(i)}`).join("&"):`${gr(t)}=${gr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function lo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ke=new ve;function wt(n){return n.segments.map(e=>Nl(e)).join("/")}function Vt(n,e){if(!n.hasChildren())return wt(n);if(e){const t=n.children[Tn]?Vt(n.children[Tn],!1):"",r=[];return yr(n.children,(i,u)=>{u!==Tn&&r.push(`${u}:${Vt(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function L(n,e){let t=[];return yr(n.children,(r,i)=>{i===Tn&&(t=t.concat(e(r,i)))}),yr(n.children,(r,i)=>{i!==Tn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Tn?[Vt(n.children[Tn],!1)]:[`${i}:${Vt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tn]?`${wt(n)}/${t[0]}`:`${wt(n)}/(${t.join("//")})`}}function gn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gr(n){return gn(n).replace(/%3B/gi,";")}function Vo(n){return gn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ku(n){return decodeURIComponent(n)}function zc(n){return ku(n.replace(/\+/g,"%20"))}function Nl(n){return`${Vo(n.path)}${function O_(n){return Object.keys(n).map(e=>`;${Vo(e)}=${Vo(n[e])}`).join("")}(n.parameters)}`}const Up=/^[^\/()?;=#]+/;function la(n){const e=n.match(Up);return e?e[0]:""}const P_=/^[^=?&#]+/,yh=/^[^&#]+/;class vh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new C([],{}):new C([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tn]=new C(e,t)),r}parseSegment(){const e=la(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,ph);return this.capture(e),new y(ku(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=la(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=la(this.remaining);i&&(r=i,this.capture(r))}e[ku(t)]=ku(r)}parseQueryParam(e){const t=function Bp(n){const e=n.match(P_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function jp(n){const e=n.match(yh);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=zc(t),u=zc(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=la(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,ph);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Tn);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Tn]:new C([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,ph)}}function L_(n){return n.segments.length>0?new C([],{[Tn]:n}):n}function Ou(n){const e={};for(const r of Object.keys(n.children)){const u=Ou(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function RE(n){if(1===n.numberOfChildren&&n.children[Tn]){const e=n.children[Tn];return new C(n.segments.concat(e.segments),e.children)}return n}(new C(n.segments,e))}function Ml(n){return n instanceof fi}function wR(n,e,t,r,i){if(0===t.length)return Eh(e.root,e.root,e.root,r,i);const u=function PE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new F_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return yr(u.outlets,(v,I)=>{p[I]="string"==typeof v?v.split("/"):v}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new F_(t,e,r)}(t);return u.toRoot()?Eh(e.root,e.root,new C([],{}),r,i):function c(v){const I=function IR(n,e,t,r){if(n.isAbsolute)return new Rl(e.root,!0,0);if(-1===r)return new Rl(t,t===e.root,0);return function LE(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new Rl(r,!1,i-u)}(t,r+($p(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=I.processChildren?wh(I.segmentGroup,I.index,u.commands):Pu(I.segmentGroup,I.index,u.commands);return Eh(e.root,I.segmentGroup,A,r,i)}(n.snapshot?._lastPathIndex)}function $p(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hp(n){return"object"==typeof n&&null!=n&&n.outlets}function Eh(n,e,t,r,i){let c,u={};r&&yr(r,(v,I)=>{u[I]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),c=n===e?t:OE(n,e,t);const p=L_(Ou(c));return new fi(p,u,i)}function OE(n,e,t){const r={};return yr(n.children,(i,u)=>{r[u]=i===e?t:OE(i,e,t)}),new C(n.segments,r)}class F_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$p(r[0]))throw new f.vHH(4003,!1);const i=r.find(Hp);if(i&&i!==Pp(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Pu(n,e,t){if(n||(n=new C([],{})),0===n.segments.length&&n.hasChildren())return wh(n,e,t);const r=function hT(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Hp(p))break;const v=`${p}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!fT(v,I,c))return u;r+=2}else{if(!fT(v,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new C(n.segments.slice(0,r.pathIndex),{});return u.children[Tn]=new C(n.segments.slice(r.pathIndex),n.children),wh(u,0,i)}return r.match&&0===i.length?new C(n.segments,{}):r.match&&!n.hasChildren()?FE(n,e,t):r.match?wh(n,0,i):FE(n,e,t)}function wh(n,e,t){if(0===t.length)return new C(n.segments,{});{const r=function dT(n){return Hp(n[0])?n[0].outlets:{[Tn]:n}}(t),i={};return yr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Pu(n.children[c],e,u))}),yr(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new C(n.segments,i)}}function FE(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Hp(u)){const v=wB(u.outlets);return new C(r,v)}if(0===i&&$p(t[0])){r.push(new y(n.segments[e].path,Gp(t[0]))),i++;continue}const c=Hp(u)?u.outlets[Tn]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&$p(p)?(r.push(new y(c,Gp(p))),i+=2):(r.push(new y(c,{})),i++)}return new C(r,{})}function wB(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=FE(new C([],{}),0,t))}),e}function Gp(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function fT(n,e,t){return n==t.path&&Rs(e,t.parameters)}class Ga{constructor(e,t){this.id=e,this.url=t}}class V_ extends Ga{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kl extends Ga{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bh extends Ga{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class VE extends Ga{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class U_ extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B_ extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pT extends Ga{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class UE extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BE extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class CR{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DR{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _T{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $E{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ih(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ih(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zp(e,this._root).map(t=>t.value)}}function Ih(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ih(n,t);if(r)return r}return null}function zp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zp(n,t);if(r.length)return r.unshift(e),r}return[]}class ks{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ch(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vT extends $E{constructor(e,t){super(e),this.snapshot=t,$_(this,e)}toString(){return this.snapshot.toString()}}function TR(n,e){const t=function SR(n,e){const c=new qc([],{},{},"",{},Tn,e,null,n.root,-1,{});return new j_("",new ks(c,[]))}(n,e),r=new Qs([new y("",{})]),i=new Qs({}),u=new Qs({}),c=new Qs({}),p=new Qs(""),v=new Lu(r,i,c,p,u,Tn,e,t.root);return v.snapshot=t.root,new vT(new ks(v,[]),t)}class Lu{constructor(e,t,r,i,u,c,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,At.U)(I=>I[Hc]))??St(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>Gc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>Gc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ET(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function wT(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qc{constructor(e,t,r,i,u,c,p,v,I,A,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=A,this._resolve=M}get title(){return this.data?.[Hc]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class j_ extends $E{constructor(e,t){super(t),this.url=e,$_(this,t)}toString(){return HE(this._root)}}function $_(n,e){e.value._routerState=n,e.children.forEach(t=>$_(n,t))}function HE(n){const e=n.children.length>0?` { ${n.children.map(HE).join(", ")} } `:"";return`${n.value}${e}`}function H_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rs(e.params,t.params)||n.params.next(t.params),function xE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function G_(n,e){const t=Rs(n.params,e.params)&&function w(n,e){return S(n,e)&&n.every((t,r)=>Rs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||G_(n.parent,e.parent))}function qp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function xR(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qp(n,r,i);return qp(n,r)})}(n,e,t);return new ks(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>qp(n,p)),c}}const r=function NR(n){return new Lu(new Qs(n.url),new Qs(n.params),new Qs(n.queryParams),new Qs(n.fragment),new Qs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>qp(n,u));return new ks(r,i)}}const GE="ngNavigationCancelingError";function Fu(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ml(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Dh(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Dh(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[GE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bT(n){return MR(n)&&Ml(n.url)}function MR(n){return n&&n[GE]}class bB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Kp,this.attachRef=null}}let Kp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bB,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WE=!1;let IT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tn,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Kp),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,WE);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,WE);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,WE);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,WE);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,v=new CT(t,p,i.injector);if(r&&function RR(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(c);this.activated=i.createComponent(I,i.length,v)}else this.activated=i.createComponent(c,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class CT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Lu?this.route:e===Kp?this.childContexts:this.parent.get(e,t)}}let W_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[IT],encapsulation:2}),n})();function DT(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function xT(n){const e=n.children&&n.children.map(xT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tn&&(t.component=W_),t}function ca(n){return n.outlet||Tn}function K_(n,e){const t=n.filter(r=>ca(r)===e);return t.push(...n.filter(r=>ca(r)!==e)),t}function Kc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class TB{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),H_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ch(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),yr(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ch(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ch(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ch(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new mT(u.value.snapshot))}),e.children.length&&this.forwardEvent(new gT(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(H_(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),H_(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=Kc(i.snapshot),v=p?.get(f._Vd)??null;c.attachRef=null,c.route=i,c.resolver=v,c.injector=p,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class zE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Z_{constructor(e,t){this.component=e,this.route=t}}function kR(n,e,t){const r=n._root;return Sh(r,e?e._root:null,t,[r.value])}function Th(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Sh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ch(e);return n.children.forEach(c=>{(function Y_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function PR(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!S(n.url,e.url);case"pathParamsOrQueryParamsChange":return!S(n.url,e.url)||!Rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!G_(n,e)||!Rs(n.queryParams,e.queryParams);default:return!G_(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new zE(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Sh(n,e,u.component?p?p.children:null:t,r,i),v&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Z_(p.outlet.component,c))}else c&&Zc(e,p,i),i.canActivateChecks.push(new zE(r)),Sh(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),yr(u,(c,p)=>Zc(c,t.getContext(p),i)),i}function Zc(n,e,t){const r=Ch(n),i=n.value;yr(r,(u,c)=>{Zc(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Z_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Zp(n){return"function"==typeof n}function qE(n){return n instanceof Su||"EmptyError"===n?.name}const Yp=Symbol("INITIAL_VALUE");function Qp(){return ir(n=>Pc(n.map(e=>e.pipe(xl(1),dh(Yp)))).pipe((0,At.U)(e=>{for(const t of e)if(!0!==t){if(t===Yp)return Yp;if(!1===t||t instanceof fi)return t}return!0}),ys(e=>e!==Yp),xl(1)))}function ZE(n){return(0,Lo.z)((0,as.b)(e=>{if(Ml(e))throw Fu(0,e)}),(0,At.U)(e=>!0===e))}const LT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Q_(n,e,t,r,i){const u=QE(n,e,t);return u.matched?function YE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?St(i.map(c=>{const p=Th(c,n);return Fo(function VR(n){return n&&Zp(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(Qp(),ZE()):St(!0)}(r=DT(e,r),e,t).pipe((0,At.U)(c=>!0===c?u:{...LT})):St(u)}function QE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...LT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||lT)(t,n,e);if(!i)return{...LT};const u={};yr(i.posParams,(p,v)=>{u[v]=p.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Ah(n,e,t,r){if(t.length>0&&function Yc(n,e,t){return t.some(r=>xh(n,e,r)&&ca(r)!==Tn)}(n,t,r)){const u=new C(e,function VT(n,e,t,r){const i={};i[Tn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ca(u)!==Tn){const c=new C([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ca(u)]=c}return i}(n,e,r,new C(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function jR(n,e,t){return t.some(r=>xh(n,e,r))}(n,t,r)){const u=new C(n.segments,function FT(n,e,t,r,i){const u={};for(const c of r)if(xh(n,t,c)&&!i[ca(c)]){const p=new C([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,u[ca(c)]=p}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new C(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function xh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Xp(n,e,t,r){return!!(ca(n)===r||r!==Tn&&xh(e,t,n))&&("**"===n.path||QE(e,n,t).matched)}function UT(n,e,t){return 0===e.length&&!n.children[t]}const Nh=!1;class Qc{constructor(e){this.segmentGroup=e||null}}class Pl{constructor(e){this.urlTree=e}}function Mh(n){return Uc(new Qc(n))}function J_(n){return Uc(new Pl(n))}class Rh{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Ah(this.urlTree.root,[],[],this.config).segmentGroup,t=new C(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tn).pipe((0,At.U)(u=>this.createUrlTree(Ou(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ua(u=>{if(u instanceof Pl)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Qc?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tn).pipe((0,At.U)(i=>this.createUrlTree(Ou(i),e.queryParams,e.fragment))).pipe(ua(i=>{throw i instanceof Qc?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Nh)}createUrlTree(e,t,r){const i=L_(e);return new fi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new C([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,$n.D)(i).pipe(Ha(u=>{const c=r.children[u],p=K_(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,At.U)(v=>({segment:v,outlet:u})))}),Ru((u,c)=>(u[c.outlet]=c.segment,u),{}),hh())}expandSegment(e,t,r,i,u,c){return(0,$n.D)(r).pipe(Ha(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(ua(I=>{if(I instanceof Qc)return St(null);throw I}))),aa(p=>!!p),ua((p,v)=>{if(qE(p))return UT(t,i,u)?St(new C([],{})):Mh(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return Xp(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Mh(t):Mh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?J_(u):this.lineralizeSegments(r,u).pipe((0,Qi.z)(c=>{const p=new C(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:v,remainingSegments:I,positionalParamSegments:A}=QE(t,i,u);if(!p)return Mh(t);const M=this.applyRedirectCommands(v,i.redirectTo,A);return i.redirectTo.startsWith("/")?J_(M):this.lineralizeSegments(i,M).pipe((0,Qi.z)(P=>this.expandSegment(e,t,r,P.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=DT(r,e),r.loadChildren?(r._loadedRoutes?St({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,At.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new C(i,{})))):St(new C(i,{}))):Q_(t,r,i,e).pipe(ir(({matched:c,consumedSegments:p,remainingSegments:v})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Qi.z)(A=>{const M=A.injector??e,P=A.routes,{segmentGroup:$,slicedSegments:Q}=Ah(t,p,v,P),le=new C($.segments,$.children);if(0===Q.length&&le.hasChildren())return this.expandChildren(M,P,le).pipe((0,At.U)(Et=>new C(p,Et)));if(0===P.length&&0===Q.length)return St(new C(p,{}));const ye=ca(r)===u;return this.expandSegment(M,le,P,Q,ye?Tn:u,!0).pipe((0,At.U)(ht=>new C(p.concat(ht.segments),ht.children)))})):Mh(t)))}getChildConfig(e,t,r){return t.children?St({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?St({routes:t._loadedRoutes,injector:t._loadedInjector}):function PT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?St(!0):St(i.map(c=>{const p=Th(c,n);return Fo(function LR(n){return n&&Zp(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(Qp(),ZE())}(e,t,r).pipe((0,Qi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,as.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function HR(n){return Uc(Dh(Nh,3))}())):St({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return St(r);if(i.numberOfChildren>1||!i.children[Tn])return Uc(new f.vHH(4e3,Nh));i=i.children[Tn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new fi(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return yr(t.children,(p,v)=>{c[v]=this.createSegmentGroup(e,p,r,i)}),new C(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Nh);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class WR{}class $T{constructor(e,t,r,i,u,c,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.urlSerializer=p}recognize(){const e=Ah(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tn).pipe((0,At.U)(t=>{if(null===t)return null;const r=new qc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ks(r,t),u=new j_(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=ET(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,$n.D)(Object.keys(r.children)).pipe(Ha(i=>{const u=r.children[i],c=K_(t,i);return this.processSegmentGroup(e,c,u,i)}),Ru((i,u)=>i&&u?(i.push(...u),i):null),function oT(n,e=!1){return(0,zr.e)((t,r)=>{let i=0;t.subscribe((0,Jr.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),Mu(null),hh(),(0,At.U)(i=>{if(null===i)return null;const u=GT(i);return function qR(n){n.sort((e,t)=>e.value.outlet===Tn?-1:t.value.outlet===Tn?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,$n.D)(t).pipe(Ha(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),aa(c=>!!c),ua(c=>{if(qE(c))return UT(r,i,u)?St([]):St(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!Xp(t,r,i,u))return St(null);let c;if("**"===t.path){const p=i.length>0?Pp(i).parameters:{},v=Jc(r)+i.length;c=St({snapshot:new qc(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zT(t),ca(t),t.component??t._loadedComponent??null,t,WT(r),v,XE(t)),consumedSegments:[],remainingSegments:[]})}else c=Q_(r,t,i,e).pipe((0,At.U)(({matched:p,consumedSegments:v,remainingSegments:I,parameters:A})=>{if(!p)return null;const M=Jc(r)+v.length;return{snapshot:new qc(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zT(t),ca(t),t.component??t._loadedComponent??null,t,WT(r),M,XE(t)),consumedSegments:v,remainingSegments:I}}));return c.pipe(ir(p=>{if(null===p)return St(null);const{snapshot:v,consumedSegments:I,remainingSegments:A}=p;e=t._injector??e;const M=t._loadedInjector??e,P=function HT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:$,slicedSegments:Q}=Ah(r,I,A,P.filter(ye=>void 0===ye.redirectTo));if(0===Q.length&&$.hasChildren())return this.processChildren(M,P,$).pipe((0,At.U)(ye=>null===ye?null:[new ks(v,ye)]));if(0===P.length&&0===Q.length)return St([new ks(v,[])]);const le=ca(t)===u;return this.processSegment(M,P,$,Q,le?Tn:u).pipe((0,At.U)(ye=>null===ye?null:[new ks(v,ye)]))}))}}function NB(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function GT(n){const e=[],t=new Set;for(const r of n){if(!NB(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=GT(r.children);e.push(new ks(r.value,i))}return e.filter(r=>!t.has(r))}function WT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Jc(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function zT(n){return n.data||{}}function XE(n){return n.resolve||{}}function ey(n){return"string"==typeof n.title||null===n.title}function tw(n){return ir(e=>{const t=n(e);return t?(0,$n.D)(t).pipe((0,At.U)(()=>e)):St(e)})}const Oh=new f.OlP("ROUTES");let rw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return St(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fo(t.loadComponent()).pipe((0,At.U)(ZT),(0,as.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),$c(()=>{this.componentLoaders.delete(t)})),i=new AE(r,()=>new Vi.x).pipe(Op());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return St({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,At.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,I,A=!1;Array.isArray(p)?I=p:(v=p.create(t).injector,I=Wc(v.get(Oh,[],f.XFs.Self|f.XFs.Optional)));return{routes:I.map(xT),injector:v}}),$c(()=>{this.childrenLoaders.delete(r)})),c=new AE(u,()=>new Vi.x).pipe(Op());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Fo(t()).pipe((0,At.U)(ZT),(0,Qi.z)(i=>i instanceof f.YKP||Array.isArray(i)?St(i):(0,$n.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ZT(n){return function QR(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let iw=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Vi.x,this.configLoader=(0,f.f3M)(rw),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(W),this.rootContexts=(0,f.f3M)(Kp),this.navigationId=0,this.configLoader.onLoadEndListener=i=>this.events.next(new Wp(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new jE(i))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Qs({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ys(r=>0!==r.id),(0,At.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ir(r=>{let i=!1,u=!1;return St(r).pipe((0,as.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ir(c=>{const p=t.browserUrlTree.toString(),v=!t.navigated||c.extractedUrl.toString()!==p||p!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||v)&&t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return QT(c.source)&&(t.browserUrlTree=c.extractedUrl),St(c).pipe(ir(A=>{const M=this.transitions?.getValue();return this.events.next(new V_(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),M!==this.transitions?.getValue()?sa.E:Promise.resolve(A)}),function GR(n,e,t,r){return ir(i=>function BT(n,e,t,r,i){return new Rh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,At.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,as.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function KR(n,e,t,r,i){return(0,Qi.z)(u=>function zR(n,e,t,r,i,u,c="emptyOnly"){return new $T(n,e,t,r,i,c,u).recognize().pipe(ir(p=>null===p?function JE(n){return new Js.y(e=>e.error(n))}(new WR):St(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,At.U)(c=>({...u,targetSnapshot:c}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,as.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(P,A)}t.browserUrlTree=A.urlAfterRedirects}const M=new U_(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(M)}));if(v&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:M,extractedUrl:P,source:$,restoredState:Q,extras:le}=c,ye=new V_(M,this.urlSerializer.serialize(P),$,Q);this.events.next(ye);const ct=TR(P,t.rootComponentType).snapshot;return St(r={...c,targetSnapshot:ct,urlAfterRedirects:P,extras:{...le,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=c.rawUrl,c.resolve(null),sa.E}),(0,as.b)(c=>{const p=new B_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),(0,At.U)(c=>r={...c,guards:kR(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function AB(n,e){return(0,Qi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?St({...t,guardsResult:!0}):function Jp(n,e,t,r){return(0,$n.D)(n).pipe((0,Qi.z)(i=>function BR(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?St(u.map(p=>{const v=Kc(e)??i,I=Th(p,v);return Fo(function MT(n){return n&&Zp(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):v.runInContext(()=>I(n,e,t,r))).pipe(aa())})).pipe(Qp()):St(!0)}(i.component,i.route,t,e,r)),aa(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Qi.z)(p=>p&&function bi(n){return"boolean"==typeof n}(p)?function KE(n,e,t,r){return(0,$n.D)(e).pipe(Ha(i=>Fc(function kT(n,e){return null!==n&&e&&e(new CR(n)),St(!0)}(i.route.parent,r),function RT(n,e){return null!==n&&e&&e(new DR(n)),St(!0)}(i.route,r),function xB(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function OR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Nu(()=>St(c.guards.map(v=>{const I=Kc(c.node)??t,A=Th(v,I);return Fo(function NT(n){return n&&Zp(n.canActivateChild)}(A)?A.canActivateChild(r,n):I.runInContext(()=>A(r,n))).pipe(aa())})).pipe(Qp())));return St(u).pipe(Qp())}(n,i.path,t),function OT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return St(!0);const i=r.map(u=>Nu(()=>{const c=Kc(e)??t,p=Th(u,c);return Fo(function FR(n){return n&&Zp(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(aa())}));return St(i).pipe(Qp())}(n,i.route,t))),aa(i=>!0!==i,!0))}(r,u,n,e):St(p)),(0,At.U)(p=>({...t,guardsResult:p})))})}(this.environmentInjector,c=>this.events.next(c)),(0,as.b)(c=>{if(r.guardsResult=c.guardsResult,Ml(c.guardsResult))throw Fu(0,c.guardsResult);const p=new pT(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),ys(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3,t),!1)),tw(c=>{if(c.guards.canActivateChecks.length)return St(c).pipe((0,as.b)(p=>{const v=new UE(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}),ir(p=>{let v=!1;return St(p).pipe(function ZR(n,e){return(0,Qi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return St(t);let u=0;return(0,$n.D)(i).pipe(Ha(c=>function YR(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!ey(i)&&(u[Hc]=i.title),function qT(n,e,t,r){const i=function KT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return St({});const u={};return(0,$n.D)(i).pipe((0,Qi.z)(c=>function ew(n,e,t,r){const i=Kc(e)??r,u=Th(n,i);return Fo(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(aa(),(0,as.b)(p=>{u[c]=p}))),jc(1),function aT(n){return(0,At.U)(()=>n)}(u),ua(c=>qE(c)?sa.E:Uc(c)))}(u,n,e,r).pipe((0,At.U)(c=>(n._resolvedData=c,n.data=ET(n,t).resolve,i&&ey(i)&&(n.data[Hc]=i.title),null)))}(c.route,r,n,e)),(0,as.b)(()=>u++),jc(1),(0,Qi.z)(c=>u===i.length?St(t):sa.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,as.b)({next:()=>v=!0,complete:()=>{v||(t.restoreHistory(p),this.cancelNavigationTransition(p,"",2,t))}}))}),(0,as.b)(p=>{const v=new BE(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}))}),tw(c=>{const p=v=>{const I=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,as.b)(A=>{v.component=A}),(0,At.U)(()=>{})));for(const A of v.children)I.push(...p(A));return I};return Pc(p(c.targetSnapshot.root)).pipe(Mu(),xl(1))}),tw(()=>t.afterPreactivation()),(0,At.U)(c=>{const p=function AR(n,e,t){const r=qp(n,e._root,t?t._root:void 0);return new vT(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:p}}),(0,as.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new TB(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),(0,as.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new kl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),$c(()=>{i||u||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ua(c=>{if(u=!0,MR(c)){bT(c)||(t.navigated=!0,t.restoreHistory(r,!0));const p=new bh(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(p),bT(c)){const v=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||QT(r.source)};t.scheduleNavigation(v,"imperative",null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const p=new VE(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(p);try{r.resolve(t.errorHandler(c))}catch(v){r.reject(v)}}return sa.E}))}))}cancelNavigationTransition(t,r,i,u){const c=new bh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(c),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QT(n){return"imperative"!==n}let Xc=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Tn);return r}getResolvedTitleForRoute(t){return t.data[Hc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Vu)},providedIn:"root"}),n})(),Vu=(()=>{class n extends Xc{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(MB)},providedIn:"root"}),n})();class XR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let MB=(()=>{class n extends XR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tg=new f.OlP("",{providedIn:"root",factory:()=>({})});let kB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(JT)},providedIn:"root"}),n})(),JT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XT(n){throw n}function tk(n,e,t){return e.parse("/")}const eS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Uo(){const n=(0,f.f3M)(W),e=(0,f.f3M)(Kp),t=(0,f.f3M)(Ve),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),u=(0,f.f3M)(Oh,{optional:!0})??[],c=(0,f.f3M)(tg,{optional:!0})??{},p=new Ii(null,n,e,t,r,i,Wc(u));return function rk(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,p),p}let Ii=(()=>{class n{constructor(t,r,i,u,c,p,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=v,this.disposed=!1,this.currentPageId=0,this.isNgZoneEnabled=!1,this.errorHandler=XT,this.malformedUriErrorHandler=tk,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>St(void 0),this.urlHandlingStrategy=(0,f.f3M)(kB),this.routeReuseStrategy=(0,f.f3M)(JR),this.titleStrategy=(0,f.f3M)(Xc),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=(0,f.f3M)(iw),this.console=c.get(f.c2e);const I=c.get(f.R0b);this.isNgZoneEnabled=I instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=new fi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=TR(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(A=>{this.lastSuccessfulId=A.id,this.currentPageId=A.targetPageId},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(t.state){const p={...t.state};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(xT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:v}=r,I=i||this.routerState.root,A=v?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),wR(I,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ml(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function tS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...eS}:!1===r?{...nk}:r,Ml(t))return mh(this.currentUrlTree,t,i);const u=this.parseUrl(t);return mh(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let p,v,I,A;return c?(p=c.resolve,v=c.reject,I=c.promise):I=new Promise((M,P)=>{p=M,v=P}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:p,reject:v,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return Uo()},providedIn:"root"}),n})(),ed=(()=>{class n{constructor(t,r,i,u,c,p){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.locationStrategy=p,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Vi.x;const v=c.nativeElement.tagName;this.isAnchorElement="A"===v||"AREA"===v,this.isAnchorElement?this.subscription=t.events.subscribe(I=>{I instanceof kl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ii),f.Y36(Lu),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(ae))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class nS{}let ak=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ys(t=>t instanceof kl),Ha(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,p=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,$n.D)(i).pipe((0,$a.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):St(null);const u=i.pipe((0,Qi.z)(c=>null===c?St(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,$n.D)([u,c]).pipe((0,$a.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ii),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(nS),f.LFG(rw))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sw=new f.OlP("");let pn=(()=>{class n{constructor(t,r,i,u,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof V_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _T&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _T(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ph(n,e){return{\u0275kind:n,\u0275providers:e}}function iS(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Ii),i=n.get(sS);1===n.get(oS)&&r.initialNavigation(),n.get(lS,null,f.XFs.Optional)?.setUpPreloading(),n.get(sw,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const sS=new f.OlP("",{factory:()=>new Vi.x}),oS=new f.OlP("",{providedIn:"root",factory:()=>1});const lS=new f.OlP("");function uw(n){return Ph(0,[{provide:lS,useExisting:ak},{provide:nS,useExisting:n}])}const ck=new f.OlP("ROUTER_FORROOT_GUARD"),LB=[Ve,{provide:W,useClass:ve},{provide:Ii,useFactory:Uo},Kp,{provide:Lu,useFactory:function ow(n){return n.routerState.root},deps:[Ii]},rw,[]];function dk(){return new f.PXZ("Router",Ii)}let dS=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[LB,[],{provide:Oh,multi:!0,useValue:t},{provide:ck,useFactory:fk,deps:[[Ii,new f.FiY,new f.tp0]]},{provide:tg,useValue:r||{}},r?.useHash?{provide:ae,useClass:He}:{provide:ae,useClass:Fe},{provide:sw,useFactory:()=>{const n=(0,f.f3M)(Ec),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(tg),r=(0,f.f3M)(iw),i=(0,f.f3M)(W);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pn(i,r,n,e,t)}},r?.preloadingStrategy?uw(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:dk},r?.initialNavigation?hS(r):[],[{provide:rg,useFactory:iS},{provide:f.tb,multi:!0,useExisting:rg}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Oh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ck,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[W_]}),n})();function fk(n){return"guarded"}function hS(n){return["disabled"===n.initialNavigation?Ph(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ii);return()=>{e.setUpLocationChangeListener()}}},{provide:oS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ph(2,[{provide:oS,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(te,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const u=e.get(Ii),c=e.get(sS);(function r(i){e.get(Ii).events.pipe(ys(c=>c instanceof kl||c instanceof bh||c instanceof VE),(0,At.U)(c=>c instanceof kl||c instanceof bh&&(0===c.code||1===c.code)&&null),ys(c=>null!==c),xl(1)).subscribe(()=>{i()})})(()=>{i(!0)}),u.afterPreactivation=()=>(i(!0),c.closed?St(void 0):c),u.initialNavigation()}))}}]).\u0275providers:[]]}const rg=new f.OlP("");let fS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),rd=(()=>{class n extends fS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Wa=new f.OlP("NgValueAccessor"),yk={provide:Wa,useExisting:(0,f.Gpc)(()=>Ll),multi:!0},gS=new f.OlP("CompositionEventMode");let Ll=(()=>{class n extends fS{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pS(){const n=he()?he().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(gS,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([yk]),f.qOj]}),n})();const Os=new f.OlP("NgValidators"),co=new f.OlP("NgAsyncValidators");function vS(n){return function za(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function sd(n){return null}function dw(n){return null!=n}function ry(n){return(0,f.QGY)(n)?(0,$n.D)(n):n}function iy(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sy(n,e){return e.map(t=>t(n))}function oy(n){return n.map(e=>function ES(n){return!n.validate}(e)?e:t=>e.validate(t))}function hw(n){return null!=n?function wS(n){if(!n)return null;const e=n.filter(dw);return 0==e.length?null:function(t){return iy(sy(t,e))}}(oy(n)):null}function pw(n){return null!=n?function fw(n){if(!n)return null;const e=n.filter(dw);return 0==e.length?null:function(t){return function mk(...n){const e=(0,Po.jO)(n),{args:t,keys:r}=Ba(n),i=new Js.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let v=c,I=c;for(let A=0;A<c;A++){let M=!1;(0,xu.Xf)(t[A]).subscribe((0,Jr.x)(u,P=>{M||(M=!0,I--),p[A]=P},()=>v--,void 0,()=>{(!v||!M)&&(I||u.next(r?x_(r,p):p),u.complete())}))}});return e?i.pipe(ch(e)):i}(sy(t,e).map(ry)).pipe((0,At.U)(iy))}}(oy(n)):null}function gw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mw(n){return n._rawValidators}function bS(n){return n._rawAsyncValidators}function _w(n){return n?Array.isArray(n)?n:[n]:[]}function vs(n,e){return Array.isArray(n)?n.includes(e):n===e}function yw(n,e){const t=_w(e);return _w(n).forEach(i=>{vs(t,i)||t.push(i)}),t}function IS(n,e){return _w(e).filter(t=>!vs(n,t))}class vk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class us extends vk{get formDirective(){return null}get path(){return null}}class Uu extends vk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class CS{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sg=(()=>{class n extends CS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Uu,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),ay=(()=>{class n extends CS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(us,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const Fl="VALID",Uh="INVALID",ju="PENDING",uy="DISABLED";function og(n){return(ag(n)?n.validators:n)||null}function ly(n,e){return(ag(e)?e.asyncValidators:n)||null}function ag(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Iw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function cy(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class Bo{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fl}get invalid(){return this.status===Uh}get pending(){return this.status==ju}get disabled(){return this.status===uy}get enabled(){return this.status!==uy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IS(e,this._rawAsyncValidators))}hasValidator(e){return vs(this._rawValidators,e)}hasAsyncValidator(e){return vs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ju,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uy,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fl||this.status===ju)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uy:Fl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ju,this._hasOwnPendingAsyncValidator=!0;const t=ry(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?uy:this.errors?Uh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ju)?ju:this._anyControlsHaveStatus(Uh)?Uh:Fl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ag(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function zB(n){return Array.isArray(n)?hw(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function SS(n){return Array.isArray(n)?pw(n):n||null}(this._rawAsyncValidators)}}class Vl extends Bo{constructor(e,t,r){super(og(t),ly(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){cy(this,0,e),Object.keys(e).forEach(r=>{Iw(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class AS extends Vl{}const od=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>hy}),hy="always";function fy(n,e){return[...e.path,n]}function $u(n,e,t=hy){Tw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Ak(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xS(n,e)})}(n,e),function Nk(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Sk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function py(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Dw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Tw(n,e){const t=mw(n);null!==e.validator?n.setValidators(gw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=bS(n);null!==e.asyncValidator?n.setAsyncValidators(gw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Dw(e._rawValidators,i),Dw(e._rawAsyncValidators,i)}function gy(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=mw(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=bS(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Dw(e._rawValidators,r),Dw(e._rawAsyncValidators,r),t}function xS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Sw(n,e){Tw(n,e)}function Mw(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function NS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Rw(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Ll?t=u:function Mk(n){return Object.getPrototypeOf(n.constructor)===rd}(u)?r=u:i=u}),i||r||t||null}const kk={provide:us,useExisting:(0,f.Gpc)(()=>ug)},my=(()=>Promise.resolve())();let ug=(()=>{class n extends us{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new Vl({},hw(t),pw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){my.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),$u(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){my.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){my.then(()=>{const r=this._findContainer(t.path),i=new Vl({});Sw(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){my.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){my.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,NS(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Os,10),f.Y36(co,10),f.Y36(od,8))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([kk]),f.qOj]}),n})();function lg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ul(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const cg=class extends Bo{constructor(e=null,t,r){super(og(t),ly(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ag(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Ul(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Ul(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let RS=(()=>{class n extends us{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return fy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const vy={provide:Uu,useExisting:(0,f.Gpc)(()=>dg)},ho=(()=>Promise.resolve())();let dg=(()=>{class n extends Uu{constructor(t,r,i,u,c,p){super(),this._changeDetectorRef=c,this.callSetDisabledState=p,this.control=new cg,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Rw(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Mw(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$u(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ho.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);ho.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?fy(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(us,9),f.Y36(Os,10),f.Y36(co,10),f.Y36(Wa,10),f.Y36(f.sBO,8),f.Y36(od,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([vy]),f.qOj,f.TTD]}),n})(),ad=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const fg=new f.OlP("NgModelWithFormControlWarning"),OS={provide:Uu,useExisting:(0,f.Gpc)(()=>Ey)};let Ey=(()=>{class n extends Uu{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=u,this.callSetDisabledState=c,this.update=new f.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=Rw(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&py(r,this,!1),$u(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Mw(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&py(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Os,10),f.Y36(co,10),f.Y36(Wa,10),f.Y36(fg,8),f.Y36(od,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[f._Bn([OS]),f.qOj,f.TTD]}),n})();const PS={provide:us,useExisting:(0,f.Gpc)(()=>Gh)};let Gh=(()=>{class n extends us{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return $u(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){py(t.control||null,t,!1),function MS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,NS(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(py(r||null,t),(n=>n instanceof cg)(i)&&($u(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Sw(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Aw(n,e){return gy(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tw(this.form,this),this._oldForm&&gy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Os,10),f.Y36(co,10),f.Y36(od,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([PS]),f.qOj,f.TTD]}),n})();const LS={provide:us,useExisting:(0,f.Gpc)(()=>pg)};let pg=(()=>{class n extends RS{constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){VS(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(us,13),f.Y36(Os,10),f.Y36(co,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[f._Bn([LS]),f.qOj]}),n})();const FS={provide:us,useExisting:(0,f.Gpc)(()=>wy)};let wy=(()=>{class n extends us{constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return fy(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){VS(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(us,13),f.Y36(Os,10),f.Y36(co,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[f._Bn([FS]),f.qOj]}),n})();function VS(n){return!(n instanceof pg||n instanceof Gh||n instanceof wy)}const US={provide:Uu,useExisting:(0,f.Gpc)(()=>by)};let by=(()=>{class n extends Uu{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Rw(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Mw(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return fy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(us,13),f.Y36(Os,10),f.Y36(co,10),f.Y36(Wa,10),f.Y36(fg,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([US]),f.qOj,f.TTD]}),n})();const Pk={provide:Wa,useExisting:(0,f.Gpc)(()=>Cy),multi:!0};function Iy(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Cy=(()=>{class n extends rd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Iy(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ow(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([Pk]),f.qOj]}),n})(),gg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Iy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Cy,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Dy={provide:Wa,useExisting:(0,f.Gpc)(()=>Wh),multi:!0};function Ty(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Wh=(()=>{class n extends rd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let p=0;p<c.length;p++){const I=this._getOptionValue(c[p].value);i.push(I)}}else{const c=r.options;for(let p=0;p<c.length;p++){const v=c[p];if(v.selected){const I=this._getOptionValue(v.value);i.push(I)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Lk(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([Dy]),f.qOj]}),n})(),Lw=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Ty(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Ty(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Wh,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),jl=(()=>{class n{constructor(){this._validator=sd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):sd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const HS={provide:Os,useExisting:(0,f.Gpc)(()=>zh),multi:!0};let zh=(()=>{class n extends jl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>vS}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([HS]),f.qOj]}),n})(),jw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ld]}),n})(),qS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:od,useValue:t.callSetDisabledState??hy}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[jw]}),n})(),mg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fg,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:od,useValue:t.callSetDisabledState??hy}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[jw]}),n})();class Gu extends Bo{constructor(e,t,r){super(og(t),ly(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){cy(this,0,e),e.forEach((r,i)=>{Iw(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function My(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let $l=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return My(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Vl(i,u)}record(t,r=null){const i=this._reduceControls(t);return new AS(i,r)}control(t,r,i){let u={};return this.useNonNullable?(My(r)?u=r:(u.validators=r,u.asyncValidators=i),new cg(t,{...u,nonNullable:!0})):new cg(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new Gu(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof cg||t instanceof Bo?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:mg}),n})();var Sr=U(2011),$k=U(655),dd=U(5363),Hk=U(6063);class YS extends Vi.x{constructor(e=1/0,t=1/0,r=Hk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)p=v;p&&r.splice(0,p+1)}}}var QS=U(3099);function ii(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,QS.B)({connector:()=>new YS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var Fn=U(880),Gk=U(7982),$w=U(6451);function Hw(n,e){return(0,Vc.m)(e)?ir(()=>n,e):ir(()=>n)}var Gw=U(9468);U(5867);var Oe=U(5861),da=U(9681),qu=U(4859),K=U(2090),ha=U(1877);const _g=new Map,Zh={activated:!1,tokenObservers:[]},Kk={initialized:!1,enabled:!1};function Ji(n){return _g.get(n)||Object.assign({},Zh)}function yg(){return Kk}class Py{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Oe.Z)(function*(){t.stop();try{t.pending=new K.BH,yield function Kw(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new K.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ws=new K.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Zw(n){if(!Ji(n).activated)throw ws.create("use-before-activation",{appName:n.name})}function Fy(n,e){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,Oe.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const $=yield c.getHeartbeatsHeader();$&&(u["X-Firebase-Client"]=$)}const p={method:"POST",body:JSON.stringify(e),headers:u};let v,I;try{v=yield fetch(n,p)}catch($){throw ws.create("fetch-network-error",{originalErrorMessage:null===(r=$)||void 0===r?void 0:r.message})}if(200!==v.status)throw ws.create("fetch-status-error",{httpStatus:v.status});try{I=yield v.json()}catch($){throw ws.create("fetch-parse-error",{originalErrorMessage:null===(i=$)||void 0===i?void 0:i.message})}const A=I.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const M=1e3*Number(A[1]),P=Date.now();return{token:I.token,expireTimeMillis:P+M,issuedAtTimeMillis:P}})).apply(this,arguments)}function Xk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const wg="firebase-app-check-store";let Vy=null;function rA(){return Vy||(Vy=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(ws.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(wg,{keyPath:"compositeKey"})}}catch(r){e(ws.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Vy)}function Qw(){return(Qw=(0,Oe.Z)(function*(n,e){const r=(yield rA()).transaction(wg,"readwrite"),u=r.objectStore(wg).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var I;p(ws.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const Yh=new ha.Yd("@firebase/app-check");function By(n,e){return(0,K.hl)()?function rO(n,e){return function iA(n,e){return Qw.apply(this,arguments)}(function Xw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function eb(){return yg().enabled}function tb(){return $y.apply(this,arguments)}function $y(){return($y=(0,Oe.Z)(function*(){const n=yg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hd={error:"UNKNOWN_ERROR"};function oO(n){return K.US.encodeString(JSON.stringify(n),!1)}function Hy(n){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,Oe.Z)(function*(n,e=!1){const t=n.app;Zw(t);const r=Ji(t);let u,i=r.token;if(i&&!Ig(i)&&(r.token=void 0,i=void 0),!i){const v=yield r.cachedTokenPromise;v&&(Ig(v)?i=v:yield By(t,void 0))}if(!e&&i&&Ig(i))return{token:i.token};let p,c=!1;if(eb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Fy(Xk(t,yield tb()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const v=yield r.exchangeTokenPromise;return yield By(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Ji(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Yh.warn(v.message):Yh.error(v),u=v}return i?u?p=Ig(i)?{token:i.token,internalError:u}:Yt(u):(p={token:i.token},r.token=i,yield By(t,i)):p=Yt(u),c&&nb(t,p),p})).apply(this,arguments)}function bg(n,e){const t=Ji(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function aO(n){const{app:e}=n,t=Ji(e);let r=t.tokenRefresher;r||(r=function cA(n){const{app:e}=n;return new Py((0,Oe.Z)(function*(){let r;if(r=Ji(e).token?yield Hy(n,!0):yield Hy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ji(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nb(n,e){const t=Ji(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ig(n){return n.expireTimeMillis-Date.now()>0}function Yt(n){return{token:oO(hd),error:n}}class uO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ji(this.app);for(const t of e)bg(this.app,t.next);return Promise.resolve()}}const Xh="app-check-internal";!function Dg(){(0,da._registerComponent)(new qu.wA("app-check",n=>function lO(n,e){return new uO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Xh).initialize()})),(0,da._registerComponent)(new qu.wA(Xh,n=>function cO(n){return{getToken:e=>Hy(n,e),addTokenListener:e=>function lA(n,e,t,r){const{app:i}=n,u=Ji(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Ig(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),aO(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>aO(n))}(n,"INTERNAL",e),removeTokenListener:e=>bg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,da.registerVersion)("@firebase/app-check","0.5.17")}();class Tg{constructor(){return(0,Fn.vb)("app-check")}}typeof window<"u"&&window;var jt=U(127);const Sg=new f.OlP("angularfire2.auth.use-emulator"),fd=new f.OlP("angularfire2.auth.settings"),ab=new f.OlP("angularfire2.auth.tenant-id"),ub=new f.OlP("angularfire2.auth.langugage-code"),lb=new f.OlP("angularfire2.auth.use-device-language"),cb=new f.OlP("angularfire.auth.persistence"),db=(n,e,t,r,i,u,c,p)=>(0,Sr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,u&&v.useDeviceLanguage(),c)for(const[I,A]of Object.entries(c))v.settings[I]=A;return p&&v.setPersistence(p),v},[t,r,i,u,c,p]);let Xs=(()=>{class n{constructor(t,r,i,u,c,p,v,I,A,M,P,$){const Q=new Vi.x,le=St(void 0).pipe((0,dd.Q)(c.outsideAngular),ir(()=>u.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,At.U)(()=>(0,Sr.on)(t,u,r)),(0,At.U)(ye=>db(ye,u,p,I,A,M,v,P)),ii({bufferSize:1,refCount:!1}));if(mu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=St(null);else{le.pipe(aa()).subscribe();const ct=le.pipe(ir(_t=>_t.getRedirectResult().then(pt=>pt,()=>null)),Fn.iC,ii({bufferSize:1,refCount:!1})),ht=le.pipe(ir(_t=>new Js.y(pt=>({unsubscribe:u.runOutsideAngular(()=>_t.onAuthStateChanged(yt=>pt.next(yt),yt=>pt.error(yt),()=>pt.complete()))})))),Et=le.pipe(ir(_t=>new Js.y(pt=>({unsubscribe:u.runOutsideAngular(()=>_t.onIdTokenChanged(yt=>pt.next(yt),yt=>pt.error(yt),()=>pt.complete()))}))));this.authState=ct.pipe(Hw(ht),(0,Gw.R)(c.outsideAngular),(0,dd.Q)(c.insideAngular)),this.user=ct.pipe(Hw(Et),(0,Gw.R)(c.outsideAngular),(0,dd.Q)(c.insideAngular)),this.idToken=this.user.pipe(ir(_t=>_t?(0,$n.D)(_t.getIdToken()):St(null))),this.idTokenResult=this.user.pipe(ir(_t=>_t?(0,$n.D)(_t.getIdTokenResult()):St(null))),this.credential=(0,$w.T)(ct,Q,this.authState.pipe(ys(_t=>!_t))).pipe((0,At.U)(_t=>_t?.user?_t:null),(0,Gw.R)(c.outsideAngular),(0,dd.Q)(c.insideAngular))}return(0,Sr.pX)(this,le,u,{spy:{apply:(ye,ct,ht)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&ht.then(Et=>Q.next(Et))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sr.Dh),f.LFG(Sr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(Sg,8),f.LFG(fd,8),f.LFG(ab,8),f.LFG(ub,8),f.LFG(lb,8),f.LFG(cb,8),f.LFG(Tg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CO=(()=>{class n{constructor(){jt.Z.registerVersion("angularfire",Fn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Xs]}),n})();function pd(n,e=Au.y){return n=n??TO,(0,zr.e)((t,r)=>{let i,u=!0;t.subscribe((0,Jr.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}function TO(n,e){return n===e}function Ag(){return(0,zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Jr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}const IA="firebase_screen_id",pb="outlet",ef="screen_class",DA="screen_name";let VO=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const gb={},mb=n=>{const e=[n[ef],n[pb]].join("#");if(gb.hasOwnProperty(e))return gb[e];{const t=VO++;return gb[e]=t,t}},$O=new f.OlP("angularfire2.analytics.analyticsCollectionEnabled"),m3=new f.OlP("angularfire2.analytics.appVersion"),NA=new f.OlP("angularfire2.analytics.appName"),yb=new f.OlP("angularfire2.analytics.debugMode"),HO=new f.OlP("angularfire2.analytics.config"),Mg="dataLayer";let tf=(()=>{class n{constructor(t,r,i,u,c,p,v,I,A){if(this.analyticsInitialized=new Promise(()=>{}),function gl(n){return n===gu}(v)){window[Mg]=window[Mg]||[];const P=(...le)=>"config"===le[0]&&"firebase"===le[2].origin&&(this.measurementId=le[1],!0),$=le=>{window.gtag=(...ye)=>{le&&le(...ye),"event"===ye[0]&&ye[2].send_to===this.measurementId&&(u&&(ye[2].app_name=u),i&&(ye[2].app_version=i)),c&&typeof console<"u"&&console.info(...ye),function(...ct){window[Mg].push(arguments)}(...ye)}};window[Mg].some(P)?(this.analyticsInitialized=Promise.resolve(),$()):this.analyticsInitialized=new Promise(le=>{$((...ye)=>{P(...ye)&&le()})}),p&&this.updateConfig(p),c&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const M=St(void 0).pipe((0,dd.Q)(A.outsideAngular),ir(Gk.Gb),ir(P=>P?I.runOutsideAngular(()=>U.e(643).then(U.bind(U,8643))):sa.E),(0,At.U)(()=>(0,Sr.cc)("analytics","AngularFireAnalytics",t.name,()=>{const P=t.analytics();return!1===r&&P.setAnalyticsCollectionEnabled(!1),P},[t,r,p,c])),ii({bufferSize:1,refCount:!1}));return(0,Sr.pX)(this,M,I)}updateConfig(t){return(0,$k.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sr.Ot),f.LFG($O,8),f.LFG(m3,8),f.LFG(NA,8),f.LFG(yb,8),f.LFG(HO,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zy=(()=>{class n{constructor(t,r,i,u){if(this.disposables=[],jt.Z.registerVersion("angularfire",Fn.q4.full,"compat-user-tracking"),mu(r))this.initialized=Promise.resolve();else{let c;this.initialized=u.runOutsideAngular(()=>new Promise(p=>c=p)),this.disposables=[i.authState.subscribe(p=>{t.setUserId(p?.uid),c()}),i.credential.subscribe(p=>{if(p){const v=p.user.isAnonymous?"anonymous":p.additionalUserInfo.providerId;p.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:v}),t.logEvent("login",{method:v})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(tf),f.LFG(f.Lbi),f.LFG(Xs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),bb=(()=>{class n{constructor(t,r,i,u,c,p){if(jt.Z.registerVersion("angularfire",Fn.q4.full,"compat-screen-tracking"),!r||!t)return this;c.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(ys(i=>i instanceof mT)).pipe(ir(i=>{var u;const p=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,$=>$.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===u?void 0:u.toString())||"",v=n.routerState.root.children.map($=>$).find($=>$.outlet===i.snapshot.outlet);if(!v)return St(null);let I=v;for(;I.firstChild;)I=I.firstChild;const A=I.pathFromRoot.map($=>{var Q;return null===(Q=$.routeConfig)||void 0===Q?void 0:Q.path}).filter($=>$).join("/")||"/",M={[DA]:A,page_path:`/${p}`,firebase_event_origin:"auto",firebase_screen:A,[pb]:i.snapshot.outlet};e&&(M.page_title=e.getTitle());let P=v.component;if(P){if(P===W_){let $=i.snapshot;for(;$.firstChild;)$=$.firstChild;P=$.component}}else P=i.snapshot.component;if("string"==typeof P)return St(Object.assign(Object.assign({},M),{[ef]:P}));if(P){const $=t.resolveComponentFactory(P);return St(Object.assign(Object.assign({},M),{[ef]:$.selector}))}return St(null)}),ys(i=>!!i),(0,At.U)(i=>Object.assign({firebase_screen_class:i[ef],[IA]:mb(i)},i)),function DO(n,e,t,r){return(0,zr.e)((i,u)=>{let c;e&&"function"!=typeof e?({duration:t,element:c,connector:r}=e):c=e;const p=new Map,v=Q=>{p.forEach(Q),Q(u)},I=Q=>v(le=>le.error(Q));let A=0,M=!1;const P=new Jr.Q(u,Q=>{try{const le=n(Q);let ye=p.get(le);if(!ye){p.set(le,ye=r?r():new Vi.x);const ct=function $(Q,le){const ye=new Js.y(ct=>{A++;const ht=le.subscribe(ct);return()=>{ht.unsubscribe(),0==--A&&M&&P.unsubscribe()}});return ye.key=Q,ye}(le,ye);if(u.next(ct),t){const ht=(0,Jr.x)(ye,()=>{ye.complete(),ht?.unsubscribe()},void 0,void 0,()=>p.delete(le));P.add((0,xu.Xf)(t(ct)).subscribe(ht))}}ye.next(c?c(Q):Q)}catch(le){I(le)}},()=>v(Q=>Q.complete()),I,()=>p.clear(),()=>(M=!0,0===A));i.subscribe(P)})}(i=>i[pb]),(0,Qi.z)(i=>i.pipe(pd((u,c)=>JSON.stringify(u)===JSON.stringify(c)),dh(void 0),Ag(),(0,At.U)(([u,c])=>u?Object.assign({firebase_previous_class:u[ef],firebase_previous_screen:u[DA],firebase_previous_id:u[IA]},c):c)))))(r,i,u).pipe(ir(v=>(0,$k.mG)(this,void 0,void 0,function*(){return p&&(yield p.initialized),yield t.logEvent("screen_view",v)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(tf),f.LFG(Ii,8),f.LFG(Mp,8),f.LFG(f._Vd),f.LFG(f.R0b),f.LFG(Zy,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),zO=(()=>{class n{constructor(t,r,i){jt.Z.registerVersion("angularfire",Fn.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(tf),f.LFG(bb,8),f.LFG(Zy,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tf]}),n})();var Ib=U(4986),_3=U(5032);U(5881);var KO=U(3942);const OA="@firebase/database",PA="0.13.10";let Yy="";function LA(n){Yy=n}class FA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,K.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,K.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ZO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,K.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FA(e)}}catch{}return new ZO},gd=VA("localStorage"),Cb=VA("sessionStorage"),nf=new ha.Yd("@firebase/database"),UA=function(){let n=1;return function(){return n++}}(),BA=function(n){const e=(0,K.dS)(n),t=new K.gQ;t.update(e);const r=t.digest();return K.US.encodeByteArray(r)},Ku=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ku.apply(null,r):e+="object"==typeof r?(0,K.Wl)(r):r,e+=" "}return e};let Gl=null,Db=!0;const Tb=function(n,e){(0,K.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(nf.logLevel=ha.in.VERBOSE,Gl=nf.log.bind(nf),e&&Cb.set("logging_enabled",!0)):"function"==typeof n?Gl=n:(Gl=null,Cb.remove("logging_enabled"))},Ui=function(...n){if(!0===Db&&(Db=!1,null===Gl&&!0===Cb.get("logging_enabled")&&Tb(!0)),Gl){const e=Ku.apply(null,n);Gl(e)}},rf=function(n){return function(...e){Ui(n,...e)}},Qy=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ku(...n);nf.error(e)},Za=function(...n){const e=`FIREBASE FATAL ERROR: ${Ku(...n)}`;throw nf.error(e),new Error(e)},Ps=function(...n){const e="FIREBASE WARNING: "+Ku(...n);nf.warn(e)},Rg=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zu="[MIN_NAME]",Ya="[MAX_NAME]",fa=function(n,e){if(n===e)return 0;if(n===Zu||e===Ya)return-1;if(e===Zu||n===Ya)return 1;{const t=Xy(n),r=Xy(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},QO=function(n,e){return n===e?0:n<e?-1:1},md=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,K.Wl)(e))},jo=function(n){if("object"!=typeof n||null===n)return(0,K.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,K.Wl)(e[r]),t+=":",t+=jo(n[e[r]]);return t+="}",t},$A=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sf=function(n){(0,K.hu)(!Rg(n),"Invalid JSON number");const r=1023;let i,u,c,p,v;0===n?(u=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const I=[];for(v=52;v;v-=1)I.push(c%2?1:0),c=Math.floor(c/2);for(v=11;v;v-=1)I.push(u%2?1:0),u=Math.floor(u/2);I.push(i?1:0),I.reverse();const A=I.join("");let M="";for(v=0;v<64;v+=8){let P=parseInt(A.substr(v,8),2).toString(16);1===P.length&&(P="0"+P),M+=P}return M.toLowerCase()},Jy=new RegExp("^-?(0*)\\d{1,10}$"),kg=-2147483648,Sb=2147483647,Xy=function(n){if(Jy.test(n)){const e=Number(n);if(e>=kg&&e<=Sb)return e}return null},_d=function(n){try{n()}catch(e){setTimeout(()=>{throw Ps("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},yd=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class GA{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ps(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tP{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ps(e)}}let Og=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const rv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qA="websocket",Mb="long_polling";class Pg{constructor(e,t,r,i,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Rb(n,e,t){let r;if((0,K.hu)("string"==typeof e,"typeof type must == string"),(0,K.hu)("object"==typeof t,"typeof params must == object"),e===qA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Mb)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function KA(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ci(t,(u,c)=>{i.push(u+"="+c)}),r+i.join("&")}class ZA{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,K.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,K.p$)(this.counters_)}}const iv={},kb={};function sv(n){const e=n.toString();return iv[e]||(iv[e]=new ZA),iv[e]}class nP{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&_d(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Wl{constructor(e,t,r,i,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rf(e),this.stats_=sv(t),this.urlFn=v=>(this.appCheckToken&&(v.ac=this.appCheckToken),Rb(t,Mb,v))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,K.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fg((...u)=>{const[c,p,v,I,A]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=v;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&rv.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wl.forceAllow_=!0}static forceDisallow(){Wl.forceDisallow_=!0}static isAvailable(){return!((0,K.Yr)()||!Wl.forceAllow_&&(Wl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,K.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,K.h$)(t),i=$A(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,K.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,K.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Fg{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,K.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=UA(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Fg.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Ui("frame writing exception"),p.stack&&Ui(p.stack),Ui(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ui("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,K.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ui("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let vd=null;typeof MozWebSocket<"u"?vd=MozWebSocket:typeof WebSocket<"u"&&(vd=WebSocket);let zl=(()=>{class n{constructor(t,r,i,u,c,p,v){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rf(this.connId),this.stats_=sv(r),this.connURL=n.connectionURL_(r,p,v,u,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u,c){const p={v:"5"};return!(0,K.Yr)()&&typeof location<"u"&&location.hostname&&rv.test(location.hostname)&&(p.r="f"),r&&(p.s=r),i&&(p.ls=i),u&&(p.ac=u),c&&(p.p=c),Rb(t,qA,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gd.set("previous_websocket_failure",!0);try{let i;if((0,K.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Yy}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(i.proxy={origin:p})}this.mySock=new vd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==vd&&!n.forceDisallow_}static previouslyFailed(){return gd.isInMemoryStorage||!0===gd.get("previous_websocket_failure")}markConnectionHealthy(){gd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,K.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,K.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,K.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$A(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),uP=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Wl,zl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zl&&zl.isAvailable();let i=r&&!zl.previouslyFailed();if(t.webSocketOnly&&(r||Ps("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zl];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Vb{constructor(e,t,r,i,u,c,p,v,I,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=v,this.onKill_=I,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rf("c:"+this.id+":"),this.transportManager_=new uP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=md("t",e),r=md("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=md("t",e),r=md("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=md("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Qy("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ps("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),yd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class h1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Ub{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,K.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,K.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Vg extends Ub{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,K.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vg}getInitialEvent(e){return(0,K.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class sr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function er(){return new sr("")}function Sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Yu(n){return n.pieces_.length-n.pieceNum_}function vr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new sr(n.pieces_,e)}function av(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ug(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new sr(e,0)}function Vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof sr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new sr(t,0)}function kn(n){return n.pieceNum_>=n.pieces_.length}function eo(n,e){const t=Sn(n),r=Sn(e);if(null===t)return e;if(t===r)return eo(vr(n),vr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function E3(n,e){const t=Ug(n,0),r=Ug(e,0);for(let i=0;i<t.length&&i<r.length;i++){const u=fa(t[i],r[i]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function g1(n,e){if(Yu(n)!==Yu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function pa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Yu(n)>Yu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class w3{constructor(e,t){this.errorPrefix_=t,this.parts_=Ug(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,K.ug)(this.parts_[r]);Bg(this)}}function Bg(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+lf(n))}function lf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class uv extends Ub{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new uv}getInitialEvent(e){return(0,K.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ql=1e3;let lv,Kl=(()=>{class n extends h1{constructor(t,r,i,u,c,p,v,I){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=v,this.authOverride_=I,this.id=n.nextPersistentConnectionId_++,this.log_=rf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ql,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,I&&!(0,K.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uv.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Vg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,K.Wl)(c)),(0,K.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new K.BH,u={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:p=>{const v=p.d;"ok"===p.s?r.resolve(v):r.reject(v)}};return this.outstandingGets_.push(u),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,K.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,K.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const v={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,v),this.connected_&&this.sendListen_(v)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,v=>{const I=v.d,A=v.s;n.warnOnListenWarnings_(I,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",v),"ok"!==A&&this.removeListen_(i,u),t.onComplete&&t.onComplete(A,I))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,K.r3)(t,"w")){const i=(0,K.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ps(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,K.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,K.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,K.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=i,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,K.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Qy("Unrecognized action received from server: "+(0,K.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,K.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ql),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Oe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let v=!1,I=null;const A=function(){I?I.close():(v=!0,u())};t.realtime_={close:A,sendRequest:function($){(0,K.hu)(I,"sendRequest call when we're not connected not allowed."),I.sendRequest($)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,Q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);v?Ui("getToken() completed but was canceled"):(Ui("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=Q&&Q.token,I=new Vb(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,le=>{Ps(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch($){t.log_("Failed to get token: "+$),v||(t.repoInfo_.nodeAdmin&&Ps($),A())}}})()}interrupt(t){Ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,K.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>jo(c)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new sr(t).toString();let u;if(this.listens.has(i)){const c=this.listens.get(i);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){Ui("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ui("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,K.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Yy.replace(/\./g,"-")]=1,(0,K.uI)()?t["framework.cordova"]=1:(0,K.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Vg.getInstance().currentlyOnline();return(0,K.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Vn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Vn(e,t)}}class $b{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Vn(Zu,e),i=new Vn(Zu,t);return 0!==this.compare(r,i)}minPost(){return Vn.MIN}}class v1 extends $b{static get __EMPTY_NODE(){return lv}static set __EMPTY_NODE(e){lv=e}compare(e,t){return fa(e.name,t.name)}isDefinedOn(e){throw(0,K.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Vn.MIN}maxPost(){return new Vn(Ya,lv)}makePost(e,t){return(0,K.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Vn(e,lv)}toString(){return".key"}}const fo=new v1;class cv{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Gb,Qa=(()=>{class n{constructor(t,r,i,u,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=u??po.EMPTY_NODE,this.right=c??po.EMPTY_NODE}copy(t,r,i,u,c){return new n(t??this.key,r??this.value,i??this.color,u??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const c=i(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return po.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return po.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class po{constructor(e,t=po.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new po(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Qa.BLACK,null,null))}remove(e){return new po(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new cv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new cv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new cv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new cv(this.root_,null,this.comparator_,!0,e)}}function gP(n,e){return fa(n.name,e.name)}function Hb(n,e){return fa(n,e)}po.EMPTY_NODE=new class D3{copy(e,t,r,i,u){return this}insert(e,t,r){return new Qa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const E1=function(n){return"number"==typeof n?"number:"+sf(n):"string:"+n},Wb=function(n){if(n.isLeafNode()){const e=n.val();(0,K.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,K.r3)(e,".sv"),"Priority must be a string or number.")}else(0,K.hu)(n===Gb||n.isEmpty(),"priority of unexpected type.");(0,K.hu)(n===Gb||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let zb,$o,w1,jg=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,K.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Wb(this.priorityNode_)}static set __childrenNodeConstructor(t){zb=t}static get __childrenNodeConstructor(){return zb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return kn(t)?this:".priority"===Sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,K.hu)(".priority"!==i||1===Yu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(vr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+E1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?sf(this.value_):this.value_,this.lazyHash_=BA(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,K.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,K.hu)(u>=0,"Unknown leaf type: "+r),(0,K.hu)(c>=0,"Unknown leaf type: "+i),u===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Un=new class S3 extends $b{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?fa(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Vn.MIN}maxPost(){return new Vn(Ya,new jg("[PRIORITY-POST]",w1))}makePost(e,t){const r=$o(e);return new Vn(t,new jg("[PRIORITY-POST]",r))}toString(){return".priority"}},_P=Math.log(2);class Kb{constructor(e){this.count=parseInt(Math.log(e+1)/_P,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const dv=function(n,e,t,r){n.sort(e);const i=function(v,I){const A=I-v;let M,P;if(0===A)return null;if(1===A)return M=n[v],P=t?t(M):M,new Qa(P,M.node,Qa.BLACK,null,null);{const $=parseInt(A/2,10)+v,Q=i(v,$),le=i($+1,I);return M=n[$],P=t?t(M):M,new Qa(P,M.node,Qa.BLACK,Q,le)}},p=function(v){let I=null,A=null,M=n.length;const P=function(Q,le){const ye=M-Q,ct=M;M-=Q;const ht=i(ye+1,ct),Et=n[ye],_t=t?t(Et):Et;$(new Qa(_t,Et.node,le,null,ht))},$=function(Q){I?(I.left=Q,I=Q):(A=Q,I=Q)};for(let Q=0;Q<v.count;++Q){const le=v.nextBitIsOne(),ye=Math.pow(2,v.count-(Q+1));le?P(ye,Qa.BLACK):(P(ye,Qa.BLACK),P(ye,Qa.RED))}return A}(new Kb(n.length));return new po(r||e,p)};let Zb;const Zl={};class Ja{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,K.hu)(Zl&&Un,"ChildrenNode.ts has not been loaded"),Zb=Zb||new Ja({".priority":Zl},{".priority":Un}),Zb}get(e){const t=(0,K.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof po?t:null}hasIndex(e){return(0,K.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,K.hu)(e!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(Vn.Wrap);let p,c=u.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=i?dv(r,e.getCompare()):Zl;const v=e.toString(),I=Object.assign({},this.indexSet_);I[v]=e;const A=Object.assign({},this.indexes_);return A[v]=p,new Ja(A,I)}addToIndexes(e,t){const r=(0,K.UI)(this.indexes_,(i,u)=>{const c=(0,K.DV)(this.indexSet_,u);if((0,K.hu)(c,"Missing index implementation for "+u),i===Zl){if(c.isDefinedOn(e.node)){const p=[],v=t.getIterator(Vn.Wrap);let I=v.getNext();for(;I;)I.name!==e.name&&p.push(I),I=v.getNext();return p.push(e),dv(p,c.getCompare())}return Zl}{const p=t.get(e.name);let v=i;return p&&(v=v.remove(new Vn(e.name,p))),v.insert(e,e.node)}});return new Ja(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,K.UI)(this.indexes_,i=>{if(i===Zl)return i;{const u=t.get(e.name);return u?i.remove(new Vn(e.name,u)):i}});return new Ja(r,this.indexSet_)}}let cf,mn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Wb(this.priorityNode_),this.children_.isEmpty()&&(0,K.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cf||(cf=new n(new po(Hb),null,Ja.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?cf:r}}getChild(t){const r=Sn(t);return null===r?this:this.getImmediateChild(r).getChild(vr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,K.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Vn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=u.isEmpty()?cf:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const i=Sn(t);if(null===i)return r;{(0,K.hu)(".priority"!==Sn(t)||1===Yu(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(vr(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,c=!0;if(this.forEachChild(Un,(p,v)=>{r[p]=v.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*i){const p=[];for(const v in r)p[v]=r[v];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+E1(this.getPriority().val())+":"),this.forEachChild(Un,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":BA(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const c=u.getPredecessorKey(new Vn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Vn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Vn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Vn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Vn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===df?-1:0}withIndex(t){if(t===fo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Un),u=r.getIterator(Un);let c=i.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===fo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const df=new class b1 extends mn{constructor(){super(new po(Hb),mn.EMPTY_NODE,Ja.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return mn.EMPTY_NODE}isEmpty(){return!1}};function qr(n,e=null){if(null===n)return mn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,K.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new jg(n,qr(e));if(n instanceof Array){let t=mn.EMPTY_NODE;return Ci(n,(r,i)=>{if((0,K.r3)(n,r)&&"."!==r.substring(0,1)){const u=qr(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(qr(e))}{const t=[];let r=!1;if(Ci(n,(c,p)=>{if("."!==c.substring(0,1)){const v=qr(p);v.isEmpty()||(r=r||!v.getPriority().isEmpty(),t.push(new Vn(c,v)))}}),0===t.length)return mn.EMPTY_NODE;const u=dv(t,gP,c=>c.name,Hb);if(r){const c=dv(t,Un.getCompare());return new mn(u,qr(e),new Ja({".priority":c},{".priority":Un}))}return new mn(u,qr(e),Ja.Default)}}Object.defineProperties(Vn,{MIN:{value:new Vn(Zu,mn.EMPTY_NODE)},MAX:{value:new Vn(Ya,df)}}),v1.__EMPTY_NODE=mn.EMPTY_NODE,jg.__childrenNodeConstructor=mn,function T3(n){Gb=n}(df),function mP(n){w1=n}(df),function qb(n){$o=n}(qr);class Yb extends $b{constructor(e){super(),this.indexPath_=e,(0,K.hu)(!kn(e)&&".priority"!==Sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?fa(e.name,t.name):u}makePost(e,t){const r=qr(e),i=mn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Vn(t,i)}maxPost(){const e=mn.EMPTY_NODE.updateChild(this.indexPath_,df);return new Vn(Ya,e)}toString(){return Ug(this.indexPath_,0).join("/")}}const Xa=new class Qb extends $b{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?fa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Vn.MIN}maxPost(){return Vn.MAX}makePost(e,t){const r=qr(e);return new Vn(t,r)}toString(){return".value"}},Ed="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",A3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const u=new Array(8);for(i=7;i>=0;i--)u[i]=Ed.charAt(t%64),t=Math.floor(t/64);(0,K.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Ed.charAt(e[i]);return(0,K.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),C1=function(n){if(n===""+Sb)return"-";const e=Xy(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ya;const u=Ed.charAt(Ed.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},D1=function(n){if(n===""+kg)return Zu;const e=Xy(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Sb:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ed.charAt(Ed.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function T1(n){return{type:"value",snapshotNode:n}}function hf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ff(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function hv(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Jb{constructor(e){this.index_=e}updateChild(e,t,r,i,u,c){(0,K.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(ff(t,p)):(0,K.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(hf(t,r)):c.trackChildChange(hv(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Un,(i,u)=>{t.hasChild(i)||r.trackChildChange(ff(i,u))}),t.isLeafNode()||t.forEachChild(Un,(i,u)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(u)||r.trackChildChange(hv(i,u,c))}else r.trackChildChange(hf(i,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?mn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pf{constructor(e){this.indexedFilter_=new Jb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pf.getStartPost_(e),this.endPost_=pf.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,u,c){return this.matches(new Vn(t,r))||(r=mn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=mn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(mn.EMPTY_NODE);const u=this;return t.forEachChild(Un,(c,p)=>{u.matches(new Vn(c,p))||(i=i.updateImmediateChild(c,mn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class x3{constructor(e){this.rangedFilter_=new pf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,u,c){return this.rangedFilter_.matches(new Vn(t,r))||(r=mn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;i=mn.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let v;if(v=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!v)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,v;if(i=t.withIndex(this.index_),i=i.updatePriority(mn.EMPTY_NODE),this.reverse_){v=i.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const M=this.index_.getCompare();p=(P,$)=>M($,P)}else v=i.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let I=0,A=!1;for(;v.hasNext();){const M=v.getNext();!A&&p(u,M)<=0&&(A=!0),A&&I<this.limit_&&p(M,c)<=0?I++:i=i.updateImmediateChild(M.name,mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,u){let c;if(this.reverse_){const M=this.index_.getCompare();c=(P,$)=>M($,P)}else c=this.index_.getCompare();const p=e;(0,K.hu)(p.numChildren()===this.limit_,"");const v=new Vn(t,r),I=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(v);if(p.hasChild(t)){const M=p.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,I,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const $=null==P?1:c(P,v);if(A&&!r.isEmpty()&&$>=0)return u?.trackChildChange(hv(t,r,M)),p.updateImmediateChild(t,r);{u?.trackChildChange(ff(t,M));const le=p.updateImmediateChild(t,mn.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(u?.trackChildChange(hf(P.name,P.node)),le.updateImmediateChild(P.name,P.node)):le}}return r.isEmpty()?e:A&&c(I,v)>=0?(null!=u&&(u.trackChildChange(ff(I.name,I.node)),u.trackChildChange(hf(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(I.name,mn.EMPTY_NODE)):e}}class gf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ya}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,K.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const e=new gf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fv(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function mf(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Hg(n,e){const t=n.copy();return t.index_=e,t}function R1(n){const e={};if(n.isDefault())return e;let t;return n.index_===Un?t="$priority":n.index_===Xa?t="$value":n.index_===fo?t="$key":((0,K.hu)(n.index_ instanceof Yb,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,K.Wl)(t),n.startSet_&&(e.startAt=(0,K.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,K.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,K.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,K.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function k1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Un&&(e.i=n.index_.toString()),e}class Xb extends h1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=rf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,K.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=Xb.getListenId_(e,r),p={};this.listens_[c]=p;const v=R1(e._queryParams);this.restRequest_(u+".json",v,(I,A)=>{let M=A;if(404===I&&(M=null,I=null),null===I&&this.onDataUpdate_(u,M,!1,r),(0,K.DV)(this.listens_,c)===p){let P;P=I?401===I?"permission_denied":"rest_error:"+I:"ok",i(P,null)}})}unlisten(e,t){const r=Xb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=R1(e._queryParams),r=e._path.toString(),i=new K.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,K.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let v=null;if(p.status>=200&&p.status<300){try{v=(0,K.cI)(p.responseText)}catch{Ps("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,v)}else 401!==p.status&&404!==p.status&&Ps("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class N3{constructor(){this.rootNode_=mn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function eI(){return{value:null,children:new Map}}function wd(n,e,t){if(kn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Sn(e);n.children.has(r)||n.children.set(r,eI()),wd(n.children.get(r),e=vr(e),t)}}function tI(n,e){if(kn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Un,(r,i)=>{wd(n,new sr(r),i)}),tI(n,e)}}if(n.children.size>0){const t=Sn(e);return e=vr(e),n.children.has(t)&&tI(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function nI(n,e,t){null!==n.value?t(e,n.value):function vP(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{nI(i,new sr(e.toString()+"/"+r),t)})}class M3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ci(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class O3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new M3(e);const r=1e4+2e4*Math.random();yd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ci(e,(i,u)=>{u>0&&(0,K.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),yd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ho=(()=>{return(n=Ho||(Ho={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ho;var n})();function iI(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Gg{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ho.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(kn(this.path)){if(null!=this.affectedTree.value)return(0,K.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new sr(e));return new Gg(er(),t,this.revert)}}return(0,K.hu)(Sn(this.path)===e,"operationForChild called for unrelated child."),new Gg(vr(this.path),this.affectedTree,this.revert)}}class ga{constructor(e,t){this.source=e,this.path=t,this.type=Ho.LISTEN_COMPLETE}operationForChild(e){return kn(this.path)?new ga(this.source,er()):new ga(this.source,vr(this.path))}}class Yl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ho.OVERWRITE}operationForChild(e){return kn(this.path)?new Yl(this.source,er(),this.snap.getImmediateChild(e)):new Yl(this.source,vr(this.path),this.snap)}}class Ql{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ho.MERGE}operationForChild(e){if(kn(this.path)){const t=this.children.subtree(new sr(e));return t.isEmpty()?null:t.value?new Yl(this.source,er(),t.value):new Ql(this.source,er(),t)}return(0,K.hu)(Sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ql(this.source,vr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class tu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(kn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class wP{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bd(n,e,t,r,i,u){const c=r.filter(p=>p.type===t);c.sort((p,v)=>function P3(n,e,t){if(null==e.childName||null==t.childName)throw(0,K.g5)("Should only compare child_ events.");const r=new Vn(e.childName,e.snapshotNode),i=new Vn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,v)),c.forEach(p=>{const v=function gv(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);i.forEach(I=>{I.respondsTo(p.type)&&e.push(I.createEvent(v,n.query_))})})}function oI(n,e){return{eventCache:n,serverCache:e}}function mv(n,e,t,r){return oI(new tu(e,t,r),n.serverCache)}function bP(n,e,t,r){return oI(n.eventCache,new tu(e,t,r))}function Wg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Id(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let aI;class Nr{constructor(e,t=(()=>(aI||(aI=new po(QO)),aI))()){this.value=e,this.children=t}static fromObject(e){let t=new Nr(null);return Ci(e,(r,i)=>{t=t.set(new sr(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:er(),value:this.value};if(kn(e))return null;{const r=Sn(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(vr(e),t);return null!=u?{path:Vr(new sr(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(kn(e))return this;{const t=Sn(e),r=this.children.get(t);return null!==r?r.subtree(vr(e)):new Nr(null)}}set(e,t){if(kn(e))return new Nr(t,this.children);{const r=Sn(e),u=(this.children.get(r)||new Nr(null)).set(vr(e),t),c=this.children.insert(r,u);return new Nr(this.value,c)}}remove(e){if(kn(e))return this.children.isEmpty()?new Nr(null):new Nr(null,this.children);{const t=Sn(e),r=this.children.get(t);if(r){const i=r.remove(vr(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new Nr(null):new Nr(this.value,u)}return this}}get(e){if(kn(e))return this.value;{const t=Sn(e),r=this.children.get(t);return r?r.get(vr(e)):null}}setTree(e,t){if(kn(e))return t;{const r=Sn(e),u=(this.children.get(r)||new Nr(null)).setTree(vr(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Nr(this.value,c)}}fold(e){return this.fold_(er(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(Vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,er(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(kn(e))return null;{const u=Sn(e),c=this.children.get(u);return c?c.findOnPath_(vr(e),Vr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,er(),t)}foreachOnPath_(e,t,r){if(kn(e))return this;{this.value&&r(t,this.value);const i=Sn(e),u=this.children.get(i);return u?u.foreachOnPath_(vr(e),Vr(t,i),r):new Nr(null)}}foreach(e){this.foreach_(er(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Go{constructor(e){this.writeTree_=e}static empty(){return new Go(new Nr(null))}}function yf(n,e,t){if(kn(e))return new Go(new Nr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const c=eo(i,e);return u=u.updateChild(c,t),new Go(n.writeTree_.set(i,u))}{const i=new Nr(t),u=n.writeTree_.setTree(e,i);return new Go(u)}}}function _v(n,e,t){let r=n;return Ci(t,(i,u)=>{r=yf(r,Vr(e,i),u)}),r}function O1(n,e){if(kn(e))return Go.empty();{const t=n.writeTree_.setTree(e,new Nr(null));return new Go(t)}}function uI(n,e){return null!=Jl(n,e)}function Jl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(eo(t.path,e)):null}function yv(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Un,(r,i)=>{e.push(new Vn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Vn(r,i.value))}),e}function Cd(n,e){if(kn(e))return n;{const t=Jl(n,e);return new Go(null!=t?new Nr(t):n.writeTree_.subtree(e))}}function vv(n){return n.writeTree_.isEmpty()}function Xl(n,e){return P1(er(),n.writeTree_,e)}function P1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,K.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=P1(Vr(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vr(n,".priority"),r)),t}}function Ev(n,e){return _(e,n)}function TP(n,e){if(n.snap)return pa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&pa(Vr(n.path,t),e))return!0;return!1}function U3(n){return n.visible}function SP(n,e,t){let r=Go.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const c=u.path;let p;if(u.snap)pa(t,c)?(p=eo(t,c),r=yf(r,p,u.snap)):pa(c,t)&&(p=eo(c,t),r=yf(r,er(),u.snap.getChild(p)));else{if(!u.children)throw(0,K.g5)("WriteRecord should have .snap or .children");if(pa(t,c))p=eo(t,c),r=_v(r,p,u.children);else if(pa(c,t))if(p=eo(c,t),kn(p))r=_v(r,er(),u.children);else{const v=(0,K.DV)(u.children,Sn(p));if(v){const I=v.getChild(vr(p));r=yf(r,er(),I)}}}}}return r}function AP(n,e,t,r,i){if(r||i){const u=Cd(n.visibleWrites,e);return!i&&vv(u)?t:i||null!=t||uI(u,er())?Xl(SP(n.allWrites,function(I){return(I.visible||i)&&(!r||!~r.indexOf(I.writeId))&&(pa(I.path,e)||pa(e,I.path))},e),t||mn.EMPTY_NODE):null}{const u=Jl(n.visibleWrites,e);if(null!=u)return u;{const c=Cd(n.visibleWrites,e);return vv(c)?t:null!=t||uI(c,er())?Xl(c,t||mn.EMPTY_NODE):null}}}function lI(n,e,t,r){return AP(n.writeTree,n.treePath,e,t,r)}function L1(n,e){return function B3(n,e,t){let r=mn.EMPTY_NODE;const i=Jl(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Un,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Cd(n.visibleWrites,e);return t.forEachChild(Un,(c,p)=>{const v=Xl(Cd(u,new sr(c)),p);r=r.updateImmediateChild(c,v)}),yv(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return yv(Cd(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function o(n,e,t,r){return function xP(n,e,t,r,i){(0,K.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=Vr(e,t);if(uI(n.visibleWrites,u))return null;{const c=Cd(n.visibleWrites,u);return vv(c)?i.getChild(t):Xl(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function a(n,e){return function $3(n,e){return Jl(n.visibleWrites,e)}(n.writeTree,Vr(n.treePath,e))}function h(n,e,t){return function j3(n,e,t,r){const i=Vr(e,t),u=Jl(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?Xl(Cd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function g(n,e){return _(Vr(n.treePath,e),n.writeTree)}function _(n,e){return{treePath:n,writeTree:e}}class b{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,K.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,K.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,hv(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,ff(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,hf(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,K.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,hv(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const N=new class T{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class R{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new tu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return h(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Id(this.viewCache_),u=function l(n,e,t,r,i,u){return function H3(n,e,t,r,i,u,c){let p;const v=Cd(n.visibleWrites,e),I=Jl(v,er());if(null!=I)p=I;else{if(null==t)return[];p=Xl(v,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const A=[],M=c.getCompare(),P=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let $=P.getNext();for(;$&&A.length<i;)0!==M($,r)&&A.push($),$=P.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function $e(n,e,t,r,i,u){const c=e.eventCache;if(null!=a(r,t))return e;{let p,v;if(kn(t))if((0,K.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const I=Id(e),M=L1(r,I instanceof mn?I:mn.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),M,u)}else{const I=lI(r,Id(e));p=n.filter.updateFullNode(e.eventCache.getNode(),I,u)}else{const I=Sn(t);if(".priority"===I){(0,K.hu)(1===Yu(t),"Can't have a priority with additional path components");const A=c.getNode();v=e.serverCache.getNode();const M=o(r,t,A,v);p=null!=M?n.filter.updatePriority(A,M):c.getNode()}else{const A=vr(t);let M;if(c.isCompleteForChild(I)){v=e.serverCache.getNode();const P=o(r,t,c.getNode(),v);M=null!=P?c.getNode().getImmediateChild(I).updateChild(A,P):c.getNode().getImmediateChild(I)}else M=h(r,I,e.serverCache);p=null!=M?n.filter.updateChild(c.getNode(),I,M,A,i,u):c.getNode()}}return mv(e,p,c.isFullyInitialized()||kn(t),n.filter.filtersNodes())}}function ut(n,e,t,r,i,u,c,p){const v=e.serverCache;let I;const A=c?n.filter:n.filter.getIndexedFilter();if(kn(t))I=A.updateFullNode(v.getNode(),r,null);else if(A.filtersNodes()&&!v.isFiltered()){const $=v.getNode().updateChild(t,r);I=A.updateFullNode(v.getNode(),$,null)}else{const $=Sn(t);if(!v.isCompleteForPath(t)&&Yu(t)>1)return e;const Q=vr(t),ye=v.getNode().getImmediateChild($).updateChild(Q,r);I=".priority"===$?A.updatePriority(v.getNode(),ye):A.updateChild(v.getNode(),$,ye,Q,N,null)}const M=bP(e,I,v.isFullyInitialized()||kn(t),A.filtersNodes());return $e(n,M,t,i,new R(i,M,u),p)}function vt(n,e,t,r,i,u,c){const p=e.eventCache;let v,I;const A=new R(i,e,u);if(kn(t))I=n.filter.updateFullNode(e.eventCache.getNode(),r,c),v=mv(e,I,!0,n.filter.filtersNodes());else{const M=Sn(t);if(".priority"===M)I=n.filter.updatePriority(e.eventCache.getNode(),r),v=mv(e,I,p.isFullyInitialized(),p.isFiltered());else{const P=vr(t),$=p.getNode().getImmediateChild(M);let Q;if(kn(P))Q=r;else{const le=A.getCompleteChild(M);Q=null!=le?".priority"===av(P)&&le.getChild(pP(P)).isEmpty()?le:le.updateChild(P,r):mn.EMPTY_NODE}v=$.equals(Q)?e:mv(e,n.filter.updateChild(p.getNode(),M,Q,P,A,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return v}function Mt(n,e){return n.eventCache.isCompleteForChild(e)}function Xe(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ln(n,e,t,r,i,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let I,v=e;I=kn(t)?r:new Nr(null).setTree(t,r);const A=e.serverCache.getNode();return I.children.inorderTraversal((M,P)=>{if(A.hasChild(M)){const Q=Xe(0,e.serverCache.getNode().getImmediateChild(M),P);v=ut(n,v,new sr(M),Q,i,u,c,p)}}),I.children.inorderTraversal((M,P)=>{const $=!e.serverCache.isCompleteForChild(M)&&null===P.value;if(!A.hasChild(M)&&!$){const le=Xe(0,e.serverCache.getNode().getImmediateChild(M),P);v=ut(n,v,new sr(M),le,i,u,c,p)}}),v}class $9{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Jb(r.getIndex()),u=function A1(n){return n.loadsAllData()?new Jb(n.getIndex()):n.hasLimit()?new x3(n):new pf(n)}(r);this.processor_=function F(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,v=i.updateFullNode(mn.EMPTY_NODE,c.getNode(),null),I=u.updateFullNode(mn.EMPTY_NODE,p.getNode(),null),A=new tu(v,c.isFullyInitialized(),i.filtersNodes()),M=new tu(I,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=oI(M,A),this.eventGenerator_=new wP(this.query_)}get query(){return this.query_}}function W9(n,e){const t=Id(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!kn(e)&&!t.getImmediateChild(Sn(e)).isEmpty())?t.getChild(e):null}function z3(n){return 0===n.eventRegistrations_.length}function q3(n,e,t){const r=[];if(t){(0,K.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(u+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function K3(n,e,t,r){e.type===Ho.MERGE&&null!==e.source.queryId&&((0,K.hu)(Id(n.viewCache_),"We should always have a full cache before handling merges"),(0,K.hu)(Wg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function oe(n,e,t,r,i){const u=new b;let c,p;if(t.type===Ho.OVERWRITE){const I=t;I.source.fromUser?c=vt(n,e,I.path,I.snap,r,i,u):((0,K.hu)(I.source.fromServer,"Unknown source."),p=I.source.tagged||e.serverCache.isFiltered()&&!kn(I.path),c=ut(n,e,I.path,I.snap,r,i,p,u))}else if(t.type===Ho.MERGE){const I=t;I.source.fromUser?c=function Jt(n,e,t,r,i,u,c){let p=e;return r.foreach((v,I)=>{const A=Vr(t,v);Mt(e,Sn(A))&&(p=vt(n,p,A,I,i,u,c))}),r.foreach((v,I)=>{const A=Vr(t,v);Mt(e,Sn(A))||(p=vt(n,p,A,I,i,u,c))}),p}(n,e,I.path,I.children,r,i,u):((0,K.hu)(I.source.fromServer,"Unknown source."),p=I.source.tagged||e.serverCache.isFiltered(),c=ln(n,e,I.path,I.children,r,i,p,u))}else if(t.type===Ho.ACK_USER_WRITE){const I=t;c=I.revert?function W3(n,e,t,r,i,u){let c;if(null!=a(r,t))return e;{const p=new R(r,e,i),v=e.eventCache.getNode();let I;if(kn(t)||".priority"===Sn(t)){let A;if(e.serverCache.isFullyInitialized())A=lI(r,Id(e));else{const M=e.serverCache.getNode();(0,K.hu)(M instanceof mn,"serverChildren would be complete if leaf node"),A=L1(r,M)}I=n.filter.updateFullNode(v,A,u)}else{const A=Sn(t);let M=h(r,A,e.serverCache);null==M&&e.serverCache.isCompleteForChild(A)&&(M=v.getImmediateChild(A)),I=null!=M?n.filter.updateChild(v,A,M,vr(t),p,u):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(v,A,mn.EMPTY_NODE,vr(t),p,u):v,I.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=lI(r,Id(e)),c.isLeafNode()&&(I=n.filter.updateFullNode(I,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=a(r,er()),mv(e,I,c,n.filter.filtersNodes())}}(n,e,I.path,r,i,u):function Kr(n,e,t,r,i,u,c){if(null!=a(i,t))return e;const p=e.serverCache.isFiltered(),v=e.serverCache;if(null!=r.value){if(kn(t)&&v.isFullyInitialized()||v.isCompleteForPath(t))return ut(n,e,t,v.getNode().getChild(t),i,u,p,c);if(kn(t)){let I=new Nr(null);return v.getNode().forEachChild(fo,(A,M)=>{I=I.set(new sr(A),M)}),ln(n,e,t,I,i,u,p,c)}return e}{let I=new Nr(null);return r.foreach((A,M)=>{const P=Vr(t,A);v.isCompleteForPath(P)&&(I=I.set(A,v.getNode().getChild(P)))}),ln(n,e,t,I,i,u,p,c)}}(n,e,I.path,I.affectedTree,r,i,u)}else{if(t.type!==Ho.LISTEN_COMPLETE)throw(0,K.g5)("Unknown operation type: "+t.type);c=function pi(n,e,t,r,i){const u=e.serverCache;return $e(n,bP(e,u.getNode(),u.isFullyInitialized()||kn(t),u.isFiltered()),t,r,N,i)}(n,e,t.path,r,u)}const v=u.getChanges();return function we(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=Wg(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(T1(Wg(e)))}}(e,c,v),{viewCache:c,changes:v}}(n.processor_,i,e,t,r);return function Z(n,e){(0,K.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,K.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,K.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,Z3(n,u.changes,u.viewCache.eventCache.getNode(),null)}function Z3(n,e,t,r){return function sI(n,e,t,r){const i=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function S1(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),bd(n,i,"child_removed",e,r,t),bd(n,i,"child_added",e,r,t),bd(n,i,"child_moved",u,r,t),bd(n,i,"child_changed",e,r,t),bd(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let F1,U1;class Y3{constructor(){this.views=new Map}}function NP(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,K.hu)(null!=u,"SyncTree gave us an op for an invalid query."),K3(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(K3(c,e,t,r));return u}}function Q3(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=lI(t,i?r:null),v=!1;p?v=!0:r instanceof mn?(p=L1(t,r),v=!1):(p=mn.EMPTY_NODE,v=!1);const I=oI(new tu(p,v,!1),new tu(r,i,!1));return new $9(e,I)}return c}function J3(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function vf(n,e){let t=null;for(const r of n.views.values())t=t||W9(r,e);return t}function X3(n,e){return e._queryParams.loadsAllData()?V1(n):n.views.get(e._queryIdentifier)}function ej(n,e){return null!=X3(n,e)}function Ef(n){return null!=V1(n)}function V1(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let tq=1;class tj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nr(null),this.pendingWriteTree_=function G3(){return{visibleWrites:Go.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function MP(n,e,t,r,i){return function L3(n,e,t,r,i){(0,K.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=yf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?wv(n,new Yl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wf(n,e,t=!1){const r=function CP(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function DP(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,K.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&TP(p,r.path)?i=!1:pa(r.path,p.path)&&(u=!0)),c--}return!!i&&(u?(function V3(n){n.visibleWrites=SP(n.allWrites,U3,er()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=O1(n.visibleWrites,r.path):Ci(r.children,v=>{n.visibleWrites=O1(n.visibleWrites,Vr(r.path,v))}),!0))}(n.pendingWriteTree_,e)){let u=new Nr(null);return null!=r.snap?u=u.set(er(),!0):Ci(r.children,c=>{u=u.set(new sr(c),!0)}),wv(n,new Gg(r.path,u,t))}return[]}function cI(n,e,t){return wv(n,new Yl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function B1(n,e,t,r,i=!1){const u=e._path,c=n.syncPointTree_.get(u);let p=[];if(c&&("default"===e._queryIdentifier||ej(c,e))){const v=function J9(n,e,t,r){const i=e._queryIdentifier,u=[];let c=[];const p=Ef(n);if("default"===i)for(const[v,I]of n.views.entries())c=c.concat(q3(I,t,r)),z3(I)&&(n.views.delete(v),I.query._queryParams.loadsAllData()||u.push(I.query));else{const v=n.views.get(i);v&&(c=c.concat(q3(v,t,r)),z3(v)&&(n.views.delete(i),v.query._queryParams.loadsAllData()||u.push(v.query)))}return p&&!Ef(n)&&u.push(new(function Z9(){return(0,K.hu)(F1,"Reference.ts has not been loaded"),F1}())(e._repo,e._path)),{removed:u,events:c}}(c,e,t,r);(function Y9(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(u));const I=v.removed;if(p=v.events,!i){const A=-1!==I.findIndex(P=>P._queryParams.loadsAllData()),M=n.syncPointTree_.findOnPath(u,(P,$)=>Ef($));if(A&&!M){const P=n.syncPointTree_.subtree(u);if(!P.isEmpty()){const $=function uq(n){return n.fold((e,t,r)=>{if(t&&Ef(t))return[V1(t)];{let i=[];return t&&(i=J3(t)),Ci(r,(u,c)=>{i=i.concat(c)}),i}})}(P);for(let Q=0;Q<$.length;++Q){const le=$[Q],ye=le.query,ct=sj(n,le);n.listenProvider_.startListening(hI(ye),dI(n,ye),ct.hashFn,ct.onComplete)}}}!M&&I.length>0&&!r&&(A?n.listenProvider_.stopListening(hI(e),null):I.forEach(P=>{const $=n.queryToTagMap.get($1(P));n.listenProvider_.stopListening(hI(P),$)}))}!function lq(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=$1(r),u=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(u)}}}(n,I)}return p}function nj(n,e,t,r){const i=kP(n,r);if(null!=i){const u=OP(i),c=u.path,p=u.queryId,v=eo(c,e);return PP(n,c,new Yl(iI(p),v,t))}return[]}function RP(n,e,t,r=!1){const i=e._path;let u=null,c=!1;n.syncPointTree_.foreachOnPath(i,(P,$)=>{const Q=eo(P,i);u=u||vf($,Q),c=c||Ef($)});let v,p=n.syncPointTree_.get(i);p?(c=c||Ef(p),u=u||vf(p,er())):(p=new Y3,n.syncPointTree_=n.syncPointTree_.set(i,p)),null!=u?v=!0:(v=!1,u=mn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild(($,Q)=>{const le=vf(Q,er());le&&(u=u.updateImmediateChild($,le))}));const I=ej(p,e);if(!I&&!e._queryParams.loadsAllData()){const P=$1(e);(0,K.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const $=function cq(){return tq++}();n.queryToTagMap.set(P,$),n.tagToQueryMap.set($,P)}let M=function Q9(n,e,t,r,i,u){const c=Q3(n,e,r,i,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function z9(n,e){n.eventRegistrations_.push(e)}(c,t),function q9(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Un,(u,c)=>{r.push(hf(u,c))}),t.isFullyInitialized()&&r.push(T1(t.getNode())),Z3(n,r,t.getNode(),e)}(c,t)}(p,e,t,Ev(n.pendingWriteTree_,i),u,v);if(!I&&!c&&!r){const P=X3(p,e);M=M.concat(function dq(n,e,t){const r=e._path,i=dI(n,e),u=sj(n,t),c=n.listenProvider_.startListening(hI(e),i,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,K.hu)(!Ef(p.value),"If we're adding a query, it shouldn't be shadowed");else{const v=p.fold((I,A,M)=>{if(!kn(I)&&A&&Ef(A))return[V1(A).query];{let P=[];return A&&(P=P.concat(J3(A).map($=>$.query))),Ci(M,($,Q)=>{P=P.concat(Q)}),P}});for(let I=0;I<v.length;++I){const A=v[I];n.listenProvider_.stopListening(hI(A),dI(n,A))}}return c}(n,e,P))}return M}function j1(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const I=vf(p,eo(c,e));if(I)return I});return AP(i,e,u,t,!0)}function wv(n,e){return rj(e,n.syncPointTree_,null,Ev(n.pendingWriteTree_,er()))}function rj(n,e,t,r){if(kn(n.path))return ij(n,e,t,r);{const i=e.get(er());null==t&&null!=i&&(t=vf(i,er()));let u=[];const c=Sn(n.path),p=n.operationForChild(c),v=e.children.get(c);if(v&&p){const I=t?t.getImmediateChild(c):null,A=g(r,c);u=u.concat(rj(p,v,I,A))}return i&&(u=u.concat(NP(i,n,r,t))),u}}function ij(n,e,t,r){const i=e.get(er());null==t&&null!=i&&(t=vf(i,er()));let u=[];return e.children.inorderTraversal((c,p)=>{const v=t?t.getImmediateChild(c):null,I=g(r,c),A=n.operationForChild(c);A&&(u=u.concat(ij(A,p,v,I)))}),i&&(u=u.concat(NP(i,n,r,t))),u}function sj(n,e){const t=e.query,r=dI(n,t);return{hashFn:()=>(function H9(n){return n.viewCache_.serverCache.getNode()}(e)||mn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function sq(n,e,t){const r=kP(n,t);if(r){const i=OP(r),u=i.path,c=i.queryId,p=eo(u,e);return PP(n,u,new ga(iI(c),p))}return[]}(n,t._path,r):function iq(n,e){return wv(n,new ga({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function eP(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return B1(n,t,null,u)}}}}function dI(n,e){const t=$1(e);return n.queryToTagMap.get(t)}function $1(n){return n._path.toString()+"$"+n._queryIdentifier}function kP(n,e){return n.tagToQueryMap.get(e)}function OP(n){const e=n.indexOf("$");return(0,K.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new sr(n.substr(0,e))}}function PP(n,e,t){const r=n.syncPointTree_.get(e);return(0,K.hu)(r,"Missing sync point for query tag that we're tracking"),NP(r,t,Ev(n.pendingWriteTree_,e),null)}function hI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function eq(){return(0,K.hu)(U1,"Reference.ts has not been loaded"),U1}())(n._repo,n._path):n}class LP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new LP(t)}node(){return this.node_}}class FP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vr(this.path_,e);return new FP(this.syncTree_,t)}node(){return j1(this.syncTree_,this.path_)}}const oj=function(n,e,t){return n&&"object"==typeof n?((0,K.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fq(n[".sv"],e,t):"object"==typeof n[".sv"]?pq(n[".sv"],e):void(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,K.hu)(!1,"Unexpected server value: "+n)},pq=function(n,e,t){n.hasOwnProperty("increment")||(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,K.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,K.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},aj=function(n,e,t,r){return UP(e,new FP(t,n),r)},VP=function(n,e,t){return UP(n,new LP(e),t)};function UP(n,e,t){const r=n.getPriority().val(),i=oj(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=oj(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new jg(p,qr(i)):n}{const c=n;return u=c,i!==c.getPriority().val()&&(u=u.updatePriority(new jg(i))),c.forEachChild(Un,(p,v)=>{const I=UP(v,e.getImmediateChild(p),t);I!==v&&(u=u.updateImmediateChild(p,I))}),u}}class BP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function H1(n,e){let t=e instanceof sr?e:new sr(e),r=n,i=Sn(t);for(;null!==i;){const u=(0,K.DV)(r.node.children,i)||{children:{},childCount:0};r=new BP(i,r,u),t=vr(t),i=Sn(t)}return r}function zg(n){return n.node.value}function jP(n,e){n.node.value=e,$P(n)}function uj(n){return n.node.childCount>0}function G1(n,e){Ci(n.node.children,(t,r)=>{e(new BP(t,n,r))})}function lj(n,e,t,r){t&&!r&&e(n),G1(n,i=>{lj(i,e,!0,r)}),t&&r&&e(n)}function fI(n){return new sr(null===n.parent?n.name:fI(n.parent)+"/"+n.name)}function $P(n){null!==n.parent&&function _q(n,e,t){const r=function gq(n){return void 0===zg(n)&&!uj(n)}(t),i=(0,K.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,$P(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,$P(n))}(n.parent,n.name,n)}const yq=/[\[\].#$\/\u0000-\u001F\u007F]/,vq=/[\[\].#$\u0000-\u001F\u007F]/,HP=10485760,W1=function(n){return"string"==typeof n&&0!==n.length&&!yq.test(n)},cj=function(n){return"string"==typeof n&&0!==n.length&&!vq.test(n)},pI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Rg(n)||n&&"object"==typeof n&&(0,K.r3)(n,".sv")},ec=function(n,e,t,r){r&&void 0===e||gI((0,K.gK)(n,"value"),e,t)},gI=function(n,e,t){const r=t instanceof sr?new w3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+lf(r));if("function"==typeof e)throw new Error(n+"contains a function "+lf(r)+" with contents = "+e.toString());if(Rg(e))throw new Error(n+"contains "+e.toString()+" "+lf(r));if("string"==typeof e&&e.length>HP/3&&(0,K.ug)(e)>HP)throw new Error(n+"contains a string greater than "+HP+" utf8 bytes "+lf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(Ci(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!W1(c)))throw new Error(n+" contains an invalid key ("+c+") "+lf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function b3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,K.ug)(e),Bg(n)})(r,c),gI(n,p,r),function I3(n){const e=n.parts_.pop();n.byteLength_-=(0,K.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+lf(r)+" in addition to actual children.")}},dj=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,K.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const u=[];Ci(e,(c,p)=>{const v=new sr(c);if(gI(i,p,Vr(t,v)),".priority"===av(v)&&!pI(p))throw new Error(i+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(v)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=Ug(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!W1(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(E3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&pa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,u)},GP=function(n,e,t){if(!t||void 0!==e){if(Rg(e))throw new Error((0,K.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pI(e))throw new Error((0,K.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mI=function(n,e,t,r){if(!(r&&void 0===t||W1(t)))throw new Error((0,K.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_I=function(n,e,t,r){if(!(r&&void 0===t||cj(t)))throw new Error((0,K.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},nu=function(n,e){if(".info"===Sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},hj=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!W1(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cj(n)}(t))throw new Error((0,K.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Iq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function z1(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!g1(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)}function fj(n,e,t){z1(n,t),pj(n,r=>g1(r,e))}function ma(n,e,t){z1(n,t),pj(n,r=>pa(r,e)||pa(e,r))}function pj(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Cq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Cq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Gl&&Ui("event: "+t.toString()),_d(r)}}}const gj="repo_interrupt";class Tq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Iq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eI(),this.transactionQueueTree_=new BP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mj(n){const t=n.infoData_.getNode(new sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yI(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:mj(n)})}function _j(n,e,t,r,i){n.dataUpdateCount++;const u=new sr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const v=(0,K.UI)(t,I=>qr(I));c=function oq(n,e,t,r){const i=kP(n,r);if(i){const u=OP(i),c=u.path,p=u.queryId,v=eo(c,e),I=Nr.fromObject(t);return PP(n,c,new Ql(iI(p),v,I))}return[]}(n.serverSyncTree_,u,v,i)}else{const v=qr(t);c=nj(n.serverSyncTree_,u,v,i)}else if(r){const v=(0,K.UI)(t,I=>qr(I));c=function rq(n,e,t){const r=Nr.fromObject(t);return wv(n,new Ql({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,v)}else{const v=qr(t);c=cI(n.serverSyncTree_,u,v)}let p=u;c.length>0&&(p=Iv(n,u)),ma(n.eventQueue_,p,c)}function yj(n,e){WP(n,"connected",e),!1===e&&function Mq(n){bv(n,"onDisconnectEvents");const e=yI(n),t=eI();nI(n.onDisconnect_,er(),(i,u)=>{const c=aj(i,u,n.serverSyncTree_,e);wd(t,i,c)});let r=[];nI(t,er(),(i,u)=>{r=r.concat(cI(n.serverSyncTree_,i,u));const c=ZP(n,i);Iv(n,c)}),n.onDisconnect_=eI(),ma(n.eventQueue_,er(),r)}(n)}function WP(n,e,t){const r=new sr("/.info/"+e),i=qr(t);n.infoData_.updateSnapshot(r,i);const u=cI(n.infoSyncTree_,r,i);ma(n.eventQueue_,r,u)}function q1(n){return n.nextWriteId_++}function zP(n,e,t,r,i){bv(n,"set",{path:e.toString(),value:t,priority:r});const u=yI(n),c=qr(t,r),p=j1(n.serverSyncTree_,e),v=VP(c,p,u),I=q1(n),A=MP(n.serverSyncTree_,e,v,I,!0);z1(n.eventQueue_,A),n.server_.put(e.toString(),c.val(!0),(P,$)=>{const Q="ok"===P;Q||Ps("set at "+e+" failed: "+P);const le=wf(n.serverSyncTree_,I,!Q);ma(n.eventQueue_,e,le),bf(0,i,P,$)});const M=ZP(n,e);Iv(n,M),ma(n.eventQueue_,M,[])}function Rq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&tI(n.onDisconnect_,e),bf(0,t,r,i)})}function vj(n,e,t,r){const i=qr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(u,c)=>{"ok"===u&&wd(n.onDisconnect_,e,i),bf(0,r,u,c)})}function qP(n,e,t){let r;r=".info"===Sn(e._path)?B1(n.infoSyncTree_,e,t):B1(n.serverSyncTree_,e,t),fj(n.eventQueue_,e._path,r)}function Ej(n){n.persistentConnection_&&n.persistentConnection_.interrupt(gj)}function bv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ui(t,...e)}function bf(n,e,t,r){e&&_d(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let u=i;r&&(u+=": "+r);const c=new Error(u);c.code=i,e(c)}})}function KP(n,e,t){return j1(n.serverSyncTree_,e,t)||mn.EMPTY_NODE}function K1(n,e=n.transactionQueueTree_){if(e||Z1(n,e),zg(e)){const t=bj(n,e);(0,K.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Vq(n,e,t){const r=t.map(I=>I.currentWriteId),i=KP(n,e,r);let u=i;const c=i.hash();for(let I=0;I<t.length;I++){const A=t[I];(0,K.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const M=eo(e,A.path);u=u.updateChild(M,A.currentOutputSnapshotRaw)}const p=u.val(!0),v=e;n.server_.put(v.toString(),p,I=>{bv(n,"transaction put response",{path:v.toString(),status:I});let A=[];if("ok"===I){const M=[];for(let P=0;P<t.length;P++)t[P].status=2,A=A.concat(wf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&M.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Z1(n,H1(n.transactionQueueTree_,e)),K1(n,n.transactionQueueTree_),ma(n.eventQueue_,e,A);for(let P=0;P<M.length;P++)_d(M[P])}else{if("datastale"===I)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{Ps("transaction at "+v.toString()+" failed: "+I);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=I}Iv(n,e)}},c)}(n,fI(e),t)}else uj(e)&&G1(e,t=>{K1(n,t)})}function Iv(n,e){const t=wj(n,e),r=fI(t);return function Uq(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const v=e[p],I=eo(t,v.path);let M,A=!1;if((0,K.hu)(null!==I,"rerunTransactionsUnderNode_: relativePath should not be null."),4===v.status)A=!0,M=v.abortReason,i=i.concat(wf(n.serverSyncTree_,v.currentWriteId,!0));else if(0===v.status)if(v.retryCount>=25)A=!0,M="maxretry",i=i.concat(wf(n.serverSyncTree_,v.currentWriteId,!0));else{const P=KP(n,v.path,c);v.currentInputSnapshot=P;const $=e[p].update(P.val());if(void 0!==$){gI("transaction failed: Data returned ",$,v.path);let Q=qr($);"object"==typeof $&&null!=$&&(0,K.r3)($,".priority")||(Q=Q.updatePriority(P.getPriority()));const ye=v.currentWriteId,ct=yI(n),ht=VP(Q,P,ct);v.currentOutputSnapshotRaw=Q,v.currentOutputSnapshotResolved=ht,v.currentWriteId=q1(n),c.splice(c.indexOf(ye),1),i=i.concat(MP(n.serverSyncTree_,v.path,ht,v.currentWriteId,v.applyLocally)),i=i.concat(wf(n.serverSyncTree_,ye,!0))}else A=!0,M="nodata",i=i.concat(wf(n.serverSyncTree_,v.currentWriteId,!0))}ma(n.eventQueue_,t,i),i=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===M?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(M),!1,null)))}Z1(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)_d(r[p]);K1(n,n.transactionQueueTree_)}(n,bj(n,t),r),r}function wj(n,e){let t,r=n.transactionQueueTree_;for(t=Sn(e);null!==t&&void 0===zg(r);)r=H1(r,t),t=Sn(e=vr(e));return r}function bj(n,e){const t=[];return Ij(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Ij(n,e,t){const r=zg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);G1(e,i=>{Ij(n,i,t)})}function Z1(n,e){const t=zg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,jP(e,t.length>0?t:void 0)}G1(e,r=>{Z1(n,r)})}function ZP(n,e){const t=fI(wj(n,e)),r=H1(n.transactionQueueTree_,e);return function mq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{YP(n,i)}),YP(n,r),lj(r,i=>{YP(n,i)}),t}function YP(n,e){const t=zg(e);if(t){const r=[];let i=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,K.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,K.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(wf(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?jP(e,void 0):t.length=u+1,ma(n.eventQueue_,fI(e),i);for(let c=0;c<r.length;c++)_d(r[c])}}const QP=function(n,e){const t=$q(n),r=t.namespace;return"firebase.com"===t.domain&&Za(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Za("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ps("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Pg(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new sr(t.pathString)}},$q=function(n){let e="",t="",r="",i="",u="",c=!0,p="https",v=443;if("string"==typeof n){let I=n.indexOf("//");I>=0&&(p=n.substring(0,I-1),n=n.substring(I+2));let A=n.indexOf("/");-1===A&&(A=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(A,M)),A<M&&(i=function Bq(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(A,M)));const P=function jq(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ps(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));I=e.indexOf(":"),I>=0?(c="https"===p||"wss"===p,v=parseInt(e.substring(I+1),10)):I=e.length;const $=e.slice(0,I);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const Q=e.indexOf(".");r=e.substring(0,Q).toLowerCase(),t=e.substring(Q+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:v,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:u}};class Cj{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,K.Wl)(this.snapshot.exportVal())}}class Dj{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,K.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Tj{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new K.BH;return Rq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){nu("OnDisconnect.remove",this._path);const e=new K.BH;return vj(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){nu("OnDisconnect.set",this._path),ec("OnDisconnect.set",e,this._path,!1);const t=new K.BH;return vj(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){nu("OnDisconnect.setWithPriority",this._path),ec("OnDisconnect.setWithPriority",e,this._path,!1),GP("OnDisconnect.setWithPriority",t,!1);const r=new K.BH;return function kq(n,e,t,r,i){const u=qr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&wd(n.onDisconnect_,e,u),bf(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){nu("OnDisconnect.update",this._path),dj("OnDisconnect.update",e,this._path,!1);const t=new K.BH;return function Oq(n,e,t,r){if((0,K.xb)(t))return Ui("onDisconnect().update() called with empty data.  Don't do anything."),void bf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,u)=>{"ok"===i&&Ci(t,(c,p)=>{const v=qr(p);wd(n.onDisconnect_,Vr(e,c),v)}),bf(0,r,i,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Wo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return kn(this._path)?null:av(this._path)}get ref(){return new ru(this._repo,this._path)}get _queryIdentifier(){const e=k1(this._queryParams),t=jo(e);return"{}"===t?"default":t}get _queryObject(){return k1(this._queryParams)}isEqual(e){if(!((e=(0,K.m9)(e))instanceof Wo))return!1;const t=this._repo===e._repo,r=g1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fP(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Y1(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function If(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===fo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Zu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ya)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Un){if(null!=e&&!pI(e)||null!=t&&!pI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,K.hu)(n.getIndex()instanceof Yb||n.getIndex()===Xa,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Q1(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ru extends Wo{constructor(e,t){super(e,t,new gf,!1)}get parent(){const e=pP(this._path);return null===e?null:new ru(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new sr(e),r=Kg(this.ref,e);return new qg(this._node.getChild(t),r,Un)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new qg(i,Kg(this.ref,r),Un)))}hasChild(e){const t=new sr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Sj(n,e){return(n=(0,K.m9)(n))._checkNotDeleted("ref"),void 0!==e?Kg(n._root,e):n._root}function Aj(n,e){(n=(0,K.m9)(n))._checkNotDeleted("refFromURL");const t=QP(e,n._repo.repoInfo_.nodeAdmin);hj("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Za("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Sj(n,t.path.toString())}function Kg(n,e){return null===Sn((n=(0,K.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_I("child","path",t,!1)):_I("child","path",e,!1),new ru(n._repo,Vr(n._path,e));var t}function XP(n,e){n=(0,K.m9)(n),nu("set",n._path),ec("set",e,n._path,!1);const t=new K.BH;return zP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qq(n,e){dj("update",e,n._path,!1);const t=new K.BH;return function Nq(n,e,t,r){bv(n,"update",{path:e.toString(),value:t});let i=!0;const u=yI(n),c={};if(Ci(t,(p,v)=>{i=!1,c[p]=aj(Vr(e,p),qr(v),n.serverSyncTree_,u)}),i)Ui("update() called with empty data.  Don't do anything."),bf(0,r,"ok",void 0);else{const p=q1(n),v=function nq(n,e,t,r){!function F3(n,e,t,r){(0,K.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=_v(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Nr.fromObject(t);return wv(n,new Ql({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);z1(n.eventQueue_,v),n.server_.merge(e.toString(),t,(I,A)=>{const M="ok"===I;M||Ps("update at "+e+" failed: "+I);const P=wf(n.serverSyncTree_,p,!M),$=P.length>0?Iv(n,e):e;ma(n.eventQueue_,$,P),bf(0,r,I,A)}),Ci(t,I=>{const A=ZP(n,Vr(e,I));Iv(n,A)}),ma(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Kq(n){n=(0,K.m9)(n);const e=new JP(()=>{}),t=new vI(e);return function xq(n,e,t){const r=function aq(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(I,A)=>{const M=eo(I,t);r=r||vf(A,M)});let i=n.syncPointTree_.get(t);i?r=r||vf(i,er()):(i=new Y3,n.syncPointTree_=n.syncPointTree_.set(t,i));const u=null!=r,c=u?new tu(r,!0,!1):null;return function G9(n){return Wg(n.viewCache_)}(Q3(i,e,Ev(n.pendingWriteTree_,e._path),u?c.getNode():mn.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const u=qr(i).withIndex(e._queryParams.getIndex());let c;if(RP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=cI(n.serverSyncTree_,e._path,u);else{const p=dI(n.serverSyncTree_,e);c=nj(n.serverSyncTree_,e._path,u,p)}return ma(n.eventQueue_,e._path,c),B1(n.serverSyncTree_,e,t,null,!0),u},i=>(bv(n,"get for query "+(0,K.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new qg(r,new ru(n._repo,n._path),n._queryParams.getIndex()))}class vI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Cj("value",this,new qg(e.snapshotNode,new ru(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Dj(this,e,t):null}matches(e){return e instanceof vI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class J1{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Dj(this,e,t):null}createEvent(e,t){(0,K.hu)(null!=e.childName,"Child events should have a childName.");const r=Kg(new ru(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Cj(e.type,this,new qg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof J1&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function EI(n,e,t,r,i){let u;if("object"==typeof r&&(u=void 0,i=r),"function"==typeof r&&(u=r),i&&i.onlyOnce){const v=t,I=(A,M)=>{qP(n._repo,n,p),v(A,M)};I.userCallback=t.userCallback,I.context=t.context,t=I}const c=new JP(t,u||void 0),p="value"===e?new vI(c):new J1(e,c);return function Pq(n,e,t){let r;r=".info"===Sn(e._path)?RP(n.infoSyncTree_,e,t):RP(n.serverSyncTree_,e,t),fj(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>qP(n._repo,n,p)}function eL(n,e,t,r){return EI(n,"value",e,t,r)}function xj(n,e,t,r){return EI(n,"child_added",e,t,r)}function Nj(n,e,t,r){return EI(n,"child_changed",e,t,r)}function Mj(n,e,t,r){return EI(n,"child_moved",e,t,r)}function Rj(n,e,t,r){return EI(n,"child_removed",e,t,r)}function kj(n,e,t){let r=null;const i=t?new JP(t):null;"value"===e?r=new vI(i):e&&(r=new J1(e,i)),qP(n._repo,n,r)}class Qu{}class Oj extends Qu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("endAt",this._value,e._path,!0);const t=mf(e._queryParams,this._value,this._key);if(Q1(t),If(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class Yq extends Qu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("endBefore",this._value,e._path,!1);const t=function pv(n,e,t){let r,i;return n.index_===fo?("string"==typeof e&&(e=D1(e)),i=mf(n,e,t)):(r=null==t?Zu:D1(t),i=mf(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Q1(t),If(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class Pj extends Qu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("startAt",this._value,e._path,!0);const t=fv(e._queryParams,this._value,this._key);if(Q1(t),If(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class Xq extends Qu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("startAfter",this._value,e._path,!1);const t=function M1(n,e,t){let r;if(n.index_===fo)"string"==typeof e&&(e=C1(e)),r=fv(n,e,t);else{let i;i=null==t?Ya:C1(t),r=fv(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Q1(t),If(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class tK extends Qu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wo(e._repo,e._path,function x1(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class rK extends Qu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wo(e._repo,e._path,function N1(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class sK extends Qu{constructor(e){super(),this._path=e}_apply(e){Y1(e,"orderByChild");const t=new sr(this._path);if(kn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Yb(t),i=Hg(e._queryParams,r);return If(i),new Wo(e._repo,e._path,i,!0)}}class aK extends Qu{_apply(e){Y1(e,"orderByKey");const t=Hg(e._queryParams,fo);return If(t),new Wo(e._repo,e._path,t,!0)}}class lK extends Qu{_apply(e){Y1(e,"orderByPriority");const t=Hg(e._queryParams,Un);return If(t),new Wo(e._repo,e._path,t,!0)}}class dK extends Qu{_apply(e){Y1(e,"orderByValue");const t=Hg(e._queryParams,Xa);return If(t),new Wo(e._repo,e._path,t,!0)}}class fK extends Qu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ec("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Oj(this._value,this._key)._apply(new Pj(this._value,this._key)._apply(e))}}function Ju(n,...e){let t=(0,K.m9)(n);for(const r of e)t=r._apply(t);return t}(function K9(n){(0,K.hu)(!F1,"__referenceConstructor has already been defined"),F1=n})(ru),function X9(n){(0,K.hu)(!U1,"__referenceConstructor has already been defined"),U1=n}(ru);const tL={};function Fj(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||Za("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ui("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let v,I,c=QP(u,i),p=c.repoInfo;typeof process<"u"&&process.env&&(I=process.env.FIREBASE_DATABASE_EMULATOR_HOST),I?(v=!0,u=`http://${I}?ns=${p.namespace}`,c=QP(u,i),p=c.repoInfo):v=!c.repoInfo.secure;const A=i&&v?new Og(Og.OWNER):new tP(n.name,n.options,e);hj("Invalid Firebase Database URL",c),kn(c.path)||Za("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function yK(n,e,t,r){let i=tL[e.name];i||(i={},tL[e.name]=i);let u=i[n.toURLString()];return u&&Za("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new Tq(n,false,t,r),i[n.toURLString()]=u,u}(p,n,A,new GA(n.name,t));return new EK(M,n)}class EK{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Sq(n,e,t){if(n.stats_=sv(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Xb(n.repoInfo_,(r,i,u,c)=>{_j(n,r,i,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yj(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,K.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Kl(n.repoInfo_,e,(r,i,u,c)=>{_j(n,r,i,u,c)},r=>{yj(n,r)},r=>{!function Aq(n,e){Ci(e,(t,r)=>{WP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function YA(n,e){const t=n.toString();return kb[t]||(kb[t]=e()),kb[t]}(n.repoInfo_,()=>new O3(n.stats_,n.server_)),n.infoData_=new N3,n.infoSyncTree_=new tj({startListening:(r,i,u,c)=>{let p=[];const v=n.infoData_.getNode(r._path);return v.isEmpty()||(p=cI(n.infoSyncTree_,r._path,v),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),WP(n,"connected",!1),n.serverSyncTree_=new tj({startListening:(r,i,u,c)=>(n.server_.listen(r,u,i,(p,v)=>{const I=c(p,v);ma(n.eventQueue_,r._path,I)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ru(this._repo,er())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _K(n,e){const t=tL[e];(!t||t[n.key]!==n)&&Za(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Ej(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Za("Cannot call "+e+" on a deleted database.")}}function Vj(){uP.IS_TRANSPORT_INITIALIZED&&Ps("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wK(){Vj(),Wl.forceDisallow()}function bK(){Vj(),zl.forceDisallow(),Wl.forceAllow()}function DK(n,e){Tb(n,e)}const SK={".sv":"timestamp"};class NK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Kl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Kl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function TK(n){LA(da.SDK_VERSION),(0,da._registerComponent)(new qu.wA("database",(e,{instanceIdentifier:t})=>Fj(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,da.registerVersion)(OA,PA,n),(0,da.registerVersion)(OA,PA,"esm2017")}();const OK=new ha.Yd("@firebase/database-compat"),Bj=function(n){OK.warn("FIREBASE WARNING: "+n)};class FK{constructor(e){this._delegate=e}cancel(e){(0,K.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,K.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,K.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,K.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,K.Dv)("OnDisconnect.set",1,2,arguments.length),(0,K.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,K.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,K.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),u=>r(u)),i}update(e,t){if((0,K.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,Bj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,K.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class VK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,K.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Cf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,K.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,K.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,K.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,K.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,K.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),_I("DataSnapshot.child","path",e,!1),new Cf(this._database,this._delegate.child(e))}hasChild(e){return(0,K.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_I("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,K.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,K.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,K.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Cf(this._database,t)))}hasChildren(){return(0,K.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,K.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,K.Dv)("DataSnapshot.ref",0,0,arguments.length),new _a(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Fs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var u;(0,K.Dv)("Query.on",2,4,arguments.length),(0,K.Wj)("Query.on","callback",t,!1);const c=Fs.getCancelAndContextArgs_("Query.on",r,i),p=(I,A)=>{t.call(c.context,new Cf(this.database,I),A)};p.userCallback=t,p.context=c.context;const v=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return eL(this._delegate,p,v),t;case"child_added":return xj(this._delegate,p,v),t;case"child_removed":return Rj(this._delegate,p,v),t;case"child_changed":return Nj(this._delegate,p,v),t;case"child_moved":return Mj(this._delegate,p,v),t;default:throw new Error((0,K.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,K.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,K.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,K.Wj)("Query.off","callback",t,!0),(0,K.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,kj(this._delegate,e,i)}else kj(this._delegate,e)}get(){return Kq(this._delegate).then(e=>new Cf(this.database,e))}once(e,t,r,i){(0,K.Dv)("Query.once",1,4,arguments.length),(0,K.Wj)("Query.once","callback",t,!0);const u=Fs.getCancelAndContextArgs_("Query.once",r,i),c=new K.BH,p=(I,A)=>{const M=new Cf(this.database,I);t&&t.call(u.context,M,A),c.resolve(M)};p.userCallback=t,p.context=u.context;const v=I=>{u.cancel&&u.cancel.call(u.context,I),c.reject(I)};switch(e){case"value":eL(this._delegate,p,v,{onlyOnce:!0});break;case"child_added":xj(this._delegate,p,v,{onlyOnce:!0});break;case"child_removed":Rj(this._delegate,p,v,{onlyOnce:!0});break;case"child_changed":Nj(this._delegate,p,v,{onlyOnce:!0});break;case"child_moved":Mj(this._delegate,p,v,{onlyOnce:!0});break;default:throw new Error((0,K.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,K.Dv)("Query.limitToFirst",1,1,arguments.length),new Fs(this.database,Ju(this._delegate,function nK(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tK(n)}(e)))}limitToLast(e){return(0,K.Dv)("Query.limitToLast",1,1,arguments.length),new Fs(this.database,Ju(this._delegate,function iK(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new rK(n)}(e)))}orderByChild(e){return(0,K.Dv)("Query.orderByChild",1,1,arguments.length),new Fs(this.database,Ju(this._delegate,function oK(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _I("orderByChild","path",n,!1),new sK(n)}(e)))}orderByKey(){return(0,K.Dv)("Query.orderByKey",0,0,arguments.length),new Fs(this.database,Ju(this._delegate,function uK(){return new aK}()))}orderByPriority(){return(0,K.Dv)("Query.orderByPriority",0,0,arguments.length),new Fs(this.database,Ju(this._delegate,function cK(){return new lK}()))}orderByValue(){return(0,K.Dv)("Query.orderByValue",0,0,arguments.length),new Fs(this.database,Ju(this._delegate,function hK(){return new dK}()))}startAt(e=null,t){return(0,K.Dv)("Query.startAt",0,2,arguments.length),new Fs(this.database,Ju(this._delegate,function Jq(n=null,e){return mI("startAt","key",e,!0),new Pj(n,e)}(e,t)))}startAfter(e=null,t){return(0,K.Dv)("Query.startAfter",0,2,arguments.length),new Fs(this.database,Ju(this._delegate,function eK(n,e){return mI("startAfter","key",e,!0),new Xq(n,e)}(e,t)))}endAt(e=null,t){return(0,K.Dv)("Query.endAt",0,2,arguments.length),new Fs(this.database,Ju(this._delegate,function Zq(n,e){return mI("endAt","key",e,!0),new Oj(n,e)}(e,t)))}endBefore(e=null,t){return(0,K.Dv)("Query.endBefore",0,2,arguments.length),new Fs(this.database,Ju(this._delegate,function Qq(n,e){return mI("endBefore","key",e,!0),new Yq(n,e)}(e,t)))}equalTo(e,t){return(0,K.Dv)("Query.equalTo",1,2,arguments.length),new Fs(this.database,Ju(this._delegate,function pK(n,e){return mI("equalTo","key",e,!0),new fK(n,e)}(e,t)))}toString(){return(0,K.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,K.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,K.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Fs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,K.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,K.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,K.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new _a(this.database,new ru(this._delegate._repo,this._delegate._path))}}class _a extends Fs{constructor(e,t){super(e,new Wo(t._repo,t._path,new gf,!1)),this.database=e,this._delegate=t}getKey(){return(0,K.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,K.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new _a(this.database,Kg(this._delegate,e))}getParent(){(0,K.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new _a(this.database,e):null}getRoot(){return(0,K.Dv)("Reference.root",0,0,arguments.length),new _a(this.database,this._delegate.root)}set(e,t){(0,K.Dv)("Reference.set",1,2,arguments.length),(0,K.Wj)("Reference.set","onComplete",t,!0);const r=XP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,K.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,Bj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nu("Reference.update",this._delegate._path),(0,K.Wj)("Reference.update","onComplete",t,!0);const r=qq(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,K.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,K.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function zq(n,e,t){if(nu("setWithPriority",n._path),ec("setWithPriority",e,n._path,!1),GP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new K.BH;return zP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),u=>r(u)),i}remove(e){(0,K.Dv)("Reference.remove",0,1,arguments.length),(0,K.Wj)("Reference.remove","onComplete",e,!0);const t=function Gq(n){return nu("remove",n._path),XP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,K.Dv)("Reference.transaction",1,3,arguments.length),(0,K.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,K.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,K.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function MK(n,e,t){var r;if(n=(0,K.m9)(n),nu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,u=new K.BH,p=eL(n,()=>{});return function Fq(n,e,t,r,i,u){bv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:UA(),applyLocally:u,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=KP(n,e,void 0);c.currentInputSnapshot=p;const v=c.update(p.val());if(void 0===v)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{gI("transaction failed: Data returned ",v,c.path),c.status=0;const I=H1(n.transactionQueueTree_,e),A=zg(I)||[];let M;A.push(c),jP(I,A),"object"==typeof v&&null!==v&&(0,K.r3)(v,".priority")?(M=(0,K.DV)(v,".priority"),(0,K.hu)(pI(M),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):M=(j1(n.serverSyncTree_,e)||mn.EMPTY_NODE).getPriority().val();const P=yI(n),$=qr(v,M),Q=VP($,p,P);c.currentOutputSnapshotRaw=$,c.currentOutputSnapshotResolved=Q,c.currentWriteId=q1(n);const le=MP(n.serverSyncTree_,e,Q,c.currentWriteId,c.applyLocally);ma(n.eventQueue_,e,le),K1(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(v,I,A)=>{let M=null;v?u.reject(v):(M=new qg(A,new ru(n._repo,n._path),Un),u.resolve(new NK(I,M)))},p,i),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new VK(u.committed,new Cf(this.database,u.snapshot)));return t&&i.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),i}setPriority(e,t){(0,K.Dv)("Reference.setPriority",1,2,arguments.length),(0,K.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Wq(n,e){n=(0,K.m9)(n),nu("setPriority",n._path),GP("setPriority",e,!1);const t=new K.BH;return zP(n._repo,Vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,K.Dv)("Reference.push",0,2,arguments.length),(0,K.Wj)("Reference.push","onComplete",t,!0);const r=function Hq(n,e){n=(0,K.m9)(n),nu("push",n._path),ec("push",e,n._path,!0);const t=mj(n._repo),r=A3(t),i=Kg(n,r),u=Kg(n,r);let c;return c=null!=e?XP(u,e).then(()=>u):Promise.resolve(u),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new _a(this.database,c));t&&i.then(()=>t(null),c=>t(c));const u=new _a(this.database,r);return u.then=i.then.bind(i),u.catch=i.catch.bind(i,void 0),u}onDisconnect(){return nu("Reference.onDisconnect",this._delegate._path),new FK(new Tj(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wK,forceLongPolling:bK}}useEmulator(e,t,r={}){!function Uj(n,e,t,r={}){(n=(0,K.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Za("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let u;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Za('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Og(Og.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,K.Sg)(r.mockUserToken,n.app.options.projectId);u=new Og(c)}!function mK(n,e,t,r){n.repoInfo_=new Pg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,K.Dv)("database.ref",0,1,arguments.length),e instanceof _a){const t=Aj(this._delegate,e.toString());return new _a(this,t)}{const t=Sj(this._delegate,e);return new _a(this,t)}}refFromURL(e){(0,K.Dv)("database.refFromURL",1,1,arguments.length);const r=Aj(this._delegate,e);return new _a(this,r)}goOffline(){return(0,K.Dv)("database.goOffline",0,0,arguments.length),function IK(n){(n=(0,K.m9)(n))._checkNotDeleted("goOffline"),Ej(n._repo)}(this._delegate)}goOnline(){return(0,K.Dv)("database.goOnline",0,0,arguments.length),function CK(n){(n=(0,K.m9)(n))._checkNotDeleted("goOnline"),function Lq(n){n.persistentConnection_&&n.persistentConnection_.resume(gj)}(n._repo)}(this._delegate)}}wI.ServerValue={TIMESTAMP:function AK(){return SK}(),increment:n=>function xK(n){return{".sv":{increment:n}}}(n)};var BK=Object.freeze({__proto__:null,initStandalone:function UK({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:u=!1}){LA(t);const c=new qu.zt("auth-internal",new qu.H0("database-standalone"));return c.setComponent(new qu.wA("auth-internal",()=>r,"PRIVATE")),{instance:new wI(Fj(n,c,void 0,e,u),n),namespace:i}}});const jK=wI.ServerValue;function jj(n){return null==n}function $j(n){return"function"==typeof n.set}function Hj(n,e){return $j(e)?e:n.ref(e)}function Gj(n,e){if(function HK(n){return"string"==typeof n}(n))return e.stringCase();if($j(n))return e.firebaseCase();if(function GK(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function bI(n,e,t="on",r=Ib.z){return new Js.y(i=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,At.U)(i=>{const{snapshot:u,prevKey:c}=i;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,QS.B)())}function Wj(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function qK(n,e){const{payload:t,prevKey:r,key:i}=e,u=Wj(n,i),c=function zK(n,e){if(jj(e))return 0;{const t=Wj(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(v=>{const I={payload:v,type:"value",prevKey:p,key:v.key};return p=v.key,n=[...n,I],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(v=>v.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function zj(n){return(jj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function qj(n,e,t){return function WK(n,e,t){return bI(n,"value","once",t).pipe(ir(r=>{const i=[St(r)];return e.forEach(u=>i.push(bI(n,u,"on",t))),(0,$w.T)(...i).pipe(Ru(qK,[]))}),pd())}(n,e=zj(e),t)}function Kj(n,e,t){const r=(e=zj(e)).map(i=>bI(n,i,"on",t));return(0,$w.T)(...r)}function Zj(n,e){return function(r,i){return Gj(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function QK(n){return function(t){return t?Gj(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Yj(n,e){return function(){return bI(n,"value","on",e)}}!function $K(n){n.INTERNAL.registerComponent(new qu.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new wI(i,r)},"PUBLIC").setServiceProps({Reference:_a,Query:Fs,Database:wI,DataSnapshot:Cf,enableLogging:DK,INTERNAL:BK,ServerValue:jK}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(KO.Z);const eZ=new f.OlP("angularfire2.realtimeDatabaseURL"),tZ=new f.OlP("angularfire2.database.use-emulator");let Cv=(()=>{class n{constructor(t,r,i,u,c,p,v,I,A,M,P,$,Q,le,ye){this.schedulers=p;const ct=v,ht=(0,Sr.on)(t,c,r);I&&db(ht,c,A,P,$,Q,M,le),this.database=(0,Sr.cc)(`${ht.name}.database.${i}`,"AngularFireDatabase",ht.name,()=>{const Et=c.runOutsideAngular(()=>ht.database(i||void 0));return ct&&Et.useEmulator(...ct),Et},[ct])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Hj(this.database,t));let u=i;return r&&(u=r(i)),function JK(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Zj(r,"update"),set:Zj(r,"set"),push:i=>r.push(i),remove:QK(r),snapshotChanges:i=>qj(n,i,t).pipe(Fn.iC),stateChanges:i=>Kj(n,i,t).pipe(Fn.iC),auditTrail:i=>function KK(n,e,t){return function YK(n,e,t){return function ZK(n,e){return bI(n,"value","on",e).pipe((0,At.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function kA(...n){const e=(0,Po.jO)(n);return(0,zr.e)((t,r)=>{const i=n.length,u=new Array(i);let c=n.map(()=>!1),p=!1;for(let v=0;v<i;v++)(0,xu.Xf)(n[v]).subscribe((0,Jr.x)(r,I=>{u[v]=I,!p&&!c[v]&&(c[v]=!0,(p=c.every(Au.y))&&(c=null))},_3.Z));t.subscribe((0,Jr.x)(r,v=>{if(p){const I=[v,...u];r.next(e?e(...I):I)}}))})}(e),(0,At.U)(([i,u])=>{const c=i.lastKeyToLoad,p=u.map(v=>v.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function qO(n){return(0,zr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Jr.x)(t,u=>(r||(r=!n(u,i++)))&&t.next(u)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,At.U)(i=>i.actions))}(n,Kj(n,e).pipe(Ru((i,u)=>[...i,u],[])),t)}(n,i,t).pipe(Fn.iC),valueChanges:(i,u)=>qj(n,i,t).pipe((0,At.U)(p=>p.map(v=>u&&u.idField?Object.assign(Object.assign({},v.payload.val()),{[u.idField]:v.key}):v.payload.val())),Fn.iC)}}(u,this)}object(t){return function XK(n,e){return{query:n,snapshotChanges:()=>Yj(n,e.schedulers.outsideAngular)().pipe(Fn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Yj(n,e.schedulers.outsideAngular)().pipe(Fn.iC,(0,At.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hj(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sr.Dh),f.LFG(Sr.xv,8),f.LFG(eZ,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(tZ,8),f.LFG(Xs,8),f.LFG(Sg,8),f.LFG(fd,8),f.LFG(ab,8),f.LFG(ub,8),f.LFG(lb,8),f.LFG(cb,8),f.LFG(Tg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nZ=(()=>{class n{constructor(){jt.Z.registerVersion("angularfire",Fn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Cv]}),n})();var qt,rZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dd={},nL=nL||{},_n=rZ||self;function X1(){}function ex(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function II(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rL="closure_uid_"+(1e9*Math.random()>>>0),sZ=0;function oZ(n,e,t){return n.call.apply(n.bind,arguments)}function aZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function to(n,e,t){return(to=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oZ:aZ).apply(null,arguments)}function tx(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Vs(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Df(){this.s=this.s,this.o=this.o}Df.prototype.s=!1,Df.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function iZ(n){Object.prototype.hasOwnProperty.call(n,rL)&&n[rL]||(n[rL]=++sZ)}(this)},Df.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qj=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function iL(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Jj(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ex(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function no(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}no.prototype.h=function(){this.defaultPrevented=!0};var lZ=function(){if(!_n.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{_n.addEventListener("test",X1,e),_n.removeEventListener("test",X1,e)}catch{}return n}();function nx(n){return/^[\s\xa0]*$/.test(n)}var Xj=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function sL(n,e){return n<e?-1:n>e?1:0}function rx(){var n=_n.navigator;return n&&(n=n.userAgent)?n:""}function tc(n){return-1!=rx().indexOf(n)}function oL(n){return oL[" "](n),n}oL[" "]=X1;var ix,n,dZ=tc("Opera"),Dv=tc("Trident")||tc("MSIE"),e$=tc("Edge"),aL=e$||Dv,t$=tc("Gecko")&&!(-1!=rx().toLowerCase().indexOf("webkit")&&!tc("Edge"))&&!(tc("Trident")||tc("MSIE"))&&!tc("Edge"),hZ=-1!=rx().toLowerCase().indexOf("webkit")&&!tc("Edge");function n$(){var n=_n.document;return n?n.documentMode:void 0}e:{var uL="",lL=(n=rx(),t$?/rv:([^\);]+)(\)|;)/.exec(n):e$?/Edge\/([\d\.]+)/.exec(n):Dv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hZ?/WebKit\/(\S+)/.exec(n):dZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(lL&&(uL=lL?lL[1]:""),Dv){var cL=n$();if(null!=cL&&cL>parseFloat(uL)){ix=String(cL);break e}}ix=uL}var fZ={};var gZ=_n.document&&Dv&&(n$()||parseInt(ix,10))||void 0;function CI(n,e){if(no.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(t$){e:{try{oL(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&CI.X.h.call(this)}}Vs(CI,no);var mZ={2:"touch",3:"pen",4:"mouse"};CI.prototype.h=function(){CI.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var DI="closure_listenable_"+(1e6*Math.random()|0),_Z=0;function yZ(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++_Z,this.ba=this.ea=!1}function sx(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function hL(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function i$(n){const e={};for(const t in n)e[t]=n[t];return e}const s$="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function o$(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<s$.length;u++)t=s$[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ox(n){this.src=n,this.g={},this.h=0}function fL(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Qj(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(sx(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function pL(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}ox.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=pL(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new yZ(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var gL="closure_lm_"+(1e6*Math.random()|0),mL={};function a$(n,e,t,r,i){if(r&&r.once)return l$(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)a$(n,e[u],t,r,i);return null}return t=EL(t),n&&n[DI]?n.N(e,t,II(r)?!!r.capture:!!r,i):u$(n,e,t,!1,r,i)}function u$(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=II(i)?!!i.capture:!!i,p=yL(n);if(p||(n[gL]=p=new ox(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function vZ(){const e=EZ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lZ||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(d$(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function l$(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)l$(n,e[u],t,r,i);return null}return t=EL(t),n&&n[DI]?n.O(e,t,II(r)?!!r.capture:!!r,i):u$(n,e,t,!0,r,i)}function c$(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)c$(n,e[u],t,r,i);else r=II(r)?!!r.capture:!!r,t=EL(t),n&&n[DI]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=pL(u=n.g[e],t,r,i))&&(sx(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=yL(n))&&(e=n.g[e.toString()],n=-1,e&&(n=pL(e,t,r,i)),(t=-1<n?e[n]:null)&&_L(t))}function _L(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[DI])fL(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(d$(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=yL(e))?(fL(t,n),0==t.h&&(t.src=null,e[gL]=null)):sx(n)}}}function d$(n){return n in mL?mL[n]:mL[n]="on"+n}function EZ(n,e){if(n.ba)n=!0;else{e=new CI(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&_L(n),n=t.call(r,e)}return n}function yL(n){return(n=n[gL])instanceof ox?n:null}var vL="__closure_events_fn_"+(1e9*Math.random()>>>0);function EL(n){return"function"==typeof n?n:(n[vL]||(n[vL]=function(e){return n.handleEvent(e)}),n[vL])}function bs(){Df.call(this),this.i=new ox(this),this.P=this,this.I=null}function Us(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new no(e,n);else if(e instanceof no)e.target=e.target||n;else{var i=e;o$(e=new no(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=ax(c,r,!0,e)&&i}if(i=ax(c=e.g=n,r,!0,e)&&i,i=ax(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=ax(c=e.g=t[u],r,!1,e)&&i}function ax(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var p=c.listener,v=c.ha||c.src;c.ea&&fL(n.i,c),i=!1!==p.call(v,r)&&i}}return i&&!r.defaultPrevented}Vs(bs,Df),bs.prototype[DI]=!0,bs.prototype.removeEventListener=function(n,e,t,r){c$(this,n,e,t,r)},bs.prototype.M=function(){if(bs.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sx(t[r]);delete n.g[e],n.h--}}this.I=null},bs.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},bs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var wL=_n.JSON.stringify;function wZ(){var n=p$;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bL,h$=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new IZ,n=>n.reset());class IZ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function CZ(n){_n.setTimeout(()=>{throw n},0)}function f$(n,e){bL||function DZ(){var n=_n.Promise.resolve(void 0);bL=function(){n.then(TZ)}}(),IL||(bL(),IL=!0),p$.add(n,e)}var IL=!1,p$=new class bZ{constructor(){this.h=this.g=null}add(e,t){const r=h$.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function TZ(){for(var n;n=wZ();){try{n.h.call(n.g)}catch(t){CZ(t)}var e=h$;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}IL=!1}function ux(n,e){bs.call(this),this.h=n||1,this.g=e||_n,this.j=to(this.lb,this),this.l=Date.now()}function CL(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function DL(n,e,t){if("function"==typeof n)t&&(n=to(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=to(n.handleEvent,n)}return 2147483647<Number(e)?-1:_n.setTimeout(n,e||0)}function g$(n){n.g=DL(()=>{n.g=null,n.i&&(n.i=!1,g$(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vs(ux,bs),(qt=ux.prototype).ca=!1,qt.R=null,qt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Us(this,"tick"),this.ca&&(CL(this),this.start()))}},qt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qt.M=function(){ux.X.M.call(this),CL(this),delete this.g};class SZ extends Df{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:g$(this)}M(){super.M(),this.g&&(_n.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function TI(n){Df.call(this),this.h=n,this.g={}}Vs(TI,Df);var m$=[];function _$(n,e,t,r){Array.isArray(t)||(t&&(m$[0]=t.toString()),t=m$);for(var i=0;i<t.length;i++){var u=a$(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function y$(n){hL(n.g,function(e,t){this.g.hasOwnProperty(t)&&_L(e)},n),n.g={}}function lx(){this.g=!0}function Tv(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function MZ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return wL(t)}catch{return e}}(n,t)+(r?" "+r:"")})}TI.prototype.M=function(){TI.X.M.call(this),y$(this)},TI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lx.prototype.Aa=function(){this.g=!1},lx.prototype.info=function(){};var Zg={},v$=null;function cx(){return v$=v$||new bs}function E$(n){no.call(this,Zg.Pa,n)}function SI(n){const e=cx();Us(e,new E$(e))}function w$(n,e){no.call(this,Zg.STAT_EVENT,n),this.stat=e}function go(n){const e=cx();Us(e,new w$(e,n))}function b$(n,e){no.call(this,Zg.Qa,n),this.size=e}function AI(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return _n.setTimeout(function(){n()},e)}Zg.Pa="serverreachability",Vs(E$,no),Zg.STAT_EVENT="statevent",Vs(w$,no),Zg.Qa="timingevent",Vs(b$,no);var dx={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},I$={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function TL(){}function D$(){}TL.prototype.h=null;var xL,xI={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function SL(){no.call(this,"d")}function AL(){no.call(this,"c")}function hx(){}function NI(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new TI(this),this.O=RZ,this.T=new ux(n=aL?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new T$}function T$(){this.i=null,this.g="",this.h=!1}Vs(SL,no),Vs(AL,no),Vs(hx,TL),hx.prototype.g=function(){return new XMLHttpRequest},hx.prototype.i=function(){return{}},xL=new hx;var RZ=45e3,NL={},fx={};function ML(n,e,t){n.K=1,n.v=_x(Td(e)),n.s=t,n.P=!0,S$(n,null)}function S$(n,e){n.F=Date.now(),MI(n),n.A=Td(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),F$(t.i,"t",r),n.C=0,t=n.l.H,n.h=new T$,n.g=aH(n.l,t?e:null,!n.s),0<n.N&&(n.L=new SZ(to(n.La,n,n.g),n.N)),_$(n.S,n.g,"readystatechange",n.ib),e=n.H?i$(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),SI(),function AZ(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),v=0;v<p.length;v++){var I=p[v].split("=");if(1<I.length){var A=I[0];I=I[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+I+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function A$(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function x$(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=kZ(n,t),i==fx){4==e&&(n.o=4,go(14),r=!1),Tv(n.j,n.m,null,"[Incomplete Response]");break}if(i==NL){n.o=4,go(15),Tv(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Tv(n.j,n.m,i,null),RL(n,i)}A$(n)&&i!=fx&&i!=NL&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,go(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),BL(e),e.K=!0,go(11))):(Tv(n.j,n.m,t,"[Invalid Chunked Response]"),Yg(n),RI(n))}function kZ(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fx:(t=Number(e.substring(t,r)),isNaN(t)?NL:(r+=1)+t>e.length?fx:(e=e.substr(r,t),n.C=r+t,e))}function MI(n){n.V=Date.now()+n.O,N$(n,n.O)}function N$(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=AI(to(n.gb,n),e)}function px(n){n.B&&(_n.clearTimeout(n.B),n.B=null)}function RI(n){0==n.l.G||n.I||rH(n.l,n)}function Yg(n){px(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,CL(n.T),y$(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function RL(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||kL(t.h,n)))if(!n.J&&kL(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ix(t),wx(t)}UL(t),go(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=AI(to(t.cb,t),6e3));if(1>=B$(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Jg(t,11)}else if((n.J||t.g==n)&&Ix(t),!nx(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const A=I[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const M=I[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const P=I[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Q=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.h;u.g||-1==Q.indexOf("spdy")&&-1==Q.indexOf("quic")&&-1==Q.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(OL(u,u.h),u.h=null))}if(r.D){const le=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.za=le,oi(r.F,r.D,le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=oH(r,r.H?r.ka:null,r.V),c.J){j$(r.h,c);var p=c,v=r.J;v&&p.setTimeout(v),p.B&&(px(p),MI(p)),r.g=c}else tH(r);0<t.i.length&&bx(t)}else"stop"!=I[0]&&"close"!=I[0]||Jg(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Jg(t,7):VL(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}SI()}catch{}}function M$(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ex(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function PZ(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ex(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function OZ(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ex(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(qt=NI.prototype).setTimeout=function(n){this.O=n},qt.ib=function(n){n=n.target;const e=this.L;e&&3==Sd(n)?e.l():this.La(n)},qt.La=function(n){try{if(n==this.g)e:{const A=Sd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||aL||this.g&&(this.h.h||this.g.fa()||Z$(this.g)))){this.I||4!=A||7==e||SI(),px(this);var t=this.g.aa();this.Y=t;t:if(A$(this)){var r=Z$(this.g);n="";var i=r.length,u=4==Sd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yg(this),RI(this);var c="";break t}this.h.i=new _n.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function xZ(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,v=this.g;if((p=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nx(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,go(12),Yg(this),RI(this);break e}Tv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,RL(this,t)}this.P?(x$(this,A,c),aL&&this.i&&3==A&&(_$(this.S,this.T,"tick",this.hb),this.T.start())):(Tv(this.j,this.m,c,null),RL(this,c)),4==A&&Yg(this),this.i&&!this.I&&(4==A?rH(this.l,this):(this.i=!1,MI(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,go(12)):(this.o=0,go(13)),Yg(this),RI(this)}}}catch{}},qt.hb=function(){if(this.g){var n=Sd(this.g),e=this.g.fa();this.C<e.length&&(px(this),x$(this,n,e),this.i&&4!=n&&MI(this))}},qt.cancel=function(){this.I=!0,Yg(this)},qt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function NZ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(SI(),go(17)),Yg(this),this.o=2,RI(this)):N$(this,this.V-n)};var R$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qg(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Qg){this.h=void 0!==e?e:n.h,gx(this,n.j),this.s=n.s,this.g=n.g,mx(this,n.m),this.l=n.l,e=n.i;var t=new PI;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),k$(this,t),this.o=n.o}else n&&(t=String(n).match(R$))?(this.h=!!e,gx(this,t[1]||"",!0),this.s=kI(t[2]||""),this.g=kI(t[3]||"",!0),mx(this,t[4]),this.l=kI(t[5]||"",!0),k$(this,t[6]||"",!0),this.o=kI(t[7]||"")):(this.h=!!e,this.i=new PI(null,this.h))}function Td(n){return new Qg(n)}function gx(n,e,t){n.j=t?kI(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mx(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function k$(n,e,t){e instanceof PI?(n.i=e,function $Z(n,e){e&&!n.j&&(Tf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(P$(this,r),F$(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=OI(e,BZ)),n.i=new PI(e,n.h))}function oi(n,e,t){n.i.set(e,t)}function _x(n){return oi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kI(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function OI(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,FZ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function FZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(OI(e,O$,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(OI(e,O$,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(OI(t,"/"==t.charAt(0)?UZ:VZ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",OI(t,jZ)),n.join("")};var O$=/[#\/\?@]/g,VZ=/[#\?:]/g,UZ=/[#\?]/g,BZ=/[#\?@]/g,jZ=/#/g;function PI(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Tf(n){n.g||(n.g=new Map,n.h=0,n.i&&function LZ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function P$(n,e){Tf(n),e=Sv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function L$(n,e){return Tf(n),e=Sv(n,e),n.g.has(e)}function F$(n,e,t){P$(n,e),0<t.length&&(n.i=null,n.g.set(Sv(n,e),iL(t)),n.h+=t.length)}function Sv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function V$(n){this.l=n||GZ,n=_n.PerformanceNavigationTiming?0<(n=_n.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(_n.g&&_n.g.Ga&&_n.g.Ga()&&_n.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qt=PI.prototype).add=function(n,e){Tf(this),this.i=null,n=Sv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qt.forEach=function(n,e){Tf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},qt.oa=function(){Tf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},qt.W=function(n){Tf(this);let e=[];if("string"==typeof n)L$(this,n)&&(e=e.concat(this.g.get(Sv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},qt.set=function(n,e){return Tf(this),this.i=null,L$(this,n=Sv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var GZ=10;function U$(n){return!!n.h||!!n.g&&n.g.size>=n.j}function B$(n){return n.h?1:n.g?n.g.size:0}function kL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function OL(n,e){n.g?n.g.add(e):n.h=e}function j$(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $$(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return iL(n.i)}function PL(){}function WZ(){this.g=new PL}function zZ(n,e,t){const r=t||"";try{M$(n,function(i,u){let c=i;II(i)&&(c=wL(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yx(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function LI(n){this.l=n.ac||null,this.j=n.jb||!1}function vx(n,e){bs.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=LL,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}V$.prototype.cancel=function(){if(this.i=$$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},PL.prototype.stringify=function(n){return _n.JSON.stringify(n,void 0)},PL.prototype.parse=function(n){return _n.JSON.parse(n,void 0)},Vs(LI,TL),LI.prototype.g=function(){return new vx(this.l,this.j)},LI.prototype.i=function(n){return function(){return n}}({}),Vs(vx,bs);var LL=0;function H$(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function FI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,VI(n)}function VI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qt=vx.prototype).open=function(n,e){if(this.readyState!=LL)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,VI(this)},qt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||_n).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,FI(this)),this.readyState=LL},qt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,VI(this)),this.g&&(this.readyState=3,VI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof _n.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;H$(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},qt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?FI(this):VI(this),3==this.readyState&&H$(this)}},qt.Va=function(n){this.g&&(this.response=this.responseText=n,FI(this))},qt.Ua=function(n){this.g&&(this.response=n,FI(this))},qt.ga=function(){this.g&&FI(this)},qt.setRequestHeader=function(n,e){this.v.append(n,e)},qt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var KZ=_n.JSON.parse;function Di(n){bs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=G$,this.K=this.L=!1}Vs(Di,bs);var G$="",ZZ=/^https?$/i,YZ=["POST","PUT"];function W$(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,z$(n),Ex(n)}function z$(n){n.D||(n.D=!0,Us(n,"complete"),Us(n,"error"))}function q$(n){if(n.h&&typeof nL<"u"&&(!n.C[1]||4!=Sd(n)||2!=n.aa()))if(n.v&&4==Sd(n))DL(n.Ha,0,n);else if(Us(n,"readystatechange"),4==Sd(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(R$)[1]||null;if(!i&&_n.self&&_n.self.location){var u=_n.self.location.protocol;i=u.substr(0,u.length-1)}r=!ZZ.test(i?i.toLowerCase():"")}t=r}if(t)Us(n,"complete"),Us(n,"success");else{n.m=6;try{var c=2<Sd(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",z$(n)}}finally{Ex(n)}}}function Ex(n,e){if(n.g){K$(n);const t=n.g,r=n.C[0]?X1:null;n.g=null,n.C=null,e||Us(n,"ready");try{t.onreadystatechange=r}catch{}}}function K$(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(_n.clearTimeout(n.A),n.A=null)}function Sd(n){return n.g?n.g.readyState:0}function Z$(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case G$:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Y$(n){let e="";return hL(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function FL(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Y$(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):oi(n,e,t))}function UI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Q$(n){this.Ca=0,this.i=[],this.j=new lx,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=UI("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=UI("baseRetryDelayMs",5e3,n),this.bb=UI("retryDelaySeedMs",1e4,n),this.$a=UI("forwardChannelMaxRetries",2,n),this.ta=UI("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new V$(n&&n.concurrentRequestLimit),this.Fa=new WZ,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function VL(n){if(J$(n),3==n.G){var e=n.U++,t=Td(n.F);oi(t,"SID",n.I),oi(t,"RID",e),oi(t,"TYPE","terminate"),BI(n,t),(e=new NI(n,n.j,e,void 0)).K=2,e.v=_x(Td(t)),t=!1,_n.navigator&&_n.navigator.sendBeacon&&(t=_n.navigator.sendBeacon(e.v.toString(),"")),!t&&_n.Image&&((new Image).src=e.v,t=!0),t||(e.g=aH(e.l,null),e.g.da(e.v)),e.F=Date.now(),MI(e)}sH(n)}function wx(n){n.g&&(BL(n),n.g.cancel(),n.g=null)}function J$(n){wx(n),n.u&&(_n.clearTimeout(n.u),n.u=null),Ix(n),n.h.cancel(),n.m&&("number"==typeof n.m&&_n.clearTimeout(n.m),n.m=null)}function bx(n){U$(n.h)||n.m||(n.m=!0,f$(n.Ja,n),n.C=0)}function X$(n,e){var t;t=e?e.m:n.U++;const r=Td(n.F);oi(r,"SID",n.I),oi(r,"RID",t),oi(r,"AID",n.T),BI(n,r),n.o&&n.s&&FL(r,n.o,n.s),t=new NI(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=eH(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),OL(n.h,t),ML(t,r,e)}function BI(n,e){n.ia&&hL(n.ia,function(t,r){oi(e,r,t)}),n.l&&M$({},function(t,r){oi(e,r,t)})}function eH(n,e,t){t=Math.min(n.i.length,t);var r=n.l?to(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let v=0;v<t;v++){let I=i[v].h;const A=i[v].g;if(I-=u,0>I)u=Math.max(0,i[v].h-100),p=!1;else try{zZ(A,c,"req"+I+"_")}catch{r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function tH(n){n.g||n.u||(n.Z=1,f$(n.Ia,n),n.A=0)}function UL(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=AI(to(n.Ia,n),iH(n,n.A)),n.A++,0))}function BL(n){null!=n.B&&(_n.clearTimeout(n.B),n.B=null)}function nH(n){n.g=new NI(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Td(n.sa);oi(e,"RID","rpc"),oi(e,"SID",n.I),oi(e,"CI",n.L?"0":"1"),oi(e,"AID",n.T),oi(e,"TYPE","xmlhttp"),BI(n,e),n.o&&n.s&&FL(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=_x(Td(e)),t.s=null,t.P=!0,S$(t,n)}function Ix(n){null!=n.v&&(_n.clearTimeout(n.v),n.v=null)}function rH(n,e){var t=null;if(n.g==e){Ix(n),BL(n),n.g=null;var r=2}else{if(!kL(n.h,e))return;t=e.D,j$(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Us(r=cx(),new b$(r,t)),bx(n)}else tH(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function JZ(n,e){return!(B$(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=AI(to(n.Ja,n,e),iH(n,n.C)),n.C++,0)))}(n,e)||2==r&&UL(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Jg(n,5);break;case 4:Jg(n,10);break;case 3:Jg(n,6);break;default:Jg(n,2)}}function iH(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Jg(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=to(n.kb,n);t||(t=new Qg("//www.google.com/images/cleardot.gif"),_n.location&&"http"==_n.location.protocol||gx(t,"https"),_x(t)),function qZ(n,e){const t=new lx;if(_n.Image){const r=new Image;r.onload=tx(yx,t,r,"TestLoadImage: loaded",!0,e),r.onerror=tx(yx,t,r,"TestLoadImage: error",!1,e),r.onabort=tx(yx,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=tx(yx,t,r,"TestLoadImage: timeout",!1,e),_n.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else go(2);n.G=0,n.l&&n.l.va(e),sH(n),J$(n)}function sH(n){if(n.G=0,n.la=[],n.l){const e=$$(n.h);(0!=e.length||0!=n.i.length)&&(Jj(n.la,e),Jj(n.la,n.i),n.h.i.length=0,iL(n.i),n.i.length=0),n.l.ua()}}function oH(n,e,t){var r=t instanceof Qg?Td(t):new Qg(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mx(r,r.m);else{var i=_n.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Qg(null,void 0);r&&gx(u,r),e&&(u.g=e),i&&mx(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&oi(r,t,e),oi(r,"VER",n.ma),BI(n,r),r}function aH(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Di(t&&n.Da&&!n.ra?new LI({jb:!0}):n.ra)).Ka(n.H),e}function uH(){}function Cx(){if(Dv&&!(10<=Number(gZ)))throw Error("Environmental error: no available transport.")}function ya(n,e){bs.call(this),this.g=new Q$(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!nx(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nx(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Av(this)}function lH(n){SL.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cH(){AL.call(this),this.status=1}function Av(n){this.g=n}(qt=Di.prototype).Ka=function(n){this.L=n},qt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xL.g(),this.C=function C$(n){return n.h||(n.h=n.i())}(this.u?this.u:xL),this.g.onreadystatechange=to(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void W$(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=_n.FormData&&n instanceof _n.FormData,!(0<=Qj(YZ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{K$(this),0<this.B&&((this.K=function QZ(n){return Dv&&function pZ(){return function cZ(n){var e=fZ;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Xj(String(ix)).split("."),t=Xj("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=sL(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||sL(0==i[2].length,0==u[2].length)||sL(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=to(this.qa,this)):this.A=DL(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){W$(this,u)}},qt.qa=function(){typeof nL<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Us(this,"timeout"),this.abort(8))},qt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Us(this,"complete"),Us(this,"abort"),Ex(this))},qt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ex(this,!0)),Di.X.M.call(this)},qt.Ha=function(){this.s||(this.F||this.v||this.l?q$(this):this.fb())},qt.fb=function(){q$(this)},qt.aa=function(){try{return 2<Sd(this)?this.g.status:-1}catch{return-1}},qt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},qt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),KZ(e)}},qt.Ea=function(){return this.m},qt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(qt=Q$.prototype).ma=8,qt.G=1,qt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new NI(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=i$(u),o$(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eH(this,i,e),oi(t=Td(this.F),"RID",n),oi(t,"CVER",22),this.D&&oi(t,"X-HTTP-Session-Id",this.D),BI(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Y$(u)))+"&"+e:this.o&&FL(t,this.o,u)),OL(this.h,i),this.Ya&&oi(t,"TYPE","init"),this.O?(oi(t,"$req",e),oi(t,"SID","null"),i.Z=!0,ML(i,t,null)):ML(i,t,e),this.G=2}}else 3==this.G&&(n?X$(this,n):0==this.i.length||U$(this.h)||X$(this))},qt.Ia=function(){if(this.u=null,nH(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=AI(to(this.eb,this),n)}},qt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,go(10),wx(this),nH(this))},qt.cb=function(){null!=this.v&&(this.v=null,wx(this),UL(this),go(19))},qt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),go(2)):(this.j.info("Failed to ping google.com"),go(1))},(qt=uH.prototype).xa=function(){},qt.wa=function(){},qt.va=function(){},qt.ua=function(){},qt.Ra=function(){},Cx.prototype.g=function(n,e){return new ya(n,e)},Vs(ya,bs),ya.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;go(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=oH(n,null,n.V),bx(n)},ya.prototype.close=function(){VL(this.g)},ya.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=wL(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&bx(e)},ya.prototype.M=function(){this.g.l=null,delete this.j,VL(this.g),delete this.g,ya.X.M.call(this)},Vs(lH,SL),Vs(cH,AL),Vs(Av,uH),Av.prototype.xa=function(){Us(this.g,"a")},Av.prototype.wa=function(n){Us(this.g,new lH(n))},Av.prototype.va=function(n){Us(this.g,new cH)},Av.prototype.ua=function(){Us(this.g,"b")},Cx.prototype.createWebChannel=Cx.prototype.g,ya.prototype.send=ya.prototype.u,ya.prototype.open=ya.prototype.m,ya.prototype.close=ya.prototype.close,dx.NO_ERROR=0,dx.TIMEOUT=8,dx.HTTP_ERROR=6,I$.COMPLETE="complete",D$.EventType=xI,xI.OPEN="a",xI.CLOSE="b",xI.ERROR="c",xI.MESSAGE="d",bs.prototype.listen=bs.prototype.N,Di.prototype.listenOnce=Di.prototype.O,Di.prototype.getLastError=Di.prototype.Oa,Di.prototype.getLastErrorCode=Di.prototype.Ea,Di.prototype.getStatus=Di.prototype.aa,Di.prototype.getResponseJson=Di.prototype.Sa,Di.prototype.getResponseText=Di.prototype.fa,Di.prototype.send=Di.prototype.da,Di.prototype.setWithCredentials=Di.prototype.Ka;var XZ=Dd.createWebChannelTransport=function(){return new Cx},eY=Dd.getStatEventTarget=function(){return cx()},jL=Dd.ErrorCode=dx,tY=Dd.EventType=I$,nY=Dd.Event=Zg,dH=Dd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},rY=Dd.FetchXmlHttpFactory=LI,Dx=Dd.WebChannel=D$,iY=Dd.XhrIo=Di;const hH="@firebase/firestore";class Is{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Is.UNAUTHENTICATED=new Is(null),Is.GOOGLE_CREDENTIALS=new Is("google-credentials-uid"),Is.FIRST_PARTY=new Is("first-party-uid"),Is.MOCK_USER=new Is("mock-user");let xv="9.14.0";const Sf=new ha.Yd("@firebase/firestore");function $L(){return Sf.logLevel}function lt(n,...e){if(Sf.logLevel<=ha.in.DEBUG){const t=e.map(HL);Sf.debug(`Firestore (${xv}): ${n}`,...t)}}function Bi(n,...e){if(Sf.logLevel<=ha.in.ERROR){const t=e.map(HL);Sf.error(`Firestore (${xv}): ${n}`,...t)}}function Xg(n,...e){if(Sf.logLevel<=ha.in.WARN){const t=e.map(HL);Sf.warn(`Firestore (${xv}): ${n}`,...t)}}function HL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Lt(n="Unexpected state"){const e=`FIRESTORE (${xv}) INTERNAL ASSERTION FAILED: `+n;throw Bi(e),new Error(e)}function sn(n,e){n||Lt()}function Ct(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends K.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ls{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Is.UNAUTHENTICATED))}shutdown(){}}class uY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lY{constructor(e){this.t=e,this.currentUser=Is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let c=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ls,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=c;e.enqueueRetryable((0,Oe.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ls)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(sn("string"==typeof r.accessToken),new fH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sn(null===e||"string"==typeof e),new Is(e)}}class cY{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Is.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(sn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class dY{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new cY(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hY{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,lt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(sn("string"==typeof t.token),this.A=t.token,new pH(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fY(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gH{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fY(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function yn(n,e){return n<e?-1:n>e?1:0}function Nv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mH(n){return n+"\0"}class ai{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tt(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tt(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new tt(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ai.fromMillis(Date.now())}static fromDate(e){return ai.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ai(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yn(this.nanoseconds,e.nanoseconds):yn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class on{constructor(e){this.timestamp=e}static fromTimestamp(e){return new on(e)}static min(){return new on(new ai(0,0))}static max(){return new on(new ai(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jI{constructor(e,t,r){void 0===t?t=0:t>e.length&&Lt(),void 0===r?r=e.length-t:r>e.length-t&&Lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tr extends jI{construct(e,t,r){return new tr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new tt(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tr(t)}static emptyPath(){return new tr([])}}const pY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ti extends jI{construct(e,t,r){return new Ti(e,t,r)}static isValidIdentifier(e){return pY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ti.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ti(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new tt(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new tt(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new tt(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new tt(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ti(t)}static emptyPath(){return new Ti([])}}class bt{constructor(e){this.path=e}static fromPath(e){return new bt(tr.fromString(e))}static fromName(e){return new bt(tr.fromString(e).popFirst(5))}static empty(){return new bt(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new tr(e.slice()))}}class Tx{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function GL(n){return n.fields.find(e=>2===e.kind)}function em(n){return n.fields.filter(e=>2!==e.kind)}Tx.UNKNOWN_ID=-1;class Sx{constructor(e,t){this.fieldPath=e,this.kind=t}}class $I{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $I(0,va.min())}}function _H(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=on.fromTimestamp(1e9===r?new ai(t+1,0):new ai(t,r));return new va(i,bt.empty(),e)}function yH(n){return new va(n.readTime,n.key,-1)}class va{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new va(on.min(),bt.empty(),-1)}static max(){return new va(on.max(),bt.empty(),-1)}}function WL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=bt.comparator(n.documentKey,e.documentKey),0!==t?t:yn(n.largestBatchId,e.largestBatchId))}const vH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Af(n){return zL.apply(this,arguments)}function zL(){return zL=(0,Oe.Z)(function*(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==vH)throw n;lt("LocalStore","Unexpectedly lost primary lease")}),zL.apply(this,arguments)}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,r)=>{t(e)})}static reject(e){return new xe((t,r)=>{r(e)})}static waitFor(e){return new xe((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},v=>r(v))}),c=!0,u===i&&t()})}static or(e){let t=xe.resolve(!1);for(const r of e)t=t.next(i=>i?xe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new xe((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let v=0;v<u;v++){const I=v;t(e[I]).next(A=>{c[I]=A,++p,p===u&&r(c)},A=>i(A))}})}static doWhile(e,t){return new xe((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Ax{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ls,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new HI(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=qL(r.target.error);this.P.reject(new HI(e,i))}}static open(e,t,r,i){try{return new Ax(t,e.transaction(i,r))}catch(u){throw new HI(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yY(t)}}class Xu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Xu.D((0,K.z$)())&&Bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return lt("SimpleDb","Removing database:",e),tm(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,K.hl)())return!1;if(Xu.N())return!0;const e=(0,K.z$)(),t=Xu.D(e),r=0<t&&t<10,i=Xu.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Oe.Z)(function*(){return t.db||(lt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new HI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new tt(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new tt(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new HI(e,p))},u.onupgradeneeded=c=>{lt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{lt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Oe.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const v=Ax.open(u.db,e,c?"readonly":"readwrite",r),I=i(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),xe.reject(A))).toPromise();return I.catch(()=>{}),yield v.v,I}catch(v){const I=v,A="FirebaseError"!==I.name&&p<3;if(lt("SimpleDb","Transaction failed with error:",I.message,"Retrying:",A),u.close(),!A)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _Y{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return tm(this.U.delete())}}class HI extends tt{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xf(n){return"IndexedDbTransactionError"===n.name}class yY{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(lt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tm(r)}add(e){return lt("SimpleDb","ADD",this.store.name,e,e),tm(this.store.add(e))}get(e){return tm(this.store.get(e)).next(t=>(void 0===t&&(t=null),lt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return lt("SimpleDb","DELETE",this.store.name,e),tm(this.store.delete(e))}count(){return lt("SimpleDb","COUNT",this.store.name),tm(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new xe((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new xe((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){lt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new xe((r,i)=>{t.onerror=u=>{const c=qL(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new xe((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const v=new _Y(p),I=t(p.primaryKey,p.value,v);if(I instanceof xe){const A=I.catch(M=>(v.done(),xe.reject(M)));r.push(A)}v.isDone?i():null===v.G?p.continue():p.continue(v.G)}}).next(()=>xe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tm(n){return new xe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=qL(r.target.error);t(i)}})}let wH=!1;function qL(n){const e=Xu.D((0,K.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wH||(wH=!0,setTimeout(()=>{throw r},0)),r}}return n}class vY{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;lt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Oe.Z)(function*(){t.task=null;try{lt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){xf(r)?lt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Af(r)}yield t.nt(6e4)}))}}class EY{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return xe.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return lt("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(p=>(lt("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=yH(u);WL(c,r)>0&&(r=c)}),new va(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function bH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}zo.at=-1;class Si{constructor(e,t){this.comparator=e,this.root=t||Bs.EMPTY}insert(e,t){return new Si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bs.BLACK,null,null))}remove(e){return new Si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xx(this.root,e,this.comparator,!1)}getReverseIterator(){return new xx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xx(this.root,e,this.comparator,!0)}}class xx{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bs{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Bs.RED,this.left=i??Bs.EMPTY,this.right=u??Bs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Bs(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Bs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lt();const e=this.left.check();if(e!==this.right.check())throw Lt();return e+(this.isRed()?0:1)}}Bs.EMPTY=null,Bs.RED=!0,Bs.BLACK=!1,Bs.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt()}get value(){throw Lt()}get color(){throw Lt()}get left(){throw Lt()}get right(){throw Lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Bs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mr{constructor(e){this.comparator=e,this.data=new Si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CH(this.data.getIterator())}getIteratorFrom(e){return new CH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mr(this.comparator);return t.data=e,t}}class CH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mv(n){return n.hasNext()?n.getNext():void 0}class Ea{constructor(e){this.fields=e,e.sort(Ti.comparator)}static empty(){return new Ea([])}unionWith(e){let t=new Mr(Ti.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ea(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new cs(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cs.EMPTY_BYTE_STRING=new cs("");const bY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nf(n){if(sn(!!n),"string"==typeof n){let e=0;const t=bY.exec(n);if(sn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ai(n.seconds),nanos:Ai(n.nanos)}}function Ai(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rm(n){return"string"==typeof n?cs.fromBase64String(n):cs.fromUint8Array(n)}function KL(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function DH(n){const e=n.mapValue.fields.__previous_value__;return KL(e)?DH(e):e}function GI(n){const e=Nf(n.mapValue.fields.__local_write_time__.timestampValue);return new ai(e.seconds,e.nanos)}class IY{constructor(e,t,r,i,u,c,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=v}}class Mf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mf&&e.projectId===this.projectId&&e.database===this.database}}function WI(n){return null==n}function zI(n){return 0===n&&1/n==-1/0}function TH(n){return"number"==typeof n&&Number.isInteger(n)&&!zI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Rf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nx={nullValue:"NULL_VALUE"};function im(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?KL(n)?4:NH(n)?9007199254740991:10:Lt()}function nc(n,e){if(n===e)return!0;const t=im(n);if(t!==im(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return GI(n).isEqual(GI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Nf(r.timestampValue),c=Nf(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,rm(n.bytesValue).isEqual(rm(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ai(r.geoPointValue.latitude)===Ai(i.geoPointValue.latitude)&&Ai(r.geoPointValue.longitude)===Ai(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ai(r.integerValue)===Ai(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Ai(r.doubleValue),c=Ai(i.doubleValue);return u===c?zI(u)===zI(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Nv(n.arrayValue.values||[],e.arrayValue.values||[],nc);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(bH(u)!==bH(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!nc(u[p],c[p])))return!1;return!0}(n,e);default:return Lt()}var i}function qI(n,e){return void 0!==(n.values||[]).find(t=>nc(t,e))}function kf(n,e){if(n===e)return 0;const t=im(n),r=im(e);if(t!==r)return yn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return yn(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Ai(i.integerValue||i.doubleValue),p=Ai(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return SH(n.timestampValue,e.timestampValue);case 4:return SH(GI(n),GI(e));case 5:return yn(n.stringValue,e.stringValue);case 6:return function(i,u){const c=rm(i),p=rm(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let v=0;v<c.length&&v<p.length;v++){const I=yn(c[v],p[v]);if(0!==I)return I}return yn(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=yn(Ai(i.latitude),Ai(u.latitude));return 0!==c?c:yn(Ai(i.longitude),Ai(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let v=0;v<c.length&&v<p.length;++v){const I=kf(c[v],p[v]);if(I)return I}return yn(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Rf.mapValue&&u===Rf.mapValue)return 0;if(i===Rf.mapValue)return 1;if(u===Rf.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),v=u.fields||{},I=Object.keys(v);p.sort(),I.sort();for(let A=0;A<p.length&&A<I.length;++A){const M=yn(p[A],I[A]);if(0!==M)return M;const P=kf(c[p[A]],v[I[A]]);if(0!==P)return P}return yn(p.length,I.length)}(n.mapValue,e.mapValue);default:throw Lt()}}function SH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return yn(n,e);const t=Nf(n),r=Nf(e),i=yn(t.seconds,r.seconds);return 0!==i?i:yn(t.nanos,r.nanos)}function Rv(n){return ZL(n)}function ZL(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Nf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rm(n.bytesValue).toBase64():"referenceValue"in n?bt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=ZL(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${ZL(r.fields[p])}`;return u+"}"}(n.mapValue):Lt();var e}function sm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function YL(n){return!!n&&"integerValue"in n}function KI(n){return!!n&&"arrayValue"in n}function AH(n){return!!n&&"nullValue"in n}function xH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mx(n){return!!n&&"mapValue"in n}function ZI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ZI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ZI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function CY(n){return"nullValue"in n?Nx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sm(Mf.empty(),bt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Lt()}function DY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sm(Mf.empty(),bt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Rf:Lt()}function MH(n,e){const t=kf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RH(n,e){const t=kf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class js{constructor(e){this.value=e}static empty(){return new js({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ZI(t)}setAll(e){let t=Ti.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=ZI(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Mx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){nm(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new js(ZI(this.value))}}function kH(n){const e=[];return nm(n.fields,(t,r)=>{const i=new Ti([t]);if(Mx(r)){const u=kH(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Ea(e)}class Zr{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Zr(e,0,on.min(),on.min(),js.empty(),0)}static newFoundDocument(e,t,r){return new Zr(e,1,t,on.min(),r,0)}static newNoDocument(e,t){return new Zr(e,2,t,on.min(),js.empty(),0)}static newUnknownDocument(e,t){return new Zr(e,3,t,on.min(),js.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=js.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=on.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class TY{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function OH(n,e=null,t=[],r=[],i=null,u=null,c=null){return new TY(n,e,t,r,i,u,c)}function om(n){const e=Ct(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Rv(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),WI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rv(r)).join(",")),e.ht=t}return e.ht}function YI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!PY(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!nc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UH(n.startAt,e.startAt)&&UH(n.endAt,e.endAt)}function Rx(n){return bt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kx(n,e){return n.filters.filter(t=>t instanceof $s&&t.field.isEqual(e))}function PH(n,e,t){let r=Nx,i=!0;for(const u of kx(n,e)){let c=Nx,p=!0;switch(u.op){case"<":case"<=":c=CY(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=Nx}MH({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];MH({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function LH(n,e,t){let r=Rf,i=!0;for(const u of kx(n,e)){let c=Rf,p=!0;switch(u.op){case">=":case">":c=DY(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=Rf}RH({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];RH({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class $s extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new AY(e,t,r):"array-contains"===t?new MY(e,r):"in"===t?new RY(e,r):"not-in"===t?new kY(e,r):"array-contains-any"===t?new OY(e,r):new $s(e,t,r)}static lt(e,t,r){return"in"===t?new xY(e,r):new NY(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(kf(t,this.value)):null!==t&&im(this.value)===im(t)&&this.ft(kf(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AY extends $s{constructor(e,t,r){super(e,t,r),this.key=bt.fromName(r.referenceValue)}matches(e){const t=bt.comparator(e.key,this.key);return this.ft(t)}}class xY extends $s{constructor(e,t){super(e,"in",t),this.keys=FH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NY extends $s{constructor(e,t){super(e,"not-in",t),this.keys=FH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>bt.fromName(r.referenceValue))}class MY extends $s{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return KI(t)&&qI(t.arrayValue,this.value)}}class RY extends $s{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qI(this.value.arrayValue,t)}}class kY extends $s{constructor(e,t){super(e,"not-in",t)}matches(e){if(qI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qI(this.value.arrayValue,t)}}class OY extends $s{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!KI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qI(this.value.arrayValue,r))}}class Of{constructor(e,t){this.position=e,this.inclusive=t}}class kv{constructor(e,t="asc"){this.field=e,this.dir=t}}function PY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function VH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?bt.comparator(bt.fromName(c.referenceValue),t.key):kf(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function UH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nc(n.position[t],e.position[t]))return!1;return!0}class Ad{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=v,this._t=null,this.wt=null}}function BH(n,e,t,r,i,u,c,p){return new Ad(n,e,t,r,i,u,c,p)}function Ov(n){return new Ad(n)}function jH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function QL(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JL(n){for(const e of n.filters)if(e.dt())return e.field;return null}function XL(n){return null!==n.collectionGroup}function Pv(n){const e=Ct(n);if(null===e._t){e._t=[];const t=JL(e),r=QL(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new kv(t)),e._t.push(new kv(Ti.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new kv(Ti.keyField(),u))}}}return e._t}function mo(n){const e=Ct(n);if(!e.wt)if("F"===e.limitType)e.wt=OH(e.path,e.collectionGroup,Pv(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Pv(e))t.push(new kv(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Of(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Of(e.startAt.position,e.startAt.inclusive):null;e.wt=OH(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ox(n,e,t){return new Ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function QI(n,e){return YI(mo(n),mo(e))&&n.limitType===e.limitType}function $H(n){return`${om(mo(n))}|lt:${n.limitType}`}function eF(n){return`Query(target=${function SY(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Rv(r.value)}`;var r}).join(", ")}]`),WI(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Rv(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Rv(t)).join(",")),`Target(${e})`}(mo(n))}; limitType=${n.limitType})`}function tF(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):bt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=VH(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Pv(t),r)||t.endAt&&!function(i,u,c){const p=VH(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Pv(t),r)));var t,r}function HH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GH(n){return(e,t)=>{let r=!1;for(const i of Pv(n)){const u=LY(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function LY(n,e,t){const r=n.field.isKeyField()?bt.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),v=c.data.field(i);return null!==p&&null!==v?kf(p,v):Lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Lt()}}function WH(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zI(e)?"-0":e}}function zH(n){return{integerValue:""+n}}function qH(n,e){return TH(e)?zH(e):WH(n,e)}class Px{constructor(){this._=void 0}}function FY(n,e,t){return n instanceof Lv?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof am?ZH(n,e):n instanceof um?YH(n,e):function(r,i){const u=KH(r,i),c=QH(u)+QH(r.yt);return YL(u)&&YL(r.yt)?zH(c):WH(r.It,c)}(n,e)}function VY(n,e,t){return n instanceof am?ZH(n,e):n instanceof um?YH(n,e):t}function KH(n,e){return n instanceof Fv?YL(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lv extends Px{}class am extends Px{constructor(e){super(),this.elements=e}}function ZH(n,e){const t=JH(e);for(const r of n.elements)t.some(i=>nc(i,r))||t.push(r);return{arrayValue:{values:t}}}class um extends Px{constructor(e){super(),this.elements=e}}function YH(n,e){let t=JH(e);for(const r of n.elements)t=t.filter(i=>!nc(i,r));return{arrayValue:{values:t}}}class Fv extends Px{constructor(e,t){super(),this.It=e,this.yt=t}}function QH(n){return Ai(n.integerValue||n.doubleValue)}function JH(n){return KI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class JI{constructor(e,t){this.field=e,this.transform=t}}class BY{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lx(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fx{}function XH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Uv(n.key,ui.none()):new Vv(n.key,n.data,ui.none());{const t=n.data,r=js.empty();let i=new Mr(Ti.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new xd(n.key,r,new Ea(i.toArray()),ui.none())}}function jY(n,e,t){n instanceof Vv?function(r,i,u){const c=r.value.clone(),p=n6(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof xd?function(r,i,u){if(!Lx(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=n6(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(t6(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function XI(n,e,t,r){return n instanceof Vv?function(i,u,c,p){if(!Lx(i.precondition,u))return c;const v=i.value.clone(),I=r6(i.fieldTransforms,p,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof xd?function(i,u,c,p){if(!Lx(i.precondition,u))return c;const v=r6(i.fieldTransforms,p,u),I=u.data;return I.setAll(t6(i)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(A=>A.field))}(n,e,t,r):(c=t,Lx(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function $Y(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=KH(r.transform,i||null);null!=u&&(null===t&&(t=js.empty()),t.set(r.field,u))}return t||null}function e6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nv(t,r,(i,u)=>function UY(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof am&&r instanceof am||t instanceof um&&r instanceof um?Nv(t.elements,r.elements,nc):t instanceof Fv&&r instanceof Fv?nc(t.yt,r.yt):t instanceof Lv&&r instanceof Lv);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Vv extends Fx{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xd extends Fx{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function t6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function n6(n,e,t){const r=new Map;sn(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,VY(c,p,t[i]))}return r}function r6(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,FY(u,c,e))}return r}class Uv extends Fx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nF extends Fx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HY{constructor(e){this.count=e}}var Xi,nr;function i6(n){switch(n){default:return Lt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function s6(n){if(void 0===n)return Bi("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case Xi.OK:return Pe.OK;case Xi.CANCELLED:return Pe.CANCELLED;case Xi.UNKNOWN:return Pe.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return Pe.INTERNAL;case Xi.UNAVAILABLE:return Pe.UNAVAILABLE;case Xi.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Xi.NOT_FOUND:return Pe.NOT_FOUND;case Xi.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Xi.ABORTED:return Pe.ABORTED;case Xi.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Xi.DATA_LOSS:return Pe.DATA_LOSS;default:return Lt()}}(nr=Xi||(Xi={}))[nr.OK=0]="OK",nr[nr.CANCELLED=1]="CANCELLED",nr[nr.UNKNOWN=2]="UNKNOWN",nr[nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nr[nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nr[nr.NOT_FOUND=5]="NOT_FOUND",nr[nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",nr[nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",nr[nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",nr[nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nr[nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nr[nr.ABORTED=10]="ABORTED",nr[nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",nr[nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",nr[nr.INTERNAL=13]="INTERNAL",nr[nr.UNAVAILABLE=14]="UNAVAILABLE",nr[nr.DATA_LOSS=15]="DATA_LOSS";class Pf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nm(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return IH(this.inner)}size(){return this.innerSize}}const GY=new Si(bt.comparator);function qo(){return GY}const o6=new Si(bt.comparator);function eC(...n){let e=o6;for(const t of n)e=e.insert(t.key,t);return e}function a6(n){let e=o6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function rc(){return tC()}function u6(){return tC()}function tC(){return new Pf(n=>n.toString(),(n,e)=>n.isEqual(e))}const WY=new Si(bt.comparator),zY=new Mr(bt.comparator);function An(...n){let e=zY;for(const t of n)e=e.add(t);return e}const qY=new Mr(yn);function Vx(){return qY}class nC{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,rC.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nC(on.min(),i,Vx(),qo(),An())}}class rC{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rC(r,t,An(),An(),An())}}class Ux{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class l6{constructor(e,t){this.targetId=e,this.At=t}}class c6{constructor(e,t,r=cs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class d6{constructor(){this.Rt=0,this.bt=f6(),this.Pt=cs.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=An(),t=An(),r=An();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Lt()}}),new rC(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=f6()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class KY{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qo(),this.qt=h6(),this.Kt=new Mr(yn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Rx(u))if(0===r){const c=new bt(u.path);this.jt(t,c,Zr.newNoDocument(c,on.min()))}else sn(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&Rx(p.target)){const v=new bt(p.target.path);null!==this.Ut.get(v)||this.ee(c,v)||this.jt(c,v,Zr.newNoDocument(v,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=An();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(v=>{const I=this.Xt(v);return!I||2===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new nC(e,t,this.Kt,this.Ut,r);return this.Ut=qo(),this.qt=h6(),this.Kt=new Mr(yn),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new d6,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Mr(yn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||lt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new d6),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function h6(){return new Si(bt.comparator)}function f6(){return new Si(bt.comparator)}const ZY={asc:"ASCENDING",desc:"DESCENDING"},YY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class QY{constructor(e,t){this.databaseId=e,this.gt=t}}function iC(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p6(n,e){return n.gt?e.toBase64():e.toUint8Array()}function JY(n,e){return iC(n,e.toTimestamp())}function Cs(n){return sn(!!n),on.fromTimestamp(function(e){const t=Nf(e);return new ai(t.seconds,t.nanos)}(n))}function rF(n,e){return(t=n,new tr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function g6(n){const e=tr.fromString(n);return sn(I6(e)),e}function sC(n,e){return rF(n.databaseId,e.path)}function ic(n,e){const t=g6(e);if(t.get(1)!==n.databaseId.projectId)throw new tt(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new tt(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new bt(_6(t))}function iF(n,e){return rF(n.databaseId,e)}function m6(n){const e=g6(n);return 4===e.length?tr.emptyPath():_6(e)}function oC(n){return new tr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _6(n){return sn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function y6(n,e,t){return{name:sC(n,e),fields:t.value.mapValue.fields}}function v6(n,e,t){const r=ic(n,e.name),i=Cs(e.updateTime),u=new js({mapValue:{fields:e.fields}}),c=Zr.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function aC(n,e){let t;if(e instanceof Vv)t={update:y6(n,e.key,e.value)};else if(e instanceof Uv)t={delete:sC(n,e.key)};else if(e instanceof xd)t={update:y6(n,e.key,e.data),updateMask:aQ(e.fieldMask)};else{if(!(e instanceof nF))return Lt();t={verify:sC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Lv)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof am)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof um)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fv)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw Lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:JY(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Lt()),t;var i}function sF(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ui.updateTime(Cs(i.updateTime)):void 0!==i.exists?ui.exists(i.exists):ui.none():ui.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(sn("REQUEST_TIME"===c.setToServerValue),p=new Lv):"appendMissingElements"in c?p=new am(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new um(c.removeAllFromArray.values||[]):"increment"in c?p=new Fv(u,c.increment):Lt();const v=Ti.fromServerFormat(c.fieldPath);return new JI(v,p)}(n,i)):[];var i;if(e.update){const i=ic(n,e.update.name),u=new js({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ea((e.updateMask.fieldPaths||[]).map(I=>Ti.fromServerFormat(I)));return new xd(i,u,c,t,r)}return new Vv(i,u,t,r)}if(e.delete){const i=ic(n,e.delete);return new Uv(i,t)}if(e.verify){const i=ic(n,e.verify);return new nF(i,t)}return Lt()}function E6(n,e){return{documents:[iF(n,e.path)]}}function oF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=iF(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=iF(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0===v.length)return;const I=v.map(A=>function(M){if("=="===M.op){if(xH(M.value))return{unaryFilter:{field:Bv(M.field),op:"IS_NAN"}};if(AH(M.value))return{unaryFilter:{field:Bv(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(xH(M.value))return{unaryFilter:{field:Bv(M.field),op:"IS_NOT_NAN"}};if(AH(M.value))return{unaryFilter:{field:Bv(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bv(M.field),op:iQ(M.op),value:M.value}}}(A));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:Bv((A=I).field),direction:rQ(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.gt||WI(I)?I:{value:I});var I,p,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function w6(n){let e=m6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){sn(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=b6(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new kv(jv((M=A).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(A){let M;return M="object"==typeof A?A.value:A,WI(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new Of((A=t.startAt).values||[],!!A.before));let I=null;return t.endAt&&(I=function(A){return new Of(A.values||[],!A.before)}(t.endAt)),BH(e,i,c,u,p,"F",v,I)}function b6(n){return n?void 0!==n.unaryFilter?[oQ(n)]:void 0!==n.fieldFilter?[sQ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>b6(e)).reduce((e,t)=>e.concat(t)):Lt():[]}function rQ(n){return ZY[n]}function iQ(n){return YY[n]}function Bv(n){return{fieldPath:n.canonicalString()}}function jv(n){return Ti.fromServerFormat(n.fieldPath)}function sQ(n){return $s.create(jv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function oQ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=jv(n.unaryFilter.field);return $s.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=jv(n.unaryFilter.field);return $s.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jv(n.unaryFilter.field);return $s.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jv(n.unaryFilter.field);return $s.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Lt()}}function aQ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I6(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _o(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C6(e)),e=uQ(n.get(t),e);return C6(e)}function uQ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function C6(n){return n+"\x01\x01"}function sc(n){const e=n.length;if(sn(e>=2),2===e)return sn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tr.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&Lt(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let v;0===i.length?v=p:(i+=p,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:Lt()}u=c+2}return new tr(r)}const D6=["userId","batchId"];function Bx(n,e){return[n,_o(e)]}function T6(n,e,t){return[n,_o(e),t]}const lQ={},cQ=["prefixPath","collectionGroup","readTime","documentId"],dQ=["prefixPath","collectionGroup","documentId"],hQ=["collectionGroup","readTime","prefixPath","documentId"],fQ=["canonicalId","targetId"],pQ=["targetId","path"],gQ=["path","targetId"],mQ=["collectionId","parent"],_Q=["indexId","uid"],yQ=["uid","sequenceNumber"],vQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EQ=["indexId","uid","orderedDocumentKey"],wQ=["userId","collectionPath","documentId"],bQ=["userId","collectionPath","largestBatchId"],IQ=["userId","collectionGroup","largestBatchId"],S6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CQ=[...S6,"documentOverlays"],A6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x6=A6,DQ=[...x6,"indexConfiguration","indexState","indexEntries"];class aF extends EH{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ds(n,e){const t=Ct(n);return Xu.M(t.ie,e)}class uF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&jY(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=XI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=XI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=u6();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const v=XH(c,p);null!==v&&r.set(i.key,v),c.isValidDocument()||c.convertToNoDocument(on.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&Nv(this.mutations,e.mutations,(t,r)=>e6(t,r))&&Nv(this.baseMutations,e.baseMutations,(t,r)=>e6(t,r))}}class lF{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){sn(e.mutations.length===r.length);let i=WY;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new lF(e,t,r,i)}}class cF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Lf{constructor(e,t,r,i,u=on.min(),c=on.min(),p=cs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Lf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Lf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Lf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class N6{constructor(e){this.re=e}}function M6(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sC(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:iC(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lm(e.version)};else{if(!e.isUnknownDocument())return Lt();r.unknownDocument={path:t.path.toArray(),version:lm(e.version)}}var i,u;return r}function jx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cm(n){const e=new ai(n.seconds,n.nanoseconds);return on.fromTimestamp(e)}function dm(n,e){const t=(e.baseMutations||[]).map(u=>sF(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>sF(n.re,u)),i=ai.fromMillis(e.localWriteTimeMs);return new uF(e.batchId,i,t,r)}function uC(n){const e=cm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cm(n.lastLimboFreeSnapshotVersion):on.min();let r;var i;return void 0!==n.query.documents?(sn(1===(i=n.query).documents.length),r=mo(Ov(m6(i.documents[0])))):r=mo(w6(n.query)),new Lf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,cs.fromBase64String(n.resumeToken))}function R6(n,e){const t=lm(e.snapshotVersion),r=lm(e.lastLimboFreeSnapshotVersion);let i;i=Rx(e.target)?E6(n.re,e.target):oF(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:om(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dF(n){const e=w6({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ox(e,e.limit,"L"):e}function hF(n,e){return new cF(e.largestBatchId,sF(n.re,e.overlayMutation))}function k6(n,e){const t=e.path.lastSegment();return[n,_o(e.path.popLast()),t]}function O6(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:lm(r.readTime),documentKey:_o(r.documentKey.path),largestBatchId:r.largestBatchId}}class SQ{getBundleMetadata(e,t){return P6(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return P6(e).put({bundleId:(r=t).id,createTime:lm(Cs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return L6(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:dF(i.bundledQuery),readTime:cm(i.readTime)};var i})}saveNamedQuery(e,t){return L6(e).put({name:(r=t).name,readTime:lm(Cs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function P6(n){return Ds(n,"bundles")}function L6(n){return Ds(n,"namedQueries")}class $x{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new $x(e,t.uid||"")}getOverlay(e,t){return lC(e).get(k6(this.userId,t)).next(r=>r?hF(this.It,r):null)}getOverlays(e,t){const r=rc();return xe.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new cF(t,c);i.push(this.ue(e,p))}),xe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(_o(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(lC(e).Y("collectionPathOverlayIndex",p))}),xe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=rc(),u=_o(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return lC(e).W("collectionPathOverlayIndex",c).next(p=>{for(const v of p){const I=hF(this.It,v);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=rc();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lC(e).Z({index:"collectionGroupOverlayIndex",range:p},(v,I,A)=>{const M=hF(this.It,I);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return lC(e).put(function(r,i,u){const[c,p,v]=k6(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:aC(r.re,u.mutation)}}(this.It,this.userId,t))}}function lC(n){return Ds(n,"documentOverlays")}class hm{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ai(e.integerValue));else if("doubleValue"in e){const r=Ai(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),zI(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(rm(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?NH(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Lt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),bt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function AQ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function F6(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=AQ(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}hm.Te=new hm;class xQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=F6(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=F6(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class NQ{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class MQ{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class cC{constructor(){this.Be=new xQ,this.Le=new NQ(this.Be),this.Ue=new MQ(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class fm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fm(this.indexId,this.documentKey,this.arrayValue,r)}}function pm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=V6(n.arrayValue,e.arrayValue),0!==t?t:(t=V6(n.directionalValue,e.directionalValue),0!==t?t:bt.comparator(n.documentKey,e.documentKey)))}function V6(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RQ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=GL(e);if(void 0!==t&&!this.ze(t))return!1;const r=em(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class kQ{constructor(){this.Ye=new fF}addToCollectionParentIndex(e,t){return this.Ye.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(va.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(va.min())}updateCollectionGroup(e,t,r){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class fF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mr(tr.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mr(tr.comparator)).toArray()}}const Hx=new Uint8Array(0);class OQ{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new fF,this.Ze=new Pf(r=>om(r),(r,i)=>YI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:_o(i)};return U6(e).put(u)}return xe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mH(t),""],!1,!0);return U6(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(sc(c.parent))}return r})}addFieldIndex(e,t){const r=Gx(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=hC(e);return u.next(p=>{c.put(O6(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Gx(e),i=hC(e),u=dC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=dC(e);let i=!0;const u=new Map;return xe.forEach(this.tn(t),c=>this.en(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=An();const p=[];return xe.forEach(u,(v,I)=>{var A;lt("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Et=>`${Et.fieldPath}:${Et.kind}`).join(",")}`} to execute ${om(t)}`);const M=function(Et,_t){const pt=GL(_t);if(void 0===pt)return null;for(const yt of kx(Et,pt.fieldPath))switch(yt.op){case"array-contains-any":return yt.value.arrayValue.values||[];case"array-contains":return[yt.value]}return null}(I,v),P=function(Et,_t){const pt=new Map;for(const yt of em(_t))for(const hn of kx(Et,yt.fieldPath))switch(hn.op){case"==":case"in":pt.set(yt.fieldPath.canonicalString(),hn.value);break;case"not-in":case"!=":return pt.set(yt.fieldPath.canonicalString(),hn.value),Array.from(pt.values())}return null}(I,v),$=function(Et,_t){const pt=[];let yt=!0;for(const hn of em(_t)){const Rr=0===hn.kind?PH(Et,hn.fieldPath,Et.startAt):LH(Et,hn.fieldPath,Et.startAt);pt.push(Rr.value),yt&&(yt=Rr.inclusive)}return new Of(pt,yt)}(I,v),Q=function(Et,_t){const pt=[];let yt=!0;for(const hn of em(_t)){const Rr=0===hn.kind?LH(Et,hn.fieldPath,Et.endAt):PH(Et,hn.fieldPath,Et.endAt);pt.push(Rr.value),yt&&(yt=Rr.inclusive)}return new Of(pt,yt)}(I,v),le=this.nn(v,I,$),ye=this.nn(v,I,Q),ct=this.sn(v,I,P),ht=this.rn(v.indexId,M,le,$.inclusive,ye,Q.inclusive,ct);return xe.forEach(ht,Et=>r.J(Et,t.limit).next(_t=>{_t.forEach(pt=>{const yt=bt.fromSegments(pt.documentKey);c.has(yt)||(c=c.add(yt),p.push(yt))})}))}).next(()=>p)}return xe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,p){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),I=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const P=t?this.on(t[M/I]):Hx,$=this.un(e,P,r[M%I],i),Q=this.cn(e,P,u[M%I],c),le=p.map(ye=>this.un(e,P,ye,!0));A.push(...this.createRange($,Q,le))}return A}un(e,t,r,i){const u=new fm(e,bt.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new fm(e,bt.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new RQ(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return xe.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Mr(Ti.comparator),v=!1;for(const I of c.filters){const A=I;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:p=p.add(A.field))}for(const I of c.orderBy)I.field.isKeyField()||(p=p.add(I.field));return p.size+(v?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new cC;for(const i of em(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);hm.Te.ce(u,c)}return r.$e()}on(e){const t=new cC;return hm.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new cC;return hm.Te.ce(sm(this.databaseId,t),r.qe(function(i){const u=em(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new cC);let u=0;for(const c of em(e)){const p=r[u++];for(const v of i)if(this.ln(t,c.fieldPath)&&KI(p))i=this.fn(i,c,p);else{const I=v.qe(c.kind);hm.Te.ce(p,I)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const v=new cC;v.seed(p.$e()),hm.Te.ce(c,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof $s&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Gx(e),i=hC(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return xe.forEach(u,p=>i.get([p.indexId,this.uid]).next(v=>{c.push(function(I,A){const M=A?new $I(A.sequenceNumber,new va(cm(A.readTime),new bt(sc(A.documentKey)),A.largestBatchId)):$I.empty(),P=I.fields.map(([$,Q])=>new Sx(Ti.fromServerFormat($),Q));return new Tx(I.indexId,I.collectionGroup,P,M)}(p,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:yn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Gx(e),u=hC(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>xe.forEach(p,v=>u.put(O6(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return xe.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?xe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),xe.forEach(p,v=>this.wn(e,i,v).next(I=>{const A=this.mn(u,v);return I.isEqual(A)?xe.resolve():this.gn(e,u,v,I,A)}))))})}yn(e,t,r,i){return dC(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return dC(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=dC(e);let u=new Mr(pm);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new fm(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new Mr(pm);const i=this.an(t,e);if(null==i)return r;const u=GL(t);if(null!=u){const c=e.data.field(u.fieldPath);if(KI(c))for(const p of c.arrayValue.values||[])r=r.add(new fm(t.indexId,e.key,this.on(p),i))}else r=r.add(new fm(t.indexId,e.key,Hx,i));return r}gn(e,t,r,i,u){lt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,v,I,A,M){const P=p.getIterator(),$=v.getIterator();let Q=Mv(P),le=Mv($);for(;Q||le;){let ye=!1,ct=!1;if(Q&&le){const ht=I(Q,le);ht<0?ct=!0:ht>0&&(ye=!0)}else null!=Q?ct=!0:ye=!0;ye?(A(le),le=Mv($)):ct?(M(Q),Q=Mv(P)):(Q=Mv(P),le=Mv($))}}(i,u,pm,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),xe.waitFor(c)}_n(e){let t=1;return hC(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>pm(c,p)).filter((c,p,v)=>!p||0!==pm(c,v[p-1]));const i=[];i.push(e);for(const c of r){const p=pm(c,e),v=pm(c,t);if(0===p)i[0]=e.Ke();else if(p>0&&v<0)i.push(c),i.push(c.Ke());else if(v>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Hx,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Hx,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(B6)}getMinOffset(e,t){return xe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||Lt())).next(B6)}}function U6(n){return Ds(n,"collectionParents")}function dC(n){return Ds(n,"indexEntries")}function Gx(n){return Ds(n,"indexConfiguration")}function hC(n){return Ds(n,"indexState")}function B6(n){sn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;WL(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new va(e.readTime,e.documentKey,t)}const j6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ko{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ko(e,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $6(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const v=r.Z({range:c},(A,M,P)=>(p++,P.delete()));u.push(v.next(()=>{sn(1===p)}));const I=[];for(const A of t.mutations){const M=T6(e,A.key.path,t.batchId);u.push(i.delete(M)),I.push(A.key)}return xe.waitFor(u).next(()=>I)}function Wx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Lt();e=n.noDocument}return JSON.stringify(e).length}Ko.DEFAULT_COLLECTION_PERCENTILE=10,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ko.DEFAULT=new Ko(41943040,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ko.DISABLED=new Ko(-1,0,0);class zx{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){sn(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new zx(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ff(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=$v(e),c=Ff(e);return c.add({}).next(p=>{sn("number"==typeof p);const v=new uF(p,t,r,i),I=function(P,$,Q){const le=Q.baseMutations.map(ct=>aC(P.re,ct)),ye=Q.mutations.map(ct=>aC(P.re,ct));return{userId:$,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:le,mutations:ye}}(this.It,this.userId,v),A=[];let M=new Mr((P,$)=>yn(P.canonicalString(),$.canonicalString()));for(const P of i){const $=T6(this.userId,P.key.path,p);M=M.add(P.key.path.popLast()),A.push(c.put(I)),A.push(u.put($,lQ))}return M.forEach(P=>{A.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[p]=v.keys()}),xe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Ff(e).get(t).next(r=>r?(sn(r.userId===this.userId),dm(this.It,r)):null)}Tn(e,t){return this.In[t]?xe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ff(e).Z({index:"userMutationsIndex",range:i},(c,p,v)=>{p.userId===this.userId&&(sn(p.batchId>=r),u=dm(this.It,p)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ff(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ff(e).W("userMutationsIndex",t).next(r=>r.map(i=>dm(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Bx(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return $v(e).Z({range:i},(c,p,v)=>{const[I,A,M]=c,P=sc(A);if(I===this.userId&&t.path.isEqual(P))return Ff(e).get(M).next($=>{if(!$)throw Lt();sn($.userId===this.userId),u.push(dm(this.It,$))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mr(yn);const i=[];return t.forEach(u=>{const c=Bx(this.userId,u.path),p=IDBKeyRange.lowerBound(c),v=$v(e).Z({range:p},(I,A,M)=>{const[P,$,Q]=I,le=sc($);P===this.userId&&u.path.isEqual(le)?r=r.add(Q):M.done()});i.push(v)}),xe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Bx(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Mr(yn);return $v(e).Z({range:c},(v,I,A)=>{const[M,P,$]=v,Q=sc(P);M===this.userId&&r.isPrefixOf(Q)?Q.length===i&&(p=p.add($)):A.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Ff(e).get(u).next(c=>{if(null===c)throw Lt();sn(c.userId===this.userId),r.push(dm(this.It,c))}))}),xe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return $6(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),xe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $v(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const v=sc(u[1]);i.push(v)}else p.done()}).next(()=>{sn(0===i.length)})})}containsKey(e,t){return H6(e,this.userId,t)}Rn(e){return G6(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function H6(n,e,t){const r=Bx(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return $v(n).Z({range:u,X:!0},(p,v,I)=>{const[A,M,P]=p;A===e&&M===i&&(c=!0),I.done()}).next(()=>c)}function Ff(n){return Ds(n,"mutations")}function $v(n){return Ds(n,"documentMutations")}function G6(n){return Ds(n,"mutationQueues")}class gm{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gm(0)}static vn(){return new gm(-1)}}class PQ{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new gm(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>on.fromTimestamp(new ai(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hv(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(sn(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Hv(e).Z((c,p)=>{const v=uC(p);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,u.push(this.removeTargetData(e,v)))}).next(()=>xe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Hv(e).Z((r,i)=>{const u=uC(i);t(u)})}Vn(e){return W6(e).get("targetGlobalKey").next(t=>(sn(null!==t),t))}Sn(e,t){return W6(e).put("targetGlobalKey",t)}Dn(e,t){return Hv(e).put(R6(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=om(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Hv(e).Z({range:i,index:"queryTargetsIndex"},(c,p,v)=>{const I=uC(p);YI(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Vf(e);return t.forEach(c=>{const p=_o(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),xe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Vf(e);return xe.forEach(t,u=>{const c=_o(u.path);return xe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Vf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vf(e);let u=An();return i.Z({range:r,X:!0},(c,p,v)=>{const I=sc(c[1]),A=new bt(I);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=_o(t.path),i=IDBKeyRange.bound([r],[mH(r)],!1,!0);let u=0;return Vf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],v,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Hv(e).get(t).next(r=>r?uC(r):null)}}function Hv(n){return Ds(n,"targets")}function W6(n){return Ds(n,"targetGlobal")}function Vf(n){return Ds(n,"targetDocuments")}function z6([n,e],[t,r]){const i=yn(n,t);return 0===i?yn(e,r):i}class LQ{constructor(e){this.xn=e,this.buffer=new Mr(z6),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();z6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FQ{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Oe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xf(r)?lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Af(r)}yield t.Fn(3e5)}))}}class VQ{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return xe.resolve(zo.at);const r=new LQ(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(j6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j6):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,p,v,I;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),$L()<=ha.in.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(v-p)+`ms\n\tRemoved ${M} documents in `+(I-v)+`ms\nTotal Duration: ${I-A}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class UQ{constructor(e,t){this.db=e,this.garbageCollector=new VQ(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return qx(e,r)}removeReference(e,t,r){return qx(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qx(e,t)}Gn(e,t){return function(r,i){let u=!1;return G6(r).tt(c=>H6(r,c,i).next(p=>(p&&(u=!0),xe.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const v=this.Gn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,on.min()),Vf(e).delete([0,_o(c.path)])))});i.push(v)}}).next(()=>xe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qx(e,t)}Kn(e,t){const r=Vf(e);let i,u=zo.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:v,sequenceNumber:I})=>{0===c?(u!==zo.at&&t(new bt(sc(i)),u),u=I,i=v):u=zo.at}).next(()=>{u!==zo.at&&t(new bt(sc(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qx(n,e){return Vf(n).put((r=n.currentSequenceNumber,{targetId:0,path:_o(e.path),sequenceNumber:r}));var r}class q6{constructor(){this.changes=new Pf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?xe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BQ{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mm(e).put(r)}removeEntry(e,t,r){return mm(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],jx(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Zr.newInvalidDocument(t);return mm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fC(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Zr.newInvalidDocument(t)};return mm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fC(t))},(i,u)=>{r={document:this.jn(t,u),size:Wx(u)}}).next(()=>r)}getEntries(e,t){let r=qo();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=qo(),i=new Si(bt.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),i=i.insert(u,Wx(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return xe.resolve();let i=new Mr(Q6);t.forEach(v=>i=i.add(v));const u=IDBKeyRange.bound(fC(i.first()),fC(i.last())),c=i.getIterator();let p=c.getNext();return mm(e).Z({index:"documentKeyIndex",range:u},(v,I,A)=>{const M=bt.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;p&&Q6(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,I),p=c.hasNext()?c.getNext():null),p?A.j(fC(p)):A.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),jx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mm(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=qo();for(const v of c){const I=this.jn(bt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);p=p.insert(I.key,I)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=qo();const c=Y6(t,r),p=Y6(t,va.max());return mm(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(v,I,A)=>{const M=this.jn(bt.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new jQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Z6(e).get("remoteDocumentGlobalKey").next(t=>(sn(!!t),t))}Qn(e,t){return Z6(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function TQ(n,e){let t;if(e.document)t=v6(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=bt.fromSegments(e.noDocument.path),i=cm(e.noDocument.readTime);t=Zr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lt();{const r=bt.fromSegments(e.unknownDocument.path),i=cm(e.unknownDocument.version);t=Zr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ai(r[0],r[1]);return on.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(on.min()))return r}return Zr.newInvalidDocument(e)}}function K6(n){return new BQ(n)}class jQ extends q6{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Pf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Mr((u,c)=>yn(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const v=M6(this.Yn.It,c);i=i.add(u.path.popLast());const I=Wx(v);r+=I-p.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=p.size,this.trackRemovals){const v=M6(this.Yn.It,c.convertToNoDocument(on.min()));t.push(this.Yn.addEntry(e,u,v))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),xe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Z6(n){return Ds(n,"remoteDocumentGlobal")}function mm(n){return Ds(n,"remoteDocumentsV14")}function fC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y6(n,e){const t=e.documentKey.path.toArray();return[n,jx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Q6(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=yn(t[u],r[u]),i)return i;return i=yn(t.length,r.length),i||(i=yn(t[t.length-2],r[r.length-2]),i||yn(t[t.length-1],r[r.length-1]))}class $Q{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class J6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&XI(r.mutation,i,Ea.empty(),ai.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,An()).next(()=>r))}getLocalViewOfDocuments(e,t,r=An()){const i=rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=eC();return u.forEach((p,v)=>{c=c.insert(p,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,An()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=qo();const c=tC(),p=tC();return t.forEach((v,I)=>{const A=r.get(I.key);i.has(I.key)&&(void 0===A||A.mutation instanceof xd)?u=u.insert(I.key,I):void 0!==A&&(c.set(I.key,A.mutation.getFieldMask()),XI(A.mutation,I,A.mutation.getFieldMask(),ai.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((I,A)=>c.set(I,A)),t.forEach((I,A)=>{var M;return p.set(I,new $Q(A,null!==(M=c.get(I))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=tC();let i=new Si((c,p)=>c-p),u=An();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(v=>{const I=t.get(v);if(null===I)return;let A=r.get(v)||Ea.empty();A=p.applyToLocalView(I,A),r.set(v,A);const M=(i.get(p.batchId)||An()).add(v);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),I=v.key,A=v.value,M=u6();A.forEach(P=>{if(!u.has(P)){const $=XH(t.get(P),r.get(P));null!==$&&M.set(P,$),u=u.add(P)}}),c.push(this.documentOverlayCache.saveOverlays(e,I,M))}return xe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return bt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):XL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):xe.resolve(rc());let p=-1,v=u;return c.next(I=>xe.forEach(I,(A,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),u.get(A)?xe.resolve():this.getBaseDocument(e,A,M).next(P=>{v=v.insert(A,P)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,v,I,An())).next(A=>({batchId:p,changes:a6(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new bt(t)).next(r=>{let i=eC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=eC();return this.indexManager.getCollectionParents(e,i).next(c=>xe.forEach(c,p=>{const v=(I=t,A=p.child(i),new Ad(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(I=>{I.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,v)=>{const I=v.getKey();null===i.get(I)&&(i=i.insert(I,Zr.newInvalidDocument(I)))});let c=eC();return i.forEach((p,v)=>{const I=u.get(p);void 0!==I&&XI(I.mutation,v,Ea.empty(),ai.now()),tF(t,v)&&(c=c.insert(p,v))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):xe.resolve(Zr.newInvalidDocument(t))}}class HQ{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return xe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Cs(r.createTime)}),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:dF(r.bundledQuery),readTime:Cs(r.readTime)}),xe.resolve();var r}}class GQ{constructor(){this.overlays=new Si(bt.comparator),this.es=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=rc();return xe.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),xe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),xe.resolve()}getOverlaysForCollection(e,t,r){const i=rc(),u=t.length+1,c=new bt(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const v=p.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&i.set(v.getKey(),v)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Si((I,A)=>I-A);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let A=u.get(I.largestBatchId);null===A&&(A=rc(),u=u.insert(I.largestBatchId,A)),A.set(I.getKey(),I)}}const p=rc(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,A)=>p.set(I,A)),!(p.size()>=i)););return xe.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new cF(t,r));let u=this.es.get(t);void 0===u&&(u=An(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class pF{constructor(){this.ns=new Mr(Ts.ss),this.rs=new Mr(Ts.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ts(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ts(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new bt(new tr([])),r=new Ts(t,e),i=new Ts(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new bt(new tr([])),r=new Ts(t,e),i=new Ts(t,e+1);let u=An();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ts(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ts{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return bt.comparator(e.key,t.key)||yn(e._s,t._s)}static os(e,t){return yn(e._s,t._s)||bt.comparator(e.key,t.key)}}class WQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Mr(Ts.ss)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new uF(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new Ts(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return xe.resolve(c)}lookupMutationBatch(e,t){return xe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return xe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ts(t,0),i=new Ts(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);u.push(p)}),xe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mr(yn);return t.forEach(i=>{const u=new Ts(i,0),c=new Ts(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),xe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;bt.isDocumentKey(u)||(u=u.child(""));const c=new Ts(new bt(u),0);let p=new Mr(yn);return this.gs.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(p=p.add(v._s)),!0)},c),xe.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){sn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return xe.forEach(t.mutations,i=>{const u=new Ts(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ts(t,0),i=this.gs.firstAfterOrEqual(r);return xe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return xe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zQ{constructor(e){this.Es=e,this.docs=new Si(bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return xe.resolve(r?r.document.mutableCopy():Zr.newInvalidDocument(t))}getEntries(e,t){let r=qo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Zr.newInvalidDocument(i))}),xe.resolve(r)}getAllFromCollection(e,t,r){let i=qo();const u=new bt(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:v}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||WL(yH(v),r)<=0||(i=i.insert(v.key,v.mutableCopy()))}return xe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Lt()}As(e,t){return xe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qQ(this)}getSize(e){return xe.resolve(this.size)}}class qQ extends q6{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),xe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class KQ{constructor(e){this.persistence=e,this.Rs=new Pf(t=>om(t),YI),this.lastRemoteSnapshotVersion=on.min(),this.highestTargetId=0,this.bs=0,this.Ps=new pF,this.targetCount=0,this.vs=gm.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),xe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gm(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Dn(t),xe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),xe.waitFor(u).next(()=>i)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return xe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),xe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),xe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return xe.resolve(r)}containsKey(e,t){return xe.resolve(this.Ps.containsKey(t))}}class X6{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new zo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new KQ(this),this.indexManager=new kQ,this.remoteDocumentCache=new zQ(r=>this.referenceDelegate.xs(r)),this.It=new N6(t),this.Ns=new HQ(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new WQ(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){lt("MemoryPersistence","Starting transaction:",e);const i=new ZQ(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return xe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class ZQ extends EH{constructor(e){super(),this.currentSequenceNumber=e}}class Kx{constructor(e){this.persistence=e,this.Fs=new pF,this.$s=null}static Bs(e){return new Kx(e)}get Ls(){if(this.$s)return this.$s;throw Lt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),xe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Ls,r=>{const i=bt.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,on.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return xe.or([()=>xe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class YQ{constructor(e){this.It=e}$(e,t,r,i){const u=new Ax("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D6,{unique:!0}),p.createObjectStore("documentMutations"),e4(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=xe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),e4(e)),c=c.next(()=>function(p){const v=p.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:on.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,v){return v.store("mutations").W().next(I=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D6,{unique:!0});const A=v.store("mutations"),M=I.map(P=>A.put(P));return xe.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const v=p.createObjectStore("documentOverlays",{keyPath:wQ});v.createIndex("collectionPathOverlayIndex",bQ,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",IQ,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const v=p.createObjectStore("remoteDocumentsV14",{keyPath:cQ});v.createIndex("documentKeyIndex",dQ),v.createIndex("collectionGroupIndex",hQ)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:_Q}).createIndex("sequenceNumberIndex",yQ,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:vQ}).createIndex("documentKeyIndex",EQ,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Wx(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>xe.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>xe.forEach(p,v=>{sn(v.userId===u.userId);const I=dm(this.It,v);return $6(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,p)=>{const v=new tr(c),I=[0,_o(v)];u.push(t.get(I).next(A=>A?xe.resolve():t.put({targetId:0,path:_o(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>xe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:mQ});const r=t.store("collectionParents"),i=new fF,u=c=>{if(i.add(c)){const p=c.lastSegment(),v=c.popLast();return r.put({collectionId:p,parent:_o(v)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const v=new tr(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,v],I)=>{const A=sc(p);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=uC(i),c=R6(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),v=(I=c,I.document?new bt(tr.fromString(I.document.name).popFirst(5)):I.noDocument?bt.fromSegments(I.noDocument.path):I.unknownDocument?bt.fromSegments(I.unknownDocument.path):Lt()).path.toArray();var I;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(A))}).next(()=>xe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=K6(this.It),u=new X6(Kx.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(v=>{var I;let A=null!==(I=p.get(v.userId))&&void 0!==I?I:An();dm(this.It,v).keys().forEach(M=>A=A.add(M)),p.set(v.userId,A)}),xe.forEach(p,(v,I)=>{const A=new Is(I),M=$x.oe(this.It,A),P=u.getIndexManager(A),$=zx.oe(A,this.It,P,u.referenceDelegate);return new J6(i,$,M,P).recalculateAndSaveOverlaysForDocumentKeys(new aF(t,zo.at),v).next()})})}}function e4(n){n.createObjectStore("targetDocuments",{keyPath:pQ}).createIndex("documentTargetsIndex",gQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fQ,{unique:!0}),n.createObjectStore("targetGlobal")}const gF="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mF{constructor(e,t,r,i,u,c,p,v,I,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=I,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!mF.C())throw new tt(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UQ(this,i),this.ii=t+"main",this.It=new N6(v),this.ri=new Xu(this.ii,this.Xs,new YQ(this.It)),this.Cs=new PQ(this.referenceDelegate,this.It),this.remoteDocumentCache=K6(this.It),this.Ns=new SQ,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tt(Pe.FAILED_PRECONDITION,gF);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new zo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Oe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Oe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Oe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(xf(e))return lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return pC(e).get("owner").next(t=>xe.resolve(this.mi(t)))}gi(e){return Zx(e).delete(this.clientId)}yi(){var e=this;return(0,Oe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ds(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(v=>-1===c.indexOf(v));return xe.forEach(p,v=>i.delete(v.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?xe.resolve(!0):pC(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new tt(Pe.FAILED_PRECONDITION,gF);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zx(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&lt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Oe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new aF(t,zo.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Zx(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return zx.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OQ(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return $x.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){lt("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?DQ:14===c?x6:13===c?A6:12===c?CQ:11===c?S6:void Lt();var c;let p;return this.ri.runTransaction(e,i,u,v=>(p=new aF(v,this.Ss?this.Ss.next():zo.at),"readwrite-primary"===t?this.fi(p).next(I=>!!I||this.di(p)).next(I=>{if(!I)throw Bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new tt(Pe.FAILED_PRECONDITION,vH);return r(p)}).next(I=>this.wi(p).next(()=>I)):this.Vi(p).next(()=>r(p)))).then(v=>(p.raiseOnCommittedEvent(),v))}Vi(e){return pC(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new tt(Pe.FAILED_PRECONDITION,gF)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pC(e).put("owner",t)}static C(){return Xu.C()}_i(e){const t=pC(e);return t.get("owner").next(r=>this.mi(r)?(lt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):xe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Bi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,K.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return lt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Bi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pC(n){return Ds(n,"owner")}function Zx(n){return Ds(n,"clientMetadata")}function _F(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yF{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=An(),i=An();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new yF(e,t.fromCache,r,i)}}class t4{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(jH(t))return xe.resolve(null);let r=mo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ox(t,null,"F"),r=mo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=An(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(v=>{const I=this.Fi(t,p);return this.$i(t,I,c,v.readTime)?this.ki(e,Ox(t,null,"F")):this.Bi(e,I,t,v)}))})))}Oi(e,t,r,i){return jH(t)||i.isEqual(on.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Mi(e,t):($L()<=ha.in.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),eF(t)),this.Bi(e,c,t,_H(i,-1)))})}Fi(e,t){let r=new Mr(GH(e));return t.forEach((i,u)=>{tF(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return $L()<=ha.in.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",eF(t)),this.Ni.getDocumentsMatchingQuery(e,t,va.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class QQ{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Si(yn),this.qi=new Pf(u=>om(u),YI),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J6(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function n4(n,e,t,r){return new QQ(n,e,t,r)}function r4(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,Oe.Z)(function*(n,e){const t=Ct(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let v=An();for(const I of i){c.push(I.batchId);for(const A of I.mutations)v=v.add(A.key)}for(const I of u){p.push(I.batchId);for(const A of I.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(I=>({ji:I,removedBatchIds:c,addedBatchIds:p}))})})}),vF.apply(this,arguments)}function JQ(n,e){const t=Ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,v,I){const A=v.batch,M=A.keys();let P=xe.resolve();return M.forEach($=>{P=P.next(()=>I.getEntry(p,$)).next(Q=>{const le=v.docVersions.get($);sn(null!==le),Q.version.compareTo(le)<0&&(A.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),I.addEntry(Q)))})}),P.next(()=>c.mutationQueue.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=An();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(p=p.add(c.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function i4(n){const e=Ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function XQ(n,e){const t=Ct(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((A,M)=>{const P=i.get(M);if(!P)return;p.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let $=P.withSequenceNumber(u.currentSequenceNumber);var Q,le,ye;e.targetMismatches.has(M)?$=$.withResumeToken(cs.EMPTY_BYTE_STRING,on.min()).withLastLimboFreeSnapshotVersion(on.min()):A.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(A.resumeToken,r)),i=i.insert(M,$),le=$,ye=A,(0===(Q=P).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,$))});let v=qo(),I=An();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),p.push(s4(u,c,e.documentUpdates).next(A=>{v=A.Wi,I=A.zi})),!r.isEqual(on.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(A)}return xe.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,I)).next(()=>v)}).then(u=>(t.Ui=i,u))}function s4(n,e,t){let r=An(),i=An();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=qo();return t.forEach((p,v)=>{const I=u.get(p);v.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(p)),v.isNoDocument()&&v.version.isEqual(on.min())?(e.removeEntry(p,v.readTime),c=c.insert(p,v)):!I.isValidDocument()||v.version.compareTo(I.version)>0||0===v.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(v),c=c.insert(p,v)):lt("LocalStore","Ignoring outdated watch update for ",p,". Current version:",I.version," Watch version:",v.version)}),{Wi:c,zi:i}})}function eJ(n,e){const t=Ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gv(n,e){const t=Ct(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,xe.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Lf(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Wv(n,e,t){return EF.apply(this,arguments)}function EF(){return EF=(0,Oe.Z)(function*(n,e,t){const r=Ct(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!xf(c))throw c;lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),EF.apply(this,arguments)}function Yx(n,e,t){const r=Ct(n);let i=on.min(),u=An();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,v,I){const A=Ct(p),M=A.qi.get(I);return void 0!==M?xe.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,I)}(r,c,mo(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:on.min(),t?u:An())).next(p=>(u4(r,HH(e),p),{documents:p,Hi:u})))}function o4(n,e){const t=Ct(n),r=Ct(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function a4(n,e){const t=Ct(n),r=t.Ki.get(e)||on.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,_H(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(u4(t,e,i),i))}function u4(n,e,t){let r=n.Ki.get(e)||on.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function wF(){return wF=(0,Oe.Z)(function*(n,e,t,r){const i=Ct(n);let u=An(),c=qo();for(const I of t){const A=e.Ji(I.metadata.name);I.document&&(u=u.add(A));const M=e.Yi(I);M.setReadTime(e.Xi(I.metadata.readTime)),c=c.insert(A,M)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),v=yield Gv(i,(I=r,mo(Ov(tr.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>s4(I,p,c).next(A=>(p.apply(I),A)).next(A=>i.Cs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>i.Cs.addMatchingKeys(I,u,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,A.Wi,A.zi)).next(()=>A.Wi)))}),wF.apply(this,arguments)}function nJ(n,e){return bF.apply(this,arguments)}function bF(){return bF=(0,Oe.Z)(function*(n,e,t=An()){const r=yield Gv(n,mo(dF(e.bundledQuery))),i=Ct(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Cs(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(cs.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),bF.apply(this,arguments)}function l4(n,e){return`firestore_clients_${n}_${e}`}function c4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function IF(n,e){return`firestore_targets_${n}_${e}`}class Qx{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new tt(i.error.code,i.error.message))),c?new Qx(e,t,i.state,u):(Bi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new tt(r.error.code,r.error.message))),u?new gC(e,r.state,i):(Bi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Vx();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=TH(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Jx(e,u):(Bi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class CF{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new CF(t.clientId,t.onlineState):(Bi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DF{constructor(){this.activeTargetIds=Vx()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TF{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Si(yn),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=l4(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new DF),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(l4(e.persistenceKey,i));if(u){const c=Jx.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(IF(this.persistenceKey,e));if(r){const i=gC.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(IF(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return lt("SharedClientState","READ",e,t),t}setItem(e,t){lt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){lt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(lt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Oe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=zo.at;if(null!=u)try{const p=JSON.parse(u);sn("number"==typeof p),c=p}catch(p){Bi("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==zo.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Qx(this.currentUser,e,t,r),u=c4(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=c4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=IF(this.persistenceKey,e),u=new gC(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Jx.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Qx.Zi(new Is(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return gC.Zi(i,t)}yr(e){return CF.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);lt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(v=>{i.has(v)||c.push(v)}),i.forEach(v=>{u.has(v)||p.push(v)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Vx();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class d4{constructor(){this.Lr=new DF,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new DF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rJ{qr(e){}shutdown(){}}class h4{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sJ{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class oJ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const c=this.ho(e,t);lt("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(v=>(lt("RestConnection","Received: ",v),v),v=>{throw Xg("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}_o(e,t,r,i,u,c){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${iJ[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new iY;p.setWithCredentials(!0),p.listenOnce(tY.COMPLETE,()=>{var I;try{switch(p.getLastErrorCode()){case jL.NO_ERROR:const A=p.getResponseJson();lt("Connection","XHR received:",JSON.stringify(A)),u(A);break;case jL.TIMEOUT:lt("Connection",'RPC "'+e+'" timed out'),c(new tt(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case jL.HTTP_ERROR:const M=p.getStatus();if(lt("Connection",'RPC "'+e+'" failed with status:',M,"response text:",p.getResponseText()),M>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const $=null===(I=P)||void 0===I?void 0:I.error;if($&&$.status&&$.message){const Q=function(le){const ye=le.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(ye)>=0?ye:Pe.UNKNOWN}($.status);c(new tt(Q,$.message))}else c(new tt(Pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new tt(Pe.UNAVAILABLE,"Connection failed."));break;default:Lt()}}finally{lt("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(i);p.send(t,"POST",v,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=XZ(),c=eY(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new rY({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=i.join("");lt("Connection","Creating WebChannel: "+v,p);const I=u.createWebChannel(v,p);let A=!1,M=!1;const P=new sJ({Hr:Q=>{M?lt("Connection","Not sending because WebChannel is closed:",Q):(A||(lt("Connection","Opening WebChannel transport."),I.open(),A=!0),lt("Connection","WebChannel sending:",Q),I.send(Q))},Jr:()=>I.close()}),$=(Q,le,ye)=>{Q.listen(le,ct=>{try{ye(ct)}catch(ht){setTimeout(()=>{throw ht},0)}})};return $(I,Dx.EventType.OPEN,()=>{M||lt("Connection","WebChannel transport opened.")}),$(I,Dx.EventType.CLOSE,()=>{M||(M=!0,lt("Connection","WebChannel transport closed"),P.io())}),$(I,Dx.EventType.ERROR,Q=>{M||(M=!0,Xg("Connection","WebChannel transport errored:",Q),P.io(new tt(Pe.UNAVAILABLE,"The operation could not be completed")))}),$(I,Dx.EventType.MESSAGE,Q=>{var le;if(!M){const ye=Q.data[0];sn(!!ye);const ct=ye,ht=ct.error||(null===(le=ct[0])||void 0===le?void 0:le.error);if(ht){lt("Connection","WebChannel received error:",ht);const Et=ht.status;let _t=function(yt){const hn=Xi[yt];if(void 0!==hn)return s6(hn)}(Et),pt=ht.message;void 0===_t&&(_t=Pe.INTERNAL,pt="Unknown error status: "+Et+" with message "+ht.message),M=!0,P.io(new tt(_t,pt)),I.close()}else lt("Connection","WebChannel received:",ye),P.ro(ye)}}),$(c,nY.STAT_EVENT,Q=>{Q.stat===dH.PROXY?lt("Connection","Detected buffering proxy"):Q.stat===dH.NOPROXY&&lt("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function f4(){return typeof window<"u"?window:null}function Xx(){return typeof document<"u"?document:null}function mC(n){return new QY(n,!0)}class SF{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&lt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class p4{constructor(e,t,r,i,u,c,p,v){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new SF(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Oe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Oe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Oe.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new tt(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Oe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aJ extends p4{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function eQ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Lt(),i=e.targetChange.targetIds||[],u=function(v,I){return v.gt?(sn(void 0===I||"string"==typeof I),cs.fromBase64String(I||"")):(sn(void 0===I||I instanceof Uint8Array),cs.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(v){const I=void 0===v.code?Pe.UNKNOWN:s6(v.code);return new tt(I,v.message||"")}(c);t=new c6(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=ic(n,r.document.name),u=Cs(r.document.updateTime),c=new js({mapValue:{fields:r.document.fields}}),p=Zr.newFoundDocument(i,u,c);t=new Ux(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=ic(n,r.document),u=r.readTime?Cs(r.readTime):on.min(),c=Zr.newNoDocument(i,u);t=new Ux([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ic(n,r.document);t=new Ux([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Lt();{const r=e.filter,u=new HY(r.count||0);t=new l6(r.targetId,u)}}var v;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return on.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?on.min():u.readTime?Cs(u.readTime):on.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=oC(this.It),t.addTarget=function(i,u){let c;const p=u.target;return c=Rx(p)?{documents:E6(i,p)}:{query:oF(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=p6(i,u.resumeToken):u.snapshotVersion.compareTo(on.min())>0&&(c.readTime=iC(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function nQ(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=oC(this.It),t.removeTarget=e,this.Bo(t)}}class uJ extends p4{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(sn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function tQ(n,e){return n&&n.length>0?(sn(void 0!==e),n.map(t=>function(r,i){let u=Cs(r.updateTime?r.updateTime:i);return u.isEqual(on.min())&&(u=Cs(i)),new BY(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Cs(e.commitTime);return this.listener.Zo(r,t)}return sn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=oC(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>aC(this.It,r))};this.Bo(t)}}class lJ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new tt(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new tt(Pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection._o(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new tt(Pe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class dJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Bi(t),this.ou=!1):lt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hJ{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,Oe.Z)(function*(){var v;Nd(c)&&(lt("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Oe.Z)(function*(I){const A=Ct(I);A._u.add(4),yield zv(A),A.gu.set("Unknown"),A._u.delete(4),yield _C(A)}),function(I){return v.apply(this,arguments)})(c))}))}),this.gu=new dJ(r,i)}}function _C(n){return xF.apply(this,arguments)}function xF(){return xF=(0,Oe.Z)(function*(n){if(Nd(n))for(const e of n.wu)yield e(!0)}),xF.apply(this,arguments)}function zv(n){return NF.apply(this,arguments)}function NF(){return NF=(0,Oe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),NF.apply(this,arguments)}function eN(n,e){const t=Ct(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),kF(t)?RF(t):Kv(t).ko()&&MF(t,e))}function yC(n,e){const t=Ct(n),r=Kv(t);t.du.delete(e),r.ko()&&g4(t,e),0===t.du.size&&(r.ko()?r.Fo():Nd(t)&&t.gu.set("Unknown"))}function MF(n,e){n.yu.Mt(e.targetId),Kv(n).zo(e)}function g4(n,e){n.yu.Mt(e),Kv(n).Ho(e)}function RF(n){n.yu=new KY({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Kv(n).start(),n.gu.uu()}function kF(n){return Nd(n)&&!Kv(n).No()&&n.du.size>0}function Nd(n){return 0===Ct(n)._u.size}function m4(n){n.yu=void 0}function fJ(n){return OF.apply(this,arguments)}function OF(){return OF=(0,Oe.Z)(function*(n){n.du.forEach((e,t)=>{MF(n,e)})}),OF.apply(this,arguments)}function pJ(n,e){return PF.apply(this,arguments)}function PF(){return PF=(0,Oe.Z)(function*(n,e){m4(n),kF(n)?(n.gu.hu(e),RF(n)):n.gu.set("Unknown")}),PF.apply(this,arguments)}function gJ(n,e,t){return LF.apply(this,arguments)}function LF(){return LF=(0,Oe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof c6&&2===e.state&&e.cause)try{yield(r=(0,Oe.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.du.delete(p),i.yu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tN(n,r)}else if(e instanceof Ux?n.yu.Gt(e):e instanceof l6?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(on.min()))try{const r=yield i4(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const I=i.du.get(v);I&&i.du.set(v,I.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const v=i.du.get(p);if(!v)return;i.du.set(p,v.withResumeToken(cs.EMPTY_BYTE_STRING,v.snapshotVersion)),g4(i,p);const I=new Lf(v.target,p,1,v.sequenceNumber);MF(i,I)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){lt("RemoteStore","Failed to raise snapshot:",r),yield tN(n,r)}var r}),LF.apply(this,arguments)}function tN(n,e,t){return FF.apply(this,arguments)}function FF(){return FF=(0,Oe.Z)(function*(n,e,t){if(!xf(e))throw e;n._u.add(1),yield zv(n),n.gu.set("Offline"),t||(t=()=>i4(n.localStore)),n.asyncQueue.enqueueRetryable((0,Oe.Z)(function*(){lt("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield _C(n)}))}),FF.apply(this,arguments)}function _4(n,e){return e().catch(t=>tN(n,t,e))}function qv(n){return VF.apply(this,arguments)}function VF(){return VF=(0,Oe.Z)(function*(n){const e=Ct(n),t=Uf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;mJ(e);)try{const i=yield eJ(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,_J(e,i)}catch(i){yield tN(e,i)}y4(e)&&v4(e)}),VF.apply(this,arguments)}function mJ(n){return Nd(n)&&n.fu.length<10}function _J(n,e){n.fu.push(e);const t=Uf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function y4(n){return Nd(n)&&!Uf(n).No()&&n.fu.length>0}function v4(n){Uf(n).start()}function yJ(n){return UF.apply(this,arguments)}function UF(){return UF=(0,Oe.Z)(function*(n){Uf(n).eu()}),UF.apply(this,arguments)}function vJ(n){return BF.apply(this,arguments)}function BF(){return BF=(0,Oe.Z)(function*(n){const e=Uf(n);for(const t of n.fu)e.Xo(t.mutations)}),BF.apply(this,arguments)}function EJ(n,e,t){return jF.apply(this,arguments)}function jF(){return jF=(0,Oe.Z)(function*(n,e,t){const r=n.fu.shift(),i=lF.from(r,e,t);yield _4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qv(n)}),jF.apply(this,arguments)}function wJ(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,Oe.Z)(function*(n,e){var t;e&&Uf(n).Yo&&(yield(t=(0,Oe.Z)(function*(r,i){if(i6(u=i.code)&&u!==Pe.ABORTED){const c=r.fu.shift();Uf(r).Mo(),yield _4(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield qv(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),y4(n)&&v4(n)}),$F.apply(this,arguments)}function E4(n,e){return HF.apply(this,arguments)}function HF(){return HF=(0,Oe.Z)(function*(n,e){const t=Ct(n);t.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const r=Nd(t);t._u.add(3),yield zv(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield _C(t)}),HF.apply(this,arguments)}function GF(n,e){return WF.apply(this,arguments)}function WF(){return WF=(0,Oe.Z)(function*(n,e){const t=Ct(n);e?(t._u.delete(2),yield _C(t)):e||(t._u.add(2),yield zv(t),t.gu.set("Unknown"))}),WF.apply(this,arguments)}function Kv(n){return n.pu||(n.pu=function(e,t,r){const i=Ct(e);return i.su(),new aJ(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:fJ.bind(null,n),Zr:pJ.bind(null,n),Wo:gJ.bind(null,n)}),n.wu.push(function(){var e=(0,Oe.Z)(function*(t){t?(n.pu.Mo(),kF(n)?RF(n):n.gu.set("Unknown")):(yield n.pu.stop(),m4(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Uf(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ct(e);return i.su(),new uJ(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:yJ.bind(null,n),Zr:wJ.bind(null,n),tu:vJ.bind(null,n),Zo:EJ.bind(null,n)}),n.wu.push(function(){var e=(0,Oe.Z)(function*(t){t?(n.Iu.Mo(),yield qv(n)):(yield n.Iu.stop(),n.fu.length>0&&(lt("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class zF{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new zF(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tt(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zv(n,e){if(Bi("AsyncQueue",`${e}: ${n}`),xf(n))return new tt(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Yv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||bt.comparator(t.key,r.key):(t,r)=>bt.comparator(t.key,r.key),this.keyedMap=eC(),this.sortedSet=new Si(this.comparator)}static emptySet(e){return new Yv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class w4{constructor(){this.Tu=new Si(bt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Lt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qv{constructor(e,t,r,i,u,c,p,v,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new Qv(e,t,Yv.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&QI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class bJ{constructor(){this.Au=void 0,this.listeners=[]}}class IJ{constructor(){this.queries=new Pf(e=>$H(e),QI),this.onlineState="Unknown",this.Ru=new Set}}function qF(n,e){return KF.apply(this,arguments)}function KF(){return KF=(0,Oe.Z)(function*(n,e){const t=Ct(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new bJ),i)try{u.Au=yield t.onListen(r)}catch(c){const p=Zv(c,`Initialization of query '${eF(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&QF(t)}),KF.apply(this,arguments)}function ZF(n,e){return YF.apply(this,arguments)}function YF(){return YF=(0,Oe.Z)(function*(n,e){const t=Ct(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),YF.apply(this,arguments)}function CJ(n,e){const t=Ct(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Pu(i)&&(r=!0);c.Au=i}}r&&QF(t)}function DJ(n,e,t){const r=Ct(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function QF(n){n.Ru.forEach(e=>{e.next()})}class JF{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Qv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class TJ{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class b4{constructor(e){this.It=e}Ji(e){return ic(this.It,e)}Yi(e){return e.metadata.exists?v6(this.It,e.document,!1):Zr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Cs(e)}}class SJ{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=I4(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=tr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new b4(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||An()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Oe.Z)(function*(){const t=yield function tJ(n,e,t,r){return wF.apply(this,arguments)}(e.localStore,new b4(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield nJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function I4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class C4{constructor(e){this.key=e}}class D4{constructor(e){this.key=e}}class T4{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=An(),this.mutatedKeys=An(),this.Gu=GH(e),this.Qu=new Yv(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new w4,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,M)=>{const P=i.get(A),$=tF(this.query,M)?M:null,Q=!!P&&this.mutatedKeys.has(P.key),le=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let ye=!1;P&&$?P.data.isEqual($.data)?Q!==le&&(r.track({type:3,doc:$}),ye=!0):this.Hu(P,$)||(r.track({type:2,doc:$}),ye=!0,(v&&this.Gu($,v)>0||I&&this.Gu($,I)<0)&&(p=!0)):!P&&$?(r.track({type:0,doc:$}),ye=!0):P&&!$&&(r.track({type:1,doc:P}),ye=!0,(v||I)&&(p=!0)),ye&&($?(c=c.add($),u=le?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:c,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,A)=>function(M,P){const $=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt()}};return $(M)-$(P)}(I.type,A.type)||this.Gu(I.doc,A.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,v=p!==this.qu;return this.qu=p,0!==u.length||v?{snapshot:new Qv(this.query,e.Qu,i,u,e.mutatedKeys,0===p,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new w4,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=An(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new D4(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new C4(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=An();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Qv.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class AJ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xJ{constructor(e){this.key=e,this.nc=!1}}class NJ{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new Pf(p=>$H(p),QI),this.rc=new Map,this.oc=new Set,this.uc=new Si(bt.comparator),this.cc=new Map,this.ac=new pF,this.hc={},this.lc=new Map,this.fc=gm.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function MJ(n,e){return XF.apply(this,arguments)}function XF(){return XF=(0,Oe.Z)(function*(n,e){const t=I2(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const c=yield Gv(t.localStore,mo(e));t.isPrimaryClient&&eN(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield e2(t,e,r,"current"===p,c.resumeToken)}return i}),XF.apply(this,arguments)}function e2(n,e,t,r,i){return t2.apply(this,arguments)}function t2(){return t2=(0,Oe.Z)(function*(n,e,t,r,i){n._c=(M,P,$)=>{return(Q=(0,Oe.Z)(function*(le,ye,ct,ht){let Et=ye.view.Wu(ct);Et.$i&&(Et=yield Yx(le.localStore,ye.query,!1).then(({documents:yt})=>ye.view.Wu(yt,Et)));const _t=ht&&ht.targetChanges.get(ye.targetId),pt=ye.view.applyChanges(Et,le.isPrimaryClient,_t);return h2(le,ye.targetId,pt.Xu),pt.snapshot}),function(le,ye,ct,ht){return Q.apply(this,arguments)})(n,M,P,$);var Q};const u=yield Yx(n.localStore,e,!0),c=new T4(e,u.Hi),p=c.Wu(u.documents),v=rC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=c.applyChanges(p,n.isPrimaryClient,v);h2(n,t,I.Xu);const A=new AJ(e,t,c);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),t2.apply(this,arguments)}function RJ(n,e){return n2.apply(this,arguments)}function n2(){return n2=(0,Oe.Z)(function*(n,e){const t=Ct(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!QI(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),yC(t.remoteStore,r.targetId),Jv(t,r.targetId)}).catch(Af))):(Jv(t,r.targetId),yield Wv(t.localStore,r.targetId,!0))}),n2.apply(this,arguments)}function r2(){return r2=(0,Oe.Z)(function*(n,e,t){const r=C2(n);try{const i=yield function(u,c){const p=Ct(u),v=ai.now(),I=c.reduce((P,$)=>P.add($.key),An());let A,M;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let $=qo(),Q=An();return p.Gi.getEntries(P,I).next(le=>{$=le,$.forEach((ye,ct)=>{ct.isValidDocument()||(Q=Q.add(ye))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,$)).next(le=>{A=le;const ye=[];for(const ct of c){const ht=$Y(ct,A.get(ct.key).overlayedDocument);null!=ht&&ye.push(new xd(ct.key,ht,kH(ht.value.mapValue),ui.exists(!0)))}return p.mutationQueue.addMutationBatch(P,v,ye,c)}).next(le=>{M=le;const ye=le.applyToLocalDocumentSet(A,Q);return p.documentOverlayCache.saveOverlays(P,le.batchId,ye)})}).then(()=>({batchId:M.batchId,changes:a6(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let v=u.hc[u.currentUser.toKey()];v||(v=new Si(yn)),v=v.insert(c,p),u.hc[u.currentUser.toKey()]=v}(r,i.batchId,t),yield Md(r,i.changes),yield qv(r.remoteStore)}catch(i){const u=Zv(i,"Failed to persist write");t.reject(u)}}),r2.apply(this,arguments)}function S4(n,e){return s2.apply(this,arguments)}function s2(){return s2=(0,Oe.Z)(function*(n,e){const t=Ct(n);try{const r=yield XQ(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.cc.get(u);c&&(sn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?sn(c.nc):i.removedDocuments.size>0&&(sn(c.nc),c.nc=!1))}),yield Md(t,r,e)}catch(r){yield Af(r)}}),s2.apply(this,arguments)}function A4(n,e,t){const r=Ct(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,c)=>{const p=c.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ct(u);p.onlineState=c;let v=!1;p.queries.forEach((I,A)=>{for(const M of A.listeners)M.bu(c)&&(v=!0)}),v&&QF(p)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OJ(n,e,t){return o2.apply(this,arguments)}function o2(){return o2=(0,Oe.Z)(function*(n,e,t){const r=Ct(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let c=new Si(bt.comparator);c=c.insert(u,Zr.newNoDocument(u,on.min()));const p=An().add(u),v=new nC(on.min(),new Map,new Mr(yn),c,p);yield S4(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),f2(r)}else yield Wv(r.localStore,e,!1).then(()=>Jv(r,e,t)).catch(Af)}),o2.apply(this,arguments)}function PJ(n,e){return a2.apply(this,arguments)}function a2(){return a2=(0,Oe.Z)(function*(n,e){const t=Ct(n),r=e.batch.batchId;try{const i=yield JQ(t.localStore,e);d2(t,r,null),c2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Md(t,i)}catch(i){yield Af(i)}}),a2.apply(this,arguments)}function LJ(n,e,t){return u2.apply(this,arguments)}function u2(){return u2=(0,Oe.Z)(function*(n,e,t){const r=Ct(n);try{const i=yield function(u,c){const p=Ct(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return p.mutationQueue.lookupMutationBatch(v,c).next(A=>(sn(null!==A),I=A.keys(),p.mutationQueue.removeMutationBatch(v,A))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,I,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>p.localDocuments.getDocuments(v,I))})}(r.localStore,e);d2(r,e,t),c2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Md(r,i)}catch(i){yield Af(i)}}),u2.apply(this,arguments)}function l2(){return l2=(0,Oe.Z)(function*(n,e){const t=Ct(n);Nd(t.remoteStore)||lt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ct(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Zv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),l2.apply(this,arguments)}function c2(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function d2(n,e,t){const r=Ct(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Jv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||x4(n,r)})}function x4(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(yC(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),f2(n))}function h2(n,e,t){for(const r of t)r instanceof C4?(n.ac.addReference(r.key,e),VJ(n,r)):r instanceof D4?(lt("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||x4(n,r.key)):Lt()}function VJ(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(lt("SyncEngine","New document in limbo: "+t),n.oc.add(r),f2(n))}function f2(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new bt(tr.fromString(e)),r=n.fc.next();n.cc.set(r,new xJ(t)),n.uc=n.uc.insert(t,r),eN(n.remoteStore,new Lf(mo(Ov(t.path)),r,2,zo.at))}}function Md(n,e,t){return p2.apply(this,arguments)}function p2(){return p2=(0,Oe.Z)(function*(n,e,t){const r=Ct(n),i=[],u=[],c=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,v)=>{c.push(r._c(v,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I?.fromCache?"not-current":"current"),I){i.push(I);const A=yF.Ci(v.targetId,I);u.push(A)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(p=(0,Oe.Z)(function*(v,I){const A=Ct(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>xe.forEach(I,P=>xe.forEach(P.Si,$=>A.persistence.referenceDelegate.addReference(M,P.targetId,$)).next(()=>xe.forEach(P.Di,$=>A.persistence.referenceDelegate.removeReference(M,P.targetId,$)))))}catch(M){if(!xf(M))throw M;lt("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const P=M.targetId;if(!M.fromCache){const $=A.Ui.get(P),le=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);A.Ui=A.Ui.insert(P,le)}}}),function(v,I){return p.apply(this,arguments)})(r.localStore,u))}),p2.apply(this,arguments)}function UJ(n,e){return g2.apply(this,arguments)}function g2(){return g2=(0,Oe.Z)(function*(n,e){const t=Ct(n);if(!t.currentUser.isEqual(e)){lt("SyncEngine","User change. New user:",e.toKey());const r=yield r4(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(p=>{p.reject(new tt(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Md(t,r.ji)}var i}),g2.apply(this,arguments)}function BJ(n,e){const t=Ct(n),r=t.cc.get(e);if(r&&r.nc)return An().add(r.key);{let i=An();const u=t.rc.get(e);if(!u)return i;for(const c of u){const p=t.ic.get(c);i=i.unionWith(p.view.ju)}return i}}function jJ(n,e){return m2.apply(this,arguments)}function m2(){return m2=(0,Oe.Z)(function*(n,e){const t=Ct(n),r=yield Yx(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&h2(t,e.targetId,i.Xu),i}),m2.apply(this,arguments)}function $J(n,e){return _2.apply(this,arguments)}function _2(){return _2=(0,Oe.Z)(function*(n,e){const t=Ct(n);return a4(t.localStore,e).then(r=>Md(t,r))}),_2.apply(this,arguments)}function HJ(n,e,t,r){return y2.apply(this,arguments)}function y2(){return y2=(0,Oe.Z)(function*(n,e,t,r){const i=Ct(n),u=yield function(c,p){const v=Ct(c),I=Ct(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>I.Tn(A,p).next(M=>M?v.localDocuments.getDocuments(A,M):xe.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield qv(i.remoteStore):"acknowledged"===t||"rejected"===t?(d2(i,e,r||null),c2(i,e),p=e,Ct(Ct(i.localStore).mutationQueue).An(p)):Lt(),yield Md(i,u)):lt("SyncEngine","Cannot apply mutation batch with id: "+e)}),y2.apply(this,arguments)}function v2(){return v2=(0,Oe.Z)(function*(n,e){const t=Ct(n);if(I2(t),C2(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield N4(t,r.toArray());t.dc=!0,yield GF(t.remoteStore,!0);for(const u of i)eN(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Jv(t,c),Wv(t.localStore,c,!0))),yC(t.remoteStore,c)}),yield i,yield N4(t,r),function(u){const c=Ct(u);c.cc.forEach((p,v)=>{yC(c.remoteStore,v)}),c.ac.fs(),c.cc=new Map,c.uc=new Si(bt.comparator)}(t),t.dc=!1,yield GF(t.remoteStore,!1)}}),v2.apply(this,arguments)}function N4(n,e,t){return E2.apply(this,arguments)}function E2(){return E2=(0,Oe.Z)(function*(n,e,t){const r=Ct(n),i=[],u=[];for(const c of e){let p;const v=r.rc.get(c);if(v&&0!==v.length){p=yield Gv(r.localStore,mo(v[0]));for(const I of v){const A=r.ic.get(I),M=yield jJ(r,A);M.snapshot&&u.push(M.snapshot)}}else{const I=yield o4(r.localStore,c);p=yield Gv(r.localStore,I),yield e2(r,M4(I),c,!1,p.resumeToken)}i.push(p)}return r.sc.Wo(u),i}),E2.apply(this,arguments)}function M4(n){return BH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WJ(n){const e=Ct(n);return Ct(Ct(e.localStore).persistence).vi()}function zJ(n,e,t,r){return w2.apply(this,arguments)}function w2(){return w2=(0,Oe.Z)(function*(n,e,t,r){const i=Ct(n);if(i.dc)return void lt("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield a4(i.localStore,HH(u[0])),p=nC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,cs.EMPTY_BYTE_STRING);yield Md(i,c,p);break}case"rejected":yield Wv(i.localStore,e,!0),Jv(i,e,r);break;default:Lt()}}),w2.apply(this,arguments)}function qJ(n,e,t){return b2.apply(this,arguments)}function b2(){return b2=(0,Oe.Z)(function*(n,e,t){const r=I2(n);if(r.dc){for(const i of e){if(r.rc.has(i)){lt("SyncEngine","Adding an already active target "+i);continue}const u=yield o4(r.localStore,i),c=yield Gv(r.localStore,u);yield e2(r,M4(u),c.targetId,!1,c.resumeToken),eN(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Wv(r.localStore,i,!1).then(()=>{yC(r.remoteStore,i),Jv(r,i)}).catch(Af))}}),b2.apply(this,arguments)}function I2(n){const e=Ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=S4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OJ.bind(null,e),e.sc.Wo=CJ.bind(null,e.eventManager),e.sc.wc=DJ.bind(null,e.eventManager),e}function C2(n){const e=Ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LJ.bind(null,e),e}class R4{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Oe.Z)(function*(){t.It=mC(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return n4(this.persistence,new t4,e.initialUser,this.It)}yc(e){return new X6(Kx.Bs,this.It)}gc(e){return new d4}terminate(){var e=this;return(0,Oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class k4 extends R4{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Oe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield C2(r.Ac.syncEngine),yield qv(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return n4(this.persistence,new t4,e.initialUser,this.It)}Tc(e,t){return new FQ(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new EY(t,this.persistence);return new vY(e.asyncQueue,r)}yc(e){const t=_F(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ko.withCacheSize(this.cacheSizeBytes):Ko.DEFAULT;return new mF(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,f4(),Xx(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new d4}}class ZJ extends k4{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Oe.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof TF&&(r.sharedClientState.syncEngine={Fr:HJ.bind(null,i),$r:zJ.bind(null,i),Br:qJ.bind(null,i),vi:WJ.bind(null,i),Mr:$J.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Oe.Z)(function*(c){yield function GJ(n,e){return v2.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=f4();if(!TF.C(t))throw new tt(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_F(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new TF(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class D2{initialize(e,t){var r=this;return(0,Oe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>A4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=UJ.bind(null,r.syncEngine),yield GF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new IJ}createDatastore(e){const t=mC(e.databaseInfo.databaseId),r=new oJ(e.databaseInfo);return new lJ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>A4(this.syncEngine,p,0),c=h4.C()?new h4:new rJ,new hJ(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,v,I){const A=new NJ(r,i,u,c,p,v);return I&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Oe.Z)(function*(t){const r=Ct(t);lt("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield zv(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function T2(n,e,t){if(!t)throw new tt(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O4(n,e,t,r){if(!0===e&&!0===r)throw new tt(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function P4(n){if(!bt.isDocumentKey(n))throw new tt(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function L4(n){if(bt.isDocumentKey(n))throw new tt(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nN(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Lt()}function Kn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new tt(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nN(n);throw new tt(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function F4(n,e){if(e<=0)throw new tt(Pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const V4=new Map;class U4{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new tt(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tt(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,O4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vC{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new tt(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tt(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U4(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aY;switch(t.type){case"gapi":return new dY(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new tt(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=V4.get(e);t&&(lt("ComponentProvider","Removing Datastore"),V4.delete(e),t.terminate())}(this),Promise.resolve()}}class Xr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xr(this.firestore,e,this._key)}}class ro{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ro(this.firestore,e,this._query)}}class oc extends ro{constructor(e,t,r){super(e,t,Ov(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xr(this.firestore,null,new bt(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function j4(n,e,...t){if(n=(0,K.m9)(n),T2("collection","path",e),n instanceof vC){const r=tr.fromString(e,...t);return L4(r),new oc(n,null,r)}{if(!(n instanceof Xr||n instanceof oc))throw new tt(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return L4(r),new oc(n.firestore,null,r)}}function rN(n,e,...t){if(n=(0,K.m9)(n),1===arguments.length&&(e=gH.R()),T2("doc","path",e),n instanceof vC){const r=tr.fromString(e,...t);return P4(r),new Xr(n,null,new bt(r))}{if(!(n instanceof Xr||n instanceof oc))throw new tt(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return P4(r),new Xr(n.firestore,n instanceof oc?n.converter:null,new bt(r))}}function $4(n,e){return n=(0,K.m9)(n),e=(0,K.m9)(e),(n instanceof Xr||n instanceof oc)&&(e instanceof Xr||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function S2(n,e){return n=(0,K.m9)(n),e=(0,K.m9)(e),n instanceof ro&&e instanceof ro&&n.firestore===e.firestore&&QI(n._query,e._query)&&n.converter===e.converter}function H4(n,e=10240){let t=0;return{read:()=>(0,Oe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Oe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class iN{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QJ{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ls,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Oe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Oe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new TJ(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Oe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new tt(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Oe.Z)(function*(u,c){const p=Ct(u),v=oC(p.It)+"/documents",I={documents:c.map($=>sC(p.It,$))},A=yield p._o("BatchGetDocuments",v,I,c.length),M=new Map;A.forEach($=>{const Q=function XY(n,e){return"found"in e?function(t,r){sn(!!r.found);const i=ic(t,r.found.name),u=Cs(r.found.updateTime),c=new js({mapValue:{fields:r.found.fields}});return Zr.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){sn(!!r.missing),sn(!!r.readTime);const i=ic(t,r.missing),u=Cs(r.readTime);return Zr.newNoDocument(i,u)}(n,e):Lt()}(p.It,$);M.set(Q.key.toString(),Q)});const P=[];return c.forEach($=>{const Q=M.get($.toString());sn(!!Q),P.push(Q)}),P}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=bt.fromPath(i);e.mutations.push(new nF(u,e.precondition(u)))}),yield(r=(0,Oe.Z)(function*(i,u){const c=Ct(i),p=oC(c.It)+"/documents",v={writes:u.map(I=>aC(c.It,I))};yield c.ao("Commit",p,v)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Lt();t=on.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new tt(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(on.min())?ui.exists(!1):ui.updateTime(t):ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(on.min()))throw new tt(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ui.updateTime(t)}return ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tX{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new SF(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Oe.Z)(function*(){const t=new eX(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!WI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!i6(t)}return!1}}class nX{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Is.UNAUTHENTICATED,this.clientId=gH.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Oe.Z)(function*(p){lt("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(lt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tt(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function G4(n,e){return A2.apply(this,arguments)}function A2(){return A2=(0,Oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Oe.Z)(function*(u){r.isEqual(u)||(yield r4(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),A2.apply(this,arguments)}function W4(n,e){return x2.apply(this,arguments)}function x2(){return x2=(0,Oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield N2(n);lt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>E4(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>E4(e.remoteStore,u)),n.onlineComponents=e}),x2.apply(this,arguments)}function N2(n){return M2.apply(this,arguments)}function M2(){return M2=(0,Oe.Z)(function*(n){return n.offlineComponents||(lt("FirestoreClient","Using default OfflineComponentProvider"),yield G4(n,new R4)),n.offlineComponents}),M2.apply(this,arguments)}function sN(n){return R2.apply(this,arguments)}function R2(){return R2=(0,Oe.Z)(function*(n){return n.onlineComponents||(lt("FirestoreClient","Using default OnlineComponentProvider"),yield W4(n,new D2)),n.onlineComponents}),R2.apply(this,arguments)}function z4(n){return N2(n).then(e=>e.persistence)}function oN(n){return N2(n).then(e=>e.localStore)}function k2(n){return sN(n).then(e=>e.remoteStore)}function O2(n){return sN(n).then(e=>e.syncEngine)}function Xv(n){return P2.apply(this,arguments)}function P2(){return P2=(0,Oe.Z)(function*(n){const e=yield sN(n),t=e.eventManager;return t.onListen=MJ.bind(null,e.syncEngine),t.onUnlisten=RJ.bind(null,e.syncEngine),t}),P2.apply(this,arguments)}function K4(n,e,t={}){const r=new ls;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(i,u,c,p,v){const I=new iN({next:M=>{u.enqueueAndForget(()=>ZF(i,A));const P=M.docs.has(c);!P&&M.fromCache?v.reject(new tt(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&M.fromCache&&p&&"server"===p.source?v.reject(new tt(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new JF(Ov(c.path),I,{includeMetadataChanges:!0,Nu:!0});return qF(i,A)}(yield Xv(n),n.asyncQueue,e,t,r)})),r.promise}function Z4(n,e,t={}){const r=new ls;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(i,u,c,p,v){const I=new iN({next:M=>{u.enqueueAndForget(()=>ZF(i,A)),M.fromCache&&"server"===p.source?v.reject(new tt(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new JF(c,I,{includeMetadataChanges:!0,Nu:!0});return qF(i,A)}(yield Xv(n),n.asyncQueue,e,t,r)})),r.promise}class cX{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new SF(this,"async_queue_retry"),this.Wc=()=>{const t=Xx();t&&lt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Xx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Xx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ls;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Oe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!xf(t))throw t;lt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Bi("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=zF.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&Lt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Oe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function L2(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class dX{constructor(){this._progressObserver={},this._taskCompletionResolver=new ls,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ei extends vC{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cX,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Y4(this),this._firestoreClient.terminate()}}function ji(n){return n._firestoreClient||Y4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Y4(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IY(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new nX(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Q4(n,e,t){const r=new ls;return n.asyncQueue.enqueue((0,Oe.Z)(function*(){try{yield G4(n,t),yield W4(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===Pe.FAILED_PRECONDITION||c.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Xg("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function J4(n){if(n._initialized||n._terminated)throw new tt(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(cs.fromBase64String(e))}catch(t){throw new tt(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tt(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _m{constructor(e){this._methodName=e}}class aN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tt(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tt(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yn(this._lat,e._lat)||yn(this._long,e._long)}}const wX=/^__.*__$/;class bX{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vv(e,this.data,t,this.fieldTransforms)}}class X4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt()}}class uN{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new uN(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return dN(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(eG(this.sa)&&wX.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class IX{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||mC(e)}da(e,t,r,i=!1){return new uN({sa:e,methodName:t,fa:r,path:Ti.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ym(n){const e=n._freezeSettings(),t=mC(n._databaseId);return new IX(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lN(n,e,t,r,i,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,i);B2("Data must be an object, but it was:",c,r);const p=rG(r,c);let v,I;if(u.merge)v=new Ea(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const P=j2(e,M,t);if(!c.contains(P))throw new tt(Pe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);sG(A,P)||A.push(P)}v=new Ea(A),I=c.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,I=c.fieldTransforms;return new bX(new js(p),v,I)}class EC extends _m{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof EC}}function tG(n,e,t){return new uN({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class F2 extends _m{_toFieldTransform(e){return new JI(e.path,new Lv)}isEqual(e){return e instanceof F2}}class CX extends _m{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=tG(this,e,!0),r=this._a.map(u=>vm(u,t)),i=new am(r);return new JI(e.path,i)}isEqual(e){return this===e}}class DX extends _m{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=tG(this,e,!0),r=this._a.map(u=>vm(u,t)),i=new um(r);return new JI(e.path,i)}isEqual(e){return this===e}}class TX extends _m{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Fv(e.It,qH(e.It,this.wa));return new JI(e.path,t)}isEqual(e){return this===e}}function V2(n,e,t,r){const i=n.da(1,e,t);B2("Data must be an object, but it was:",i,r);const u=[],c=js.empty();nm(r,(v,I)=>{const A=cN(e,v,t);I=(0,K.m9)(I);const M=i.ca(A);if(I instanceof EC)u.push(A);else{const P=vm(I,M);null!=P&&(u.push(A),c.set(A,P))}});const p=new Ea(u);return new X4(c,p,i.fieldTransforms)}function U2(n,e,t,r,i,u){const c=n.da(1,e,t),p=[j2(e,r,t)],v=[i];if(u.length%2!=0)throw new tt(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)p.push(j2(e,u[P])),v.push(u[P+1]);const I=[],A=js.empty();for(let P=p.length-1;P>=0;--P)if(!sG(I,p[P])){const $=p[P];let Q=v[P];Q=(0,K.m9)(Q);const le=c.ca($);if(Q instanceof EC)I.push($);else{const ye=vm(Q,le);null!=ye&&(I.push($),A.set($,ye))}}const M=new Ea(I);return new X4(A,M,c.fieldTransforms)}function nG(n,e,t,r=!1){return vm(t,n.da(r?4:3,e))}function vm(n,e){if(iG(n=(0,K.m9)(n)))return B2("Unsupported field value:",e,n),rG(n,e);if(n instanceof _m)return function(t,r){if(!eG(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=vm(c,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,K.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qH(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ai.fromDate(t);return{timestampValue:iC(r.It,i)}}if(t instanceof ai){const i=new ai(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:iC(r.It,i)}}if(t instanceof aN)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:p6(r.It,t._byteString)};if(t instanceof Xr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rF(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${nN(t)}`)}(n,e)}function rG(n,e){const t={};return IH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nm(n,(r,i)=>{const u=vm(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function iG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ai||n instanceof aN||n instanceof ac||n instanceof Xr||n instanceof _m)}function B2(n,e,t){if(!iG(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=nN(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function j2(n,e,t){if((e=(0,K.m9)(e))instanceof Rd)return e._internalPath;if("string"==typeof e)return cN(n,e);throw dN("Field path arguments must be of type string or ",n,!1,void 0,t)}const SX=new RegExp("[~\\*/\\[\\]]");function cN(n,e,t){if(e.search(SX)>=0)throw dN(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch{throw dN(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dN(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${i}`),v+=")"),new tt(Pe.INVALID_ARGUMENT,p+n+v)}function sG(n,e){return n.some(t=>t.isEqual(e))}class wC{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new AX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class AX extends wC{data(){return super.data()}}function hN(n,e){return"string"==typeof e?cN(n,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}function oG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new tt(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bC{}function Bf(n,...e){for(const t of e)n=t._apply(n);return n}class xX extends bC{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=ym(e.firestore),r=function(i,u,c,p,v,I,A){let M;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new tt(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){hG(A,I);const $=[];for(const Q of A)$.push(dG(p,i,Q));M={arrayValue:{values:$}}}else M=dG(p,i,A)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||hG(A,I),M=nG(c,"where",A,"in"===I||"not-in"===I);const P=$s.create(v,I,M);return function($,Q){if(Q.dt()){const ye=JL($);if(null!==ye&&!ye.isEqual(Q.field))throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${Q.field.toString()}'`);const ct=QL($);null!==ct&&fG(0,Q.field,ct)}const le=function(ye,ct){for(const ht of ye.filters)if(ct.indexOf(ht.op)>=0)return ht.op;return null}($,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==le)throw new tt(Pe.INVALID_ARGUMENT,le===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${le.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ro(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Ad(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class MX extends bC{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new tt(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new tt(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new kv(i,u);return function(p,v){if(null===QL(p)){const I=JL(p);null!==I&&fG(0,I,v.field)}}(r,c),c}(e._query,this.ma,this.pa);return new ro(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Ad(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class aG extends bC{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ro(e.firestore,e.converter,Ox(e._query,this.Ia,this.Ta))}}class uG extends bC{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=cG(e,this.type,this.Ea,this.Aa);return new ro(e.firestore,e.converter,(i=t,new Ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class lG extends bC{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=cG(e,this.type,this.Ea,this.Aa);return new ro(e.firestore,e.converter,(i=t,new Ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function cG(n,e,t,r){if(t[0]=(0,K.m9)(t[0]),t[0]instanceof wC)return function(i,u,c,p,v){if(!p)throw new tt(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const A of Pv(i))if(A.field.isKeyField())I.push(sm(u,p.key));else{const M=p.data.field(A.field);if(KL(M))throw new tt(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const P=A.field.canonicalString();throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}I.push(M)}return new Of(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ym(n.firestore);return function(u,c,p,v,I,A){const M=u.explicitOrderBy;if(I.length>M.length)throw new tt(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let $=0;$<I.length;$++){const Q=I[$];if(M[$].field.isKeyField()){if("string"!=typeof Q)throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Q}`);if(!XL(u)&&-1!==Q.indexOf("/"))throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Q}' contains a slash.`);const le=u.path.child(tr.fromString(Q));if(!bt.isDocumentKey(le))throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const ye=new bt(le);P.push(sm(c,ye))}else{const le=nG(p,v,Q);P.push(le)}}return new Of(P,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function dG(n,e,t){if("string"==typeof(t=(0,K.m9)(t))){if(""===t)throw new tt(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XL(e)&&-1!==t.indexOf("/"))throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tr.fromString(t));if(!bt.isDocumentKey(r))throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sm(n,new bt(r))}if(t instanceof Xr)return sm(n,t._key);throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nN(t)}.`)}function hG(n,e){if(!Array.isArray(n)||0===n.length)throw new tt(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new tt(Pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function fG(n,e,t){if(!t.isEqual(e))throw new tt(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class $2{convertValue(e,t="none"){switch(im(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Lt()}}convertObject(e,t){const r={};return nm(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new aN(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DH(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(GI(e));default:return null}}convertTimestamp(e){const t=Nf(e);return new ai(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tr.fromString(e);sn(I6(r));const i=new Mf(r.get(1),r.get(3)),u=new bt(r.popFirst(5));return i.isEqual(t)||Bi(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UX extends $2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xr(this.firestore,null,t)}}class Em{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kd extends wC{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new IC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hN("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class IC extends kd{data(e={}){return super.data(e)}}class jf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Em(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new IC(this._firestore,this._userDataWriter,r.key,r,new Em(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tt(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new IC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Em(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new IC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Em(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:BX(c.type),doc:p,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt()}}function pG(n,e){return n instanceof kd&&e instanceof kd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof jf&&e instanceof jf&&n._firestore===e._firestore&&S2(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class $f extends $2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xr(this.firestore,null,t)}}function gG(n,e,t){n=Kn(n,Xr);const r=Kn(n.firestore,ei),i=fN(n.converter,e,t);return e0(r,[lN(ym(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ui.none())])}function mG(n,e,t,...r){n=Kn(n,Xr);const i=Kn(n.firestore,ei),u=ym(i);let c;return c="string"==typeof(e=(0,K.m9)(e))||e instanceof Rd?U2(u,"updateDoc",n._key,e,t,r):V2(u,"updateDoc",n._key,e),e0(i,[c.toMutation(n._key,ui.exists(!0))])}function _G(n,...e){var t,r,i;n=(0,K.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||L2(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(L2(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let v,I,A;if(n instanceof Xr)I=Kn(n.firestore,ei),A=Ov(n._key.path),v={next:M=>{e[c]&&e[c](H2(I,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Kn(n,ro);I=Kn(M.firestore,ei),A=M._query;const P=new $f(I);v={next:$=>{e[c]&&e[c](new jf(I,P,M,$))},error:e[c+1],complete:e[c+2]},oG(n._query)}return function(M,P,$,Q){const le=new iN(Q),ye=new JF(P,le,$);return M.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return qF(yield Xv(M),ye)})),()=>{le.bc(),M.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return ZF(yield Xv(M),ye)}))}}(ji(I),A,p,v)}function e0(n,e){return function(t,r){const i=new ls;return t.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function kJ(n,e,t){return r2.apply(this,arguments)}(yield O2(t),r,i)})),i.promise}(ji(n),e)}function H2(n,e,t){const r=t.docs.get(e._key),i=new $f(n);return new kd(n,i,e._key,r,new Em(t.hasPendingWrites,t.fromCache),e.converter)}const YX={maxAttempts:5};class yG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ym(e)}set(e,t,r){this._verifyNotCommitted();const i=Hf(e,this._firestore),u=fN(i.converter,t,r),c=lN(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ui.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Hf(e,this._firestore);let c;return c="string"==typeof(t=(0,K.m9)(t))||t instanceof Rd?U2(this._dataReader,"WriteBatch.update",u._key,t,r,i):V2(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hf(e,this._firestore);return this._mutations=this._mutations.concat(new Uv(t._key,ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tt(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hf(n,e){if((n=(0,K.m9)(n)).firestore!==e)throw new tt(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class QX extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ym(e)}get(e){const t=Hf(e,this._firestore),r=new UX(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Lt();const u=i[0];if(u.isFoundDocument())return new wC(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new wC(this._firestore,r,t._key,null,t.converter);throw Lt()})}set(e,t,r){const i=Hf(e,this._firestore),u=fN(i.converter,t,r),c=lN(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Hf(e,this._firestore);let c;return c="string"==typeof(t=(0,K.m9)(t))||t instanceof Rd?U2(this._dataReader,"Transaction.update",u._key,t,r,i):V2(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Hf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hf(e,this._firestore),r=new $f(this._firestore);return super.get(e).then(i=>new kd(this._firestore,r,t._key,i._document,new Em(!1,!1),t.converter))}}function G2(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new tt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EG(){if(typeof Uint8Array>"u")throw new tt("unimplemented","Uint8Arrays are not available in this environment.")}function wG(){if(!function wY(){return typeof atob<"u"}())throw new tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xv=da.SDK_VERSION,(0,da._registerComponent)(new qu.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new ei(new lY(t.getProvider("auth-internal")),new hY(t.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new tt(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mf(p.options.projectId,v)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,da.registerVersion)(hH,"3.7.3",n),(0,da.registerVersion)(hH,"3.7.3","esm2017")}();class CC{constructor(e){this._delegate=e}static fromBase64String(e){return wG(),new CC(ac.fromBase64String(e))}static fromUint8Array(e){return EG(),new CC(ac.fromUint8Array(e))}toBase64(){return wG(),this._delegate.toBase64()}toUint8Array(){return EG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function W2(n){return function oee(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aee{enableIndexedDbPersistence(e,t){return function fX(n,e){J4(n=Kn(n,ei));const t=ji(n),r=n._freezeSettings(),i=new D2;return Q4(t,i,new k4(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pX(n){J4(n=Kn(n,ei));const e=ji(n),t=n._freezeSettings(),r=new D2;return Q4(e,r,new ZJ(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gX(n){if(n._initialized&&!n._terminated)throw new tt(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ls;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{yield(t=(0,Oe.Z)(function*(r){if(!Xu.C())return Promise.resolve();const i=r+"main";yield Xu.delete(i)}),function(r){return t.apply(this,arguments)})(_F(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class bG{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function B4(n,e,t,r={}){var i;const u=(n=Kn(n,vC))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Xg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Is.MOCK_USER;else{c=(0,K.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new tt(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Is(v)}n._authCredentials=new uY(new fH(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function _X(n){return function rX(n){return n.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield z4(n),t=yield k2(n);return e.setNetworkEnabled(!0),function(r){const i=Ct(r);return i._u.delete(0),_C(i)}(t)}))}(ji(n=Kn(n,ei)))}(this._delegate)}disableNetwork(){return function yX(n){return function iX(n){return n.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield z4(n),t=yield k2(n);return e.setNetworkEnabled(!1),(r=(0,Oe.Z)(function*(i){const u=Ct(i);u._u.add(0),yield zv(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ji(n=Kn(n,ei)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,O4("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mX(n){return function(e){const t=new ls;return e.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function FJ(n,e){return l2.apply(this,arguments)}(yield O2(e),t)})),t.promise}(ji(n=Kn(n,ei)))}(this._delegate)}onSnapshotsInSync(e){return function ZX(n,e){return function aX(n,e){const t=new iN(e);return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return r=yield Xv(n),i=t,Ct(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return r=yield Xv(n),i=t,void Ct(r).Ru.delete(i);var r,i}))}}(ji(n=Kn(n,ei)),L2(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new t0(this,j4(this._delegate,e))}catch(t){throw yo(t,"collection()","Firestore.collection()")}}doc(e){try{return new iu(this,rN(this._delegate,e))}catch(t){throw yo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vo(this,function YJ(n,e){if(n=Kn(n,vC),T2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new tt(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ro(n,null,(t=e,new Ad(tr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw yo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JX(n,e,t){n=Kn(n,ei);const r=Object.assign(Object.assign({},YX),t);return function(i){if(i.maxAttempts<1)throw new tt(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const p=new ls;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){const v=yield function q4(n){return sN(n).then(e=>e.datastore)}(i);new tX(i.asyncQueue,v,c,u,p).run()})),p.promise}(ji(n),i=>e(new QX(n,i)),r)}(this._delegate,t=>e(new IG(this,t)))}batch(){return ji(this._delegate),new CG(new yG(this._delegate,e=>e0(this._delegate,e)))}loadBundle(e){return function vX(n,e){const t=ji(n=Kn(n,ei)),r=new dX;return function uX(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return H4(v,I);if(v instanceof ArrayBuffer)return H4(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new QJ(v,c);var v}(t,mC(e));n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){!function KJ(n,e,t){const r=Ct(n);var i;(i=(0,Oe.Z)(function*(u,c,p){try{const v=yield c.getMetadata();if(yield function(P,$){const Q=Ct(P),le=Cs($.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",ye=>Q.Ns.getBundleMetadata(ye,$.id)).then(ye=>!!ye&&ye.createTime.compareTo(le)>=0)}(u.localStore,v))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(P=v).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);p._updateProgress(I4(v));const I=new SJ(v,u.localStore,c.It);let A=yield c.mc();for(;A;){const P=yield I.Fu(A);P&&p._updateProgress(P),A=yield c.mc()}const M=yield I.complete();return yield Md(u,M.Lu,void 0),yield function(P,$){const Q=Ct(P);return Q.persistence.runTransaction("Save bundle","readwrite",le=>Q.Ns.saveBundleMetadata(le,$))}(u.localStore,v),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(v){return Xg("SyncEngine",`Loading bundle failed with ${v}`),p._failWith(v),Promise.resolve(new Set)}var P}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield O2(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EX(n,e){return function lX(n,e){return n.asyncQueue.enqueue((0,Oe.Z)(function*(){return function(t,r){const i=Ct(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield oN(n),e)}))}(ji(n=Kn(n,ei)),e).then(t=>t?new ro(n,null,t.query):null)}(this._delegate,e).then(t=>t?new vo(this,t):null)}}class pN extends $2{constructor(e){super(),this.firestore=e}convertBytes(e){return new CC(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return iu.forKey(t,this.firestore,null)}}class IG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pN(e)}get(e){const t=bm(e);return this._delegate.get(t).then(r=>new DC(this._firestore,new kd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=bm(e);return r?(G2("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=bm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=bm(e);return this._delegate.delete(t),this}}class CG{constructor(e){this._delegate=e}set(e,t,r){const i=bm(e);return r?(G2("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=bm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=bm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new IC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new wm(e,new pN(e),t),i.set(t,u)),u}}wm.INSTANCES=new WeakMap;class iu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pN(e)}static forPath(e,t,r){if(e.length%2!=0)throw new tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new iu(t,new Xr(t._delegate,r,new bt(e)))}static forKey(e,t,r){return new iu(t,new Xr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new t0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new t0(this.firestore,j4(this._delegate,e))}catch(t){throw yo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,K.m9)(e))instanceof Xr&&$4(this._delegate,e)}set(e,t){t=G2("DocumentReference.set",t);try{return t?gG(this._delegate,e,t):gG(this._delegate,e)}catch(r){throw yo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mG(this._delegate,e):mG(this._delegate,e,t,...r)}catch(i){throw yo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qX(n){return e0(Kn(n.firestore,ei),[new Uv(n._key,ui.none())])}(this._delegate)}onSnapshot(...e){const t=DG(e),r=TG(e,i=>new DC(this.firestore,new kd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return _G(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function $X(n){n=Kn(n,Xr);const e=Kn(n.firestore,ei),t=ji(e),r=new $f(e);return function sX(n,e){const t=new ls;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(r=(0,Oe.Z)(function*(i,u,c){try{const p=yield function(v,I){const A=Ct(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,I))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new tt(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const v=Zv(p,`Failed to get document '${u} from cache`);c.reject(v)}}),function(i,u,c){return r.apply(this,arguments)})(yield oN(n),e,t);var r})),t.promise}(t,n._key).then(i=>new kd(e,r,n._key,i,new Em(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HX(n){n=Kn(n,Xr);const e=Kn(n.firestore,ei);return K4(ji(e),n._key,{source:"server"}).then(t=>H2(e,n,t))}(this._delegate):function jX(n){n=Kn(n,Xr);const e=Kn(n.firestore,ei);return K4(ji(e),n._key).then(t=>H2(e,n,t))}(this._delegate),t.then(r=>new DC(this.firestore,new kd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new iu(this.firestore,this._delegate.withConverter(e?wm.getInstance(this.firestore,e):null))}}function yo(n,e,t){return n.message=n.message.replace(e,t),n}function DG(n){for(const e of n)if("object"==typeof e&&!W2(e))return e;return{}}function TG(n,e){var t,r;let i;return i=W2(n[0])?n[0]:W2(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class DC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new iu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pG(this._delegate,e._delegate)}}class TC extends DC{data(e){const t=this._delegate.data(e);return function oY(n,e){n||Lt()}(void 0!==t),t}}class vo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pN(e)}where(e,t,r){try{return new vo(this.firestore,Bf(this._delegate,function NX(n,e,t){const r=e,i=hN("where",n);return new xX(i,r,t)}(e,t,r)))}catch(i){throw yo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vo(this.firestore,Bf(this._delegate,function RX(n,e="asc"){const t=e,r=hN("orderBy",n);return new MX(r,t)}(e,t)))}catch(r){throw yo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vo(this.firestore,Bf(this._delegate,function kX(n){return F4("limit",n),new aG("limit",n,"F")}(e)))}catch(t){throw yo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vo(this.firestore,Bf(this._delegate,function OX(n){return F4("limitToLast",n),new aG("limitToLast",n,"L")}(e)))}catch(t){throw yo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vo(this.firestore,Bf(this._delegate,function PX(...n){return new uG("startAt",n,!0)}(...e)))}catch(t){throw yo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vo(this.firestore,Bf(this._delegate,function LX(...n){return new uG("startAfter",n,!1)}(...e)))}catch(t){throw yo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vo(this.firestore,Bf(this._delegate,function FX(...n){return new lG("endBefore",n,!1)}(...e)))}catch(t){throw yo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vo(this.firestore,Bf(this._delegate,function VX(...n){return new lG("endAt",n,!0)}(...e)))}catch(t){throw yo(t,"endAt()","Query.endAt()")}}isEqual(e){return S2(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function WX(n){n=Kn(n,ro);const e=Kn(n.firestore,ei),t=ji(e),r=new $f(e);return function oX(n,e){const t=new ls;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(r=(0,Oe.Z)(function*(i,u,c){try{const p=yield Yx(i,u,!0),v=new T4(u,p.Hi),I=v.Wu(p.documents),A=v.applyChanges(I,!1);c.resolve(A.snapshot)}catch(p){const v=Zv(p,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(i,u,c){return r.apply(this,arguments)})(yield oN(n),e,t);var r})),t.promise}(t,n._query).then(i=>new jf(e,r,n,i))}(this._delegate):"server"===e?.source?function zX(n){n=Kn(n,ro);const e=Kn(n.firestore,ei),t=ji(e),r=new $f(e);return Z4(t,n._query,{source:"server"}).then(i=>new jf(e,r,n,i))}(this._delegate):function GX(n){n=Kn(n,ro);const e=Kn(n.firestore,ei),t=ji(e),r=new $f(e);return oG(n._query),Z4(t,n._query).then(i=>new jf(e,r,n,i))}(this._delegate),t.then(r=>new z2(this.firestore,new jf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=DG(e),r=TG(e,i=>new z2(this.firestore,new jf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return _G(this._delegate,t,r)}withConverter(e){return new vo(this.firestore,this._delegate.withConverter(e?wm.getInstance(this.firestore,e):null))}}class lee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new TC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class z2{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new TC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lee(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new TC(this._firestore,r))})}isEqual(e){return pG(this._delegate,e._delegate)}}class t0 extends vo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new iu(this.firestore,e):null}doc(e){try{return new iu(this.firestore,void 0===e?rN(this._delegate):rN(this._delegate,e))}catch(t){throw yo(t,"doc()","CollectionReference.doc()")}}add(e){return function KX(n,e){const t=Kn(n.firestore,ei),r=rN(n),i=fN(n.converter,e);return e0(t,[lN(ym(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ui.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new iu(this.firestore,t))}isEqual(e){return $4(this._delegate,e._delegate)}withConverter(e){return new t0(this.firestore,this._delegate.withConverter(e?wm.getInstance(this.firestore,e):null))}}function bm(n){return Kn(n,Xr)}class q2{constructor(...e){this._delegate=new Rd(...e)}static documentId(){return new q2(Ti.keyField().canonicalString())}isEqual(e){return(e=(0,K.m9)(e))instanceof Rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Im{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eee(){return new F2("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Im(e)}static delete(){const e=function XX(){return new EC("deleteField")}();return e._methodName="FieldValue.delete",new Im(e)}static arrayUnion(...e){const t=function tee(...n){return new CX("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Im(t)}static arrayRemove(...e){const t=function nee(...n){return new DX("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Im(t)}static increment(e){const t=function ree(n){return new TX("increment",n)}(e);return t._methodName="FieldValue.increment",new Im(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cee={Firestore:bG,GeoPoint:aN,Timestamp:ai,Blob:CC,Transaction:IG,WriteBatch:CG,DocumentReference:iu,DocumentSnapshot:DC,Query:vo,QueryDocumentSnapshot:TC,QuerySnapshot:z2,CollectionReference:t0,FieldPath:q2,FieldValue:Im,setLogLevel:function uee(n){!function sY(n){Sf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function SG(n,e){return function fee(n,e=Ib.z){return new Js.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function K2(n,e){return SG(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function gN(n,e){return K2(n,e).pipe(dh(void 0),Ag(),(0,At.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const v=i.find(A=>A.doc.ref.isEqual(c.ref)),I=t?.payload.docs.find(A=>A.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function AG(n,e,t){return gN(n,t).pipe(Ru((r,i)=>function gee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mee(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Z2(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Z2(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Z2(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),pd(),(0,At.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Z2(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function xG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hee(n){(function dee(n,e){n.INTERNAL.registerComponent(new qu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cee)))})(n,(e,t)=>new bG(e,t,new aee)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(KO.Z);class NG{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gN(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(dh(void 0),Ag(),ys(([r,i])=>i.length>0||!r),(0,At.U)(([r,i])=>i),Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ru((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xG(e);return AG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return K2(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fn.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(Fn.iC)}add(e){return this.ref.add(e)}doc(e){return new MG(this.ref.doc(e),this.afs)}}class MG{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=OG(r,t);return new NG(i,u,this.afs)}snapshotChanges(){return function pee(n,e){return SG(n,e).pipe(dh(void 0),Ag(),(0,At.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,$n.D)(this.ref.get(e)).pipe(Fn.iC)}}class _ee{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gN(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ys(t=>t.length>0),Fn.iC):gN(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ru((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xG(e);return AG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return K2(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Fn.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(Fn.iC)}}const RG=new f.OlP("angularfire2.enableFirestorePersistence"),kG=new f.OlP("angularfire2.firestore.persistenceSettings"),yee=new f.OlP("angularfire2.firestore.settings"),vee=new f.OlP("angularfire2.firestore.use-emulator");function OG(n,e=(t=>t)){return{query:e(n),ref:n}}let PG=(()=>{class n{constructor(t,r,i,u,c,p,v,I,A,M,P,$,Q,le,ye,ct,ht){this.schedulers=v;const Et=(0,Sr.on)(t,p,r),_t=A;M&&db(Et,p,P,Q,le,ye,$,ct),[this.firestore,this.persistenceEnabled$]=(0,Sr.cc)(`${Et.name}.firestore`,"AngularFirestore",Et.name,()=>{const pt=p.runOutsideAngular(()=>Et.firestore());if(u&&pt.settings(u),_t&&pt.useEmulator(..._t),i&&!mu(c)){const yt=()=>{try{return(0,$n.D)(pt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(hn){return typeof console<"u"&&console.warn(hn),St(!1)}};return[pt,p.runOutsideAngular(yt)]}return[pt,St(!1)]},[u,_t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=OG(i,r),p=this.schedulers.ngZone.run(()=>u);return new NG(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new _ee(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new MG(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sr.Dh),f.LFG(Sr.xv,8),f.LFG(RG,8),f.LFG(yee,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(kG,8),f.LFG(vee,8),f.LFG(Xs,8),f.LFG(Sg,8),f.LFG(fd,8),f.LFG(ab,8),f.LFG(ub,8),f.LFG(lb,8),f.LFG(cb,8),f.LFG(Tg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Eee=(()=>{class n{constructor(){jt.Z.registerVersion("angularfire",Fn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:RG,useValue:!0},{provide:kG,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[PG]}),n})();const bee=new f.OlP("angularfire2.functions.origin"),LG=new f.OlP("angularfire2.functions.region"),Iee=new f.OlP("angularfire2.functions.use-emulator");let Y2=(()=>{class n{constructor(t,r,i,u,c,p,v,I){const A=v,M=St(void 0).pipe((0,dd.Q)(u.outsideAngular),ir(()=>U.e(568).then(U.bind(U,7568))),(0,At.U)(()=>(0,Sr.on)(t,i,r)),(0,At.U)(P=>(0,Sr.cc)(`${P.name}.functions.${c||p}`,"AngularFireFunctions",P.name,()=>{let $;if(c&&p)throw new Error("REGION and ORIGIN can't be used at the same time.");return $=P.functions(c||p||void 0),A&&$.useEmulator(...A),$},[c,p,A])),ii({bufferSize:1,refCount:!1}));return this.httpsCallable=(P,$)=>Q=>(0,$n.D)(M).pipe((0,dd.Q)(u.insideAngular),ir(le=>le.httpsCallable(P,$)(Q)),(0,At.U)(le=>le.data)),(0,Sr.pX)(this,M,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sr.Dh),f.LFG(Sr.xv,8),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(LG,8),f.LFG(bee,8),f.LFG(Iee,8),f.LFG(Tg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Cee=(()=>{class n{constructor(){jt.Z.registerVersion("angularfire",Fn.q4.full,"fn-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Y2]}),n})();var Dee=U(4159),Tee=U.n(Dee);U(2125),U(5473),U(9812),U(7792),U(2910),function(){(function(){var n,t,e="function"==typeof Object.create?Object.create:function(s){function d(){}return d.prototype=s,new d};if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var r;e:{var u={};try{u.__proto__={xb:!0},r=u.xb;break e}catch{}r=!1}t=r?function(s,d){if(s.__proto__=d,s.__proto__!==d)throw new TypeError(s+" is not extensible");return s}:null}var c=t;function p(s,d){if(s.prototype=e(d.prototype),s.prototype.constructor=s,c)c(s,d);else for(var m in d)if("prototype"!=m)if(Object.defineProperties){var E=Object.getOwnPropertyDescriptor(d,m);E&&Object.defineProperty(s,m,E)}else s[m]=d[m];s.K=d.prototype}var v="function"==typeof Object.defineProperties?Object.defineProperty:function(s,d,m){s!=Array.prototype&&s!=Object.prototype&&(s[d]=m.value)},I=typeof window<"u"&&window===this?this:typeof global<"u"&&null!=global?global:this;function A(s,d){if(d){var m=I;s=s.split(".");for(var E=0;E<s.length-1;E++){var D=s[E];D in m||(m[D]={}),m=m[D]}(d=d(E=m[s=s[s.length-1]]))!=E&&null!=d&&v(m,s,{configurable:!0,writable:!0,value:d})}}A("Object.is",function(s){return s||function(d,m){return d===m?0!==d||1/d==1/m:d!=d&&m!=m}}),A("Array.prototype.includes",function(s){return s||function(d,m){var E=this;E instanceof String&&(E=String(E));var D=E.length;for(0>(m=m||0)&&(m=Math.max(m+D,0));m<D;m++){var x=E[m];if(x===d||Object.is(x,d))return!0}return!1}});var M=this;function P(s){return void 0!==s}function $(s){return"string"==typeof s}var Q=/^[\w+/_-]+[=]{0,2}$/,le=null;function ye(){}function ct(s){s.W=void 0,s.Xa=function(){return s.W?s.W:s.W=new s}}function ht(s){var d=typeof s;if("object"==d){if(!s)return"null";if(s instanceof Array)return"array";if(s instanceof Object)return d;var m=Object.prototype.toString.call(s);if("[object Window]"==m)return"object";if("[object Array]"==m||"number"==typeof s.length&&typeof s.splice<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("splice"))return"array";if("[object Function]"==m||typeof s.call<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("call"))return"function"}else if("function"==d&&typeof s.call>"u")return"object";return d}function Et(s){return"array"==ht(s)}function _t(s){var d=ht(s);return"array"==d||"object"==d&&"number"==typeof s.length}function pt(s){return"function"==ht(s)}function yt(s){var d=typeof s;return"object"==d&&null!=s||"function"==d}var hn="closure_uid_"+(1e9*Math.random()>>>0),Rr=0;function $i(s,d,m){return s.call.apply(s.bind,arguments)}function Hi(s,d,m){if(!s)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,E),s.apply(d,D)}}return function(){return s.apply(d,arguments)}}function en(s,d,m){return(en=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$i:Hi).apply(null,arguments)}function ds(s,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),s.apply(this,E)}}function Mn(s,d){for(var m in d)s[m]=d[m]}var km,bo=Date.now||function(){return+new Date};function lr(s,d){s=s.split(".");var E,m=M;s[0]in m||typeof m.execScript>"u"||m.execScript("var "+s[0]);for(;s.length&&(E=s.shift());)!s.length&&P(d)?m[E]=d:m=m[E]&&m[E]!==Object.prototype[E]?m[E]:m[E]={}}function Zt(s,d){function m(){}m.prototype=d.prototype,s.K=d.prototype,s.prototype=new m,s.prototype.constructor=s,s.vc=function(E,D,x){for(var B=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)B[ee-2]=arguments[ee];return d.prototype[D].apply(E,B)}}function ti(s){if(Error.captureStackTrace)Error.captureStackTrace(this,ti);else{var d=Error().stack;d&&(this.stack=d)}s&&(this.message=String(s))}function nl(s,d){for(var m="",E=(s=s.split("%s")).length-1,D=0;D<E;D++)m+=s[D]+(D<d.length?d[D]:"%s");ti.call(this,m+s[E])}function Zo(s,d){throw new nl("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}Zt(ti,Error),ti.prototype.name="CustomError",Zt(nl,ti),nl.prototype.name="AssertionError";var y0=Array.prototype.indexOf?function(s,d){return Array.prototype.indexOf.call(s,d,void 0)}:function(s,d){if($(s))return $(d)&&1==d.length?s.indexOf(d,0):-1;for(var m=0;m<s.length;m++)if(m in s&&s[m]===d)return m;return-1},rl=Array.prototype.forEach?function(s,d,m){Array.prototype.forEach.call(s,d,m)}:function(s,d,m){for(var E=s.length,D=$(s)?s.split(""):s,x=0;x<E;x++)x in D&&d.call(m,D[x],x,s)},Jf=Array.prototype.filter?function(s,d){return Array.prototype.filter.call(s,d,void 0)}:function(s,d){for(var m=s.length,E=[],D=0,x=$(s)?s.split(""):s,B=0;B<m;B++)if(B in x){var ee=x[B];d.call(void 0,ee,B,s)&&(E[D++]=ee)}return E},dc=Array.prototype.map?function(s,d){return Array.prototype.map.call(s,d,void 0)}:function(s,d){for(var m=s.length,E=Array(m),D=$(s)?s.split(""):s,x=0;x<m;x++)x in D&&(E[x]=d.call(void 0,D[x],x,s));return E},Om=Array.prototype.some?function(s,d){return Array.prototype.some.call(s,d,void 0)}:function(s,d){for(var m=s.length,E=$(s)?s.split(""):s,D=0;D<m;D++)if(D in E&&d.call(void 0,E[D],D,s))return!0;return!1};function Hs(s,d){return 0<=y0(s,d)}function hc(s,d){var m;return(m=0<=(d=y0(s,d)))&&Xf(s,d),m}function Xf(s,d){return 1==Array.prototype.splice.call(s,d,1).length}function ZN(s){return Array.prototype.concat.apply([],arguments)}function FC(s){var d=s.length;if(0<d){for(var m=Array(d),E=0;E<d;E++)m[E]=s[E];return m}return[]}function UV(s,d,m){return 2>=arguments.length?Array.prototype.slice.call(s,d):Array.prototype.slice.call(s,d,m)}var Io=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},YN=/&/g,QN=/</g,BV=/>/g,jV=/"/g,Bd=/'/g,E0=/\x00/g,JN=/[\x00&<>"']/;function w0(s,d){return s<d?-1:s>d?1:0}function fc(s){return JN.test(s)&&(-1!=s.indexOf("&")&&(s=s.replace(YN,"&amp;")),-1!=s.indexOf("<")&&(s=s.replace(QN,"&lt;")),-1!=s.indexOf(">")&&(s=s.replace(BV,"&gt;")),-1!=s.indexOf('"')&&(s=s.replace(jV,"&quot;")),-1!=s.indexOf("'")&&(s=s.replace(Bd,"&#39;")),-1!=s.indexOf("\0")&&(s=s.replace(E0,"&#0;"))),s}function VC(s,d,m){for(var E in s)d.call(m,s[E],E,s)}function b0(s){var m,d={};for(m in s)d[m]=s[m];return d}var UC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pm(s,d){for(var m,E,D=1;D<arguments.length;D++){for(m in E=arguments[D])s[m]=E[m];for(var x=0;x<UC.length;x++)m=UC[x],Object.prototype.hasOwnProperty.call(E,m)&&(s[m]=E[m])}}var I0="StopIteration"in M?M.StopIteration:{message:"StopIteration",stack:""};function Lm(){}function b8(s){if(s instanceof Lm)return s;if("function"==typeof s.ha)return s.ha(!1);if(_t(s)){var d=0,m=new Lm;return m.next=function(){for(;;){if(d>=s.length)throw I0;if(d in s)return s[d++];d++}},m}throw Error("Not implemented")}function XN(s,d){this.g={},this.a=[],this.j=this.h=0;var m=arguments.length;if(1<m){if(m%2)throw Error("Uneven number of arguments");for(var E=0;E<m;E+=2)this.set(arguments[E],arguments[E+1])}else if(s)if(s instanceof XN)for(m=s.ja(),E=0;E<m.length;E++)this.set(m[E],s.get(m[E]));else for(E in s)this.set(E,s[E])}function eM(s){if(s.h!=s.a.length){for(var d=0,m=0;d<s.a.length;){var E=s.a[d];Fm(s.g,E)&&(s.a[m++]=E),d++}s.a.length=m}if(s.h!=s.a.length){var D={};for(m=d=0;d<s.a.length;)Fm(D,E=s.a[d])||(s.a[m++]=E,D[E]=1),d++;s.a.length=m}}function Fm(s,d){return Object.prototype.hasOwnProperty.call(s,d)}Lm.prototype.next=function(){throw I0},Lm.prototype.ha=function(){return this},(n=XN.prototype).la=function(){eM(this);for(var s=[],d=0;d<this.a.length;d++)s.push(this.g[this.a[d]]);return s},n.ja=function(){return eM(this),this.a.concat()},n.clear=function(){this.g={},this.j=this.h=this.a.length=0},n.get=function(s,d){return Fm(this.g,s)?this.g[s]:d},n.set=function(s,d){Fm(this.g,s)||(this.h++,this.a.push(s),this.j++),this.g[s]=d},n.forEach=function(s,d){for(var m=this.ja(),E=0;E<m.length;E++){var D=m[E],x=this.get(D);s.call(d,x,D,this)}},n.ha=function(s){eM(this);var d=0,m=this.j,E=this,D=new Lm;return D.next=function(){if(m!=E.j)throw Error("The map has changed since the iterator was created");if(d>=E.a.length)throw I0;var x=E.a[d++];return s?x:E.g[x]},D};var hoe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function I8(s,d,m,E){for(var D=m.length;0<=(d=s.indexOf(m,d))&&d<E;){var x=s.charCodeAt(d-1);if(!(38!=x&&63!=x||(x=s.charCodeAt(d+D))&&61!=x&&38!=x&&35!=x))return d;d+=D+1}return-1}var C8=/#|$/;function tM(s,d){var m=s.search(C8),E=I8(s,0,d,m);if(0>E)return null;var D=s.indexOf("&",E);return(0>D||D>m)&&(D=m),E+=d.length+1,decodeURIComponent(s.substr(E,D-E).replace(/\+/g," "))}var poe=/[?&]($|#)/;function ep(s,d){var m;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,s instanceof ep?(this.i=P(d)?d:s.i,$V(this,s.j),this.A=s.A,this.h=s.h,HV(this,s.C),this.g=s.g,GV(this,S8(s.a)),this.s=s.s):s&&(m=String(s).match(hoe))?(this.i=!!d,$V(this,m[1]||"",!0),this.A=BC(m[2]||""),this.h=BC(m[3]||"",!0),HV(this,m[4]),this.g=BC(m[5]||"",!0),GV(this,m[6]||"",!0),this.s=BC(m[7]||"")):(this.i=!!d,this.a=new $C(null,this.i))}function $V(s,d,m){s.j=m?BC(d,!0):d,s.j&&(s.j=s.j.replace(/:$/,""))}function HV(s,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);s.C=d}else s.C=null}function GV(s,d,m){d instanceof $C?(s.a=d,function Eoe(s,d){d&&!s.j&&(tp(s),s.h=null,s.a.forEach(function(m,E){var D=E.toLowerCase();E!=D&&(Vm(this,E),Vm(this,D),0<m.length&&(this.h=null,this.a.set(C0(this,D),FC(m)),this.g+=m.length))},s)),s.j=d}(s.a,s.i)):(m||(d=jC(d,yoe)),s.a=new $C(d,s.i))}function WV(s){return s instanceof ep?new ep(s):new ep(s,void 0)}function BC(s,d){return s?d?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function jC(s,d,m){return $(s)?(s=encodeURI(s).replace(d,goe),m&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function goe(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}ep.prototype.toString=function(){var s=[],d=this.j;d&&s.push(jC(d,D8,!0),":");var m=this.h;return(m||"file"==d)&&(s.push("//"),(d=this.A)&&s.push(jC(d,D8,!0),"@"),s.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.C)&&s.push(":",String(m))),(m=this.g)&&(this.h&&"/"!=m.charAt(0)&&s.push("/"),s.push(jC(m,"/"==m.charAt(0)?_oe:moe,!0))),(m=this.a.toString())&&s.push("?",m),(m=this.s)&&s.push("#",jC(m,voe)),s.join("")};var D8=/[#\/\?@]/g,moe=/[#\?:]/g,_oe=/[#\?]/g,yoe=/[#\?@]/g,voe=/#/g;function $C(s,d){this.g=this.a=null,this.h=s||null,this.j=!!d}function tp(s){s.a||(s.a=new XN,s.g=0,s.h&&function foe(s,d){if(s){s=s.split("&");for(var m=0;m<s.length;m++){var E=s[m].indexOf("="),D=null;if(0<=E){var x=s[m].substring(0,E);D=s[m].substring(E+1)}else x=s[m];d(x,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}(s.h,function(d,m){s.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}function Vm(s,d){tp(s),d=C0(s,d),Fm(s.a.g,d)&&(s.h=null,s.g-=s.a.get(d).length,Fm((s=s.a).g,d)&&(delete s.g[d],s.h--,s.j++,s.a.length>2*s.h&&eM(s)))}function T8(s,d){return tp(s),d=C0(s,d),Fm(s.a.g,d)}function S8(s){var d=new $C;return d.h=s.h,s.a&&(d.a=new XN(s.a),d.g=s.g),d}function C0(s,d){return d=String(d),s.j&&(d=d.toLowerCase()),d}function Um(s){this.a=WV(s)}function A8(s){return s.a.a.get(es.Pa)||null}function x8(s,d){d?s.a.a.set(es.PROVIDER_ID,d):Vm(s.a.a,es.PROVIDER_ID)}(n=$C.prototype).add=function(s,d){tp(this),this.h=null,s=C0(this,s);var m=this.a.get(s);return m||this.a.set(s,m=[]),m.push(d),this.g+=1,this},n.clear=function(){this.a=this.h=null,this.g=0},n.forEach=function(s,d){tp(this),this.a.forEach(function(m,E){rl(m,function(D){s.call(d,D,E,this)},this)},this)},n.ja=function(){tp(this);for(var s=this.a.la(),d=this.a.ja(),m=[],E=0;E<d.length;E++)for(var D=s[E],x=0;x<D.length;x++)m.push(d[E]);return m},n.la=function(s){tp(this);var d=[];if($(s))T8(this,s)&&(d=ZN(d,this.a.get(C0(this,s))));else{s=this.a.la();for(var m=0;m<s.length;m++)d=ZN(d,s[m])}return d},n.set=function(s,d){return tp(this),this.h=null,T8(this,s=C0(this,s))&&(this.g-=this.a.get(s).length),this.a.set(s,[d]),this.g+=1,this},n.get=function(s,d){return s&&0<(s=this.la(s)).length?String(s[0]):d},n.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var s=[],d=this.a.ja(),m=0;m<d.length;m++){var E=d[m],D=encodeURIComponent(String(E));E=this.la(E);for(var x=0;x<E.length;x++){var B=D;""!==E[x]&&(B+="="+encodeURIComponent(String(E[x]))),s.push(B)}}return this.h=s.join("&")},Um.prototype.toString=function(){return this.a.toString()};var D0,es={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var N8=M.navigator;if(N8){var M8=N8.userAgent;if(M8){D0=M8;break e}}D0=""}function Wn(s){return-1!=D0.indexOf(s)}function R8(){return(Wn("Chrome")||Wn("CriOS"))&&!Wn("Edge")}function zV(s){return zV[" "](s),s}zV[" "]=ye;var nM,s,k8=Wn("Opera"),xi=Wn("Trident")||Wn("MSIE"),np=Wn("Edge"),Coe=np||xi,il=Wn("Gecko")&&!(-1!=D0.toLowerCase().indexOf("webkit")&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),Co=-1!=D0.toLowerCase().indexOf("webkit")&&!Wn("Edge"),Doe=Co&&Wn("Mobile"),rp=Wn("Macintosh");function O8(){var s=M.document;return s?s.documentMode:void 0}e:{var qV="",KV=(s=D0,il?/rv:([^\);]+)(\)|;)/.exec(s):np?/Edge\/([\d\.]+)/.exec(s):xi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Co?/WebKit\/(\S+)/.exec(s):k8?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(KV&&(qV=KV?KV[1]:""),xi){var ZV=O8();if(null!=ZV&&ZV>parseFloat(qV)){nM=String(ZV);break e}}nM=qV}var Toe={};function Bm(s){return function Ioe(s,d){var m=Toe;return Object.prototype.hasOwnProperty.call(m,s)?m[s]:m[s]=d(s)}(s,function(){for(var d=0,m=Io(String(nM)).split("."),E=Io(String(s)).split("."),D=Math.max(m.length,E.length),x=0;0==d&&x<D;x++){var B=m[x]||"",ee=E[x]||"";do{if(B=/(\d*)(\D*)(.*)/.exec(B)||["","","",""],ee=/(\d*)(\D*)(.*)/.exec(ee)||["","","",""],0==B[0].length&&0==ee[0].length)break;d=w0(0==B[1].length?0:parseInt(B[1],10),0==ee[1].length?0:parseInt(ee[1],10))||w0(0==B[2].length,0==ee[2].length)||w0(B[2],ee[2]),B=B[3],ee=ee[3]}while(0==d)}return 0<=d})}var HC,P8=M.document;function T0(s,d){this.a=s===F8&&d||"",this.g=L8}HC=P8&&xi?O8()||("CSS1Compat"==P8.compatMode?parseInt(nM,10):5):void 0,T0.prototype.ma=!0,T0.prototype.ka=function(){return this.a},T0.prototype.toString=function(){return"Const{"+this.a+"}"};var L8={},F8={};function jm(){this.a="",this.h=U8}function V8(s){return s instanceof jm&&s.constructor===jm&&s.h===U8?s.a:(Zo("expected object of type TrustedResourceUrl, got '"+s+"' of type "+ht(s)),"type_error:TrustedResourceUrl")}jm.prototype.ma=!0,jm.prototype.ka=function(){return this.a.toString()},jm.prototype.g=function(){return 1},jm.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var U8={};function Ia(){this.a="",this.h=$8}function ip(s){return s instanceof Ia&&s.constructor===Ia&&s.h===$8?s.a:(Zo("expected object of type SafeUrl, got '"+s+"' of type "+ht(s)),"type_error:SafeUrl")}Ia.prototype.ma=!0,Ia.prototype.ka=function(){return this.a.toString()},Ia.prototype.g=function(){return 1},Ia.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var B8=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function rM(s){return s instanceof Ia?s:(s="object"==typeof s&&s.ma?s.ka():String(s),B8.test(s)||(s="about:invalid#zClosurez"),YV(s))}function j8(s){return s instanceof Ia?s:(s="object"==typeof s&&s.ma?s.ka():String(s),B8.test(s)||(s="about:invalid#zClosurez"),YV(s))}var $8={};function YV(s){var d=new Ia;return d.a=s,d}function S0(){this.a="",this.g=H8}YV("about:blank"),S0.prototype.ma=!0;var H8={};function sp(){this.a="",this.j=G8,this.h=null}function iM(s){return s instanceof sp&&s.constructor===sp&&s.j===G8?s.a:(Zo("expected object of type SafeHtml, got '"+s+"' of type "+ht(s)),"type_error:SafeHtml")}S0.prototype.ka=function(){return this.a},S0.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},sp.prototype.g=function(){return this.h},sp.prototype.ma=!0,sp.prototype.ka=function(){return this.a.toString()},sp.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var G8={};function GC(s,d){var m=new sp;return m.a=s,m.h=d,m}GC("<!DOCTYPE html>",0);var Aoe=GC("",0);GC("<br>",0);var m,d,xoe=(d=!1,function(){return d||(m=function(){if(typeof document>"u")return!1;var s=document.createElement("div"),d=document.createElement("div");return d.appendChild(document.createElement("div")),s.appendChild(d),!!s.firstChild&&(d=s.firstChild.firstChild,s.innerHTML=iM(Aoe),!d.parentElement)}(),d=!0),m});function A0(s,d){d=d instanceof Ia?d:j8(d),s.assign(ip(d))}function op(s,d){this.a=P(s)?s:0,this.g=P(d)?d:0}function QV(s,d){this.width=s,this.height=d}function sM(s){return s?new tU(WC(s)):km||(km=new tU)}function JV(s,d){var m=d||document;return m.querySelectorAll&&m.querySelector?m.querySelectorAll("."+s):W8(document,s,d)}function XV(s,d){var m=d||document;if(m.getElementsByClassName)s=m.getElementsByClassName(s)[0];else{m=document;var E=d||m;s=E.querySelectorAll&&E.querySelector&&s?E.querySelector(s?"."+s:""):W8(m,s,d)[0]||null}return s||null}function W8(s,d,m){var E;if((s=m||s).querySelectorAll&&s.querySelector&&d)return s.querySelectorAll(d?"."+d:"");if(d&&s.getElementsByClassName){var D=s.getElementsByClassName(d);return D}if(D=s.getElementsByTagName("*"),d){var x={};for(m=E=0;s=D[m];m++){var B=s.className;"function"==typeof B.split&&Hs(B.split(/\s+/),d)&&(x[E++]=s)}return x.length=E,x}return D}op.prototype.toString=function(){return"("+this.a+", "+this.g+")"},op.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},op.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},op.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(n=QV.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},n.aspectRatio=function(){return this.width/this.height},n.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},n.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},n.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var z8={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function oM(s){return s.scrollingElement?s.scrollingElement:(Co||"CSS1Compat"!=s.compatMode)&&s.body||s.documentElement}function $m(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function WC(s){return 9==s.nodeType?s:s.ownerDocument||s.document}function eU(s,d){if("textContent"in s)s.textContent=d;else if(3==s.nodeType)s.data=String(d);else if(s.firstChild&&3==s.firstChild.nodeType){for(;s.lastChild!=s.firstChild;)s.removeChild(s.lastChild);s.firstChild.data=String(d)}else{for(var m;m=s.firstChild;)s.removeChild(m);s.appendChild(WC(s).createTextNode(String(d)))}}function q8(s,d){return d?function Roe(s,d){for(;s;){if(d(s))return s;s=s.parentNode}return null}(s,function(m){return!d||$(m.className)&&Hs(m.className.split(/\s+/),d)}):null}function tU(s){this.a=s||M.document||document}tU.prototype.N=function(){return $(void 0)?this.a.getElementById(void 0):void 0};var aM={Fc:!0},K8={Hc:!0},koe={Ec:!0},Z8={Gc:!0};function ap(){throw Error("Do not instantiate directly")}function zC(s,d,m,E){if(s=s(d||Loe,void 0,m),E=(E||sM()).a.createElement("DIV"),(s=function Ooe(s){if(!yt(s))return fc(String(s));if(s instanceof ap){if(s.fa===aM)return s.content;if(s.fa===Z8)return fc(s.content)}return Zo("Soy template output is unsafe for use as HTML: "+s),"zSoyz"}(s)).match(Poe),s=GC(s,null),xoe())for(;E.lastChild;)E.removeChild(E.lastChild);return E.innerHTML=iM(s),1==E.childNodes.length&&1==(s=E.firstChild).nodeType&&(E=s),E}ap.prototype.va=null,ap.prototype.toString=function(){return this.content};var Poe=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,Loe={};function uM(){ap.call(this)}function fn(s){return null!=s&&s.fa===aM?s:s instanceof sp?Rt(iM(s).toString(),s.g()):Rt(fc(String(String(s))),function Foe(s){if(null!=s)switch(s.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(s))}function lM(){ap.call(this)}function cM(s,d){this.content=String(s),this.va=d??null}function or(s){return new cM(s,void 0)}Zt(uM,ap),uM.prototype.fa=aM,Zt(lM,ap),lM.prototype.fa=K8,lM.prototype.va=1,Zt(cM,ap),cM.prototype.fa=Z8;var Rt=function(s){function d(m){this.content=m}return d.prototype=s.prototype,function(m,E){return m=new d(String(m)),void 0!==E&&(m.va=E),m}}(uM),Voe=function(s){function d(m){this.content=m}return d.prototype=s.prototype,function(m){return new d(String(m))}}(lM);function Ni(s){return(s=String(s))?new cM(s,void 0):""}var Y8=function(s){function d(m){this.content=m}return d.prototype=s.prototype,function(m,E){return(m=String(m))?(m=new d(m),void 0!==E&&(m.va=E),m):""}}(uM);function Do(s){return null!=s&&s.fa===aM?String(String(s.content).replace(zoe,"").replace(qoe,"&lt;")).replace(Hoe,joe):fc(String(s))}function Hm(s){return null!=s&&s.fa===K8?s=String(s).replace(rU,nU):s instanceof Ia?s=String(ip(s).toString()).replace(rU,nU):(s=String(s),Woe.test(s)?s=s.replace(rU,nU):(Zo("Bad value `%s` for |filterNormalizeUri",[s]),s="#zSoyz")),s}function Q8(s){return null!=s&&s.fa===koe?s=s.content:null==s?s="":s instanceof S0?s instanceof S0&&s.constructor===S0&&s.g===H8?s=s.a:(Zo("expected object of type SafeStyle, got '"+s+"' of type "+ht(s)),s="type_error:SafeStyle"):(s=String(s),Goe.test(s)||(Zo("Bad value `%s` for |filterCssValue",[s]),s="zSoyz")),s}var Boe={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\x85":"&#133;","\xa0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function joe(s){return Boe[s]}var $oe={"\0":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};function nU(s){return $oe[s]}var Hoe=/[\x00\x22\x27\x3c\x3e]/g,rU=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Goe=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,Woe=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,zoe=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,qoe=/</g;function iU(){return or("Enter a valid phone number")}function J8(){return or("Unable to send password reset code to specified email")}function X8(){return or("Something went wrong. Please try again.")}function eW(){return or("This email already exists without any means of sign-in. Please reset the password to recover.")}function tW(s){var d="";switch((s=s||{}).code){case"invalid-argument":d+="Client specified an invalid argument.";break;case"invalid-configuration":d+="Client specified an invalid project configuration.";break;case"failed-precondition":d+="Request can not be executed in the current system state.";break;case"out-of-range":d+="Client specified an invalid range.";break;case"unauthenticated":d+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":d+="Client does not have sufficient permission.";break;case"not-found":d+="Specified resource is not found.";break;case"aborted":d+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":d+="The resource that a client tried to create already exists.";break;case"resource-exhausted":d+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":d+="Request cancelled by the client.";break;case"data-loss":d+="Unrecoverable data loss or data corruption.";break;case"unknown":d+="Unknown server error.";break;case"internal":d+="Internal server error.";break;case"not-implemented":d+="API method not implemented by the server.";break;case"unavailable":d+="Service unavailable.";break;case"deadline-exceeded":d+="Request deadline exceeded.";break;case"auth/user-disabled":d+="The user account has been disabled by an administrator.";break;case"auth/timeout":d+="The operation has timed out.";break;case"auth/too-many-requests":d+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":d+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":d+="A network error has occurred. Try again later.";break;case"restart-process":d+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":d+="No sign-in provider is available for the given email, please try with a different email."}return or(d)}function qC(s,d,m){var E=Error.call(this);this.message=E.message,"stack"in E&&(this.stack=E.stack),this.code=Koe+s,(s=d)||("firebaseui/merge-conflict"===(s="",this.code)?s+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.":s+=X8(),s=or(s).toString()),this.message=s||"",this.credential=m||null}p(qC,Error),qC.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Koe="firebaseui/";function Gm(){0!=sU&&(rW[this[hn]||(this[hn]=++Rr)]=this),this.T=this.T,this.C=this.C}var sU=0,rW={};function KC(s,d){s.T?P(void 0)?d.call(void 0):d():(s.C||(s.C=[]),s.C.push(P(void 0)?en(d,void 0):d))}function ZC(s){s&&"function"==typeof s.m&&s.m()}Gm.prototype.T=!1,Gm.prototype.m=function(){if(!this.T&&(this.T=!0,this.o(),0!=sU)){var s=this[hn]||(this[hn]=++Rr);if(0!=sU&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete rW[s]}},Gm.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Zoe=Object.freeze||function(s){return s},iW=!xi||9<=Number(HC),Yoe=xi&&!Bm("9"),Qoe=function(){if(!M.addEventListener||!Object.defineProperty)return!1;var s=!1,d=Object.defineProperty({},"passive",{get:function(){s=!0}});try{M.addEventListener("test",ye,d),M.removeEventListener("test",ye,d)}catch{}return s}();function jd(s,d){this.type=s,this.g=this.target=d,this.h=!1,this.qb=!0}function To(s,d){if(jd.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var m=this.type=s.type,E=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=d,d=s.relatedTarget){if(il){e:{try{zV(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else"mouseover"==m?d=s.fromElement:"mouseout"==m&&(d=s.toElement);this.relatedTarget=d,E?(this.clientX=void 0!==E.clientX?E.clientX:E.pageX,this.clientY=void 0!==E.clientY?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.keyCode=s.keyCode||0,this.key=s.key||"",this.j=s.charCode||("keypress"==m?s.keyCode:0),this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=$(s.pointerType)?s.pointerType:Joe[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}jd.prototype.stopPropagation=function(){this.h=!0},jd.prototype.preventDefault=function(){this.qb=!1},Zt(To,jd);var Joe=Zoe({2:"touch",3:"pen",4:"mouse"});To.prototype.stopPropagation=function(){To.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},To.prototype.preventDefault=function(){To.K.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,Yoe)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}};var YC="closure_listenable_"+(1e6*Math.random()|0),Xoe=0;function eae(s,d,m,E,D){this.listener=s,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.La=D,this.key=++Xoe,this.sa=this.Ia=!1}function dM(s){s.sa=!0,s.listener=null,s.proxy=null,s.src=null,s.La=null}function hM(s){this.src=s,this.a={},this.g=0}function oU(s,d){var m=d.type;m in s.a&&hc(s.a[m],d)&&(dM(d),0==s.a[m].length&&(delete s.a[m],s.g--))}function aU(s,d,m,E){for(var D=0;D<s.length;++D){var x=s[D];if(!x.sa&&x.listener==d&&x.capture==!!m&&x.La==E)return D}return-1}hM.prototype.add=function(s,d,m,E,D){var x=s.toString();(s=this.a[x])||(s=this.a[x]=[],this.g++);var B=aU(s,d,E,D);return-1<B?(d=s[B],m||(d.Ia=!1)):((d=new eae(d,this.src,x,!!E,D)).Ia=m,s.push(d)),d};var uU="closure_lm_"+(1e6*Math.random()|0),lU={};function sl(s,d,m,E,D){if(E&&E.once)return QC(s,d,m,E,D);if(Et(d)){for(var x=0;x<d.length;x++)sl(s,d[x],m,E,D);return null}return m=dU(m),s&&s[YC]?s.J.add(String(d),m,!1,yt(E)?!!E.capture:!!E,D):oW(s,d,m,!1,E,D)}function oW(s,d,m,E,D,x){if(!d)throw Error("Invalid event type");var B=yt(D)?!!D.capture:!!D,ee=fM(s);if(ee||(s[uU]=ee=new hM(s)),(m=ee.add(d,m,E,B,x)).proxy)return m;if(E=function tae(){var s=nae,d=iW?function(m){return s.call(d.src,d.listener,m)}:function(m){if(!(m=s.call(d.src,d.listener,m)))return m};return d}(),m.proxy=E,E.src=s,E.listener=m,s.addEventListener)Qoe||(D=B),void 0===D&&(D=!1),s.addEventListener(d.toString(),E,D);else if(s.attachEvent)s.attachEvent(aW(d.toString()),E);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(E)}return m}function QC(s,d,m,E,D){if(Et(d)){for(var x=0;x<d.length;x++)QC(s,d[x],m,E,D);return null}return m=dU(m),s&&s[YC]?s.J.add(String(d),m,!0,yt(E)?!!E.capture:!!E,D):oW(s,d,m,!0,E,D)}function Wm(s,d,m,E,D){if(Et(d))for(var x=0;x<d.length;x++)Wm(s,d[x],m,E,D);else E=yt(E)?!!E.capture:!!E,m=dU(m),s&&s[YC]?(s=s.J,(d=String(d).toString())in s.a&&-1<(m=aU(x=s.a[d],m,E,D))&&(dM(x[m]),Xf(x,m),0==x.length&&(delete s.a[d],s.g--))):s&&(s=fM(s))&&(d=s.a[d.toString()],s=-1,d&&(s=aU(d,m,E,D)),(m=-1<s?d[s]:null)&&up(m))}function up(s){if("number"!=typeof s&&s&&!s.sa){var d=s.src;if(d&&d[YC])oU(d.J,s);else{var m=s.type,E=s.proxy;d.removeEventListener?d.removeEventListener(m,E,s.capture):d.detachEvent?d.detachEvent(aW(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=fM(d))?(oU(m,s),0==m.g&&(m.src=null,d[uU]=null)):dM(s)}}}function aW(s){return s in lU?lU[s]:lU[s]="on"+s}function uW(s,d,m,E){var D=!0;if((s=fM(s))&&(d=s.a[d.toString()]))for(d=d.concat(),s=0;s<d.length;s++){var x=d[s];x&&x.capture==m&&!x.sa&&(x=lW(x,E),D=D&&!1!==x)}return D}function lW(s,d){var m=s.listener,E=s.La||s.src;return s.Ia&&up(s),m.call(E,d)}function nae(s,d){if(s.sa)return!0;if(!iW){if(!d)e:{d=["window","event"];for(var m=M,E=0;E<d.length;E++)if(null==(m=m[d[E]])){d=null;break e}d=m}if(d=new To(E=d,this),m=!0,!(0>E.keyCode||null!=E.returnValue)){e:{var D=!1;if(0==E.keyCode)try{E.keyCode=-1;break e}catch{D=!0}(D||null==E.returnValue)&&(E.returnValue=!0)}for(E=[],D=d.g;D;D=D.parentNode)E.push(D);for(s=s.type,D=E.length-1;!d.h&&0<=D;D--){d.g=E[D];var x=uW(E[D],s,!0,d);m=m&&x}for(D=0;!d.h&&D<E.length;D++)d.g=E[D],x=uW(E[D],s,!1,d),m=m&&x}return m}return lW(s,new To(d,this))}function fM(s){return(s=s[uU])instanceof hM?s:null}var cU="__closure_events_fn_"+(1e9*Math.random()>>>0);function dU(s){return pt(s)?s:(s[cU]||(s[cU]=function(d){return s.handleEvent(d)}),s[cU])}function ts(){Gm.call(this),this.J=new hM(this),this.wb=this,this.Ha=null}function lp(s,d){var m,E=s.Ha;if(E)for(m=[];E;E=E.Ha)m.push(E);if(s=s.wb,E=d.type||d,$(d))d=new jd(d,s);else if(d instanceof jd)d.target=d.target||s;else{var D=d;Pm(d=new jd(E,s),D)}if(D=!0,m)for(var x=m.length-1;!d.h&&0<=x;x--){var B=d.g=m[x];D=pM(B,E,!0,d)&&D}if(d.h||(D=pM(B=d.g=s,E,!0,d)&&D,d.h||(D=pM(B,E,!1,d)&&D)),m)for(x=0;!d.h&&x<m.length;x++)D=pM(B=d.g=m[x],E,!1,d)&&D;return D}function pM(s,d,m,E){if(!(d=s.J.a[String(d)]))return!0;d=d.concat();for(var D=!0,x=0;x<d.length;++x){var B=d[x];if(B&&!B.sa&&B.capture==m){var ee=B.listener,Le=B.La||B.src;B.Ia&&oU(s.J,B),D=!1!==ee.call(Le,E)&&D}}return D&&0!=E.qb}Zt(ts,Gm),ts.prototype[YC]=!0,ts.prototype.Za=function(s){this.Ha=s},ts.prototype.removeEventListener=function(s,d,m,E){Wm(this,s,d,m,E)},ts.prototype.o=function(){if(ts.K.o.call(this),this.J){var m,s=this.J;for(m in s.a){for(var E=s.a[m],D=0;D<E.length;D++)dM(E[D]);delete s.a[m],s.g--}}this.Ha=null};var Ca={},cW=0;function dW(s,d){if(!s)throw Error("Event target element must be provided!");if(s=hU(s),Ca[s]&&Ca[s].length)for(var m=0;m<Ca[s].length;m++)lp(Ca[s][m],d)}function hU(s){return typeof s.a>"u"&&(s.a=cW,cW++),s.a}function gM(s){if(!s)throw Error("Event target element must be provided!");ts.call(this),this.a=s}function hW(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function fU(s,d){this.h=s,this.j=d,this.g=0,this.a=null}function fW(s,d){s.j(d),100>s.g&&(s.g++,d.next=s.a,s.a=d)}function pW(){this.g=this.a=null}p(gM,ts),gM.prototype.N=function(){return this.a},gM.prototype.register=function(){var s=hU(this.N());Ca[s]?Hs(Ca[s],this)||Ca[s].push(this):Ca[s]=[this]},fU.prototype.get=function(){if(0<this.g){this.g--;var s=this.a;this.a=s.next,s.next=null}else s=this.h();return s};var gU,mM,gW=new fU(function(){return new pU},function(s){s.reset()});function iae(){var s=_W,d=null;return s.a&&(d=s.a,s.a=s.a.next,s.a||(s.g=null),d.next=null),d}function pU(){this.next=this.g=this.a=null}function mW(s){M.setTimeout(function(){throw s},0)}function mU(s,d){mM||function oae(){if(M.Promise&&M.Promise.resolve){var s=M.Promise.resolve(void 0);mM=function(){s.then(yW)}}else mM=function(){var d=yW;!pt(M.setImmediate)||M.Window&&M.Window.prototype&&!Wn("Edge")&&M.Window.prototype.setImmediate==M.setImmediate?(gU||(gU=function sae(){var s=M.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Wn("Presto")&&(s=function(){var D=document.createElement("IFRAME");D.style.display="none",D.src="",document.documentElement.appendChild(D);var x=D.contentWindow;(D=x.document).open(),D.write(""),D.close();var B="callImmediate"+Math.random(),ee="file:"==x.location.protocol?"*":x.location.protocol+"//"+x.location.host;D=en(function(Le){("*"==ee||Le.origin==ee)&&Le.data==B&&this.port1.onmessage()},this),x.addEventListener("message",D,!1),this.port1={},this.port2={postMessage:function(){x.postMessage(B,ee)}}}),typeof s<"u"&&!Wn("Trident")&&!Wn("MSIE")){var d=new s,m={},E=m;return d.port1.onmessage=function(){if(P(m.next)){var D=(m=m.next).gb;m.gb=null,D()}},function(D){E.next={gb:D},E=E.next,d.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(D){var x=document.createElement("SCRIPT");x.onreadystatechange=function(){x.onreadystatechange=null,x.parentNode.removeChild(x),x=null,D(),D=null},document.documentElement.appendChild(x)}:function(D){M.setTimeout(D,0)}}()),gU(d)):M.setImmediate(d)}}(),_U||(mM(),_U=!0),_W.add(s,d)}pW.prototype.add=function(s,d){var m=gW.get();m.set(s,d),this.g?this.g.next=m:this.a=m,this.g=m},pU.prototype.set=function(s,d){this.a=s,this.g=d,this.next=null},pU.prototype.reset=function(){this.next=this.g=this.a=null};var _U=!1,_W=new pW;function yW(){for(var s;s=iae();){try{s.a.call(s.g)}catch(d){mW(d)}fW(gW,s)}_U=!1}function ns(s){if(this.a=zm,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,s!=ye)try{var d=this;s.call(void 0,function(m){qm(d,JC,m)},function(m){if(!(m instanceof N0))try{throw m instanceof Error?m:Error("Promise rejected.")}catch{}qm(d,$d,m)})}catch(m){qm(this,$d,m)}}var zm=0,JC=2,$d=3;function vW(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}vW.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var EW=new fU(function(){return new vW},function(s){s.reset()});function yU(s,d,m){var E=EW.get();return E.s=s,E.g=d,E.j=m,E}function Mi(s){if(s instanceof ns)return s;var d=new ns(ye);return qm(d,JC,s),d}function x0(s){return new ns(function(d,m){m(s)})}function wW(s,d){if(s.a==zm)if(s.h){var m=s.h;if(m.g){for(var E=0,D=null,x=null,B=m.g;B&&(B.h||(E++,B.a==s&&(D=B),!(D&&1<E)));B=B.next)D||(x=B);D&&(m.a==zm&&1==E?wW(m,d):(x?((E=x).next==m.j&&(m.j=E),E.next=E.next.next):CW(m),DW(m,D,$d,d)))}s.h=null}else qm(s,$d,d)}function vU(s,d){s.g||s.a!=JC&&s.a!=$d||IW(s),s.j?s.j.next=d:s.g=d,s.j=d}function bW(s,d,m,E){var D=yU(null,null,null);return D.a=new ns(function(x,B){D.s=d?function(ee){try{var Le=d.call(E,ee);x(Le)}catch(dt){B(dt)}}:x,D.g=m?function(ee){try{var Le=m.call(E,ee);!P(Le)&&ee instanceof N0?B(ee):x(Le)}catch(dt){B(dt)}}:B}),D.a.h=s,vU(s,D),D.a}function qm(s,d,m){if(s.a==zm){s===m&&(d=$d,m=new TypeError("Promise cannot resolve to itself")),s.a=1;e:{var E=m,D=s.hc,x=s.ic;if(E instanceof ns){vU(E,yU(D||ye,x||null,s));var B=!0}else if(hW(E))E.then(D,x,s),B=!0;else{if(yt(E))try{var ee=E.then;if(pt(ee)){(function aae(s,d,m,E,D){function x(Le){ee||(ee=!0,E.call(D,Le))}var ee=!1;try{d.call(s,function B(Le){ee||(ee=!0,m.call(D,Le))},x)}catch(Le){x(Le)}})(E,ee,D,x,s),B=!0;break e}}catch(Le){x.call(s,Le),B=!0;break e}B=!1}}B||(s.A=m,s.a=d,s.h=null,IW(s),d!=$d||m instanceof N0||function uae(s,d){s.s=!0,mU(function(){s.s&&SW.call(null,d)})}(s,m))}}function IW(s){s.i||(s.i=!0,mU(s.Hb,s))}function CW(s){var d=null;return s.g&&(s.g=(d=s.g).next,d.next=null),s.g||(s.j=null),d}function DW(s,d,m,E){if(m==$d&&d.g&&!d.h)for(;s&&s.s;s=s.h)s.s=!1;if(d.a)d.a.h=null,TW(d,m,E);else try{d.h?d.s.call(d.j):TW(d,m,E)}catch(D){SW.call(null,D)}fW(EW,d)}function TW(s,d,m){d==JC?s.s.call(s.j,m):s.g&&s.g.call(s.j,m)}ns.prototype.then=function(s,d,m){return bW(this,pt(s)?s:null,pt(d)?d:null,m)},ns.prototype.$goog_Thenable=!0,(n=ns.prototype).fc=function(s,d){return(s=yU(s,s,d)).h=!0,vU(this,s),this},n.Ca=function(s,d){return bW(this,null,s,d)},n.cancel=function(s){this.a==zm&&mU(function(){wW(this,new N0(s))},this)},n.hc=function(s){this.a=zm,qm(this,JC,s)},n.ic=function(s){this.a=zm,qm(this,$d,s)},n.Hb=function(){for(var s;s=CW(this);)DW(this,s,this.a,this.A);this.i=!1};var SW=mW;function N0(s){ti.call(this,s)}function AW(s,d,m){d||(d={}),m=m||window;var E=s instanceof Ia?s:rM(typeof s.href<"u"?s.href:String(s));s=d.target||s.target;var D=[];for(x in d)switch(x){case"width":case"height":case"top":case"left":D.push(x+"="+d[x]);break;case"target":case"noopener":case"noreferrer":break;default:D.push(x+"="+(d[x]?1:0))}var x=D.join(",");return(Wn("iPhone")&&!Wn("iPod")&&!Wn("iPad")||Wn("iPad")||Wn("iPod"))&&m.navigator&&m.navigator.standalone&&s&&"_self"!=s?(x=m.document.createElement("A"),E=E instanceof Ia?E:j8(E),x.href=ip(E),x.setAttribute("target",s),d.noreferrer&&x.setAttribute("rel","noreferrer"),(d=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,m,1),x.dispatchEvent(d),m={}):d.noreferrer?(m=m.open("",s,x),d=ip(E).toString(),m&&(Coe&&-1!=d.indexOf(";")&&(d="'"+d.replace(/'/g,"%27")+"'"),m.opener=null,d=GC('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+fc(d)+'">',null),m.document.write(iM(d)),m.document.close())):(m=m.open(ip(E).toString(),s,x))&&d.noopener&&(m.opener=null),m}function xW(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function M0(s){AW(s,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function _M(s,d){if(null==(s=yt(s)&&1==s.nodeType?s:document.querySelector(String(s))))throw Error(d||"Cannot find element.");return s}function Hd(){return window.location.href}function cp(s){var d=pae;this.s=[],this.T=d,this.O=s||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function XC(s,d,m){s.a=!0,s.h=m,s.j=!d,RW(s)}function yM(s){if(s.a){if(!s.J)throw new vM(s);s.J=!1}}function NW(s,d,m){s.s.push([d,m,void 0]),s.a&&RW(s)}function MW(s){return Om(s.s,function(d){return pt(d[1])})}function RW(s){if(s.i&&s.a&&MW(s)){var d=s.i,m=EM[d];m&&(M.clearTimeout(m.a),delete EM[d]),s.i=0}s.g&&(s.g.C--,delete s.g),d=s.h;for(var E=m=!1;s.s.length&&!s.A;){var D=s.s.shift(),x=D[0],B=D[1];if(D=D[2],x=s.j?B:x)try{var ee=x.call(D||s.O,d);P(ee)&&(s.j=s.j&&(ee==d||ee instanceof Error),s.h=d=ee),(hW(d)||"function"==typeof M.Promise&&d instanceof M.Promise)&&(E=!0,s.A=!0)}catch(Le){d=Le,s.j=!0,MW(s)||(m=!0)}}s.h=d,E&&(ee=en(s.L,s,!0),E=en(s.L,s,!1),d instanceof cp?(NW(d,ee,E),d.l=!0):d.then(ee,E)),m&&(d=new kW(d),EM[d.a]=d,s.i=d.a)}function vM(){ti.call(this)}function eD(){ti.call(this)}function kW(s){this.a=M.setTimeout(en(this.h,this),0),this.g=s}Zt(N0,ti),N0.prototype.name="cancel",cp.prototype.cancel=function(s){if(this.a)this.h instanceof cp&&this.h.cancel();else{if(this.g){var d=this.g;delete this.g,s?d.cancel(s):(d.C--,0>=d.C&&d.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(s=new eD(this),yM(this),XC(this,!1,s))}},cp.prototype.L=function(s,d){this.A=!1,XC(this,s,d)},cp.prototype.callback=function(s){yM(this),XC(this,!0,s)},cp.prototype.then=function(s,d,m){var E,D,x=new ns(function(B,ee){E=B,D=ee});return NW(this,E,function(B){B instanceof eD?x.cancel():D(B)}),x.then(s,d,m)},cp.prototype.$goog_Thenable=!0,Zt(vM,ti),vM.prototype.message="Deferred has already fired",vM.prototype.name="AlreadyCalledError",Zt(eD,ti),eD.prototype.message="Deferred was canceled",eD.prototype.name="CanceledError",kW.prototype.h=function(){throw delete EM[this.a],this.g};var EM={};function pae(){if(this&&this.rb){var s=this.rb;s&&"SCRIPT"==s.tagName&&wM(s,!0,this.sb)}}function wM(s,d,m){null!=m&&M.clearTimeout(m),s.onload=ye,s.onerror=ye,s.onreadystatechange=ye,d&&window.setTimeout(function(){$m(s)},0)}var gae=0,mae=1;function EU(s,d){var m="Jsloader error (code #"+s+")";d&&(m+=": "+d),ti.call(this,m),this.code=s}function tD(){return M.google&&M.google.accounts&&M.google.accounts.id||null}function wU(s){this.a=s||tD(),this.h=!1,this.g=null}function OW(s,d,m){return s.a&&d?(s.h=!0,new ns(function(D){s.g=D,s.a.initialize({client_id:d,callback:D,auto_select:!m}),s.a.prompt()})):Mi(d?bU.Xa().load().then(function(){return s.a=tD(),OW(s,d,m)}).Ca(function(){return null}):null)}Zt(EU,ti),wU.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},ct(wU);var _ae=new T0(F8,"https://accounts.google.com/gsi/client");function bU(){this.a=null}function IU(s,d){this.a=s,this.g=d||function(m){throw m}}function CU(s,d,m){this.reset(s,d,m,void 0,void 0)}function DU(s){this.s=s,this.a=this.h=this.j=this.g=null}function bM(s,d){this.name=s,this.value=d}bU.prototype.load=function(){var s=this;if(this.a)return this.a;var d=function Soe(){var s=_ae;s instanceof T0&&s.constructor===T0&&s.g===L8?s=s.a:(Zo("expected object of type Const, got '"+s+"'"),s="type_error:Const");var d=new jm;return d.a=s,d}();return tD()?Mi():this.a=function lae(){var s=null;return new ns(function(d){"complete"==M.document.readyState?d():(s=function(){d()},QC(window,"load",s))}).Ca(function(d){throw Wm(window,"load",s),d})}().then(function(){if(!tD())return new ns(function(m,E){var D=setTimeout(function(){s.a=null,E(Error("Network error!"))},1e4);M.onGoogleLibraryLoad=function(){clearTimeout(D),m()},Mi(function hae(s){var d={},m=d.document||document,E=V8(s).toString(),D=document.createElement("SCRIPT"),x={rb:D,sb:void 0},B=new cp(x),ee=null,Le=null!=d.timeout?d.timeout:5e3;return 0<Le&&(ee=window.setTimeout(function(){wM(D,!0);var dt=new EU(mae,"Timeout reached for loading script "+E);yM(B),XC(B,!1,dt)},Le),x.sb=ee),D.onload=D.onreadystatechange=function(){D.readyState&&"loaded"!=D.readyState&&"complete"!=D.readyState||(wM(D,d.xc||!1,ee),B.callback(null))},D.onerror=function(){wM(D,!0,ee);var dt=new EU(gae,"Error while loading script "+E);yM(B),XC(B,!1,dt)},Pm(x=d.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function Moe(s,d){VC(d,function(m,E){m&&"object"==typeof m&&m.ma&&(m=m.ka()),"style"==E?s.style.cssText=m:"class"==E?s.className=m:"for"==E?s.htmlFor=m:z8.hasOwnProperty(E)?s.setAttribute(z8[E],m):0==E.lastIndexOf("aria-",0)||0==E.lastIndexOf("data-",0)?s.setAttribute(E,m):s[E]=m})}(D,x),function Noe(s,d){s.src=V8(d),null===le&&(le=(d=(d=M.document).querySelector&&d.querySelector("script[nonce]"))&&(d=d.nonce||d.getAttribute("nonce"))&&Q.test(d)?d:""),(d=le)&&s.setAttribute("nonce",d)}(D,s),function fae(s){var d=(s||document).getElementsByTagName("HEAD");return d&&0!=d.length?d[0]:s.documentElement}(m).appendChild(D),B}(d)).then(function(){tD()&&m()}).Ca(function(x){clearTimeout(D),s.a=null,E(x)})})})},ct(bU),IU.prototype.confirm=function(s){return Mi(this.a.confirm(s)).Ca(this.g)},CU.prototype.a=null,CU.prototype.reset=function(s,d,m,E,D){this.h=E||bo(),this.j=s,this.s=d,this.g=m,delete this.a},bM.prototype.toString=function(){return this.name};var PW=new bM("SEVERE",1e3),LW=new bM("WARNING",900),FW=new bM("CONFIG",700);function VW(s){return s.j?s.j:s.g?VW(s.g):(Zo("Root logger has no level set."),null)}DU.prototype.log=function(s,d,m){if(s.value>=VW(this).value)for(pt(d)&&(d=d()),s=new CU(s,String(d),this.s),m&&(s.a=m),m=this;m;){var E=m,D=s;if(E.a)for(var x=0;d=E.a[x];x++)d(D);m=m.g}};var TU={},nD=null;function UW(){nD||(nD=new DU(""),TU[""]=nD,nD.j=FW)}function IM(){this.a=bo()}var SU=null;function rD(s){this.j=s||"",SU||(SU=new IM),this.s=SU}function Km(s){return 10>s?"0"+s:String(s)}function jW(s){rD.call(this,s)}function $W(){this.s=en(this.h,this),this.a=new jW,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}IM.prototype.set=function(s){this.a=s},IM.prototype.reset=function(){this.set(bo())},IM.prototype.get=function(){return this.a},rD.prototype.a=!0,rD.prototype.g=!0,rD.prototype.h=!1,Zt(jW,rD),$W.prototype.h=function(s){if(!this.j[s.g]){var m=function Eae(s,d){var m=[];if(m.push(s.j," "),s.g){var E=new Date(d.h);m.push("[",Km(E.getFullYear()-2e3)+Km(E.getMonth()+1)+Km(E.getDate())+" "+Km(E.getHours())+":"+Km(E.getMinutes())+":"+Km(E.getSeconds())+"."+Km(Math.floor(E.getMilliseconds()/10)),"] ")}return m.push("[",function vae(s,d){d=(s=(s.h-d)/1e3).toFixed(3);var m=0;if(1>s)m=2;else for(;100>s;)m++,s*=10;for(;0<m--;)d=" "+d;return d}(d,s.s.get()),"s] "),m.push("[",d.g,"] "),m.push(d.s),s.h&&(d=d.a)&&m.push("\n",d instanceof Error?d.message:d.toString()),s.a&&m.push("\n"),m.join("")}(this.a,s);wae&&function bae(s,d,m,E){s[d]?s[d](m,E||""):s.log(m,E||"")}(wae,function d(x){if(x){if(x.value>=PW.value)return"error";if(x.value>=LW.value)return"warn";if(x.value>=FW.value)return"log"}return"debug"}(s.j),m,s.a)}};var AU,wae=M.console;function Da(s,d){AU&&AU.log(PW,s,d)}AU=function BW(s){var d;if(UW(),!(d=TU[s])){d=new DU(s);var m=s.lastIndexOf("."),E=s.substr(m+1);(m=BW(s.substr(0,m))).h||(m.h={}),m.h[E]=d,d.g=m,TU[s]=d}return d}("firebaseui");var xU=new $W;if(1!=xU.g){var CM;UW();var Iae=xU.s;(CM=nD).a||(CM.a=[]),CM.a.push(Iae),xU.g=!0}function dp(s){AU&&AU.log(LW,s,void 0)}function HW(){this.a=(typeof document>"u"?null:document)||{cookie:""}}function NU(s){s=(s.a.cookie||"").split(";");for(var E,D,d=[],m=[],x=0;x<s.length;x++)-1==(E=(D=Io(s[x])).indexOf("="))?(d.push(""),m.push(D)):(d.push(D.substring(0,E)),m.push(D.substring(E+1)));return{keys:d,values:m}}(n=HW.prototype).set=function(s,d,m,E,D,x){if(/[;=\s]/.test(s))throw Error('Invalid cookie name "'+s+'"');if(/[;\r\n]/.test(d))throw Error('Invalid cookie value "'+d+'"');P(m)||(m=-1),D=D?";domain="+D:"",E=E?";path="+E:"",x=x?";secure":"",m=0>m?"":0==m?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(bo()+1e3*m).toUTCString(),this.a.cookie=s+"="+d+D+E+m+x},n.get=function(s,d){for(var x,m=s+"=",E=(this.a.cookie||"").split(";"),D=0;D<E.length;D++){if(0==(x=Io(E[D])).lastIndexOf(m,0))return x.substr(m.length);if(x==s)return""}return d},n.ja=function(){return NU(this).keys},n.la=function(){return NU(this).values},n.clear=function(){for(var s=NU(this).keys,d=s.length-1;0<=d;d--){var m=s[d];this.get(m),this.set(m,"",0,void 0,void 0)}};var DM=new HW;function GW(){}function R0(s,d,m,E){this.h=typeof s<"u"&&null!==s?s:-1,this.g=d||null,this.a=m||null,this.j=!!E}function MU(s,d){this.g=s,this.a=d||null}function WW(s){return{email:s.g,credential:s.a&&s.a.toJSON()}}function zW(s){if(s&&s.email){var d=s.credential&&jt.Z.auth.AuthCredential.fromJSON(s.credential);return new MU(s.email,d)}return null}function qW(s){this.a=s||null}function KW(s){for(var d=[],m=0,E=0;E<s.length;E++){var D=s.charCodeAt(E);255<D&&(d[m++]=255&D,D>>=8),d[m++]=D}return d}function Cae(s){return dc(s,function(d){return 1<(d=d.toString(16)).length?d:"0"+d}).join("")}function TM(s){for(this.i=s,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(k0*(this.j+1)),s=0;s<this.g;s++)this.a[s]=[this.i[4*s],this.i[4*s+1],this.i[4*s+2],this.i[4*s+3]];var d=Array(4);for(s=this.g;s<k0*(this.j+1);s++){if(d[0]=this.a[s-1][0],d[1]=this.a[s-1][1],d[2]=this.a[s-1][2],d[3]=this.a[s-1][3],s%this.g==0){var m=d,E=m[0];m[0]=m[1],m[1]=m[2],m[2]=m[3],m[3]=E,XW(d),d[0]^=AM[s/this.g][0],d[1]^=AM[s/this.g][1],d[2]^=AM[s/this.g][2],d[3]^=AM[s/this.g][3]}else 6<this.g&&s%this.g==4&&XW(d);this.a[s]=Array(4),this.a[s][0]=this.a[s-this.g][0]^d[0],this.a[s][1]=this.a[s-this.g][1]^d[1],this.a[s][2]=this.a[s-this.g][2]^d[2],this.a[s][3]=this.a[s-this.g][3]^d[3]}}p(R0,GW),R0.prototype.set=function(s,d){DM.set(s,d,this.h,this.g,this.a,this.j)},R0.prototype.get=function(s){return DM.get(s)||null},R0.prototype.ra=function(s){var d=this.g,m=this.a;DM.get(s),DM.set(s,"",0,d,m)};var k0=(TM.prototype.A=16)/4;function ZW(s,d){for(var E=0;E<k0;E++)for(var D=0;4>D;D++)s.h[E][D]=d[4*D+E]}function YW(s){for(var d=[],m=0;m<k0;m++)for(var E=0;4>E;E++)d[4*E+m]=s.h[m][E];return d}function O0(s,d){for(var m=0;4>m;m++)for(var E=0;4>E;E++)s.h[m][E]^=s.a[4*d+E][m]}function SM(s,d){for(var m=0;4>m;m++)for(var E=0;4>E;E++)s.h[m][E]=d[s.h[m][E]]}function QW(s){for(var d=1;4>d;d++)for(var m=0;4>m;m++)s.s[d][m]=s.h[d][m];for(d=1;4>d;d++)for(m=0;4>m;m++)s.h[d][m]=s.s[d][(m+d)%k0]}function JW(s){for(var d=1;4>d;d++)for(var m=0;4>m;m++)s.s[d][(m+d)%k0]=s.h[d][m];for(d=1;4>d;d++)for(m=0;4>m;m++)s.h[d][m]=s.s[d][m]}function XW(s){s[0]=P0[s[0]],s[1]=P0[s[1]],s[2]=P0[s[2]],s[3]=P0[s[3]]}var P0=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ez=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],AM=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],xM=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],NM=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],MM=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],RM=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],kM=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],OM=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function tz(s,d){s=new TM(rz(s));for(var D,m=(d=KW(d)).splice(0,16),E="";m.length;){D=16-m.length;for(var x=0;x<D;x++)m.push(0);for(ZW(D=s,m),O0(D,0),m=1;m<D.j;++m){SM(D,P0),QW(D),x=D.h;for(var B=D.s[0],ee=0;4>ee;ee++)B[0]=x[0][ee],B[1]=x[1][ee],B[2]=x[2][ee],B[3]=x[3][ee],x[0][ee]=xM[B[0]]^NM[B[1]]^B[2]^B[3],x[1][ee]=B[0]^xM[B[1]]^NM[B[2]]^B[3],x[2][ee]=B[0]^B[1]^xM[B[2]]^NM[B[3]],x[3][ee]=NM[B[0]]^B[1]^B[2]^xM[B[3]];O0(D,m)}SM(D,P0),QW(D),O0(D,D.j),E+=Cae(YW(D)),m=d.splice(0,16)}return E}function nz(s,d){s=new TM(rz(s));for(var m=[],E=0;E<d.length;E+=2)m.push(parseInt(d.substring(E,E+2),16));var D=m.splice(0,16);for(d="";D.length;){for(ZW(E=s,D),O0(E,E.j),D=1;D<E.j;++D){JW(E),SM(E,ez),O0(E,E.j-D);for(var x=E.h,B=E.s[0],ee=0;4>ee;ee++)B[0]=x[0][ee],B[1]=x[1][ee],B[2]=x[2][ee],B[3]=x[3][ee],x[0][ee]=OM[B[0]]^RM[B[1]]^kM[B[2]]^MM[B[3]],x[1][ee]=MM[B[0]]^OM[B[1]]^RM[B[2]]^kM[B[3]],x[2][ee]=kM[B[0]]^MM[B[1]]^OM[B[2]]^RM[B[3]],x[3][ee]=RM[B[0]]^kM[B[1]]^MM[B[2]]^OM[B[3]]}if(JW(E),SM(E,ez),O0(E,0),8192>=(E=YW(E)).length)E=String.fromCharCode.apply(null,E);else{for(D="",x=0;x<E.length;x+=8192)D+=String.fromCharCode.apply(null,UV(E,x,x+8192));E=D}d+=E,D=m.splice(0,16)}return d.replace(/(\x00)+$/,"")}function rz(s){for(var d=32-(s=KW(s.substring(0,32))).length,m=0;m<d;m++)s.push(0);return s}function iz(s){var d=[];return RU(new Dae,s,d),d.join("")}function Dae(){}function RU(s,d,m){if(null==d)m.push("null");else{if("object"==typeof d){if(Et(d)){var E=d;d=E.length,m.push("[");for(var D="",x=0;x<d;x++)m.push(D),RU(s,E[x],m),D=",";return void m.push("]")}if(!(d instanceof String||d instanceof Number||d instanceof Boolean)){for(E in m.push("{"),D="",d)Object.prototype.hasOwnProperty.call(d,E)&&"function"!=typeof(x=d[E])&&(m.push(D),oz(E,m),m.push(":"),RU(s,x,m),D=",");return void m.push("}")}d=d.valueOf()}switch(typeof d){case"string":oz(d,m);break;case"number":m.push(isFinite(d)&&!isNaN(d)?String(d):"null");break;case"boolean":m.push(String(d));break;case"function":m.push("null");break;default:throw Error("Unknown type: "+typeof d)}}}var sz={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Tae=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function oz(s,d){d.push('"',s.replace(Tae,function(m){var E=sz[m];return E||(E="\\u"+(65536|m.charCodeAt(0)).toString(16).substr(1),sz[m]=E),E}),'"')}function iD(s){this.a=s}function PM(){}function LM(s){this.a=s}function FM(s){if(!s.a)return!1;try{return s.a.setItem("__sak","1"),s.a.removeItem("__sak"),!0}catch{return!1}}function kU(){var s=null;try{s=window.localStorage||null}catch{}this.a=s}function OU(){var s=null;try{s=window.sessionStorage||null}catch{}this.a=s}function L0(s,d){this.g=s,this.a=d+"::"}iD.prototype.set=function(s,d){P(d)?this.a.set(s,iz(d)):this.a.ra(s)},iD.prototype.get=function(s){try{var d=this.a.get(s)}catch{return}if(null!==d)try{return JSON.parse(d)}catch{throw"Storage: Invalid value was encountered"}},Zt(PM,GW),PM.prototype.clear=function(){var s=function doe(s){if(_t(s))return FC(s);s=b8(s);var d=[];return function coe(s,d){if(_t(s))try{rl(s,d,void 0)}catch(m){if(m!==I0)throw m}else{s=b8(s);try{for(;;)d.call(void 0,s.next(),void 0,s)}catch(m){if(m!==I0)throw m}}}(s,function(m){d.push(m)}),d}(this.ha(!0)),d=this;rl(s,function(m){d.ra(m)})},Zt(LM,PM),(n=LM.prototype).set=function(s,d){try{this.a.setItem(s,d)}catch{throw 0==this.a.length?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},n.get=function(s){if(!$(s=this.a.getItem(s))&&null!==s)throw"Storage mechanism: Invalid value was encountered";return s},n.ra=function(s){this.a.removeItem(s)},n.ha=function(s){var d=0,m=this.a,E=new Lm;return E.next=function(){if(d>=m.length)throw I0;var D=m.key(d++);if(s)return D;if(!$(D=m.getItem(D)))throw"Storage mechanism: Invalid value was encountered";return D},E},n.clear=function(){this.a.clear()},n.key=function(s){return this.a.key(s)},Zt(kU,LM),Zt(OU,LM),Zt(L0,PM),L0.prototype.set=function(s,d){this.g.set(this.a+s,d)},L0.prototype.get=function(s){return this.g.get(this.a+s)},L0.prototype.ra=function(s){this.g.ra(this.a+s)},L0.prototype.ha=function(s){var d=this.g.ha(!0),m=this,E=new Lm;return E.next=function(){for(var D=d.next();D.substr(0,m.a.length)!=m.a;)D=d.next();return s?D.substr(m.a.length):m.g.get(D)},E},FM(new kU);var uz=new OU,PU=new iD(FM(uz)?new L0(uz,"firebaseui"):null),LU={name:"pendingEmailCredential",storage:PU},Zm={name:"redirectStatus",storage:PU},sD={name:"redirectUrl",storage:PU},F0={name:"emailForSignIn",storage:new iD(new R0(3600,"/"))},oD={name:"pendingEncryptedCredential",storage:new iD(new R0(3600,"/"))};function V0(s,d){return s.storage.get(d?s.name+":"+d:s.name)}function Yo(s,d){s.storage.a.ra(d?s.name+":"+d:s.name)}function U0(s,d,m){s.storage.set(m?s.name+":"+m:s.name,d)}function lz(s){return V0(sD,s)||null}function pc(s){return zW(s=V0(LU,s)||null)}function gc(s){Yo(LU,s)}function cz(s,d){U0(LU,WW(s),d)}function FU(s){return(s=V0(Zm,s)||null)&&typeof s.tenantId<"u"?new qW(s.tenantId):null}function VU(){this.W={}}function Gi(s,d,m){if(d.toLowerCase()in s.W)throw Error("Configuration "+d+" has already been defined.");s.W[d.toLowerCase()]=m}function UU(s,d,m){if(!(d.toLowerCase()in s.W))throw Error("Configuration "+d+" is not defined.");s.W[d.toLowerCase()]=m}function BU(s,d){if(!(s=s.get(d)))throw Error("Configuration "+d+" is required.");return s}function jU(){this.g=void 0,this.a={}}function dz(s,d,m,E){for(var D=0;D<d.length;D++){var x=d.charAt(D);s.a[x]||(s.a[x]=new jU),s=s.a[x]}if(E&&void 0!==s.g)throw Error('The collection already contains the key "'+d+'"');s.g=m}function hz(s,d){for(var m in void 0!==s.g&&d.push(s.g),s.a)hz(s.a[m],d)}function fz(s,d,m){for(var E in void 0!==s.g&&m.push(d),s.a)fz(s.a[E],d+E,m)}function pz(s){for(this.a=s,this.g=new jU,s=0;s<this.a.length;s++){var d=this.g.get("+"+this.a[s].b);d?d.push(this.a[s]):this.g.add("+"+this.a[s].b,[this.a[s]])}}function VM(s,d){var m={},E=0;for(void 0!==(s=s.g).g&&(m[E]=s.g);E<d.length;E++){var D=d.charAt(E);if(!(D in s.a))break;void 0!==(s=s.a[D]).g&&(m[E]=s.g)}for(var x in m)if(m.hasOwnProperty(x))return m[x];return[]}function Ym(s){for(var d=0;d<So.length;d++)if(So[d].c===s)return So[d];return null}function gz(s){s=s.toUpperCase();for(var d=[],m=0;m<So.length;m++)So[m].f===s&&d.push(So[m]);return d}function mz(s){if(0<s.length&&"+"==s.charAt(0)){s=s.substring(1);for(var d=[],m=0;m<So.length;m++)So[m].b==s&&d.push(So[m]);s=d}else s=gz(s);return s}function _z(s){s.sort(function(d,m){return d.name.localeCompare(m.name,"en")})}VU.prototype.get=function(s){if(!(s.toLowerCase()in this.W))throw Error("Configuration "+s+" is not defined.");return this.W[s.toLowerCase()]},(n=jU.prototype).set=function(s,d){dz(this,s,d,!1)},n.add=function(s,d){dz(this,s,d,!0)},n.get=function(s){e:{for(var d=this,m=0;m<s.length;m++)if(!(d=d.a[s.charAt(m)])){s=void 0;break e}s=d}return s?s.g:void 0},n.la=function(){var s=[];return hz(this,s),s},n.ja=function(){var s=[];return fz(this,"",s),s},n.clear=function(){this.a={},this.g=void 0};var So=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"\xc5land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"C\xf4te d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Cura\xe7ao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"R\xe9union",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barth\xe9lemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"S\xe3o Tom\xe9 and Pr\xedncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];_z(So);var aD=new pz(So);function yz(s,d){this.a=s,this.Aa=d}function vz(s){s=Io(s);var d=VM(aD,s);return 0<d.length?new yz("1"==d[0].b?"1-US-0":d[0].c,Io(s.substr(d[0].b.length+1))):null}function $U(s){var d=Ym(s.a);if(!d)throw Error("Country ID "+s.a+" not found.");return"+"+d.b+s.Aa}function Ez(s,d){for(var m=0;m<s.length;m++)if(!Hs(wz,s[m])&&(null!==B0&&s[m]in B0||Hs(d,s[m])))return s[m];return null}var wz=["emailLink","password","phone"],B0={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function Mae(){this.a=new VU,Gi(this.a,"autoUpgradeAnonymousUsers"),Gi(this.a,"callbacks"),Gi(this.a,"credentialHelper",jM),Gi(this.a,"immediateFederatedRedirect",!1),Gi(this.a,"popupMode",!1),Gi(this.a,"privacyPolicyUrl"),Gi(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),Gi(this.a,"queryParameterForWidgetMode","mode"),Gi(this.a,"signInFlow"),Gi(this.a,"signInOptions"),Gi(this.a,"signInSuccessUrl"),Gi(this.a,"siteName"),Gi(this.a,"tosUrl"),Gi(this.a,"widgetUrl"),Gi(this.a,"adminRestrictedOperation")}function UM(s){var d=!!s.a.get("autoUpgradeAnonymousUsers");return d&&!Mz(s)&&Da('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),d}function BM(s){s=s.a.get("signInOptions")||[];for(var d=[],m=0;m<s.length;m++){var E=s[m];(E=yt(E)?E:{provider:E}).provider&&d.push(E)}return d}function Ta(s,d){s=BM(s);for(var m=0;m<s.length;m++)if(s[m].provider===d)return s[m];return null}function j0(s){return BM(s).map(function(d){return d.provider})}function uD(s,d){s=bz(s);for(var m=0;m<s.length;m++)if(s[m].providerId===d)return s[m];return null}function bz(s){return BM(s).map(function(d){if(B0[d.provider]||Hs(jae,d.provider)){for(var m in d={providerId:d.provider,S:d.providerName||null,V:d.fullLabel||null,ta:d.buttonColor||null,za:d.iconUrl?ip(rM(d.iconUrl)).toString():null})null===d[m]&&delete d[m];return d}return{providerId:d.provider,S:d.providerName||null,V:d.fullLabel||null,ta:d.buttonColor||null,za:d.iconUrl?ip(rM(d.iconUrl)).toString():null,Ob:d.loginHintKey||null}})}function Iz(s){var m,d=Ta(s,jt.Z.auth.GoogleAuthProvider.PROVIDER_ID);if(m=d&&d.clientId){e:{if("http:"===(window.location&&window.location.protocol)||"https:"===(window.location&&window.location.protocol))for(E in s=s.a.get("credentialHelper"),qU)if(qU[E]===s){var E=qU[E];break e}E=jM}m=E===zU}return m&&d.clientId||null}function Cz(s){return!!((s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp&&s.disableSignUp.status)}function Qm(s){return!(!(s=s.a.get("adminRestrictedOperation")||null)||!s.status)}function Dz(s,d){return s=(s=Ta(s,d))&&s.scopes,Array.isArray(s)?s:[]}function Tz(s,d){return yt(s=(s=Ta(s,d))&&s.customParameters)?(s=b0(s),d===jt.Z.auth.GoogleAuthProvider.PROVIDER_ID&&delete s.login_hint,d===jt.Z.auth.GithubAuthProvider.PROVIDER_ID&&delete s.login,s):null}function HU(s){if(!(s=Ta(s,jt.Z.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var d=s.whitelistedCountries,m=s.blacklistedCountries;if(typeof d<"u"&&(!Array.isArray(d)||0==d.length))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof m<"u"&&!Array.isArray(m))throw Error("BlacklistedCountries must be an array.");if(d&&m)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!d&&!m)return So;if(s=[],d){m={};for(var E=0;E<d.length;E++)for(var D=mz(d[E]),x=0;x<D.length;x++)m[D[x].c]=D[x];for(var B in m)m.hasOwnProperty(B)&&s.push(m[B])}else{for(B={},d=0;d<m.length;d++)for(D=mz(m[d]),E=0;E<D.length;E++)B[D[E].c]=D[E];for(D=0;D<So.length;D++)null!==B&&So[D].c in B||s.push(So[D])}return s}function Sz(s){return BU(s.a,"queryParameterForWidgetMode")}function Wi(s){var d=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,d&&!s&&dp("Privacy Policy URL is missing, the link will not be displayed."),d&&s){if("function"==typeof d)return d;if("string"==typeof d)return function(){M0(d)}}return null}function zi(s){var d=s.a.get("tosUrl")||null,m=s.a.get("privacyPolicyUrl")||null;if(m&&!d&&dp("Term of Service URL is missing, the link will not be displayed."),d&&m){if("function"==typeof m)return m;if("string"==typeof m)return function(){M0(m)}}return null}function Az(s){return!((s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&typeof s.requireDisplayName<"u"&&!s.requireDisplayName)}function $0(s){return!(!(s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))||s.signInMethod!==jt.Z.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function GU(s){var d=!!s.a.get("immediateFederatedRedirect"),m=j0(s);return s=xz(s),d&&1==m.length&&!Hs(wz,m[0])&&s==$M}function xz(s){for(var d in s=s.a.get("signInFlow"),KU)if(KU[d]==s)return KU[d];return $M}function WU(s){return lD(s).signInSuccess||null}function Nz(s){return lD(s).signInSuccessWithAuthResult||null}function Mz(s){return lD(s).signInFailure||null}function lD(s){return s.a.get("callbacks")||{}}var cD,H0,YU,Rz,zU="googleyolo",jM="none",qU={nc:zU,NONE:jM},$M="redirect",KU={qc:"popup",rc:$M},ZU={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},jae=["anonymous"],$ae=["sitekey","tabindex","callback","expired-callback"],mr={};function Ut(s,d,m,E){mr[s].apply(null,Array.prototype.slice.call(arguments,1))}function kz(s){return s.classList?s.classList:$(s=s.className)&&s.match(/\S+/g)||[]}function dD(s,d){return s.classList?s.classList.contains(d):Hs(kz(s),d)}function mc(s,d){s.classList?s.classList.add(d):dD(s,d)||(s.className+=0<s.className.length?" "+d:d)}function _c(s,d){s.classList?s.classList.remove(d):dD(s,d)&&(s.className=Jf(kz(s),function(m){return m!=d}).join(" "))}function Ss(s){var d=s.type;switch($(d)&&d.toLowerCase()){case"checkbox":case"radio":return s.checked?s.value:null;case"select-one":return 0<=(d=s.selectedIndex)?s.options[d].value:null;case"select-multiple":d=[];for(var m,E=0;m=s.options[E];E++)m.selected&&d.push(m.value);return d.length?d:null;default:return null!=s.value?s.value:null}}function Oz(s,d){var m=s.type;switch($(m)&&m.toLowerCase()){case"checkbox":case"radio":s.checked=d;break;case"select-one":if(s.selectedIndex=-1,$(d))for(var E=0;m=s.options[E];E++)if(m.value==d){m.selected=!0;break}break;case"select-multiple":for($(d)&&(d=[d]),E=0;m=s.options[E];E++)if(m.selected=!1,d)for(var D,x=0;D=d[x];x++)m.value==D&&(m.selected=!0);break;default:s.value=d??""}}function Pz(s,d,m,E,D,x){if(Co&&!Bm("525"))return!0;if(rp&&D)return hD(s);if(D&&!E)return!1;if(!il&&("number"==typeof d&&(d=QU(d)),(!m||rp)&&(17==d||18==d||rp&&91==d)||rp&&16==d&&(E||x)))return!1;if((Co||np)&&E&&m)switch(s){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(xi&&E&&d==s)return!1;switch(s){case 13:return!(il&&(x||D||m&&E));case 27:return!(Co||np||il)}return(!il||!(E||D||x))&&hD(s)}function hD(s){if(48<=s&&57>=s||96<=s&&106>=s||65<=s&&90>=s||(Co||np)&&0==s)return!0;switch(s){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return il;default:return!1}}function QU(s){return il?s=function Gae(s){switch(s){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return s}}(s):rp&&Co&&93===s&&(s=91),s}function G0(s){ts.call(this),this.a=s,sl(s,"keydown",this.g,!1,this),sl(s,"click",this.h,!1,this)}function Lz(s,d){var m=new Vz(d);if(lp(s,m)){m=new Fz(d);try{lp(s,m)}finally{d.stopPropagation()}}}function Fz(s){To.call(this,s.a),this.type="action"}function Vz(s){To.call(this,s.a),this.type="beforeaction"}function W0(s){ts.call(this),this.a=s,s=xi?"focusout":"blur",this.g=sl(this.a,xi?"focusin":"focus",this,!xi),this.h=sl(this.a,s,this,!xi)}function HM(s,d){ts.call(this),this.g=s||1,this.a=d||M,this.h=en(this.gc,this),this.j=bo()}function GM(s){s.Ka=!1,s.aa&&(s.a.clearTimeout(s.aa),s.aa=null)}function z0(s){Gm.call(this),this.g=s,this.a={}}Zt(G0,ts),G0.prototype.g=function(s){(13==s.keyCode||Co&&3==s.keyCode)&&Lz(this,s)},G0.prototype.h=function(s){Lz(this,s)},G0.prototype.o=function(){G0.K.o.call(this),Wm(this.a,"keydown",this.g,!1,this),Wm(this.a,"click",this.h,!1,this),delete this.a},Zt(Fz,To),Zt(Vz,To),Zt(W0,ts),W0.prototype.handleEvent=function(s){var d=new To(s.a);d.type="focusin"==s.type||"focus"==s.type?"focusin":"focusout",lp(this,d)},W0.prototype.o=function(){W0.K.o.call(this),up(this.g),up(this.h),delete this.a},Zt(HM,ts),(n=HM.prototype).Ka=!1,n.aa=null,n.gc=function(){if(this.Ka){var s=bo()-this.j;0<s&&s<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-s):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),lp(this,"tick"),this.Ka&&(GM(this),this.start()))}},n.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=bo())},n.o=function(){HM.K.o.call(this),GM(this),delete this.a},Zt(z0,Gm);var Uz=[];function q0(s,d,m,E){Et(m)||(m&&(Uz[0]=m.toString()),m=Uz);for(var D=0;D<m.length;D++){var x=sl(d,m[D],E||s.handleEvent,!1,s.g||s);if(!x)break;s.a[x.key]=x}}function Bz(s){VC(s.a,function(d,m){this.a.hasOwnProperty(m)&&up(d)},s),s.a={}}function fD(s){ts.call(this),this.a=null,this.g=s,s=xi||np||Co&&!Bm("531")&&"TEXTAREA"==s.tagName,this.h=new z0(this),q0(this.h,this.g,s?["keydown","paste","cut","drop","input"]:"input",this)}function JU(s){null!=s.a&&(M.clearTimeout(s.a),s.a=null)}function jz(s){return(s=new To(s.a)).type="input",s}function pD(s,d){ts.call(this),s&&(this.Oa&&zz(this),this.qa=s,this.Na=sl(this.qa,"keypress",this,d),this.Ya=sl(this.qa,"keydown",this.Jb,d,this),this.Oa=sl(this.qa,"keyup",this.Kb,d,this))}z0.prototype.o=function(){z0.K.o.call(this),Bz(this)},z0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zt(fD,ts),fD.prototype.handleEvent=function(s){if("input"==s.type)xi&&Bm(10)&&0==s.keyCode&&0==s.j||(JU(this),lp(this,jz(s)));else if("keydown"!=s.type||function Hae(s){if(s.altKey&&!s.ctrlKey||s.metaKey||112<=s.keyCode&&123>=s.keyCode)return!1;if(hD(s.keyCode))return!0;switch(s.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!il;default:return 166>s.keyCode||183<s.keyCode}}(s)){var d="keydown"==s.type?this.g.value:null;xi&&229==s.keyCode&&(d=null);var m=jz(s);JU(this),this.a=function Wae(s,d){if(pt(s))d&&(s=en(s,d));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=en(s.handleEvent,s)}return 2147483647<Number(0)?-1:M.setTimeout(s,0)}(function(){this.a=null,this.g.value!=d&&lp(this,m)},this)}},fD.prototype.o=function(){fD.K.o.call(this),this.h.m(),JU(this),delete this.g},Zt(pD,ts),(n=pD.prototype).qa=null,n.Na=null,n.Ya=null,n.Oa=null,n.R=-1,n.X=-1,n.Ua=!1;var $z={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Hz={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Gz=!Co||Bm("525"),Wz=rp&&il;function zz(s){s.Na&&(up(s.Na),up(s.Ya),up(s.Oa),s.Na=null,s.Ya=null,s.Oa=null),s.qa=null,s.R=-1,s.X=-1}function qz(s,d,m,E){To.call(this,E),this.type="key",this.keyCode=s,this.j=d,this.repeat=m}function K0(s,d,m,E){this.top=s,this.right=d,this.bottom=m,this.left=E}function WM(s,d){var m=WC(s);return m.defaultView&&m.defaultView.getComputedStyle&&(s=m.defaultView.getComputedStyle(s,null))&&(s[d]||s.getPropertyValue(d))||""}function Kz(s){try{var d=s.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return xi&&s.ownerDocument.body&&(d.left-=(s=s.ownerDocument).documentElement.clientLeft+s.body.clientLeft,d.top-=s.documentElement.clientTop+s.body.clientTop),d}function Zz(s){var d=WC(s),m=new op(0,0),E=d?WC(d):document;return s==(E=!xi||9<=Number(HC)||"CSS1Compat"==sM(E).a.compatMode?E.documentElement:E.body)||(s=Kz(s),d=oM(E=sM(d).a),E=E.parentWindow||E.defaultView,d=xi&&Bm("10")&&E.pageYOffset!=d.scrollTop?new op(d.scrollLeft,d.scrollTop):new op(E.pageXOffset||d.scrollLeft,E.pageYOffset||d.scrollTop),m.a=s.left+d.a,m.g=s.top+d.g),m}(n=pD.prototype).Jb=function(s){(Co||np)&&(17==this.R&&!s.ctrlKey||18==this.R&&!s.altKey||rp&&91==this.R&&!s.metaKey)&&(this.X=this.R=-1),-1==this.R&&(s.ctrlKey&&17!=s.keyCode?this.R=17:s.altKey&&18!=s.keyCode?this.R=18:s.metaKey&&91!=s.keyCode&&(this.R=91)),Gz&&!Pz(s.keyCode,this.R,s.shiftKey,s.ctrlKey,s.altKey,s.metaKey)?this.handleEvent(s):(this.X=QU(s.keyCode),Wz&&(this.Ua=s.altKey))},n.Kb=function(s){this.X=this.R=-1,this.Ua=s.altKey},n.handleEvent=function(s){var d=s.a,m=d.altKey;if(xi&&"keypress"==s.type)var E=this.X,D=13!=E&&27!=E?d.keyCode:0;else(Co||np)&&"keypress"==s.type?(E=this.X,D=0<=d.charCode&&63232>d.charCode&&hD(E)?d.charCode:0):k8&&!Co?D=hD(E=this.X)?d.keyCode:0:("keypress"==s.type?(Wz&&(m=this.Ua),d.keyCode==d.charCode?32>d.keyCode?(E=d.keyCode,D=0):(E=this.X,D=d.charCode):(E=d.keyCode||this.X,D=d.charCode||0)):(E=d.keyCode||this.X,D=d.charCode||0),rp&&63==D&&224==E&&(E=191));var x=E=QU(E);E?63232<=E&&E in $z?x=$z[E]:25==E&&s.shiftKey&&(x=9):d.keyIdentifier&&d.keyIdentifier in Hz&&(x=Hz[d.keyIdentifier]),il&&Gz&&"keypress"==s.type&&!Pz(x,this.R,s.shiftKey,s.ctrlKey,m,s.metaKey)||(s=x==this.R,this.R=x,(d=new qz(x,D,s,d)).altKey=m,lp(this,d))},n.N=function(){return this.qa},n.o=function(){pD.K.o.call(this),zz(this)},Zt(qz,To),K0.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},K0.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},K0.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},K0.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Yz={thin:2,medium:4,thick:6};function zM(s,d){if("none"==(s.currentStyle?s.currentStyle[d+"Style"]:null))return 0;var m=s.currentStyle?s.currentStyle[d+"Width"]:null;if(m in Yz)s=Yz[m];else if(/^\d+px?$/.test(m))s=parseInt(m,10);else{d=s.style.left;var E=s.runtimeStyle.left;s.runtimeStyle.left=s.currentStyle.left,s.style.left=m,m=s.style.pixelLeft,s.style.left=d,s.runtimeStyle.left=E,s=+m}return s}function XU(){}function Jm(s){ts.call(this),this.s=s||sM(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function Jn(s,d){return s.g?XV(d,s.g||s.s.a):null}function gD(s){return s.L||(s.L=new z0(s)),s.L}function eB(s,d){s.Ea&&rl(s.Ea,d,void 0)}function Ri(s,d){var m=q8(s,"firebaseui-textfield");d?(_c(s,"firebaseui-input-invalid"),mc(s,"firebaseui-input"),m&&_c(m,"firebaseui-textfield-invalid")):(_c(s,"firebaseui-input"),mc(s,"firebaseui-input-invalid"),m&&mc(m,"firebaseui-textfield-invalid"))}function Z0(s,d,m){KC(s,ds(ZC,d=new fD(d))),q0(gD(s),d,"input",m)}function mD(s,d,m){KC(s,ds(ZC,d=new pD(d))),q0(gD(s),d,"key",function(E){13==E.keyCode&&(E.stopPropagation(),E.preventDefault(),m(E))})}function gi(s,d,m){KC(s,ds(ZC,d=new G0(d))),q0(gD(s),d,"action",function(E){E.stopPropagation(),E.preventDefault(),m(E)})}function Sa(s){mc(s,"firebaseui-hidden")}function As(s,d){d&&eU(s,d),_c(s,"firebaseui-hidden")}function Y0(s){return!dD(s,"firebaseui-hidden")&&"none"!=s.style.display}function Q0(s){var m=(s=s||{}).disabled,E='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return E=s.wc?E+"Enter new email address":E+"Email",E+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+Do(s.email??"")+'"'+(m?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',Rt(E)}function Qo(s){var d='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return d=(s=(s=s||{}).label)?d+fn(s):d+"Next",Rt(d+"</button>")}function tB(){var s=""+Qo({label:Ni("Sign In")});return Rt(s)}function Qz(){var s=""+Qo({label:Ni("Save")});return Rt(s)}function ol(){var s=""+Qo({label:Ni("Continue")});return Rt(s)}function Jz(s){var d='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return d=(s=(s=s||{}).label)?d+fn(s):d+"Choose password",Rt(d+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function Xz(){var d='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return Rt((d={}.current?d+"Current password":d+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function e7(){return Rt('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function Aa(s){var d='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return d=(s=(s=s||{}).label)?d+fn(s):d+"Cancel",Rt(d+"</button>")}function Gs(s){var d="";return s.F&&s.D&&(d+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),Rt(d)}function J0(s){var d="";return s.F&&s.D&&(d+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),Rt(d)}function t7(s){return s='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+fn(s.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',Rt(s)}function n7(s){var d=s.content;return Rt('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+((s=s.Ab)?" "+Do(s):"")+'">'+fn(d)+"</dialog>")}function r7(s){var d=s.message;return Rt(n7({content:Y8('<div class="firebaseui-dialog-icon-wrapper"><div class="'+Do(s.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+fn(d)+"</div>")}))}function i7(s){for(var d='<div class="firebaseui-list-box-actions">',m=(s=s.items).length,E=0;E<m;E++){var D=s[E];d+='<button type="button" data-listboxid="'+Do(D.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(D.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+Do(D.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+fn(D.label)+"</div></button>"}return d=""+n7({Ab:Ni("firebaseui-list-box-dialog"),content:Y8(d+"</div>")}),Rt(d)}function qM(s){return Rt((s=s||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function hp(s,d){return or((s=(s=s||{}).ga).S?s.S:d.hb[s.providerId]?""+d.hb[s.providerId]:s.providerId&&0==s.providerId.indexOf("saml.")||s.providerId&&0==s.providerId.indexOf("oidc.")?s.providerId.substring(5):""+s.providerId)}function nB(s){s7(s,"upgradeElement")}function rB(s){s7(s,"downgradeElements")}ct(XU),XU.prototype.a=0,Zt(Jm,ts),(n=Jm.prototype).Lb=XU.Xa(),n.N=function(){return this.g},n.Za=function(s){if(this.Y&&this.Y!=s)throw Error("Method not supported");Jm.K.Za.call(this,s)},n.kb=function(){this.g=this.s.a.createElement("DIV")},n.render=function(s){if(this.na)throw Error("Component already rendered");this.g||this.kb(),s?s.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},n.v=function(){this.na=!0,eB(this,function(s){!s.na&&s.N()&&s.v()})},n.ya=function(){eB(this,function(s){s.na&&s.ya()}),this.L&&Bz(this.L),this.na=!1},n.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),eB(this,function(s){s.m()}),this.g&&$m(this.g),this.Y=this.g=this.oa=this.Ea=null,Jm.K.o.call(this)},n.removeChild=function(s,d){if(s){var m=$(s)?s:s.cb||(s.cb=":"+(s.Lb.a++).toString(36));if(s=this.oa&&m&&(null!==(s=this.oa)&&m in s?s[m]:void 0)||null,m&&s){var E=this.oa;if(m in E&&delete E[m],hc(this.Ea,s),d&&(s.ya(),s.g&&$m(s.g)),null==(d=s))throw Error("Unable to set parent component");d.Y=null,Jm.K.Za.call(d,null)}}if(!s)throw Error("Child is not in parent component");return s},t7.a="firebaseui.auth.soy2.element.infoBar",r7.a="firebaseui.auth.soy2.element.progressDialog",i7.a="firebaseui.auth.soy2.element.listBoxDialog",qM.a="firebaseui.auth.soy2.element.busyIndicator";var Zae=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function s7(s,d){s&&window.componentHandler&&window.componentHandler[d]&&Zae.forEach(function(m){dD(s,m)&&window.componentHandler[d](s),rl(JV(m,s),function(E){window.componentHandler[d](E)})})}function o7(s,d,m){if(KM.call(this),document.body.appendChild(s),s.showModal||window.dialogPolyfill.registerDialog(s),s.showModal(),nB(s),d&&gi(this,s,function(x){var B=s.getBoundingClientRect();(x.clientX<B.left||B.left+B.width<x.clientX||x.clientY<B.top||B.top+B.height<x.clientY)&&KM.call(this)}),!m){var E=this.N().parentElement||this.N().parentNode;if(E){var D=this;this.da=function(){if(s.open){var x=s.getBoundingClientRect().height,B=E.getBoundingClientRect().height,ee=E.getBoundingClientRect().top-document.body.getBoundingClientRect().top,Le=E.getBoundingClientRect().left-document.body.getBoundingClientRect().left,dt=s.getBoundingClientRect().width,Gt=E.getBoundingClientRect().width;s.style.top=(ee+(B-x)/2).toString()+"px",s.style.left=(x=Le+(Gt-dt)/2).toString()+"px",s.style.right=(document.body.getBoundingClientRect().width-x-dt).toString()+"px"}else window.removeEventListener("resize",D.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function KM(){var s=iB.call(this);s&&(rB(s),s.open&&s.close(),$m(s),this.da&&window.removeEventListener("resize",this.da))}function iB(){return XV("firebaseui-id-dialog")}function a7(){$m(u7.call(this))}function u7(){return Jn(this,"firebaseui-id-info-bar")}function l7(){return Jn(this,"firebaseui-id-dismiss-info-bar")}var Yae={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function sB(s,d,m){for(var E in jd.call(this,s,d),m)this[E]=m[E]}function Ye(s,d,m,E,D){Jm.call(this,m),this.fb=s,this.eb=d,this.Fa=!1,this.Ga=E||null,this.A=this.ca=null,this.Z=b0(Yae),Pm(this.Z,D||{})}function li(s){return s.N().parentElement||s.N().parentNode}function _D(s,d,m){mD(s,d,function(){m.focus()})}function X0(s,d,m){mD(s,d,function(){m()})}function c7(s,d,m){d=(s=s||{}).Va;var E=s.ia;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Q0(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(d?Aa(null):"")+Qo(null)+'</div></div><div class="firebaseui-card-footer">'+(E?J0(m):Gs(m))+"</div></form></div>",Rt(s)}function d7(s,d,m){return d=(s=s||{}).ia,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Q0(s)+Xz()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+e7()+'</div><div class="firebaseui-form-actions">'+tB()+'</div></div><div class="firebaseui-card-footer">'+(d?J0(m):Gs(m))+"</div></form></div>",Rt(s)}function h7(s,d,m){var E=(s=s||{}).Tb;d=s.Ta;var D=s.ia,x='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Q0(s);return E?(s='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">Branding display name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+Do((s=(s=s||{}).name)??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',s=Rt(s)):s="",m=x+s+Jz(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(d?Aa(null):"")+Qz()+'</div></div><div class="firebaseui-card-footer">'+(D?J0(m):Gs(m))+"</div></form></div>",Rt(m)}function f7(s,d,m){return d=(s=s||{}).Ta,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Q0(s)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(d?Aa(null):"")+Qo({label:Ni("Send")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(s)}function p7(s,d,m){d=s.G;var E="";return E+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="Follow the instructions sent to <strong>"+fn(s.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',d&&(E+='<div class="firebaseui-form-actions">'+Qo({label:Ni("Done")})+"</div>"),E+='</div><div class="firebaseui-card-footer">'+Gs(m)+"</div></div>",Rt(E)}function g7(s,d,m){return Rt('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+qM(null)+"</div></div>")}function m7(s,d,m){return Rt('<div class="firebaseui-container firebaseui-id-page-spinner">'+qM({tb:!0})+"</div>")}function _7(){return Rt('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function y7(s,d,m){return d="",d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(s="A sign-in email with additional instructions was sent to <strong>"+fn(s.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Rt('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+Aa({label:Ni("Back")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function v7(s,d,m){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Rt('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+Aa({label:Ni("Back")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(s)}function E7(s,d,m){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Q0(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Aa(null)+Qo(null)+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(s)}function w7(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Aa({label:Ni("Dismiss")})+"</div></div></div>";return Rt(s)}function b7(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Aa({label:Ni("Dismiss")})+"</div></div></div>";return Rt(s)}function I7(s,d,m){return d="",d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(s="You\u2019ve already used <strong>"+fn(s.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+Xz()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+e7()+'</div><div class="firebaseui-form-actions">'+tB()+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function C7(s,d,m){var E=s.email;return d="",s=Ni(s=""+hp(s,m)),d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(E="You\u2019ve already used <strong>"+fn(E)+"</strong>. You can connect your <strong>"+fn(s)+"</strong> account with <strong>"+fn(E)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(s="For this flow to successfully connect your "+fn(s)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+tB()+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function D7(s,d,m){d="";var E=""+hp(s,m);return d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(s="You originally intended to connect <strong>"+fn(E=Ni(E))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(E="If you still want to connect your <strong>"+fn(E)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol()+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function T7(s,d,m){var E=s.email;return d="",s=Ni(s=""+hp(s,m)),d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(E="You\u2019ve already used <strong>"+fn(E)+"</strong>. Sign in with "+fn(s)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Qo({label:Ni("Sign in with "+s)})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function S7(s,d,m){var E=(s=s||{}).kc;d=s.yb,s=s.Eb;var D='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return D+=E?E="<strong>"+fn(E)+"</strong> is not authorized to view the requested page.":"User is not authorized to view the requested page.",D+="</p>",d&&(D+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(d="Please contact <strong>"+fn(d)+"</strong> for authorization.")+"</p>"),D+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',s&&(D+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),D+='</div><div class="firebaseui-form-actions">'+Aa({label:Ni("Back")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(D)}function A7(s,d,m){return d="",d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="To continue sign in with <strong>"+fn(s.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Aa(null)+Qo({label:Ni("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function x7(s){var d="";return d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">for <strong>'+fn(s.email)+"</strong></p>"+Jz(function Uoe(s){function d(){}var m={label:Ni("New password")};for(var E in d.prototype=s,s=new d,m)s[E]=m[E];return s}(s))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Qz()+"</div></div></form></div>",Rt(d)}function N7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function M7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function R7(s){var d=s.G,m="";return m+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="Your sign-in email address has been changed back to <strong>"+fn(s.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn\u2019t ask to change your sign-in email, it\u2019s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(d?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></form></div>",Rt(m)}function k7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can\u2019t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function O7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function P7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function L7(s){var d=s.G,m="";return m+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="You can now sign in with your new email <strong>"+fn(s.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(d?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(m)}function F7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function V7(s){var d=s.factorId,m=s.phoneNumber;s=s.G;var E='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return E+="phone"===d?d="The <strong>"+fn(d)+" "+fn(m)+"</strong> was removed as a second authentication step.":"The device or app was removed as a second authentication step.",E+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(s?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></form></div>",Rt(E)}function U7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ol()+"</div>":"")+"</div></div>",Rt(s)}function B7(s){var d=s.zb;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+fn(s.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',d&&(s+=Qo({label:Ni("Retry")})),Rt(s+"</div></div></div>")}function j7(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+fn(s.errorMessage)+"</p></div></div>",Rt(s)}function $7(s,d,m){var E=s.Qb;return d="",d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(s="Continue with "+fn(s.jc)+"?")+'</h2><p class="firebaseui-text">'+(E="You originally wanted to sign in with "+fn(E))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Aa(null)+Qo({label:Ni("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form></div>",Rt(d)}function H7(s,d,m){var E='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';d=(s=s.Sb).length;for(var D=0;D<d;D++){var x={ga:s[D]},B=m,ee=(x=x||{}).ga,Le=x,dt="";switch((Le=Le||{}).ga.providerId){case"google.com":dt+="firebaseui-idp-google";break;case"github.com":dt+="firebaseui-idp-github";break;case"facebook.com":dt+="firebaseui-idp-facebook";break;case"twitter.com":dt+="firebaseui-idp-twitter";break;case"phone":dt+="firebaseui-idp-phone";break;case"anonymous":dt+="firebaseui-idp-anonymous";break;case"password":dt+="firebaseui-idp-password";break;default:dt+="firebaseui-idp-generic"}Le=(Le='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+Do(or(dt))+' firebaseui-id-idp-button" data-provider-id="'+Do(ee.providerId)+'" style="background-color:')+Do(Q8(or((dt=(dt=(dt=x)||{}).ga).ta?dt.ta:B.wa[dt.providerId]?""+B.wa[dt.providerId]:0==dt.providerId.indexOf("saml.")?""+B.wa.saml:0==dt.providerId.indexOf("oidc.")?""+B.wa.oidc:""+B.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var Gt=x;dt=B,dt=Voe((Gt=(Gt=Gt||{}).ga).za?Hm(Gt.za):dt.xa[Gt.providerId]?Hm(dt.xa[Gt.providerId]):0==Gt.providerId.indexOf("saml.")?Hm(dt.xa.saml):0==Gt.providerId.indexOf("oidc.")?Hm(dt.xa.oidc):Hm(dt.xa.password)),Le=Le+Do(Hm(dt))+'"></span>',"password"==ee.providerId?(Le+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Le+=ee.V?fn(ee.V):ee.S?x="Sign in with "+fn(hp(x,B)):"Sign in with email",Le+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Le=ee.S?Le+fn(ee.S):Le+"Email",Le+="</span>"):"phone"==ee.providerId?(Le+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Le+=ee.V?fn(ee.V):ee.S?x="Sign in with "+fn(hp(x,B)):"Sign in with phone",Le+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Le=ee.S?Le+fn(ee.S):Le+"Phone",Le+="</span>"):"anonymous"==ee.providerId?(Le+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Le+=ee.V?fn(ee.V):ee.S?x="Sign in with "+fn(hp(x,B)):"Continue as guest",Le+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Le=ee.S?Le+fn(ee.S):Le+"Guest",Le+="</span>"):(Le+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Le+=ee.V?fn(ee.V):dt="Sign in with "+fn(hp(x,B)),Le+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+fn(ee.S?ee.S:hp(x,B))+"</span>"),E+='<li class="firebaseui-list-item">'+(ee=Rt(Le+"</button>"))+"</li>"}return E+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+J0(m)+"</div></div>",Rt(E)}function G7(s,d,m){var x,E=(s=s||{}).Gb,D=s.Va;return d=s.ia,s='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+Do((s=(s=s||{}).Aa)??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',x=(s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Rt(s))+(x=E?Rt('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(D?Aa(null):"")+Qo({label:Ni("Verify")})+'</div></div><div class="firebaseui-card-footer">',d?(d='<p class="firebaseui-tos firebaseui-phone-tos">',m=Rt((d=m.F&&m.D?d+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':d+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.")+"</p>")):m=Rt('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Gs(m),Rt(x+m+"</div></form></div>")}function W7(s,d,m){var E="";return s='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+fn(d=(s=s||{}).phoneNumber)+"</a>",fn(d),d=E,m='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+"</p>"+(E=Rt('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Aa(null)+Qo({label:Ni("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Gs(m)+"</div></form>",s=Rt('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),Rt(d+(m+s+"</div>"))}function z7(){return Rt('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function q7(s,d,m){var E='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';d=(s=s.ec).length;for(var D=0;D<d;D++){var x=s[D],B="",ee=fn(x.displayName),Le=x.tenantId?x.tenantId:"top-level-project";B+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+Do(Le=Ni(Le))+' firebaseui-id-tenant-selection-button"'+(x.tenantId?'data-tenant-id="'+Do(x.tenantId)+'"':"")+'style="background-color:'+Do(Q8(x.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+Do(Hm(x.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',B+=x.V?fn(x.V):x="Sign in to "+fn(x.displayName),E+='<li class="firebaseui-list-item">'+(B=Rt(B+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+ee+"</span></button>"))+"</li>"}return E+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+J0(m)+"</div></div>",Rt(E)}function K7(s,d,m){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Q0(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Qo(null)+'</div></div><div class="firebaseui-card-footer">'+J0(m)+"</div></form></div>",Rt(s)}function hs(){return Jn(this,"firebaseui-id-submit")}function rs(){return Jn(this,"firebaseui-id-secondary-link")}function xs(s,d){gi(this,hs.call(this),function(E){s(E)});var m=rs.call(this);m&&d&&gi(this,m,function(E){d(E)})}function ZM(){return Jn(this,"firebaseui-id-password")}function YM(){return Jn(this,"firebaseui-id-password-error")}function Z7(){var s=ZM.call(this),d=YM.call(this);Z0(this,s,function(){Y0(d)&&(Ri(s,!0),Sa(d))})}function Y7(){var s=ZM.call(this),d=YM.call(this);return Ss(s)?(Ri(s,!0),Sa(d),d=!0):(Ri(s,!1),As(d,or("Enter your password").toString()),d=!1),d?Ss(s):null}function eE(s,d,m,E,D,x){Ye.call(this,I7,{email:s},x,"passwordLinking",{F:E,D}),this.w=d,this.H=m}Zt(sB,jd),Zt(Ye,Jm),(n=Ye.prototype).kb=function(){var s=zC(this.fb,this.eb,this.Z,this.s);nB(s),this.g=s},n.v=function(){if(Ye.K.v.call(this),dW(li(this),new sB("pageEnter",li(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var s=this.Z.F;gi(this,this.bb(),function(){s()})}if(this.ab()&&this.Z.D){var d=this.Z.D;gi(this,this.ab(),function(){d()})}},n.ya=function(){dW(li(this),new sB("pageExit",li(this),{pageId:this.Ga})),Ye.K.ya.call(this)},n.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,rB(this.N()),Ye.K.o.call(this)},n.I=function(s,d,m,E){function D(){if(x.T)return null;x.Fa=!1,window.clearTimeout(x.ca),x.ca=null,x.A&&(rB(x.A),$m(x.A),x.A=null)}var x=this;return x.Fa?null:(function Qae(s){s.Fa=!0;var d=dD(s.N(),"firebaseui-use-spinner");s.ca=window.setTimeout(function(){s.N()&&null===s.A&&(s.A=zC(qM,{tb:d},null,s.s),s.N().appendChild(s.A),nB(s.A))},500)}(x),s.apply(null,d).then(m,E).then(D,D))},Mn(Ye.prototype,{a:function(s){a7.call(this);var d=zC(t7,{message:s},null,this.s);this.N().appendChild(d),gi(this,l7.call(this),function(){$m(d)})},yc:a7,Ac:u7,zc:l7,$:function(s,d){s=zC(r7,{Ma:s,message:d},null,this.s),o7.call(this,s)},h:KM,Cb:iB,Cc:function(){return Jn(this,"firebaseui-tos")},bb:function(){return Jn(this,"firebaseui-tos-link")},ab:function(){return Jn(this,"firebaseui-pp-link")},Dc:function(){return Jn(this,"firebaseui-tos-list")}}),c7.a="firebaseui.auth.soy2.page.signIn",d7.a="firebaseui.auth.soy2.page.passwordSignIn",h7.a="firebaseui.auth.soy2.page.passwordSignUp",f7.a="firebaseui.auth.soy2.page.passwordRecovery",p7.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",g7.a="firebaseui.auth.soy2.page.callback",m7.a="firebaseui.auth.soy2.page.spinner",_7.a="firebaseui.auth.soy2.page.blank",y7.a="firebaseui.auth.soy2.page.emailLinkSignInSent",v7.a="firebaseui.auth.soy2.page.emailNotReceived",E7.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",w7.a="firebaseui.auth.soy2.page.differentDeviceError",b7.a="firebaseui.auth.soy2.page.anonymousUserMismatch",I7.a="firebaseui.auth.soy2.page.passwordLinking",C7.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",D7.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",T7.a="firebaseui.auth.soy2.page.federatedLinking",S7.a="firebaseui.auth.soy2.page.unauthorizedUser",A7.a="firebaseui.auth.soy2.page.unsupportedProvider",x7.a="firebaseui.auth.soy2.page.passwordReset",N7.a="firebaseui.auth.soy2.page.passwordResetSuccess",M7.a="firebaseui.auth.soy2.page.passwordResetFailure",R7.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",k7.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",O7.a="firebaseui.auth.soy2.page.emailVerificationSuccess",P7.a="firebaseui.auth.soy2.page.emailVerificationFailure",L7.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",F7.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",V7.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",U7.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",B7.a="firebaseui.auth.soy2.page.recoverableError",j7.a="firebaseui.auth.soy2.page.unrecoverableError",$7.a="firebaseui.auth.soy2.page.emailMismatch",H7.a="firebaseui.auth.soy2.page.providerSignIn",G7.a="firebaseui.auth.soy2.page.phoneSignInStart",W7.a="firebaseui.auth.soy2.page.phoneSignInFinish",z7.a="firebaseui.auth.soy2.page.signOut",q7.a="firebaseui.auth.soy2.page.selectTenant",K7.a="firebaseui.auth.soy2.page.providerMatchByEmail",p(eE,Ye),eE.prototype.v=function(){this.P(),this.M(this.w,this.H),X0(this,this.i(),this.w),this.i().focus(),Ye.prototype.v.call(this)},eE.prototype.o=function(){this.w=null,Ye.prototype.o.call(this)},eE.prototype.j=function(){return Ss(Jn(this,"firebaseui-id-email"))},Mn(eE.prototype,{i:ZM,B:YM,P:Z7,u:Y7,ea:hs,ba:rs,M:xs});var Jae=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Gd(){return Jn(this,"firebaseui-id-email")}function fp(){return Jn(this,"firebaseui-id-email-error")}function tE(s){var d=Gd.call(this),m=fp.call(this);Z0(this,d,function(){Y0(m)&&(Ri(d,!0),Sa(m))}),s&&mD(this,d,function(){s()})}function nE(){return Io(Ss(Gd.call(this))||"")}function rE(){var s=Gd.call(this),d=fp.call(this),m=Ss(s)||"";return m?Jae.test(m)?(Ri(s,!0),Sa(d),d=!0):(Ri(s,!1),As(d,or("That email address isn't correct").toString()),d=!1):(Ri(s,!1),As(d,or("Enter your email address to continue").toString()),d=!1),d?Io(Ss(s)):null}function yD(s,d,m,E,D,x,B){Ye.call(this,d7,{email:m,ia:!!x},B,"passwordSignIn",{F:E,D}),this.w=s,this.H=d}function Er(s,d,m,E,D,x){Ye.call(this,s,d,E,D||"notice",x),this.i=m||null}function QM(s,d,m,E,D){Er.call(this,p7,{email:s,G:!!d},d,D,"passwordRecoveryEmailSent",{F:m,D:E})}function Q7(s,d){Er.call(this,O7,{G:!!s},s,d,"emailVerificationSuccess")}function J7(s,d){Er.call(this,P7,{G:!!s},s,d,"emailVerificationFailure")}function X7(s,d,m){Er.call(this,L7,{email:s,G:!!d},d,m,"verifyAndChangeEmailSuccess")}function e9(s,d){Er.call(this,F7,{G:!!s},s,d,"verifyAndChangeEmailFailure")}function t9(s,d){Er.call(this,U7,{G:!!s},s,d,"revertSecondFactorAdditionFailure")}function n9(s){Er.call(this,z7,void 0,void 0,s,"signOut")}function r9(s,d){Er.call(this,N7,{G:!!s},s,d,"passwordResetSuccess")}function i9(s,d){Er.call(this,M7,{G:!!s},s,d,"passwordResetFailure")}function s9(s,d){Er.call(this,k7,{G:!!s},s,d,"emailChangeRevokeFailure")}function o9(s,d,m){Er.call(this,B7,{errorMessage:s,zb:!!d},d,m,"recoverableError")}function a9(s,d){Er.call(this,j7,{errorMessage:s},void 0,d,"unrecoverableError")}function vD(s){if("auth/invalid-credential"===s.code&&s.message&&-1!==s.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(s.message&&-1!==s.message.indexOf("HTTP Cloud Function returned an error:")){var d=JSON.parse(s.message.substring(s.message.indexOf("{"),s.message.lastIndexOf("}")+1));return{code:s.code,message:d&&d.error&&d.error.message||s.message}}return s}function Wd(s,d,m,E){function D(B){if(!B.name||"cancel"!=B.name){e:{var ee=B.message;try{var Le=((JSON.parse(ee).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(Le&&Le.length){var dt=!0;break e}}catch{}dt=!1}if(dt)B=li(d),d.m(),Ur(s,B,void 0,or("Your sign-in session has expired. Please try again.").toString());else{if(dt=B&&B.message||"",B.code){if("auth/email-already-in-use"==B.code||"auth/credential-already-in-use"==B.code)return;dt=Ar(B)}d.a(dt)}}}if(x9(s),E)return u9(s,m),Mi();if(!m.credential)throw Error("No credential found!");if(!zn(s).currentUser&&!m.user)throw Error("User not logged in.");try{var x=function Nue(s,d){return Xn(s),zd(s,function(m){if(s.j&&!s.j.isAnonymous&&UM(et(s))&&!zn(s).currentUser)return pp(s).then(function(){return"password"==d.credential.providerId&&(d.credential=null),d});if(m)return pp(s).then(function(){return m.linkWithCredential(d.credential)}).then(function(E){return d.user=E.user,d.credential=E.credential,d.operationType=E.operationType,d.additionalUserInfo=E.additionalUserInfo,d},function(E){if(E&&"auth/email-already-in-use"==E.code&&E.email&&E.credential)throw E;return gp(s,E,d.credential)});if(!d.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return pp(s).then(function(){return al(s).updateCurrentUser(d.user)}).then(function(){return d.user=al(s).currentUser,d.operationType="signIn",d.credential&&d.credential.providerId&&"password"==d.credential.providerId&&(d.credential=null),d})})}(s,m)}catch(B){return Da(B.code||B.message,B),d.a(B.code||B.message),Mi()}return m=x.then(function(B){u9(s,B)},D).then(void 0,D),xn(s,x),Mi(m)}function u9(s,d){if(!d.user)throw Error("No user found");var m=Nz(et(s));if(WU(et(s))&&m&&dp("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),m){m=Nz(et(s));var E=lz(cn(s))||void 0;Yo(sD,cn(s));var D=!1;xW()?((!m||m(d,E))&&(D=!0,A0(window.opener.location,JM(s,E))),m||window.close()):(!m||m(d,E))&&(D=!0,A0(window.location,JM(s,E))),D||s.reset()}else{m=d.user,d=d.credential,E=WU(et(s)),D=lz(cn(s))||void 0,Yo(sD,cn(s));var x=!1;xW()?((!E||E(m,d,D))&&(x=!0,A0(window.opener.location,JM(s,D))),E||window.close()):(!E||E(m,d,D))&&(x=!0,A0(window.location,JM(s,D))),x||s.reset()}}function JM(s,d){if(!(s=d||et(s).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return s}function Ar(s){var d={code:s.code},m="";switch((d=d||{}).code){case"auth/email-already-in-use":m+="The email address is already used by another account";break;case"auth/requires-recent-login":case"auth/user-token-expired":m+=function nW(){return or("Please login again to perform this operation")}();break;case"auth/too-many-requests":m+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":m+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":m+="That email address doesn't match an existing account";break;case"auth/weak-password":m+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":m+="The email and password you entered don't match";break;case"auth/network-request-failed":m+="A network error has occurred";break;case"auth/invalid-phone-number":m+=iU();break;case"auth/invalid-verification-code":m+=or("Wrong code. Try again.");break;case"auth/code-expired":m+="This code is no longer valid";break;case"auth/expired-action-code":m+="This code has expired.";break;case"auth/invalid-action-code":m+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(d=or(m).toString())return d;try{return JSON.parse(s.message),Da("Internal error: "+s.message,void 0),X8().toString()}catch{return s.message}}function ED(s,d,m,E){function D(){(function Sae(s,d){U0(Zm,{tenantId:s.a},d)})(new qW(s.h.tenantId||null),cn(s)),xn(s,d.I(en(s.dc,s),[Le],function(){if("file:"===(window.location&&window.location.protocol))return xn(s,C9(s).then(function(dt){d.m(),Yo(Zm,cn(s)),Ut("callback",s,ee,Mi(dt))},x))},B))}function x(dt){if(Yo(Zm,cn(s)),!dt.name||"cancel"!=dt.name)switch(dt=vD(dt),dt.code){case"auth/popup-blocked":D();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":d.a(Ar(dt));break;case"auth/admin-restricted-operation":d.m(),Qm(et(s))?Ut("handleUnauthorizedUser",s,ee,null,m):Ut("callback",s,ee,x0(dt));break;default:d.m(),Ut("callback",s,ee,x0(dt))}}function B(dt){Yo(Zm,cn(s)),dt.name&&"cancel"==dt.name||(Da("signInWithRedirect: "+dt.code,void 0),dt=Ar(dt),"blank"==d.Ga&&GU(et(s))?(d.m(),Ut("providerSignIn",s,ee,dt)):d.a(dt))}var ee=li(d),Le=function Xae(s,d,m){var E=B0[d]&&jt.Z.auth[B0[d]]?new jt.Z.auth[B0[d]]:0==d.indexOf("saml.")?new jt.Z.auth.SAMLAuthProvider(d):new jt.Z.auth.OAuthProvider(d);if(!E)throw Error("Invalid Firebase Auth provider!");var D=Dz(et(s),d);if(E.addScope)for(var x=0;x<D.length;x++)E.addScope(D[x]);return D=Tz(et(s),d)||{},m&&(s=d==jt.Z.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":d==jt.Z.auth.GithubAuthProvider.PROVIDER_ID?"login":(s=uD(et(s),d))&&s.Ob)&&(D[s]=m),E.setCustomParameters&&E.setCustomParameters(D),E}(s,m,E);xz(et(s))==$M?D():xn(s,function xue(s,d){return Xn(s),zd(s,function(m){return m&&!pc(cn(s))?m.linkWithPopup(d).then(function(E){return E},function(E){if(E&&"auth/email-already-in-use"==E.code&&E.email&&E.credential)throw E;return gp(s,E)}):zn(s).signInWithPopup(d)})}(s,Le).then(function(dt){d.m(),Ut("callback",s,ee,Mi(dt))},x))}function XM(s){return 1==(s=j0(et(s))).length&&s[0]==jt.Z.auth.EmailAuthProvider.PROVIDER_ID}function l9(s){return 1==(s=j0(et(s))).length&&s[0]==jt.Z.auth.PhoneAuthProvider.PROVIDER_ID}function Ur(s,d,m,E){XM(s)?E?Ut("signIn",s,d,m,E):aB(s,d,m):s&&l9(s)&&!E?Ut("phoneSignInStart",s,d):s&&GU(et(s))&&!E?Ut("federatedRedirect",s,d,m):Ut("providerSignIn",s,d,E,m)}function c9(s,d,m,E){var D=li(d);xn(s,d.I(en(zn(s).fetchSignInMethodsForEmail,zn(s)),[m],function(x){d.m(),d9(s,D,x,m,E)},function(x){x=Ar(x),d.a(x)}))}function d9(s,d,m,E,D,x){m.length||$0(et(s))&&!$0(et(s))?Hs(m,jt.Z.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Ut("passwordSignIn",s,d,E,x):1==m.length&&m[0]===jt.Z.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?$0(et(s))?Ut("sendEmailLinkForSignIn",s,d,E,function(){Ut("signIn",s,d)}):Ut("unsupportedProvider",s,d,E):(m=Ez(m,j0(et(s))))?(cz(new MU(E),cn(s)),Ut("federatedSignIn",s,d,E,m,D)):Ut("unsupportedProvider",s,d,E):Cz(et(s))?Ut("handleUnauthorizedUser",s,d,E,jt.Z.auth.EmailAuthProvider.PROVIDER_ID):$0(et(s))?Ut("sendEmailLinkForSignIn",s,d,E,function(){Ut("signIn",s,d)}):Ut("passwordSignUp",s,d,E,void 0,void 0,x)}function oB(s,d,m,E,D,x){var B=li(d);xn(s,d.I(en(s.Ib,s),[m,x],function(){d.m(),Ut("emailLinkSignInSent",s,B,m,E,x)},D))}function aB(s,d,m){m?Ut("prefilledEmailSignIn",s,d,m):Ut("signIn",s,d)}function wD(){return tM(Hd(),"oobCode")}function uB(){var s=tM(Hd(),"continueUrl");return s?function(){A0(window.location,s)}:null}function bD(s,d){Ye.call(this,b7,void 0,d,"anonymousUserMismatch"),this.i=s}function eR(s){Ye.call(this,g7,void 0,s,"callback")}function h9(s,d,m){if(m.user){var E={user:m.user,credential:m.credential,operationType:m.operationType,additionalUserInfo:m.additionalUserInfo},D=pc(cn(s)),x=D&&D.g;if(x&&!function iue(s,d){if(d==s.email)return!0;if(s.providerData)for(var m=0;m<s.providerData.length;m++)if(d==s.providerData[m].email)return!0;return!1}(m.user,x))!function rue(s,d,m){var E=li(d);xn(s,pp(s).then(function(){d.m(),Ut("emailMismatch",s,E,m)},function(D){D.name&&"cancel"==D.name||(D=Ar(D.code),d.a(D))}))}(s,d,E);else{var B=D&&D.a;B?xn(s,m.user.linkWithCredential(B).then(function(ee){f9(s,d,E={user:ee.user,credential:B,operationType:ee.operationType,additionalUserInfo:ee.additionalUserInfo})},function(ee){tR(s,d,ee)})):f9(s,d,E)}}else m=li(d),d.m(),gc(cn(s)),Ur(s,m)}function f9(s,d,m){gc(cn(s)),Wd(s,d,m)}function tR(s,d,m){var E=li(d);gc(cn(s)),m=Ar(m),d.m(),Ur(s,E,void 0,m)}function p9(s,d,m,E){var D=li(d);xn(s,zn(s).fetchSignInMethodsForEmail(m).then(function(x){d.m(),x.length?Hs(x,jt.Z.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Ut("passwordLinking",s,D,m):1==x.length&&x[0]===jt.Z.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Ut("emailLinkSignInLinking",s,D,m):(x=Ez(x,j0(et(s))))?Ut("federatedLinking",s,D,m,x,E):(gc(cn(s)),Ut("unsupportedProvider",s,D,m)):(gc(cn(s)),Ut("passwordRecovery",s,D,m,!1,eW().toString()))},function(x){tR(s,d,x)}))}function ID(s,d){Ye.call(this,w7,void 0,d,"differentDeviceError"),this.i=s}function CD(s,d,m,E){Ye.call(this,R7,{email:s,G:!!m},E,"emailChangeRevoke"),this.l=d,this.i=m||null}function DD(){return Jn(this,"firebaseui-id-new-password")}function nR(){return Jn(this,"firebaseui-id-password-toggle")}function sue(){this.Ra=!this.Ra;var s=nR.call(this),d=DD.call(this);this.Ra?(d.type="text",mc(s,"firebaseui-input-toggle-off"),_c(s,"firebaseui-input-toggle-on")):(d.type="password",mc(s,"firebaseui-input-toggle-on"),_c(s,"firebaseui-input-toggle-off")),d.focus()}function rR(){return Jn(this,"firebaseui-id-new-password-error")}function g9(){this.Ra=!1;var s=DD.call(this);s.type="password";var d=rR.call(this);Z0(this,s,function(){Y0(d)&&(Ri(s,!0),Sa(d))});var m=nR.call(this);mc(m,"firebaseui-input-toggle-on"),_c(m,"firebaseui-input-toggle-off"),function qae(s,d,m){KC(s,ds(ZC,d=new W0(d))),q0(gD(s),d,"focusin",m)}(this,s,function(){mc(m,"firebaseui-input-toggle-focus"),_c(m,"firebaseui-input-toggle-blur")}),function Kae(s,d,m){KC(s,ds(ZC,d=new W0(d))),q0(gD(s),d,"focusout",m)}(this,s,function(){mc(m,"firebaseui-input-toggle-blur"),_c(m,"firebaseui-input-toggle-focus")}),gi(this,m,en(sue,this))}function m9(){var s=DD.call(this),d=rR.call(this);return Ss(s)?(Ri(s,!0),Sa(d),d=!0):(Ri(s,!1),As(d,or("Enter your password").toString()),d=!1),d?Ss(s):null}function TD(s,d,m){Ye.call(this,x7,{email:s},m,"passwordReset"),this.l=d}function SD(s,d,m,E,D){Ye.call(this,V7,{factorId:s,phoneNumber:m||null,G:!!E},D,"revertSecondFactorAdditionSuccess"),this.l=d,this.i=E||null}function _9(s,d,m,E){"auth/weak-password"==(E&&E.code)?(s=Ar(E),Ri(m.i(),!1),As(m.w(),s),m.i().focus()):(m&&m.m(),(m=new i9).render(d),Pn(s,m))}function iR(s,d){try{var m="number"==typeof s.selectionStart}catch{m=!1}m?(s.selectionStart=d,s.selectionEnd=d):xi&&!Bm("9")&&("textarea"==s.type&&(d=s.value.substring(0,d).replace(/(\r\n|\r|\n)/g,"\n").length),(s=s.createTextRange()).collapse(!0),s.move("character",d),s.select())}function AD(s,d,m,E,D,x){Ye.call(this,E7,{email:m},x,"emailLinkSignInConfirmation",{F:E,D}),this.l=s,this.u=d}function xD(s,d,m,E,D){Ye.call(this,D7,{ga:s},D,"emailLinkSignInLinkingDifferentDevice",{F:m,D:E}),this.i=d}function sR(s){Ye.call(this,_7,void 0,s,"blank")}function lB(s,d,m,E,D){var x=new sR,B=new Um(m),ee=B.a.a.get(es.$a)||"",Le=B.a.a.get(es.Sa)||"",dt="1"===B.a.a.get(es.Qa),Gt=A8(B),wr=B.a.a.get(es.PROVIDER_ID)||null;B=B.a.a.get(es.vb)||null,N9(s,B);var ll=!V0(F0,cn(s)),P9=E||function Aae(s,d){var m=null;if(d=V0(F0,d))try{var E=nz(s,d),D=JSON.parse(E);m=D&&D.email||null}catch{}return m}(Le,cn(s)),$D=(E=function xae(s,d){var m=null;if(d=V0(oD,d))try{var E=nz(s,d);m=JSON.parse(E)}catch{}return zW(m||null)}(Le,cn(s)))&&E.a;wr&&$D&&$D.providerId!==wr&&($D=null),x.render(d),Pn(s,x),xn(s,x.I(function(){var lu=Mi(null);lu=Gt&&ll||ll&&dt?x0(Error("anonymous-user-not-found")):function Tue(s,d){var m=A8(new Um(d));return m?(d=new ns(function(E,D){var x=al(s).onAuthStateChanged(function(B){x(),B&&B.isAnonymous&&B.uid===m?E(B):D(B&&B.isAnonymous&&B.uid!==m?Error("anonymous-user-mismatch"):Error("anonymous-user-not-found"))});xn(s,x)}),xn(s,d),d):Mi(null)}(s,m).then(function(EB){if(wr&&!$D)throw Error("pending-credential-not-found");return EB});var HD=null;return lu.then(function(EB){return HD=EB,D?null:zn(s).checkActionCode(ee)}).then(function(){return HD})},[],function(lu){P9?function cue(s,d,m,E,D,x){var B=li(d);d.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",or("Signing in...").toString());var ee=null;D=(x?function Sue(s,d,m,E,D){Xn(s);var x=D||null,B=jt.Z.auth.EmailAuthProvider.credentialWithLink(m,E);return m=x?zn(s).signInWithEmailLink(m,E).then(function(ee){return ee.user.linkWithCredential(x)}).then(function(){return pp(s)}).then(function(){return gp(s,{code:"auth/email-already-in-use"},x)}):zn(s).fetchSignInMethodsForEmail(m).then(function(ee){return ee.length?gp(s,{code:"auth/email-already-in-use"},B):d.linkWithCredential(B)}),xn(s,m),m}(s,x,m,E,D):function Aue(s,d,m,E){Xn(s);var x,D=E||null;return d=zn(s).signInWithEmailLink(d,m).then(function(B){if(x={user:B.user,credential:null,operationType:B.operationType,additionalUserInfo:B.additionalUserInfo},D)return B.user.linkWithCredential(D).then(function(ee){x={user:ee.user,credential:D,operationType:x.operationType,additionalUserInfo:ee.additionalUserInfo}})}).then(function(){pp(s)}).then(function(){return al(s).updateCurrentUser(x.user)}).then(function(){return x.user=al(s).currentUser,x}),xn(s,d),d}(s,m,E,D)).then(function(Le){Yo(oD,cn(s)),Yo(F0,cn(s)),d.h(),d.$("firebaseui-icon-done",or("Signed in!").toString()),ee=setTimeout(function(){d.h(),Wd(s,d,Le,!0)},1e3),xn(s,function(){d&&(d.h(),d.m()),clearTimeout(ee)})},function(Le){if(d.h(),d.m(),!Le.name||"cancel"!=Le.name){var dt=Ar(Le=vD(Le));"auth/email-already-in-use"==Le.code||"auth/credential-already-in-use"==Le.code?(Yo(oD,cn(s)),Yo(F0,cn(s))):"auth/invalid-email"==Le.code?(dt=or("The email provided does not match the current sign-in session.").toString(),Ut("emailLinkConfirmation",s,B,E,y9,null,dt)):Ur(s,B,m,dt)}}),xn(s,D)}(s,x,P9,m,$D,lu):dt?(x.m(),Ut("differentDeviceError",s,d)):(x.m(),Ut("emailLinkConfirmation",s,d,m,y9))},function(lu){var HD=void 0;if(!lu||!lu.name||"cancel"!=lu.name)switch(x.m(),lu&&lu.message){case"anonymous-user-not-found":Ut("differentDeviceError",s,d);break;case"anonymous-user-mismatch":Ut("anonymousUserMismatch",s,d);break;case"pending-credential-not-found":Ut("emailLinkNewDeviceLinking",s,d,m,lue);break;default:lu&&(HD=Ar(lu)),Ur(s,d,void 0,HD)}}))}function y9(s,d,m,E){lB(s,d,E,m,!0)}function lue(s,d,m){lB(s,d,m)}function ND(s,d,m,E,D,x){Ye.call(this,C7,{email:s,ga:d},x,"emailLinkSignInLinking",{F:E,D}),this.i=m}function MD(s,d,m,E,D,x){Ye.call(this,y7,{email:s},x,"emailLinkSignInSent",{F:E,D}),this.u=d,this.i=m}function RD(s,d,m,E,D,x,B){Ye.call(this,$7,{jc:s,Qb:d},B,"emailMismatch",{F:D,D:x}),this.l=m,this.i=E}function iE(s,d,m,E,D){Ye.call(this,v7,void 0,D,"emailNotReceived",{F:m,D:E}),this.l=s,this.i=d}function sE(s,d,m,E,D,x){Ye.call(this,T7,{email:s,ga:d},x,"federatedLinking",{F:E,D}),this.i=m}function kD(s,d,m,E,D,x){Ye.call(this,f7,{email:m,Ta:!!d},x,"passwordRecovery",{F:E,D}),this.l=s,this.u=d}function cB(){return Jn(this,"firebaseui-id-name")}function dB(){return Jn(this,"firebaseui-id-name-error")}function OD(s,d,m,E,D,x,B,ee,Le){Ye.call(this,h7,{email:E,Tb:s,name:D,Ta:!!m,ia:!!ee},Le,"passwordSignUp",{F:x,D:B}),this.w=d,this.H=m,this.B=s}function hB(){return Jn(this,"firebaseui-id-phone-confirmation-code")}function v9(){return Jn(this,"firebaseui-id-phone-confirmation-code-error")}function E9(){return Jn(this,"firebaseui-id-resend-countdown")}function oE(s,d,m,E,D,x,B,ee,Le){Ye.call(this,W7,{phoneNumber:D},Le,"phoneSignInFinish",{F:B,D:ee}),this.jb=x,this.i=new HM(1e3),this.B=x,this.P=s,this.l=d,this.H=m,this.M=E}p(yD,Ye),yD.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),_D(this,this.l(),this.i()),X0(this,this.i(),this.w),Ss(this.l())?this.i().focus():this.l().focus(),Ye.prototype.v.call(this)},yD.prototype.o=function(){this.H=this.w=null,Ye.prototype.o.call(this)},Mn(yD.prototype,{l:Gd,U:fp,P:tE,M:nE,j:rE,i:ZM,B:YM,ea:Z7,u:Y7,ua:hs,pa:rs,ba:xs}),Zt(Er,Ye),Er.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Er.K.v.call(this)},Er.prototype.o=function(){this.i=null,Er.K.o.call(this)},Mn(Er.prototype,{l:hs,w:rs,u:xs}),Zt(QM,Er),Zt(Q7,Er),Zt(J7,Er),Zt(X7,Er),Zt(e9,Er),Zt(t9,Er),Zt(n9,Er),Zt(r9,Er),Zt(i9,Er),Zt(s9,Er),Zt(o9,Er),Zt(a9,Er),p(bD,Ye),bD.prototype.v=function(){var s=this;gi(this,this.l(),function(){s.i()}),this.l().focus(),Ye.prototype.v.call(this)},bD.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(bD.prototype,{l:rs}),mr.anonymousUserMismatch=function(s,d){var m=new bD(function(){m.m(),Ur(s,d)});m.render(d),Pn(s,m)},p(eR,Ye),eR.prototype.I=function(s,d,m,E){return s.apply(null,d).then(m,E)},mr.callback=function(s,d,m){var E=new eR;E.render(d),Pn(s,E),m=m||C9(s),xn(s,m.then(function(D){h9(s,E,D)},function(D){if((D=vD(D))&&("auth/account-exists-with-different-credential"==D.code||"auth/email-already-in-use"==D.code)&&D.email&&D.credential)cz(new MU(D.email,D.credential),cn(s)),p9(s,E,D.email);else if(D&&"auth/user-cancelled"==D.code){var x=pc(cn(s)),B=Ar(D);x&&x.a?p9(s,E,x.g,B):x?c9(s,E,x.g,B):tR(s,E,D)}else D&&"auth/credential-already-in-use"==D.code||(D&&"auth/operation-not-supported-in-this-environment"==D.code&&XM(s)?h9(s,E,{user:null,credential:null}):D&&"auth/admin-restricted-operation"==D.code&&Qm(et(s))?(E.m(),gc(cn(s)),Ut("handleUnauthorizedUser",s,d,null,null)):tR(s,E,D))}))},p(ID,Ye),ID.prototype.v=function(){var s=this;gi(this,this.l(),function(){s.i()}),this.l().focus(),Ye.prototype.v.call(this)},ID.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(ID.prototype,{l:rs}),mr.differentDeviceError=function(s,d){var m=new ID(function(){m.m(),Ur(s,d)});m.render(d),Pn(s,m)},p(CD,Ye),CD.prototype.v=function(){var s=this;gi(this,Jn(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),Ye.prototype.v.call(this)},CD.prototype.o=function(){this.l=this.i=null,Ye.prototype.o.call(this)},Mn(CD.prototype,{u:hs,B:rs,w:xs}),p(TD,Ye),TD.prototype.v=function(){this.H(),this.B(this.l),X0(this,this.i(),this.l),this.i().focus(),Ye.prototype.v.call(this)},TD.prototype.o=function(){this.l=null,Ye.prototype.o.call(this)},Mn(TD.prototype,{i:DD,w:rR,M:nR,H:g9,u:m9,U:hs,P:rs,B:xs}),p(SD,Ye),SD.prototype.v=function(){var s=this;gi(this,Jn(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),Ye.prototype.v.call(this)},SD.prototype.o=function(){this.l=this.i=null,Ye.prototype.o.call(this)},Mn(SD.prototype,{u:hs,B:rs,w:xs}),mr.passwordReset=function(s,d,m,E){xn(s,zn(s).verifyPasswordResetCode(m).then(function(D){var x=new TD(D,function(){!function oue(s,d,m,E,D){var x=m.u();x&&xn(s,m.I(en(zn(s).confirmPasswordReset,zn(s)),[E,x],function(){m.m();var B=new r9(D);B.render(d),Pn(s,B)},function(B){_9(s,d,m,B)}))}(s,d,x,m,E)});x.render(d),Pn(s,x)},function(){_9(s,d)}))},mr.emailChangeRevocation=function(s,d,m){var E=null;xn(s,zn(s).checkActionCode(m).then(function(D){return E=D.data.email,zn(s).applyActionCode(m)}).then(function(){!function aue(s,d,m){var E=new CD(m,function(){xn(s,E.I(en(zn(s).sendPasswordResetEmail,zn(s)),[m],function(){E.m(),(E=new QM(m,void 0,Wi(et(s)),zi(et(s)))).render(d),Pn(s,E)},function(){E.a(J8().toString())}))});E.render(d),Pn(s,E)}(s,d,E)},function(){var D=new s9;D.render(d),Pn(s,D)}))},mr.emailVerification=function(s,d,m,E){xn(s,zn(s).applyActionCode(m).then(function(){var D=new Q7(E);D.render(d),Pn(s,D)},function(){var D=new J7;D.render(d),Pn(s,D)}))},mr.revertSecondFactorAddition=function(s,d,m){var E=null,D=null;xn(s,zn(s).checkActionCode(m).then(function(x){return E=x.data.email,D=x.data.multiFactorInfo,zn(s).applyActionCode(m)}).then(function(){!function uue(s,d,m,E){var D=new SD(E.factorId,function(){D.I(en(zn(s).sendPasswordResetEmail,zn(s)),[m],function(){D.m(),(D=new QM(m,void 0,Wi(et(s)),zi(et(s)))).render(d),Pn(s,D)},function(){D.a(J8().toString())})},E.phoneNumber);D.render(d),Pn(s,D)}(s,d,E,D)},function(){var x=new t9;x.render(d),Pn(s,x)}))},mr.verifyAndChangeEmail=function(s,d,m,E){var D=null;xn(s,zn(s).checkActionCode(m).then(function(x){return D=x.data.email,zn(s).applyActionCode(m)}).then(function(){var x=new X7(D,E);x.render(d),Pn(s,x)},function(){var x=new e9;x.render(d),Pn(s,x)}))},p(AD,Ye),AD.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),iR(this.i(),(this.i().value||"").length),Ye.prototype.v.call(this)},AD.prototype.o=function(){this.u=this.l=null,Ye.prototype.o.call(this)},Mn(AD.prototype,{i:Gd,M:fp,w:tE,H:nE,j:rE,U:hs,P:rs,B:xs}),mr.emailLinkConfirmation=function(s,d,m,E,D,x){var B=new AD(function(){var ee=B.j();ee?(B.m(),E(s,d,ee,m)):B.i().focus()},function(){B.m(),Ur(s,d,D||void 0)},D||void 0,Wi(et(s)),zi(et(s)));B.render(d),Pn(s,B),x&&B.a(x)},p(xD,Ye),xD.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},xD.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(xD.prototype,{l:hs,u:xs}),mr.emailLinkNewDeviceLinking=function(s,d,m,E){var D=new Um(m);if(m=D.a.a.get(es.PROVIDER_ID)||null,x8(D,null),m){var x=new xD(uD(et(s),m),function(){x.m(),E(s,d,D.toString())},Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x)}else Ur(s,d)},p(sR,Ye),mr.emailLinkSignInCallback=lB,p(ND,Ye),ND.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},ND.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(ND.prototype,{l:hs,u:xs}),mr.emailLinkSignInLinking=function(s,d,m){var E=pc(cn(s));if(gc(cn(s)),E){var D=E.a.providerId,x=new ND(m,uD(et(s),D),function(){!function due(s,d,m,E){var D=li(d);oB(s,d,m,function(){Ur(s,D,m)},function(x){if(!x.name||"cancel"!=x.name){var B=Ar(x);x&&"auth/network-request-failed"==x.code?d.a(B):(d.m(),Ur(s,D,m,B))}},E)}(s,x,m,E)},Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x)}else Ur(s,d)},p(MD,Ye),MD.prototype.v=function(){var s=this;gi(this,this.l(),function(){s.i()}),gi(this,Jn(this,"firebaseui-id-trouble-getting-email-link"),function(){s.u()}),this.l().focus(),Ye.prototype.v.call(this)},MD.prototype.o=function(){this.i=this.u=null,Ye.prototype.o.call(this)},Mn(MD.prototype,{l:rs}),mr.emailLinkSignInSent=function(s,d,m,E,D){var x=new MD(m,function(){x.m(),Ut("emailNotReceived",s,d,m,E,D)},function(){x.m(),E()},Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x)},p(RD,Ye),RD.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ye.prototype.v.call(this)},RD.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(RD.prototype,{u:hs,B:rs,w:xs}),mr.emailMismatch=function(s,d,m){var E=pc(cn(s));if(E){var D=new RD(m.user.email,E.g,function(){var x=D;gc(cn(s)),Wd(s,x,m)},function(){var x=m.credential.providerId,B=li(D);D.m(),Ut(E.a?"federatedLinking":"federatedSignIn",s,B,E.g,x)},Wi(et(s)),zi(et(s)));D.render(d),Pn(s,D)}else Ur(s,d)},p(iE,Ye),iE.prototype.v=function(){var s=this;gi(this,this.u(),function(){s.i()}),gi(this,this.Da(),function(){s.l()}),this.u().focus(),Ye.prototype.v.call(this)},iE.prototype.Da=function(){return Jn(this,"firebaseui-id-resend-email-link")},iE.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},Mn(iE.prototype,{u:rs}),mr.emailNotReceived=function(s,d,m,E,D){var x=new iE(function(){oB(s,x,m,E,function(B){B=Ar(B),x.a(B)},D)},function(){x.m(),Ur(s,d,m)},Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x)},p(sE,Ye),sE.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},sE.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(sE.prototype,{l:hs,u:xs}),mr.federatedLinking=function(s,d,m,E,D){var x=pc(cn(s));if(x&&x.a){var B=new sE(m,uD(et(s),E),function(){ED(s,B,E,m)},Wi(et(s)),zi(et(s)));B.render(d),Pn(s,B),D&&B.a(D)}else Ur(s,d)},mr.federatedRedirect=function(s,d,m){var E=new sR;E.render(d),Pn(s,E),ED(s,E,d=j0(et(s))[0],m)},mr.federatedSignIn=function(s,d,m,E,D){var x=new sE(m,uD(et(s),E),function(){ED(s,x,E,m)},Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x),D&&x.a(D)},mr.passwordLinking=function(s,d,m){var E=pc(cn(s));gc(cn(s));var D=E&&E.a;if(D){var x=new eE(m,function(){!function hue(s,d,m,E){var D=d.u();D?xn(s,d.I(en(s.Xb,s),[m,D],function(x){return x=x.user.linkWithCredential(E).then(function(B){return Wd(s,d,{user:B.user,credential:E,operationType:B.operationType,additionalUserInfo:B.additionalUserInfo})}),xn(s,x),x},function(x){if(!x.name||"cancel"!=x.name)switch(x.code){case"auth/wrong-password":Ri(d.i(),!1),As(d.B(),Ar(x));break;case"auth/too-many-requests":d.a(Ar(x));break;default:Da("signInWithEmailAndPassword: "+x.message,void 0),d.a(Ar(x))}})):d.i().focus()}(s,x,m,D)},function(){x.m(),Ut("passwordRecovery",s,d,m)},Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x)}else Ur(s,d)},p(kD,Ye),kD.prototype.v=function(){this.B(),this.H(this.l,this.u),Ss(this.i())||this.i().focus(),X0(this,this.i(),this.l),Ye.prototype.v.call(this)},kD.prototype.o=function(){this.u=this.l=null,Ye.prototype.o.call(this)},Mn(kD.prototype,{i:Gd,w:fp,B:tE,M:nE,j:rE,U:hs,P:rs,H:xs}),mr.passwordRecovery=function(s,d,m,E,D){var x=new kD(function(){!function fue(s,d){var m=d.j();if(m){var E=li(d);xn(s,d.I(en(zn(s).sendPasswordResetEmail,zn(s)),[m],function(){d.m();var D=new QM(m,function(){D.m(),Ur(s,E)},Wi(et(s)),zi(et(s)));D.render(E),Pn(s,D)},function(D){Ri(d.i(),!1),As(d.w(),Ar(D))}))}else d.i().focus()}(s,x)},E?void 0:function(){x.m(),Ur(s,d)},m,Wi(et(s)),zi(et(s)));x.render(d),Pn(s,x),D&&x.a(D)},mr.passwordSignIn=function(s,d,m,E){var D=new yD(function(){!function nue(s,d){var m=d.j(),E=d.u();if(m)if(E){var D=jt.Z.auth.EmailAuthProvider.credential(m,E);xn(s,d.I(en(s.bc,s),[m,E],function(x){return Wd(s,d,{user:x.user,credential:D,operationType:x.operationType,additionalUserInfo:x.additionalUserInfo})},function(x){if(!x.name||"cancel"!=x.name)switch(x.code){case"auth/email-already-in-use":break;case"auth/email-exists":Ri(d.l(),!1),As(d.U(),Ar(x));break;case"auth/too-many-requests":case"auth/wrong-password":Ri(d.i(),!1),As(d.B(),Ar(x));break;default:Da("verifyPassword: "+x.message,void 0),d.a(Ar(x))}}))}else d.i().focus();else d.l().focus()}(s,D)},function(){var x=D.M();D.m(),Ut("passwordRecovery",s,d,x)},m,Wi(et(s)),zi(et(s)),E);D.render(d),Pn(s,D)},p(OD,Ye),OD.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(_D(this,this.i(),this.u()),_D(this,this.u(),this.l())):_D(this,this.i(),this.l()),this.w&&X0(this,this.l(),this.w),Ss(this.i())?this.B&&!Ss(this.u())?this.u().focus():this.l().focus():this.i().focus(),Ye.prototype.v.call(this)},OD.prototype.o=function(){this.H=this.w=null,Ye.prototype.o.call(this)},Mn(OD.prototype,{i:Gd,U:fp,ea:tE,jb:nE,j:rE,u:cB,Bc:dB,Ja:function(){var s=cB.call(this),d=dB.call(this);Z0(this,s,function(){Y0(d)&&(Ri(s,!0),Sa(d))})},M:function(){var s=cB.call(this),d=dB.call(this),m=Ss(s);return Ri(s,m=!/^[\s\xa0]*$/.test(null==m?"":String(m))),m?(Sa(d),d=!0):(As(d,or("Enter your account name").toString()),d=!1),d?Io(Ss(s)):null},l:DD,ba:rR,lb:nR,ua:g9,P:m9,Nb:hs,Mb:rs,pa:xs}),mr.passwordSignUp=function(s,d,m,E,D,x){var ee=new OD(Az(et(s)),function(){!function pue(s,d){var m=Az(et(s)),E=d.j(),D=null;m&&(D=d.M());var x=d.P();if(E){if(m){if(!D)return void d.u().focus();D=fc(D)}if(x){var B=jt.Z.auth.EmailAuthProvider.credential(E,x);xn(s,d.I(en(s.Yb,s),[E,x],function(ee){var Le={user:ee.user,credential:B,operationType:ee.operationType,additionalUserInfo:ee.additionalUserInfo};return m?(ee=ee.user.updateProfile({displayName:D}).then(function(){return Wd(s,d,Le)}),xn(s,ee),ee):Wd(s,d,Le)},function(ee){if(!ee.name||"cancel"!=ee.name){var Le=vD(ee);switch(ee=Ar(Le),Le.code){case"auth/email-already-in-use":return function gue(s,d,m,E){function D(){var B=Ar(E);Ri(d.i(),!1),As(d.U(),B),d.i().focus()}var x=zn(s).fetchSignInMethodsForEmail(m).then(function(B){B.length?D():(B=li(d),d.m(),Ut("passwordRecovery",s,B,m,!1,eW().toString()))},function(){D()});return xn(s,x),x}(s,d,E,Le);case"auth/too-many-requests":ee=or("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Ri(d.l(),!1),As(d.ba(),ee);break;case"auth/admin-restricted-operation":Qm(et(s))?(ee=li(d),d.m(),Ut("handleUnauthorizedUser",s,ee,E,jt.Z.auth.EmailAuthProvider.PROVIDER_ID)):d.a(ee);break;default:Da(Le="setAccountInfo: "+iz(Le),void 0),d.a(ee)}}}))}else d.l().focus()}else d.i().focus()}(s,ee)},D?void 0:function B(){ee.m(),Ur(s,d)},m,E,Wi(et(s)),zi(et(s)),x);ee.render(d),Pn(s,ee)},p(oE,Ye),oE.prototype.v=function(){var s=this;this.U(this.jb),sl(this.i,"tick",this.w,!1,this),this.i.start(),gi(this,Jn(this,"firebaseui-id-change-phone-number-link"),function(){s.P()}),gi(this,this.Da(),function(){s.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Ye.prototype.v.call(this)},oE.prototype.o=function(){this.M=this.H=this.l=this.P=null,GM(this.i),Wm(this.i,"tick",this.w),this.i=null,Ye.prototype.o.call(this)},oE.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(GM(this.i),Wm(this.i,"tick",this.w),this.ua(),this.lb())},Mn(oE.prototype,{u:hB,pa:v9,Ja:function(s){var d=hB.call(this),m=v9.call(this);Z0(this,d,function(){Y0(m)&&(Ri(d,!0),Sa(m))}),s&&mD(this,d,function(){s()})},ba:function(){var s=Io(Ss(hB.call(this))||"");return/^\d{6}$/.test(s)?s:null},Fb:E9,U:function(s){eU(E9.call(this),or("Resend code in "+(9<s?"0:":"0:0")+s).toString())},ua:function(){Sa(this.Fb())},Da:function(){return Jn(this,"firebaseui-id-resend-link")},lb:function(){As(this.Da())},Nb:hs,Mb:rs,ea:xs}),mr.phoneSignInFinish=function(s,d,m,E,D,x){var B=new oE(function(){B.m(),Ut("phoneSignInStart",s,d,m)},function(){!function mue(s,d,m,E){function D(B){d.u().focus(),Ri(d.u(),!1),As(d.pa(),B)}var x=d.ba();x?(d.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",or("Verifying...").toString()),xn(s,d.I(en(E.confirm,E),[x],function(B){d.h(),d.$("firebaseui-icon-done",or("Verified!").toString());var ee=setTimeout(function(){d.h(),d.m();var Le={user:al(s).currentUser,credential:null,operationType:B.operationType,additionalUserInfo:B.additionalUserInfo};Wd(s,d,Le,!0)},1e3);xn(s,function(){d&&d.h(),clearTimeout(ee)})},function(B){if(B.name&&"cancel"==B.name)d.h();else{var ee=vD(B);switch(B=Ar(ee),ee.code){case"auth/credential-already-in-use":d.h();break;case"auth/code-expired":ee=li(d),d.h(),d.m(),Ut("phoneSignInStart",s,ee,m,B);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":d.h(),D(B);break;default:d.h(),d.a(B)}}}))):D(or("Wrong code. Try again.").toString())}(s,B,m,D)},function(){B.m(),Ur(s,d)},function(){B.m(),Ut("phoneSignInStart",s,d,m)},$U(m),E,Wi(et(s)),zi(et(s)));B.render(d),Pn(s,B),x&&B.a(x)};var _ue=!(xi||Wn("Safari")&&!(R8()||Wn("Coast")||Wn("Opera")||Wn("Edge")||Wn("Firefox")||Wn("FxiOS")||Wn("Silk")||Wn("Android")));function oR(s,d){return/-[a-z]/.test(d)?null:_ue&&s.dataset?!Wn("Android")||R8()||Wn("Firefox")||Wn("FxiOS")||Wn("Opera")||Wn("Silk")||d in s.dataset?void 0===(s=s.dataset[d])?null:s:null:s.getAttribute("data-"+String(d).replace(/([A-Z])/g,"-$1").toLowerCase())}function yue(s,d,m){var E=this;s=zC(i7,{items:s},null,this.s),o7.call(this,s,!0,!0),m&&(m=function vue(s,d){s=(s||document).getElementsByTagName("BUTTON");for(var m=0;m<s.length;m++)if(oR(s[m],"listboxid")===d)return s[m];return null}(s,m))&&(m.focus(),function zae(s,d){var m=(d=d||oM(document))||oM(document),E=Zz(s),D=Zz(m);if(!xi||9<=Number(HC)){B=WM(m,"borderLeftWidth");var x=WM(m,"borderRightWidth");ee=WM(m,"borderTopWidth"),Le=WM(m,"borderBottomWidth"),x=new K0(parseFloat(ee),parseFloat(x),parseFloat(Le),parseFloat(B))}else{var B=zM(m,"borderLeft");x=zM(m,"borderRight");var ee=zM(m,"borderTop"),Le=zM(m,"borderBottom");x=new K0(ee,x,Le,B)}m==oM(document)?(B=E.a-m.scrollLeft,E=E.g-m.scrollTop,!xi||10<=Number(HC)||(B+=x.left,E+=x.top)):(B=E.a-D.a-x.left,E=E.g-D.g-x.top),D=s.offsetWidth,x=s.offsetHeight,ee=Co&&!D&&!x,s=P(D)&&!ee||!s.getBoundingClientRect?new QV(D,x):new QV((s=Kz(s)).right-s.left,s.bottom-s.top),D=m.clientHeight-s.height,x=m.scrollLeft,ee=m.scrollTop,m=new op(x+=Math.min(B,Math.max(B-(m.clientWidth-s.width),0)),ee+=Math.min(E,Math.max(E-D,0))),d.scrollLeft=m.a,d.scrollTop=m.g}(m,s)),gi(this,s,function(D){(D=(D=q8(D.target,"firebaseui-id-list-box-dialog-button"))&&oR(D,"listboxid"))&&(KM.call(E),d(D))})}function Xm(){return Jn(this,"firebaseui-id-phone-number")}function w9(){return Jn(this,"firebaseui-id-country-selector")}function fB(){return Jn(this,"firebaseui-id-phone-number-error")}function Eue(s,d){var D,m=s.a,E=pB("1-US-0",m);if(!(D=d&&pB(d,m)?d:E?"1-US-0":0<m.length?m[0].c:null))throw Error("No available default country");aR.call(this,D,s)}function pB(s,d){return!(!(s=Ym(s))||!Hs(d,s))}function gB(s){return"firebaseui-flag-"+s.f}function bue(s){var d=this;yue.call(this,function wue(s){return s.map(function(d){return{id:d.c,Ma:"firebaseui-flag "+gB(d),label:d.name+" \u200e+"+d.b}})}(s.a),function(m){aR.call(d,m,s,!0),d.O().focus()},this.Ba)}function aR(s,d,m){var E=Ym(s);E&&(m&&(d=VM(d,m=Io(Ss(Xm.call(this))||""))).length&&d[0].b!=E.b&&(m="+"+E.b+m.substr(d[0].b.length+1),Oz(Xm.call(this),m)),d=Ym(this.Ba),this.Ba=s,s=Jn(this,"firebaseui-id-country-selector-flag"),d&&_c(s,gB(d)),mc(s,gB(E)),eU(Jn(this,"firebaseui-id-country-selector-code"),"\u200e+"+E.b))}function PD(s,d,m,E,D,x,B,ee,Le,dt){Ye.call(this,G7,{Gb:d,Aa:Le||null,Va:!!m,ia:!!x},dt,"phoneSignInStart",{F:E,D}),this.H=ee||null,this.M=d,this.l=s,this.w=m||null,this.pa=B||null}function b9(s,d,m,E){try{var D=d.U(YU)}catch{return}D?cD?(d.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",or("Verifying...").toString()),xn(s,d.I(en(s.cc,s),[$U(D),m],function(x){var B=li(d);d.$("firebaseui-icon-done",or("Code sent!").toString());var ee=setTimeout(function(){d.h(),d.m(),Ut("phoneSignInFinish",s,B,D,15,x)},1e3);xn(s,function(){d&&d.h(),clearTimeout(ee)})},function(x){if(d.h(),!x.name||"cancel"!=x.name){grecaptcha.reset(Rz),cD=null;var B=x&&x.message||"";if(x.code)switch(x.code){case"auth/too-many-requests":B=or("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return d.O().focus(),void As(d.B(),iU().toString());case"auth/admin-restricted-operation":if(Qm(et(s)))return x=li(d),d.m(),void Ut("handleUnauthorizedUser",s,x,$U(D),jt.Z.auth.PhoneAuthProvider.PROVIDER_ID);B=Ar(x);break;default:B=Ar(x)}d.a(B)}}))):H0?As(d.u(),or("Solve the reCAPTCHA").toString()):!H0&&E&&d.i().click():(d.O().focus(),As(d.B(),iU().toString()))}function LD(s,d,m,E,D){Ye.call(this,H7,{Sb:d},D,"providerSignIn",{F:m,D:E}),this.i=s}function FD(s,d,m,E,D,x,B){Ye.call(this,c7,{email:m,Va:!!d,ia:!!x},B,"signIn",{F:E,D}),this.i=s,this.u=d}function VD(s,d,m,E,D,x,B){Ye.call(this,S7,{kc:s,yb:m,Eb:!!E},B,"unauthorizedUser",{F:D,D:x}),this.l=d,this.i=E}function UD(s,d,m,E,D,x){Ye.call(this,A7,{email:s},x,"unsupportedProvider",{F:E,D}),this.l=d,this.i=m}function yc(s,d){this.$=!1;var m=mB(d);if(BD[m])throw Error('An AuthUI instance already exists for the key "'+m+'"');BD[m]=this,this.a=s,this.u=null,this.Y=!1,I9(this.a),this.h=jt.Z.initializeApp({apiKey:s.app.options.apiKey,authDomain:s.app.options.authDomain},s.app.name+"-firebaseui-temp").auth(),(s=s.emulatorConfig)&&this.h.useEmulator(s.protocol+"://"+s.host+(null===(m=s.port)?"":":"+m),s.options),I9(this.h),this.h.setPersistence&&this.h.setPersistence(jt.Z.auth.Auth.Persistence.SESSION),this.oa=d,this.ca=new Mae,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=wU.Xa(),this.j=this.C=null,this.da=this.A=!1}function I9(s){s&&s.INTERNAL&&s.INTERNAL.logFramework&&s.INTERNAL.logFramework("FirebaseUI-web")}p(PD,Ye),PD.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||_D(this,this.O(),this.i()),X0(this,this.i(),this.l),this.O().focus(),iR(this.O(),(this.O().value||"").length),Ye.prototype.v.call(this)},PD.prototype.o=function(){this.w=this.l=null,Ye.prototype.o.call(this)},Mn(PD.prototype,{Cb:iB,O:Xm,B:fB,ea:function(s,d,m){var E=this,D=Xm.call(this),x=w9.call(this),B=fB.call(this),ee=s||aD,Le=ee.a;if(0==Le.length)throw Error("No available countries provided.");Eue.call(E,ee,d),gi(this,x,function(){bue.call(E,ee)}),Z0(this,D,function(){Y0(B)&&(Ri(D,!0),Sa(B));var dt=Io(Ss(D)||""),Gt=Ym(this.Ba),wr=VM(ee,dt);dt=pB("1-US-0",Le),wr.length&&wr[0].b!=Gt.b&&aR.call(E,"1"==(Gt=wr[0]).b&&dt?"1-US-0":Gt.c,ee)}),m&&mD(this,D,function(){m()})},U:function(s){var d=Io(Ss(Xm.call(this))||""),m=(s=s||aD).a,E=VM(aD,d);if(E.length&&!Hs(m,E[0]))throw Oz(Xm.call(this)),Xm.call(this).focus(),As(fB.call(this),or("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return m=Ym(this.Ba),E.length&&E[0].b!=m.b&&aR.call(this,E[0].c,s),E.length&&(d=d.substr(E[0].b.length+1)),d?new yz(this.Ba,d):null},Ja:w9,ba:function(){return Jn(this,"firebaseui-recaptcha-container")},u:function(){return Jn(this,"firebaseui-id-recaptcha-error")},i:hs,ua:rs,P:xs}),mr.phoneSignInStart=function(s,d,m,E){var D=function Rae(s){var d=null;if(BM(s).forEach(function(E){E.provider==jt.Z.auth.PhoneAuthProvider.PROVIDER_ID&&yt(E.recaptchaParameters)&&!Array.isArray(E.recaptchaParameters)&&(d=b0(E.recaptchaParameters))}),d){var m=[];$ae.forEach(function(E){typeof d[E]<"u"&&(m.push(E),delete d[E])}),m.length&&dp('The following provided "recaptchaParameters" keys are not allowed: '+m.join(", "))}return d}(et(s))||{};cD=null,H0=!(D&&"invisible"===D.size);var x=l9(s),B=function Vae(s){var d=(s=Ta(s,jt.Z.auth.PhoneAuthProvider.PROVIDER_ID))&&s.defaultCountry||null;d=d&&gz(d);var m=null;return s&&"string"==typeof s.loginHint&&(m=vz(s.loginHint)),d&&d[0]||m&&Ym(m.a)||null}(et(s)),ee=x?function Fae(s){var d=null;return(s=Ta(s,jt.Z.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof s.loginHint&&(d=vz(s.loginHint)),s&&s.defaultNationalNumber||d&&d.Aa||null}(et(s)):null;B=m&&m.a||B&&B.c||null,m=m&&m.Aa||ee,(ee=HU(et(s)))&&_z(ee),YU=ee?new pz(HU(et(s))):aD;var Le=new PD(function(Gt){b9(s,Le,dt,!(!Gt||!Gt.keyCode))},H0,x?null:function(){dt.clear(),Le.m(),Ur(s,d)},Wi(et(s)),zi(et(s)),x,YU,B,m);Le.render(d),Pn(s,Le),E&&Le.a(E),D.callback=function(Gt){Le.u()&&Sa(Le.u()),cD=Gt,H0||b9(s,Le,dt)},D["expired-callback"]=function(){cD=null};var dt=new jt.Z.auth.RecaptchaVerifier(H0?Le.ba():Le.i(),D,al(s).app);xn(s,Le.I(en(dt.render,dt),[],function(Gt){Rz=Gt},function(Gt){Gt.name&&"cancel"==Gt.name||(Gt=Ar(Gt),Le.m(),Ur(s,d,void 0,Gt))}))},mr.prefilledEmailSignIn=function(s,d,m){var E=new sR;E.render(d),Pn(s,E),xn(s,E.I(en(zn(s).fetchSignInMethodsForEmail,zn(s)),[m],function(D){E.m();var x=!(!XM(s)||!D9(s));d9(s,d,D,m,void 0,x)},function(D){D=Ar(D),E.m(),Ut("signIn",s,d,m,D)}))},p(LD,Ye),LD.prototype.v=function(){this.l(this.i),Ye.prototype.v.call(this)},LD.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(LD.prototype,{l:function(s){function d(B){s(B)}for(var m=this.g?JV("firebaseui-id-idp-button",this.g||this.s.a):[],E=0;E<m.length;E++){var D=m[E];gi(this,D,ds(d,oR(D,"providerId")))}}}),mr.providerSignIn=function(s,d,m,E){var D=new LD(function(x){x==jt.Z.auth.EmailAuthProvider.PROVIDER_ID?(D.m(),aB(s,d,E)):x==jt.Z.auth.PhoneAuthProvider.PROVIDER_ID?(D.m(),Ut("phoneSignInStart",s,d)):"anonymous"==x?function eue(s,d){xn(s,d.I(en(s.$b,s),[],function(m){return d.m(),Wd(s,d,m,!0)},function(m){m.name&&"cancel"==m.name||(Da("ContinueAsGuest: "+m.code,void 0),m=Ar(m),d.a(m))}))}(s,D):ED(s,D,x,E),Xn(s),s.l.cancel()},bz(et(s)),Wi(et(s)),zi(et(s)));D.render(d),Pn(s,D),m&&D.a(m),function Due(s){Xn(s);try{OW(s.l,Iz(et(s)),function Iue(s){var d;return Xn(s),(d=s.Z)||(d=!(!(s=Tz(s=et(s),jt.Z.auth.GoogleAuthProvider.PROVIDER_ID))||"select_account"!==s.prompt)),d}(s)).then(function(d){return!!s.g&&function tue(s,d,m){if(m&&m.credential&&m.clientId===Iz(et(s))){if(Dz(et(s),jt.Z.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var D=JSON.parse(atob(m.credential.split(".")[1])).email}catch{}return ED(s,d,jt.Z.auth.GoogleAuthProvider.PROVIDER_ID,D),Mi(!0)}return function E(x){var B=!1;return x=d.I(en(s.ac,s),[x],function(ee){var Le=li(d);d.m(),Ut("callback",s,Le,Mi(ee)),B=!0},function(ee){if(!(ee.name&&"cancel"==ee.name||ee&&"auth/credential-already-in-use"==ee.code))if(ee&&"auth/email-already-in-use"==ee.code&&ee.email&&ee.credential){var Le=li(d);d.m(),Ut("callback",s,Le,x0(ee))}else ee&&"auth/admin-restricted-operation"==ee.code&&Qm(et(s))?(ee=li(d),d.m(),Ut("handleUnauthorizedUser",s,ee,null,jt.Z.auth.GoogleAuthProvider.PROVIDER_ID)):(ee=Ar(ee),d.a(ee))}),xn(s,x),x.then(function(){return B},function(){return!1})}(jt.Z.auth.GoogleAuthProvider.credential(m.credential))}return m&&d.a(or("The selected credential for the authentication provider is not supported!").toString()),Mi(!1)}(s,s.g,d)})}catch{}}(s)},mr.sendEmailLinkForSignIn=function(s,d,m,E){var D=new eR;D.render(d),Pn(s,D),oB(s,D,m,E,function(x){D.m(),x&&"auth/admin-restricted-operation"==x.code&&Qm(et(s))?Ut("handleUnauthorizedUser",s,d,m,jt.Z.auth.EmailAuthProvider.PROVIDER_ID):(x=Ar(x),Ut("signIn",s,d,m,x))})},p(FD,Ye),FD.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),iR(this.l(),(this.l().value||"").length),Ye.prototype.v.call(this)},FD.prototype.o=function(){this.u=this.i=null,Ye.prototype.o.call(this)},Mn(FD.prototype,{l:Gd,M:fp,w:tE,H:nE,j:rE,U:hs,P:rs,B:xs}),mr.signIn=function(s,d,m,E){var D=XM(s),x=new FD(function(){var B=x,ee=B.j()||"";ee&&c9(s,B,ee)},D?null:function(){x.m(),Ur(s,d,m)},m,Wi(et(s)),zi(et(s)),D);x.render(d),Pn(s,x),E&&x.a(E)},p(VD,Ye),VD.prototype.v=function(){var s=this,d=Jn(this,"firebaseui-id-unauthorized-user-help-link");this.i&&d&&gi(this,d,function(){s.i()}),gi(this,this.u(),function(){s.l()}),this.u().focus(),Ye.prototype.v.call(this)},VD.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},Mn(VD.prototype,{u:rs}),mr.handleUnauthorizedUser=function(s,d,m,E){function D(){Ur(s,d)}E===jt.Z.auth.EmailAuthProvider.PROVIDER_ID?D=function(){aB(s,d)}:E===jt.Z.auth.PhoneAuthProvider.PROVIDER_ID&&(D=function(){Ut("phoneSignInStart",s,d)});var x=null,B=null;E===jt.Z.auth.EmailAuthProvider.PROVIDER_ID&&Cz(et(s))?(x=function Pae(s){return(s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp&&s.disableSignUp.adminEmail||null}(et(s)),B=function Lae(s){if((s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp){var d=s.disableSignUp.helpLink||null;if(d&&"string"==typeof d)return function(){M0(d)}}return null}(et(s))):Qm(et(s))&&(x=function kae(s){return(s=s.a.get("adminRestrictedOperation"))&&s.adminEmail?s.adminEmail:null}(et(s)),B=function Oae(s){if(s=s.a.get("adminRestrictedOperation")||null){var d=s.helpLink||null;if(d&&"string"==typeof d)return function(){M0(d)}}return null}(et(s)));var ee=new VD(m,function(){ee.m(),D()},x,B,Wi(et(s)),zi(et(s)));ee.render(d),Pn(s,ee)},p(UD,Ye),UD.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ye.prototype.v.call(this)},UD.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},Mn(UD.prototype,{u:hs,B:rs,w:xs}),mr.unsupportedProvider=function(s,d,m){var E=new UD(m,function(){E.m(),Ut("passwordRecovery",s,d,m)},function(){E.m(),Ur(s,d,m)},Wi(et(s)),zi(et(s)));E.render(d),Pn(s,E)};var BD={};function mB(s){return s||"[DEFAULT]"}function C9(s){return Xn(s),s.i||(s.i=zd(s,function(d){return d&&!pc(cn(s))?Mi(al(s).getRedirectResult().then(function(m){return m},function(m){if(m&&"auth/email-already-in-use"==m.code&&m.email&&m.credential)throw m;return gp(s,m)})):Mi(zn(s).getRedirectResult().then(function(m){return UM(et(s))&&!m.user&&s.j&&!s.j.isAnonymous?al(s).getRedirectResult():m}))})),s.i}function Pn(s,d){Xn(s),s.g=d}var aE=null;function zn(s){return Xn(s),s.h}function al(s){return Xn(s),s.a}function cn(s){return Xn(s),s.oa}function D9(s){return Xn(s),s.O?s.O.emailHint:void 0}function T9(s){return"signIn"===((s=new Um(s)).a.a.get(es.ub)||null)&&!!s.a.a.get(es.$a)}function S9(s,d,m,E){Xn(s),typeof s.a.languageCode<"u"&&(s.u=s.a.languageCode);var D="en".replace(/_/g,"-");s.a.languageCode=D,s.h.languageCode=D,s.Y=!0,typeof s.a.tenantId<"u"&&(s.h.tenantId=s.a.tenantId),s.ib(m),s.O=E||null;var x=M.document;s.C?s.C.then(function(){"complete"==x.readyState?uR(s,d):QC(window,"load",function(){uR(s,d)})}):"complete"==x.readyState?uR(s,d):QC(window,"load",function(){uR(s,d)})}function uR(s,d){var m=_M(d,"Could not find the FirebaseUI widget element on the page.");if(m.setAttribute("lang","en".replace(/_/g,"-")),aE){var E=aE;Xn(E),pc(cn(E))&&dp("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),aE.reset()}if(aE=s,s.T=m,function Cue(s,d){s.L=null,s.J=new gM(d),s.J.register(),sl(s.J,"pageEnter",function(m){if(s.L!=(m=m&&m.pageId)){var E=et(s);(E=lD(E).uiChanged||null)&&E(s.L,m),s.L=m}})}(s,m),FM(new kU)&&FM(new OU)){d=_M(d,"Could not find the FirebaseUI widget element on the page."),m=(m=tM(m=Hd(),E=BU(et(s).a,"queryParameterForSignInSuccessUrl")))?ip(rM(m)).toString():null;e:{E=Hd();var D=Sz(et(s));for(x in E=tM(E,D)||"",ZU)if(ZU[x].toLowerCase()==E.toLowerCase()){var x=ZU[x];break e}x="callback"}switch(x){case"callback":m&&(x=cn(s),U0(sD,m,x)),s.nb()?Ut("callback",s,d):Ur(s,d,D9(s));break;case"resetPassword":Ut("passwordReset",s,d,wD(),uB());break;case"recoverEmail":Ut("emailChangeRevocation",s,d,wD());break;case"revertSecondFactorAddition":Ut("revertSecondFactorAddition",s,d,wD());break;case"verifyEmail":Ut("emailVerification",s,d,wD(),uB());break;case"verifyAndChangeEmail":Ut("verifyAndChangeEmail",s,d,wD(),uB());break;case"signIn":Ut("emailLinkSignInCallback",s,d,Hd()),M9();break;case"select":m&&(x=cn(s),U0(sD,m,x)),Ur(s,d);break;default:throw Error("Unhandled widget operation.")}(d=lD(d=et(s)).uiShown||null)&&d()}else d=_M(d,"Could not find the FirebaseUI widget element on the page."),(x=new a9(or("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(d),Pn(s,x);d=s.g&&"blank"==s.g.Ga&&GU(et(s)),FU(cn(s))&&!d&&(N9(s,(d=FU(cn(s))).a),Yo(Zm,cn(s)))}function zd(s,d){if(s.A)return d(A9(s));if(xn(s,function(){s.A=!1}),UM(et(s))){var m=new ns(function(E){xn(s,s.a.onAuthStateChanged(function(D){s.j=D,s.A||(s.A=!0,E(d(A9(s))))}))});return xn(s,m),m}return s.A=!0,d(null)}function A9(s){return Xn(s),UM(et(s))&&s.j&&s.j.isAnonymous?s.j:null}function xn(s,d){if(Xn(s),d){s.s.push(d);var m=function(){!function LC(s,d){!function v0(s,d){for(var m=$(s)?s.split(""):s,E=s.length-1;0<=E;--E)E in m&&d.call(void 0,m[E],E,s)}(s,function(E,D){d.call(void 0,E,D,s)&&Xf(s,D)})}(s.s,function(E){return E==d})};"function"!=typeof d&&d.then(m,m)}}function x9(s){typeof s.a.languageCode<"u"&&s.Y&&(s.Y=!1,s.a.languageCode=s.u)}function N9(s,d){s.a.tenantId=d,s.h.tenantId=d}function et(s){return Xn(s),s.ca}function Xn(s){if(s.$)throw Error("AuthUI instance is deleted!")}function M9(){var s=Hd();if(T9(s)){for(var d in s=new Um(s),es)es.hasOwnProperty(d)&&Vm(s.a.a,es[d]);d={state:"signIn",mode:"emailLink",operation:"clear"},M.history&&M.history.replaceState&&M.history.replaceState(d,M.document.title,s.toString())}}function pp(s){return Xn(s),zn(s).signOut()}function gp(s,d,m){if(Xn(s),d&&d.code&&("auth/email-already-in-use"==d.code||"auth/credential-already-in-use"==d.code)){var E=Mz(et(s));return Mi().then(function(){return E(new qC("anonymous-upgrade-merge-conflict",null,m||d.credential))}).then(function(){throw s.g&&(s.g.m(),s.g=null),d})}return x0(d)}function jD(s,d,m,E){Ye.call(this,K7,void 0,E,"providerMatchByEmail",{F:d,D:m}),this.i=s}function lR(s,d,m,E,D){Ye.call(this,q7,{ec:d},D,"selectTenant",{F:m,D:E}),this.i=s}function _B(s){Ye.call(this,m7,void 0,s,"spinner")}function Rue(s){for(var d in this.a=new VU,Gi(this.a,"authDomain"),Gi(this.a,"displayMode",dR),Gi(this.a,"tenants"),Gi(this.a,"callbacks"),Gi(this.a,"tosUrl"),Gi(this.a,"privacyPolicyUrl"),s)if(s.hasOwnProperty(d))try{UU(this.a,d,s[d])}catch{Da('Invalid config: "'+d+'"',void 0)}}function cR(s){return s.a.get("callbacks")||{}}function R9(s){var d=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,d&&!s&&dp("Privacy Policy URL is missing, the link will not be displayed."),d&&s){if("function"==typeof d)return d;if("string"==typeof d)return function(){M0(d)}}return null}function k9(s){var d=s.a.get("tosUrl")||null,m=s.a.get("privacyPolicyUrl")||null;if(m&&!d&&dp("Terms of Service URL is missing, the link will not be displayed."),d&&m){if("function"==typeof m)return m;if("string"==typeof m)return function(){M0(m)}}return null}function yB(s,d){if(!(s=s.a.get("tenants"))||!s.hasOwnProperty(d)&&!s.hasOwnProperty(hR))throw Error("Invalid tenant configuration!")}function O9(s,d,m){if(!(s=s.a.get("tenants")))throw Error("Invalid tenant configuration!");var E=[];if(!(s=s[d]||s[hR]))return Da("Invalid tenant configuration: "+d+" is not configured!",void 0),E;if(!(d=s.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return d.forEach(function(D){if("string"==typeof D)E.push(D);else if("string"==typeof D.provider){var x=D.hd;x&&m?(x instanceof RegExp?x:new RegExp("@"+x.replace(".","\\.")+"$")).test(m)&&E.push(D.provider):E.push(D.provider)}else Da(D="Invalid tenant configuration: signInOption "+JSON.stringify(D)+" is invalid!",void 0)}),E}(n=yc.prototype).nb=function(){return Xn(this),!!FU(cn(this))||T9(Hd())},n.start=function(s,d){S9(this,s,d)},n.Db=function(){Xn(this),this.Z=!0},n.reset=function(){Xn(this);var s=this;this.T&&this.T.removeAttribute("lang"),this.J&&function rae(s){var d=hU(s.N());Ca[d]&&Ca[d].length&&(function VV(s,d){e:{for(var m=s.length,E=$(s)?s.split(""):s,D=0;D<m;D++)if(D in E&&d.call(void 0,E[D],D,s)){d=D;break e}d=-1}0<=d&&Xf(s,d)}(Ca[d],function(m){return m==s}),Ca[d].length||delete Ca[d])}(this.J),x9(this),this.O=null,M9(),Yo(Zm,cn(this)),Xn(this),this.l.cancel(),this.i=Mi({user:null,credential:null}),aE==this&&(aE=null),this.T=null;for(var d=0;d<this.s.length;d++)"function"==typeof this.s[d]?this.s[d]():this.s[d].cancel&&this.s[d].cancel();this.s=[],gc(cn(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=pp(this).then(function(){s.C=null},function(){s.C=null}))},n.ib=function(s){Xn(this);var m,d=this.ca;for(m in s)try{UU(d.a,m,s[m])}catch{Da('Invalid config: "'+m+'"',void 0)}Doe&&UU(d.a,"popupMode",!1),HU(d),!this.da&&WU(et(this))&&(dp("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},n.Wb=function(){Xn(this);var s=et(this),d=BU(s.a,"widgetUrl");s=Sz(s);for(var D,m=d.search(C8),E=0,x=[];0<=(D=I8(d,E,s,m));)x.push(d.substring(E,D)),E=Math.min(d.indexOf("&",D)+1||m,m);x.push(d.substr(E)),d=x.join("").replace(poe,"$1"),(s+=m="="+encodeURIComponent("select"))?(0>(m=d.indexOf("#"))&&(m=d.length),0>(E=d.indexOf("?"))||E>m?(E=m,D=""):D=d.substring(E+1,m),m=(d=[d.substr(0,E),D,d.substr(m)])[1],d[1]=s?m?m+"&"+s:s:m,m=d[0]+(d[1]?"?"+d[1]:"")+d[2]):m=d,et(this).a.get("popupMode")?(m=m||"about:blank",(s={width:500,height:600,top:0<(s=(window.screen.availHeight-600)/2)?s:0,left:0<(d=(window.screen.availWidth-500)/2)?d:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=s.target||m.target||"google_popup",s.width=s.width||690,s.height=s.height||500,(s=AW(m,s))&&s.focus()):A0(window.location,m)},n.Wa=function(){var s=this;return Xn(this),this.h.app.delete().then(function(){var d=mB(cn(s));delete BD[d],s.reset(),s.$=!0})},n.Ib=function(s,d){Xn(this);var m=this,E=function cae(){for(var s=32,d=[];0<s;)d.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return d.join("")}();if(!$0(et(this)))return x0(Error("Email link sign-in should be enabled to trigger email sending."));var D=function Bae(s){if($0(s)){var d={url:Hd(),handleCodeInApp:!0};(s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof s.emailLinkSignIn&&Pm(d,s.emailLinkSignIn()),s=d.url;var m=Hd();m instanceof ep||(m=WV(m)),s instanceof ep||(s=WV(s));var E=m;m=new ep(E);var D=!!s.j;D?$V(m,s.j):D=!!s.A,D?m.A=s.A:D=!!s.h,D?m.h=s.h:D=null!=s.C;var x=s.g;if(D)HV(m,s.C);else if(D=!!s.g)if("/"!=x.charAt(0)&&(E.h&&!E.g?x="/"+x:-1!=(E=m.g.lastIndexOf("/"))&&(x=m.g.substr(0,E+1)+x)),".."==x||"."==x)x="";else if(-1!=x.indexOf("./")||-1!=x.indexOf("/.")){E=0==x.lastIndexOf("/",0),x=x.split("/");for(var B=[],ee=0;ee<x.length;){var Le=x[ee++];"."==Le?E&&ee==x.length&&B.push(""):".."==Le?((1<B.length||1==B.length&&""!=B[0])&&B.pop(),E&&ee==x.length&&B.push("")):(B.push(Le),E=!0)}x=B.join("/")}return D?m.g=x:D=""!==s.a.toString(),D?GV(m,S8(s.a)):D=!!s.s,D&&(m.s=s.s),d.url=m.toString(),d}return null}(et(this)),x=new Um(D.url);return function woe(s,d){d?s.a.a.set(es.Sa,d):Vm(s.a.a,es.Sa)}(x,E),d&&d.a&&(function Nae(s,d,m){U0(oD,tz(s,JSON.stringify(WW(d))),m)}(E,d,cn(this)),x8(x,d.a.providerId)),function boe(s,d){null!==d?s.a.a.set(es.Qa,d?"1":"0"):Vm(s.a.a,es.Qa)}(x,function Uae(s){return!(!(s=Ta(s,jt.Z.auth.EmailAuthProvider.PROVIDER_ID))||!s.forceSameDevice)}(et(this))),zd(this,function(B){return B&&((B=B.uid)?x.a.a.set(es.Pa,B):Vm(x.a.a,es.Pa)),D.url=x.toString(),zn(m).sendSignInLinkToEmail(s,D)}).then(function(){var B=cn(m),ee={};ee.email=s,U0(F0,tz(E,JSON.stringify(ee)),B)},function(B){throw Yo(oD,cn(m)),Yo(F0,cn(m)),B})},n.bc=function(s,d){Xn(this);var m=this;return zn(this).signInWithEmailAndPassword(s,d).then(function(E){return zd(m,function(D){return D?pp(m).then(function(){return gp(m,{code:"auth/email-already-in-use"},jt.Z.auth.EmailAuthProvider.credential(s,d))}):E})})},n.Yb=function(s,d){Xn(this);var m=this;return zd(this,function(E){if(E){var D=jt.Z.auth.EmailAuthProvider.credential(s,d);return E.linkWithCredential(D)}return zn(m).createUserWithEmailAndPassword(s,d)})},n.ac=function(s){Xn(this);var d=this;return zd(this,function(m){return m?m.linkWithCredential(s).then(function(E){return E},function(E){if(E&&"auth/email-already-in-use"==E.code&&E.email&&E.credential)throw E;return gp(d,E,s)}):zn(d).signInWithCredential(s)})},n.dc=function(s){Xn(this);var d=this,m=this.i;return this.i=null,zd(this,function(E){return E&&!pc(cn(d))?E.linkWithRedirect(s):zn(d).signInWithRedirect(s)}).then(function(){},function(E){throw d.i=m,E})},n.cc=function(s,d){Xn(this);var m=this;return zd(this,function(E){return E?E.linkWithPhoneNumber(s,d).then(function(D){return new IU(D,function(x){if("auth/credential-already-in-use"==x.code)return gp(m,x);throw x})}):al(m).signInWithPhoneNumber(s,d).then(function(D){return new IU(D)})})},n.$b=function(){return Xn(this),al(this).signInAnonymously()},n.Xb=function(s,d){return Xn(this),zn(this).signInWithEmailAndPassword(s,d)},p(jD,Ye),jD.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),iR(this.l(),(this.l().value||"").length),Ye.prototype.v.call(this)},jD.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},Mn(jD.prototype,{l:Gd,H:fp,u:tE,B:nE,j:rE,M:hs,w:xs}),p(lR,Ye),lR.prototype.v=function(){(function Mue(s,d){function m(ee){d(ee)}for(var E=s.g?JV("firebaseui-id-tenant-selection-button",s.g||s.s.a):[],D=0;D<E.length;D++){var x=E[D];gi(s,x,ds(m,oR(x,"tenantId")))}})(this,this.i),Ye.prototype.v.call(this)},lR.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},p(_B,Ye);var Lue=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],dR="optionFirst",vB={pc:dR,oc:"identifierFirst"},hR="*";function ul(s,d){var m=this;this.s=_M(s),this.a={},Object.keys(d).forEach(function(E){m.a[E]=new Rue(d[E])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(E){this.ob=E||null},enumerable:!1})}function mp(s){s.j&&s.j.reset(),s.mb(),s.g&&s.g.m()}(n=ul.prototype).Ub=function(s,d){var m=this;mp(this);var E=s.apiKey;return new ns(function(D,x){if(m.a.hasOwnProperty(E)){var B=cR(m.a[E]).selectTenantUiHidden||null;if(function kue(s){for(var d in s=s.a.get("displayMode"),vB)if(vB[d]===s)return vB[d];return dR}(m.a[E])===dR){var ee=[];d.forEach(function(Gt){Gt=Gt||"_";var wr=m.a[E].a.get("tenants");if(!wr)throw Error("Invalid tenant configuration!");(wr=wr[Gt]||wr[hR])?Gt={tenantId:"_"!==Gt?Gt:null,V:wr.fullLabel||null,displayName:wr.displayName,za:wr.iconUrl,ta:wr.buttonColor}:(Da("Invalid tenant configuration: "+Gt+" is not configured!",void 0),Gt=null),Gt&&ee.push(Gt)});var Le=function(Gt){Gt={tenantId:Gt,providerIds:O9(m.a[E],Gt||"_")},D(Gt)};if(1===ee.length)return void Le(ee[0].tenantId);m.g=new lR(function(Gt){mp(m),B&&B(),Le(Gt)},ee,R9(m.a[E]),k9(m.a[E]))}else m.g=new jD(function(){var Gt=m.g.j();if(Gt){for(var wr=0;wr<d.length;wr++){var ll=O9(m.a[E],d[wr]||"_",Gt);if(0!==ll.length)return Gt={tenantId:d[wr],providerIds:ll,email:Gt},mp(m),B&&B(),void D(Gt)}m.g.a(tW({code:"no-matching-tenant-for-email"}).toString())}},R9(m.a[E]),k9(m.a[E]));m.g.render(m.s),(x=cR(m.a[E]).selectTenantUiShown||null)&&x()}else{var dt=Error("Invalid project configuration: API key is invalid!");dt.code="invalid-configuration",m.pb(dt),x(dt)}})},n.Pb=function(s,d){if(!this.a.hasOwnProperty(s))throw Error("Invalid project configuration: API key is invalid!");var m=d||void 0;yB(this.a[s],d||"_");try{this.i=jt.Z.app(m).auth()}catch{var E=this.a[s].a.get("authDomain");if(!E)throw Error("Invalid project configuration: authDomain is required!");(s=jt.Z.initializeApp({apiKey:s,authDomain:E},m)).auth().tenantId=d,this.i=s.auth()}return this.i},n.Zb=function(s,d){var m=this;return new ns(function(E,D){function x(wr,ll){m.j=new yc(s),S9(m.j,m.s,wr,ll)}var B=s.app.options.apiKey;m.a.hasOwnProperty(B)||D(Error("Invalid project configuration: API key is invalid!"));var ee=function Oue(s,d,m){return s=function Pue(s,d){var m=Lue,E=void 0===E?{}:E;return yB(s,d),function dae(s,d,m){return m=void 0===m?{}:m,Object.keys(s).filter(function(E){return d.includes(E)}).reduce(function(E,D){return E[D]=s[D],E},m)}((s=s.a.get("tenants"))[d]||s[hR],m,E)}(s,d),(d=s.signInOptions)&&m&&(d=d.filter(function(E){return m.includes("string"==typeof E?E:E.provider)}),s.signInOptions=d),s}(m.a[B],s.tenantId||"_",d&&d.providerIds);mp(m),D={signInSuccessWithAuthResult:function(wr){return E(wr),!1}};var Gt,Le=cR(m.a[B]).signInUiShown||null,dt=!1;D.uiChanged=function(wr,ll){null===wr&&"callback"===ll?((wr=XV("firebaseui-id-page-callback",m.s))&&Sa(wr),m.h=new _B,m.h.render(m.s)):dt||null===wr&&"spinner"===ll||"blank"===ll||(m.h&&(m.h.m(),m.h=null),dt=!0,Le&&Le(s.tenantId))},ee.callbacks=D,ee.credentialHelper="none",d&&d.email&&(Gt={emailHint:d.email}),m.j?m.j.Wa().then(function(){x(ee,Gt)}):x(ee,Gt)})},n.reset=function(){var s=this;return Mi().then(function(){s.j&&s.j.Wa()}).then(function(){s.j=null,mp(s)})},n.Vb=function(){var s=this;this.h||this.A||(this.A=window.setTimeout(function(){mp(s),s.h=new _B,s.g=s.h,s.h.render(s.s),s.A=null},500))},n.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},n.Bb=function(){return mp(this),this.g=new n9,this.g.render(this.s),Mi()},n.pb=function(s){var E,d=this,m=tW({code:s.code}).toString()||s.message;mp(this),s.retry&&"function"==typeof s.retry&&(E=function(){d.reset(),s.retry()}),this.g=new o9(m,E),this.g.render(this.s)},n.Rb=function(s){var d=this;return Mi().then(function(){var m=d.i&&d.i.app.options.apiKey;if(!d.a.hasOwnProperty(m))throw Error("Invalid project configuration: API key is invalid!");if(yB(d.a[m],s.tenantId||"_"),!d.i.currentUser||d.i.currentUser.uid!==s.uid)throw Error("The user being processed does not match the signed in user!");return(m=cR(d.a[m]).beforeSignInSuccess||null)?m(s):s}).then(function(m){if(m.uid!==s.uid)throw Error("User with mismatching UID returned.");return m})},lr("firebaseui.auth.FirebaseUiHandler",ul),lr("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",ul.prototype.Ub),lr("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",ul.prototype.Pb),lr("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",ul.prototype.Zb),lr("firebaseui.auth.FirebaseUiHandler.prototype.reset",ul.prototype.reset),lr("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",ul.prototype.Vb),lr("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",ul.prototype.mb),lr("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",ul.prototype.Bb),lr("firebaseui.auth.FirebaseUiHandler.prototype.handleError",ul.prototype.pb),lr("firebaseui.auth.FirebaseUiHandler.prototype.processUser",ul.prototype.Rb),lr("firebaseui.auth.AuthUI",yc),lr("firebaseui.auth.AuthUI.getInstance",function(s){return s=mB(s),BD[s]?BD[s]:null}),lr("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",yc.prototype.Db),lr("firebaseui.auth.AuthUI.prototype.start",yc.prototype.start),lr("firebaseui.auth.AuthUI.prototype.setConfig",yc.prototype.ib),lr("firebaseui.auth.AuthUI.prototype.signIn",yc.prototype.Wb),lr("firebaseui.auth.AuthUI.prototype.reset",yc.prototype.reset),lr("firebaseui.auth.AuthUI.prototype.delete",yc.prototype.Wa),lr("firebaseui.auth.AuthUI.prototype.isPendingRedirect",yc.prototype.nb),lr("firebaseui.auth.AuthUIError",qC),lr("firebaseui.auth.AuthUIError.prototype.toJSON",qC.prototype.toJSON),lr("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",zU),lr("firebaseui.auth.CredentialHelper.NONE",jM),lr("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),ns.prototype.catch=ns.prototype.Ca,ns.prototype.finally=ns.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}.apply(typeof global<"u"?global:typeof self<"u"?self:window),typeof window<"u"&&(window.dialogPolyfill=Tee());var See=firebaseui.auth;let FG=(()=>{class n{constructor(t,r,i,u){const c=(0,Sr.on)(t,u,r),p=i;if(!window.firebaseUiInstance){const v=c.auth();if(p){const I=p[0].startsWith("http")?p[0]:`http://${p.join(":")}`;v.useEmulator(I)}window.firebaseUiInstance=new See.AuthUI(v)}this.firebaseUiInstance=window.firebaseUiInstance}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sr.Dh),f.LFG(Sr.xv,8),f.LFG(Sg,8),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Aee=(()=>{class n{constructor(t,r,i,u,c){this.angularFireAuth=t,this._firebaseUiConfig=r,this._firebaseUiConfig_Feature=i,this.ngZone=u,this.firebaseUIService=c,this.signInSuccessWithAuthResultCallback=new f.vpe,this.signInFailureCallback=new f.vpe,this.uiShownCallback=new f.vpe}get firebaseUiConfig(){return{...this._firebaseUiConfig,...this._firebaseUiConfig_Feature}}ngOnInit(){this.subscription=this.angularFireAuth.authState.subscribe(t=>{if(t&&t.isAnonymous||!t){if(0===this.firebaseUiConfig.signInOptions.length)throw new Error("There must be at least one AuthProvider.");this.firebaseUIPopup()}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getUIAuthConfig(){return this.firebaseUiConfig.callbacks||(this._firebaseUiConfig[n.COMPUTED_CALLBACKS]=!0,this._firebaseUiConfig.callbacks=this.getCallbacks()),this.firebaseUiConfig}firebaseUIPopup(){const t=this.firebaseUIService.firebaseUiInstance,r=this.getUIAuthConfig();let i=!1;r[n.COMPUTED_CALLBACKS]&&(i=!0,delete r[n.COMPUTED_CALLBACKS]),t.start("#firebaseui-auth-container",r),i&&(this._firebaseUiConfig.callbacks=null)}getCallbacks(){return{signInSuccessWithAuthResult:(u,c)=>(this.ngZone.run(()=>{this.signInSuccessWithAuthResultCallback.emit({authResult:u,redirectUrl:c})}),this.firebaseUiConfig.signInSuccessUrl),signInFailure:u=>(this.ngZone.run(()=>{this.signInFailureCallback.emit({code:u.code,credential:u.credential})}),Promise.reject()),uiShown:()=>{this.ngZone.run(()=>{this.uiShownCallback.emit()})}}}}return n.COMPUTED_CALLBACKS="COMPUTED_CALLBACKS",n.\u0275fac=function(t){return new(t||n)(f.Y36(Xs),f.Y36("firebaseUIAuthConfig"),f.Y36("firebaseUIAuthConfigFeature"),f.Y36(f.R0b),f.Y36(FG))},n.\u0275cmp=f.Xpm({type:n,selectors:[["firebase-ui"]],outputs:{signInSuccessWithAuthResultCallback:"signInSuccessWithAuthResult",signInFailureCallback:"signInFailure",uiShownCallback:"uiShown"},decls:1,vars:0,consts:[["id","firebaseui-auth-container"]],template:function(t,r){1&t&&f._UZ(0,"div",0)},encapsulation:2}),n})();const VG=jt.Z;let xee=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:"firebaseUIAuthConfig",useValue:t},{provide:"firebaseUIAuthConfigFeature",useValue:{}}]}}static forFeature(t){return{ngModule:n,providers:[{provide:"firebaseUIAuthConfigFeature",useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[FG],imports:[pl]}),n})();const Nee={signInOptions:[VG.auth.EmailAuthProvider.PROVIDER_ID,VG.auth.GoogleAuthProvider.PROVIDER_ID]},Mee_firebase={projectId:"tello-track",appId:"1:215364647602:web:eb0eab241cfbcd1cb227ab",storageBucket:"tello-track.appspot.com",apiKey:"AIzaSyBIUFBOANI009sHojDBqjXRQAwTONXnshg",authDomain:"tello-track.firebaseapp.com",messagingSenderId:"215364647602",measurementId:"G-5CNBLWHE1R"},Q2=(0,At.U)(n=>!!n);let Ree=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(i,u)=>{const c=i.data.authGuardPipe||(()=>Q2);return this.auth.user.pipe(xl(1),c(i,u),(0,At.U)(p=>"boolean"==typeof p?p:Array.isArray(p)?this.router.createUrlTree(p):this.router.parseUrl(p)))}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ii),f.LFG(Xs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const mN=n=>({canActivate:[Ree],data:{authGuardPipe:n}}),Lee=ir(n=>n?n.getIdTokenResult(!0):St(null)),UG=(0,Lo.z)(Lee,(0,At.U)(n=>n?n.claims:null)),J2=mN(()=>(0,Lo.z)(UG,(0,At.U)(n=>null===n?["login"]:"paid"===n.stripeRole||["payment"]))),Fee=mN(()=>(0,Lo.z)(UG,(0,At.U)(n=>null===n?["login"]:"paid"!==n.stripeRole||["dashboard"]))),BG=(mN(()=>(n=>(0,Lo.z)(Q2,(0,At.U)(e=>e||n)))(["login"])),mN(()=>(n=>(0,Lo.z)(Q2,(0,At.U)(e=>e&&n||!0)))(["dashboard"])));function Vee(n,e){if(1&n){const t=f.EpF();f.ynx(0),f.TgZ(1,"li",7)(2,"a",8),f._uU(3),f.qZA()(),f.TgZ(4,"li",9)(5,"a",10),f.NdJ("click",function(){f.CHM(t);const i=f.oxw(2);return f.KtG(i.logout())}),f._uU(6,"Logout"),f.qZA()(),f.BQk()}if(2&n){const t=e.ngIf;f.xp6(3),f.Oqu(t.displayName)}}function Uee(n,e){1&n&&(f.ynx(0),f.TgZ(1,"li",9)(2,"a",11),f._uU(3,"Login"),f.qZA()(),f.BQk())}function Bee(n,e){if(1&n&&(f.TgZ(0,"nav",2)(1,"div",3)(2,"a",4),f._uU(3,"Tellotrack"),f.qZA(),f.TgZ(4,"ul",5),f.YNc(5,Vee,7,1,"ng-container",6),f.ALo(6,"async"),f.YNc(7,Uee,4,0,"ng-container",6),f.ALo(8,"async"),f.qZA()()()),2&n){const t=f.oxw();f.xp6(5),f.Q6J("ngIf",f.lcZ(6,2,t.firebase_auth.user)),f.xp6(2),f.Q6J("ngIf",null==f.lcZ(8,4,t.firebase_auth.user))}}class _N{constructor(e,t){this.firebase_auth=e,this.router=t,this.title="Tellotrack",this.hide_nav=!0}toggleNavBar(e){this.hide_nav=!!e.constructor.hide_nav}logout(){var e=this;return(0,Oe.Z)(function*(){yield e.firebase_auth.signOut(),e.router.navigate([""])})()}static#e=this.\u0275fac=function(t){return new(t||_N)(f.Y36(Xs),f.Y36(Ii))};static#t=this.\u0275cmp=f.Xpm({type:_N,selectors:[["app-root"]],decls:2,vars:1,consts:[["class","navbar navbar-dark bg-primary navbar-expand",4,"ngIf"],[3,"activate"],[1,"navbar","navbar-dark","bg-primary","navbar-expand"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],[1,"navbar-nav"],[4,"ngIf"],[1,"nav-item","me-3"],["routerLink","/settings",1,"nav-link"],[1,"nav-item"],["href","javascript:void(0);",1,"nav-link",3,"click"],["routerLink","/login",1,"nav-link"]],template:function(t,r){1&t&&(f.YNc(0,Bee,9,6,"nav",0),f.TgZ(1,"router-outlet",1),f.NdJ("activate",function(u){return r.toggleNavBar(u)}),f.qZA()),2&t&&f.Q6J("ngIf",!r.hide_nav)},dependencies:[fs,IT,ed,ps]})}class yN{static#e=this.\u0275fac=function(t){return new(t||yN)};static#t=this.\u0275cmp=f.Xpm({type:yN,selectors:[["app-landing"]],decls:7,vars:0,consts:[[1,"container"],["routerLink","/login",1,"btn","btn-primary"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1"),f._uU(2,"Welcome to Tellotrack"),f.qZA(),f._UZ(3,"br")(4,"br"),f.TgZ(5,"a",1),f._uU(6,"Make Account"),f.qZA()())},dependencies:[ed]})}class vN{constructor(e,t,r){this.firebase_auth=e,this.router=t,this.db=r}handle_login(e){var t=this;return(0,Oe.Z)(function*(){let r=e.authResult;if(r.user){if(r.additionalUserInfo?.isNewUser){let i={display_name:r.user.displayName||"Company Name"};r.user.photoURL&&(i.logo_url=r.user.photoURL),yield t.db.object(`branding/${r.user.uid}`).set(i)}t.router.navigate(["dashboard"])}})()}static#e=this.\u0275fac=function(t){return new(t||vN)(f.Y36(Xs),f.Y36(Ii),f.Y36(Cv))};static#t=this.\u0275cmp=f.Xpm({type:vN,selectors:[["app-login"]],decls:4,vars:0,consts:[[1,"container"],[1,"mb-5",2,"text-align","center","margin-top","20%"],[3,"signInSuccessWithAuthResult"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1",1),f._uU(2,"Login to Tellotrack"),f.qZA(),f.TgZ(3,"firebase-ui",2),f.NdJ("signInSuccessWithAuthResult",function(u){return r.handle_login(u)}),f.qZA()())},dependencies:[Aee]})}var jee=U(930);function X2(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const u=new jee.Hp({next:c=>{r(c),u.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Su)}});n.subscribe(u)})}var Eo="top",wa="bottom",ba="right",wo="left",EN="auto",n0=[Eo,wa,ba,wo],Cm="start",r0="end",jG="clippingParents",eV="viewport",s0="popper",$G="reference",tV=n0.reduce(function(n,e){return n.concat([e+"-"+Cm,e+"-"+r0])},[]),nV=[].concat(n0,[EN]).reduce(function(n,e){return n.concat([e,e+"-"+Cm,e+"-"+r0])},[]),HG="beforeRead",GG="read",WG="afterRead",zG="beforeMain",qG="main",KG="afterMain",ZG="beforeWrite",YG="write",QG="afterWrite",JG=[HG,GG,WG,zG,qG,KG,ZG,YG,QG];function uc(n){return n?(n.nodeName||"").toLowerCase():null}function su(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Dm(n){return n instanceof su(n).Element||n instanceof Element}function ou(n){return n instanceof su(n).HTMLElement||n instanceof HTMLElement}function rV(n){return!(typeof ShadowRoot>"u")&&(n instanceof su(n).ShadowRoot||n instanceof ShadowRoot)}const iV={name:"applyStyles",enabled:!0,phase:"write",fn:function $ee(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},u=e.elements[t];!ou(u)||!uc(u)||(Object.assign(u.style,r),Object.keys(i).forEach(function(c){var p=i[c];!1===p?u.removeAttribute(c):u.setAttribute(c,!0===p?"":p)}))})},effect:function Hee(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],u=e.attributes[r]||{},p=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(v,I){return v[I]="",v},{});!ou(i)||!uc(i)||(Object.assign(i.style,p),Object.keys(u).forEach(function(v){i.removeAttribute(v)}))})}},requires:["computeStyles"]};function lc(n){return n.split("-")[0]}var Tm=Math.max,wN=Math.min,o0=Math.round;function sV(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function XG(){return!/^((?!chrome|android).)*safari/i.test(sV())}function a0(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,u=1;e&&ou(n)&&(i=n.offsetWidth>0&&o0(r.width)/n.offsetWidth||1,u=n.offsetHeight>0&&o0(r.height)/n.offsetHeight||1);var p=(Dm(n)?su(n):window).visualViewport,v=!XG()&&t,I=(r.left+(v&&p?p.offsetLeft:0))/i,A=(r.top+(v&&p?p.offsetTop:0))/u,M=r.width/i,P=r.height/u;return{width:M,height:P,top:A,right:I+M,bottom:A+P,left:I,x:I,y:A}}function oV(n){var e=a0(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function e5(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&rV(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Od(n){return su(n).getComputedStyle(n)}function Gee(n){return["table","td","th"].indexOf(uc(n))>=0}function Gf(n){return((Dm(n)?n.ownerDocument:n.document)||window.document).documentElement}function bN(n){return"html"===uc(n)?n:n.assignedSlot||n.parentNode||(rV(n)?n.host:null)||Gf(n)}function t5(n){return ou(n)&&"fixed"!==Od(n).position?n.offsetParent:null}function SC(n){for(var e=su(n),t=t5(n);t&&Gee(t)&&"static"===Od(t).position;)t=t5(t);return t&&("html"===uc(t)||"body"===uc(t)&&"static"===Od(t).position)?e:t||function Wee(n){var e=/firefox/i.test(sV());if(/Trident/i.test(sV())&&ou(n)&&"fixed"===Od(n).position)return null;var i=bN(n);for(rV(i)&&(i=i.host);ou(i)&&["html","body"].indexOf(uc(i))<0;){var u=Od(i);if("none"!==u.transform||"none"!==u.perspective||"paint"===u.contain||-1!==["transform","perspective"].indexOf(u.willChange)||e&&"filter"===u.willChange||e&&u.filter&&"none"!==u.filter)return i;i=i.parentNode}return null}(n)||e}function aV(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function AC(n,e,t){return Tm(n,wN(e,t))}function r5(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function i5(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}const s5={name:"arrow",enabled:!0,phase:"main",fn:function Kee(n){var e,t=n.state,r=n.name,i=n.options,u=t.elements.arrow,c=t.modifiersData.popperOffsets,p=lc(t.placement),v=aV(p),A=[wo,ba].indexOf(p)>=0?"height":"width";if(u&&c){var M=function(e,t){return r5("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:i5(e,n0))}(i.padding,t),P=oV(u),$="y"===v?Eo:wo,Q="y"===v?wa:ba,le=t.rects.reference[A]+t.rects.reference[v]-c[v]-t.rects.popper[A],ye=c[v]-t.rects.reference[v],ct=SC(u),ht=ct?"y"===v?ct.clientHeight||0:ct.clientWidth||0:0,yt=ht/2-P[A]/2+(le/2-ye/2),hn=AC(M[$],yt,ht-P[A]-M[Q]);t.modifiersData[r]=((e={})[v]=hn,e.centerOffset=hn-yt,e)}},effect:function Zee(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||!e5(e.elements.popper,i)||(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function u0(n){return n.split("-")[1]}var Yee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function o5(n){var e,t=n.popper,r=n.popperRect,i=n.placement,u=n.variation,c=n.offsets,p=n.position,v=n.gpuAcceleration,I=n.adaptive,A=n.roundOffsets,M=n.isFixed,P=c.x,$=void 0===P?0:P,Q=c.y,le=void 0===Q?0:Q,ye="function"==typeof A?A({x:$,y:le}):{x:$,y:le};$=ye.x,le=ye.y;var ct=c.hasOwnProperty("x"),ht=c.hasOwnProperty("y"),Et=wo,_t=Eo,pt=window;if(I){var yt=SC(t),hn="clientHeight",Rr="clientWidth";yt===su(t)&&"static"!==Od(yt=Gf(t)).position&&"absolute"===p&&(hn="scrollHeight",Rr="scrollWidth"),(i===Eo||(i===wo||i===ba)&&u===r0)&&(_t=wa,le-=(M&&yt===pt&&pt.visualViewport?pt.visualViewport.height:yt[hn])-r.height,le*=v?1:-1),i!==wo&&(i!==Eo&&i!==wa||u!==r0)||(Et=ba,$-=(M&&yt===pt&&pt.visualViewport?pt.visualViewport.width:yt[Rr])-r.width,$*=v?1:-1)}var Mn,en=Object.assign({position:p},I&&Yee),ds=!0===A?function Qee(n){var t=n.y,i=window.devicePixelRatio||1;return{x:o0(n.x*i)/i||0,y:o0(t*i)/i||0}}({x:$,y:le}):{x:$,y:le};return $=ds.x,le=ds.y,Object.assign({},en,v?((Mn={})[_t]=ht?"0":"",Mn[Et]=ct?"0":"",Mn.transform=(pt.devicePixelRatio||1)<=1?"translate("+$+"px, "+le+"px)":"translate3d("+$+"px, "+le+"px, 0)",Mn):((e={})[_t]=ht?le+"px":"",e[Et]=ct?$+"px":"",e.transform="",e))}const uV={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Jee(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,u=t.adaptive,c=void 0===u||u,p=t.roundOffsets,v=void 0===p||p,A={placement:lc(e.placement),variation:u0(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,o5(Object.assign({},A,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:v})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,o5(Object.assign({},A,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:v})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var IN={passive:!0};const lV={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Xee(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,u=void 0===i||i,c=r.resize,p=void 0===c||c,v=su(e.elements.popper),I=[].concat(e.scrollParents.reference,e.scrollParents.popper);return u&&I.forEach(function(A){A.addEventListener("scroll",t.update,IN)}),p&&v.addEventListener("resize",t.update,IN),function(){u&&I.forEach(function(A){A.removeEventListener("scroll",t.update,IN)}),p&&v.removeEventListener("resize",t.update,IN)}},data:{}};var ete={left:"right",right:"left",bottom:"top",top:"bottom"};function CN(n){return n.replace(/left|right|bottom|top/g,function(e){return ete[e]})}var tte={start:"end",end:"start"};function a5(n){return n.replace(/start|end/g,function(e){return tte[e]})}function cV(n){var e=su(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function dV(n){return a0(Gf(n)).left+cV(n).scrollLeft}function hV(n){var e=Od(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function u5(n){return["html","body","#document"].indexOf(uc(n))>=0?n.ownerDocument.body:ou(n)&&hV(n)?n:u5(bN(n))}function xC(n,e){var t;void 0===e&&(e=[]);var r=u5(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),u=su(r),c=i?[u].concat(u.visualViewport||[],hV(r)?r:[]):r,p=e.concat(c);return i?p:p.concat(xC(bN(c)))}function fV(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function l5(n,e,t){return e===eV?fV(function nte(n,e){var t=su(n),r=Gf(n),i=t.visualViewport,u=r.clientWidth,c=r.clientHeight,p=0,v=0;if(i){u=i.width,c=i.height;var I=XG();(I||!I&&"fixed"===e)&&(p=i.offsetLeft,v=i.offsetTop)}return{width:u,height:c,x:p+dV(n),y:v}}(n,t)):Dm(e)?function ite(n,e){var t=a0(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):fV(function rte(n){var e,t=Gf(n),r=cV(n),i=null==(e=n.ownerDocument)?void 0:e.body,u=Tm(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=Tm(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),p=-r.scrollLeft+dV(n),v=-r.scrollTop;return"rtl"===Od(i||t).direction&&(p+=Tm(t.clientWidth,i?i.clientWidth:0)-u),{width:u,height:c,x:p,y:v}}(Gf(n)))}function c5(n){var v,e=n.reference,t=n.element,r=n.placement,i=r?lc(r):null,u=r?u0(r):null,c=e.x+e.width/2-t.width/2,p=e.y+e.height/2-t.height/2;switch(i){case Eo:v={x:c,y:e.y-t.height};break;case wa:v={x:c,y:e.y+e.height};break;case ba:v={x:e.x+e.width,y:p};break;case wo:v={x:e.x-t.width,y:p};break;default:v={x:e.x,y:e.y}}var I=i?aV(i):null;if(null!=I){var A="y"===I?"height":"width";switch(u){case Cm:v[I]=v[I]-(e[A]/2-t[A]/2);break;case r0:v[I]=v[I]+(e[A]/2-t[A]/2)}}return v}function l0(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,u=e.strategy,c=void 0===u?n.strategy:u,p=e.boundary,v=void 0===p?jG:p,I=e.rootBoundary,A=void 0===I?eV:I,M=e.elementContext,P=void 0===M?s0:M,$=e.altBoundary,Q=void 0!==$&&$,le=e.padding,ye=void 0===le?0:le,ct=r5("number"!=typeof ye?ye:i5(ye,n0)),Et=n.rects.popper,_t=n.elements[Q?P===s0?$G:s0:P],pt=function ote(n,e,t,r){var i="clippingParents"===e?function ste(n){var e=xC(bN(n)),r=["absolute","fixed"].indexOf(Od(n).position)>=0&&ou(n)?SC(n):n;return Dm(r)?e.filter(function(i){return Dm(i)&&e5(i,r)&&"body"!==uc(i)}):[]}(n):[].concat(e),u=[].concat(i,[t]),p=u.reduce(function(v,I){var A=l5(n,I,r);return v.top=Tm(A.top,v.top),v.right=wN(A.right,v.right),v.bottom=wN(A.bottom,v.bottom),v.left=Tm(A.left,v.left),v},l5(n,u[0],r));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}(Dm(_t)?_t:_t.contextElement||Gf(n.elements.popper),v,A,c),yt=a0(n.elements.reference),hn=c5({reference:yt,element:Et,strategy:"absolute",placement:i}),Rr=fV(Object.assign({},Et,hn)),$i=P===s0?Rr:yt,Hi={top:pt.top-$i.top+ct.top,bottom:$i.bottom-pt.bottom+ct.bottom,left:pt.left-$i.left+ct.left,right:$i.right-pt.right+ct.right},en=n.modifiersData.offset;if(P===s0&&en){var ds=en[i];Object.keys(Hi).forEach(function(Mn){var bo=[ba,wa].indexOf(Mn)>=0?1:-1,lr=[Eo,wa].indexOf(Mn)>=0?"y":"x";Hi[Mn]+=ds[lr]*bo})}return Hi}const d5={name:"flip",enabled:!0,phase:"main",fn:function lte(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,u=void 0===i||i,c=t.altAxis,p=void 0===c||c,v=t.fallbackPlacements,I=t.padding,A=t.boundary,M=t.rootBoundary,P=t.altBoundary,$=t.flipVariations,Q=void 0===$||$,le=t.allowedAutoPlacements,ye=e.options.placement,ct=lc(ye),Et=v||(ct!==ye&&Q?function ute(n){if(lc(n)===EN)return[];var e=CN(n);return[a5(n),e,a5(e)]}(ye):[CN(ye)]),_t=[ye].concat(Et).reduce(function(Jf,dc){return Jf.concat(lc(dc)===EN?function ate(n,e){void 0===e&&(e={});var i=e.boundary,u=e.rootBoundary,c=e.padding,p=e.flipVariations,v=e.allowedAutoPlacements,I=void 0===v?nV:v,A=u0(e.placement),M=A?p?tV:tV.filter(function(Q){return u0(Q)===A}):n0,P=M.filter(function(Q){return I.indexOf(Q)>=0});0===P.length&&(P=M);var $=P.reduce(function(Q,le){return Q[le]=l0(n,{placement:le,boundary:i,rootBoundary:u,padding:c})[lc(le)],Q},{});return Object.keys($).sort(function(Q,le){return $[Q]-$[le]})}(e,{placement:dc,boundary:A,rootBoundary:M,padding:I,flipVariations:Q,allowedAutoPlacements:le}):dc)},[]),pt=e.rects.reference,yt=e.rects.popper,hn=new Map,Rr=!0,$i=_t[0],Hi=0;Hi<_t.length;Hi++){var en=_t[Hi],ds=lc(en),Mn=u0(en)===Cm,bo=[Eo,wa].indexOf(ds)>=0,lr=bo?"width":"height",Zt=l0(e,{placement:en,boundary:A,rootBoundary:M,altBoundary:P,padding:I}),ti=bo?Mn?ba:wo:Mn?wa:Eo;pt[lr]>yt[lr]&&(ti=CN(ti));var km=CN(ti),nl=[];if(u&&nl.push(Zt[ds]<=0),p&&nl.push(Zt[ti]<=0,Zt[km]<=0),nl.every(function(Jf){return Jf})){$i=en,Rr=!1;break}hn.set(en,nl)}if(Rr)for(var y0=function(dc){var Om=_t.find(function(Hs){var hc=hn.get(Hs);if(hc)return hc.slice(0,dc).every(function(Xf){return Xf})});if(Om)return $i=Om,"break"},rl=Q?3:1;rl>0&&"break"!==y0(rl);rl--);e.placement!==$i&&(e.modifiersData[r]._skip=!0,e.placement=$i,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function h5(n,e,t){return void 0===t&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function f5(n){return[Eo,ba,wa,wo].some(function(e){return n[e]>=0})}const p5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function cte(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,u=e.modifiersData.preventOverflow,c=l0(e,{elementContext:"reference"}),p=l0(e,{altBoundary:!0}),v=h5(c,r),I=h5(p,i,u),A=f5(v),M=f5(I);e.modifiersData[t]={referenceClippingOffsets:v,popperEscapeOffsets:I,isReferenceHidden:A,hasPopperEscaped:M},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":A,"data-popper-escaped":M})}},g5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function hte(n){var e=n.state,r=n.name,i=n.options.offset,u=void 0===i?[0,0]:i,c=nV.reduce(function(A,M){return A[M]=function dte(n,e,t){var r=lc(n),i=[wo,Eo].indexOf(r)>=0?-1:1,u="function"==typeof t?t(Object.assign({},e,{placement:n})):t,c=u[0],p=u[1];return c=c||0,p=(p||0)*i,[wo,ba].indexOf(r)>=0?{x:p,y:c}:{x:c,y:p}}(M,e.rects,u),A},{}),p=c[e.placement],I=p.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=p.x,e.modifiersData.popperOffsets.y+=I),e.modifiersData[r]=c}},pV={name:"popperOffsets",enabled:!0,phase:"read",fn:function fte(n){var e=n.state;e.modifiersData[n.name]=c5({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},m5={name:"preventOverflow",enabled:!0,phase:"main",fn:function gte(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,u=void 0===i||i,c=t.altAxis,p=void 0!==c&&c,P=t.tether,$=void 0===P||P,Q=t.tetherOffset,le=void 0===Q?0:Q,ye=l0(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),ct=lc(e.placement),ht=u0(e.placement),Et=!ht,_t=aV(ct),pt=function pte(n){return"x"===n?"y":"x"}(_t),yt=e.modifiersData.popperOffsets,hn=e.rects.reference,Rr=e.rects.popper,$i="function"==typeof le?le(Object.assign({},e.rects,{placement:e.placement})):le,Hi="number"==typeof $i?{mainAxis:$i,altAxis:$i}:Object.assign({mainAxis:0,altAxis:0},$i),en=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ds={x:0,y:0};if(yt){if(u){var Mn,bo="y"===_t?Eo:wo,lr="y"===_t?wa:ba,Zt="y"===_t?"height":"width",ti=yt[_t],km=ti+ye[bo],nl=ti-ye[lr],Zo=$?-Rr[Zt]/2:0,y0=ht===Cm?hn[Zt]:Rr[Zt],rl=ht===Cm?-Rr[Zt]:-hn[Zt],v0=e.elements.arrow,Jf=$&&v0?oV(v0):{width:0,height:0},dc=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Om=dc[bo],Hs=dc[lr],hc=AC(0,hn[Zt],Jf[Zt]),Xf=Et?hn[Zt]/2-Zo-hc-Om-Hi.mainAxis:y0-hc-Om-Hi.mainAxis,VV=Et?-hn[Zt]/2+Zo+hc+Hs+Hi.mainAxis:rl+hc+Hs+Hi.mainAxis,LC=e.elements.arrow&&SC(e.elements.arrow),FC=null!=(Mn=en?.[_t])?Mn:0,Io=ti+VV-FC,YN=AC($?wN(km,ti+Xf-FC-(LC?"y"===_t?LC.clientTop||0:LC.clientLeft||0:0)):km,ti,$?Tm(nl,Io):nl);yt[_t]=YN,ds[_t]=YN-ti}if(p){var QN,Bd=yt[pt],E0="y"===pt?"height":"width",JN=Bd+ye["x"===_t?Eo:wo],w0=Bd-ye["x"===_t?wa:ba],fc=-1!==[Eo,wo].indexOf(ct),VC=null!=(QN=en?.[pt])?QN:0,b0=fc?JN:Bd-hn[E0]-Rr[E0]-VC+Hi.altAxis,UC=fc?Bd+hn[E0]+Rr[E0]-VC-Hi.altAxis:w0,Pm=$&&fc?function zee(n,e,t){var r=AC(n,e,t);return r>t?t:r}(b0,Bd,UC):AC($?b0:JN,Bd,$?UC:w0);yt[pt]=Pm,ds[pt]=Pm-Bd}e.modifiersData[r]=ds}},requiresIfExists:["offset"]};function vte(n,e,t){void 0===t&&(t=!1);var r=ou(e),i=ou(e)&&function yte(n){var e=n.getBoundingClientRect(),t=o0(e.width)/n.offsetWidth||1,r=o0(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),u=Gf(e),c=a0(n,i,t),p={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(r||!r&&!t)&&(("body"!==uc(e)||hV(u))&&(p=function _te(n){return n!==su(n)&&ou(n)?function mte(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):cV(n)}(e)),ou(e)?((v=a0(e,!0)).x+=e.clientLeft,v.y+=e.clientTop):u&&(v.x=dV(u))),{x:c.left+p.scrollLeft-v.x,y:c.top+p.scrollTop-v.y,width:c.width,height:c.height}}function Ete(n){var e=new Map,t=new Set,r=[];function i(u){t.add(u.name),[].concat(u.requires||[],u.requiresIfExists||[]).forEach(function(p){if(!t.has(p)){var v=e.get(p);v&&i(v)}}),r.push(u)}return n.forEach(function(u){e.set(u.name,u)}),n.forEach(function(u){t.has(u.name)||i(u)}),r}function bte(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var _5={placement:"bottom",modifiers:[],strategy:"absolute"};function y5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function DN(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,u=void 0===i?_5:i;return function(p,v,I){void 0===I&&(I=u);var A={placement:"bottom",orderedModifiers:[],options:Object.assign({},_5,u),modifiersData:{},elements:{reference:p,popper:v},attributes:{},styles:{}},M=[],P=!1,$={state:A,setOptions:function(ct){var ht="function"==typeof ct?ct(A.options):ct;le(),A.options=Object.assign({},u,A.options,ht),A.scrollParents={reference:Dm(p)?xC(p):p.contextElement?xC(p.contextElement):[],popper:xC(v)};var Et=function wte(n){var e=Ete(n);return JG.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function Ite(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,A.options.modifiers)));return A.orderedModifiers=Et.filter(function(en){return en.enabled}),function Q(){A.orderedModifiers.forEach(function(ye){var ht=ye.options,_t=ye.effect;if("function"==typeof _t){var pt=_t({state:A,name:ye.name,instance:$,options:void 0===ht?{}:ht});M.push(pt||function(){})}})}(),$.update()},forceUpdate:function(){if(!P){var ct=A.elements,ht=ct.reference,Et=ct.popper;if(y5(ht,Et)){A.rects={reference:vte(ht,SC(Et),"fixed"===A.options.strategy),popper:oV(Et)},A.reset=!1,A.placement=A.options.placement,A.orderedModifiers.forEach(function(en){return A.modifiersData[en.name]=Object.assign({},en.data)});for(var pt=0;pt<A.orderedModifiers.length;pt++)if(!0!==A.reset){var yt=A.orderedModifiers[pt],hn=yt.fn,Rr=yt.options;"function"==typeof hn&&(A=hn({state:A,options:void 0===Rr?{}:Rr,name:yt.name,instance:$})||A)}else A.reset=!1,pt=-1}}},update:bte(function(){return new Promise(function(ye){$.forceUpdate(),ye(A)})}),destroy:function(){le(),P=!0}};if(!y5(p,v))return $;function le(){M.forEach(function(ye){return ye()}),M=[]}return $.setOptions(I).then(function(ye){!P&&I.onFirstUpdate&&I.onFirstUpdate(ye)}),$}}var Cte=DN(),gV=DN({defaultModifiers:[lV,pV,uV,iV,g5,d5,m5,s5,p5]}),Ste=DN({defaultModifiers:[lV,pV,uV,iV]});const mV="transitionend",Nte=n=>null==n?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),v5=n=>{let e=n.getAttribute("data-bs-target");if(!e||"#"===e){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&"#"!==t?t.trim():null}return e},E5=n=>{const e=v5(n);return e&&document.querySelector(e)?e:null},Pd=n=>{const e=v5(n);return e?document.querySelector(e):null},w5=n=>{n.dispatchEvent(new Event(mV))},Ld=n=>!(!n||"object"!=typeof n)&&(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Wf=n=>Ld(n)?n.jquery?n[0]:n:"string"==typeof n&&n.length>0?document.querySelector(n):null,c0=n=>{if(!Ld(n)||0===n.getClientRects().length)return!1;const e="visible"===getComputedStyle(n).getPropertyValue("visibility"),t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const r=n.closest("summary");if(r&&r.parentNode!==t||null===r)return!1}return e},zf=n=>!(n&&n.nodeType===Node.ELEMENT_NODE&&!n.classList.contains("disabled"))||(typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&"false"!==n.getAttribute("disabled")),b5=n=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof n.getRootNode){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?b5(n.parentNode):null},TN=()=>{},I5=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_V=[],au=()=>"rtl"===document.documentElement.dir,uu=n=>{(n=>{"loading"===document.readyState?(_V.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of _V)e()}),_V.push(n)):n()})(()=>{const e=I5();if(e){const t=n.NAME,r=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=r,n.jQueryInterface)}})},Fd=n=>{"function"==typeof n&&n()},C5=(n,e,t=!0)=>{if(!t)return void Fd(n);const i=(n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const r=Number.parseFloat(e),i=Number.parseFloat(t);return r||i?(e=e.split(",")[0],t=t.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(t))):0})(e)+5;let u=!1;const c=({target:p})=>{p===e&&(u=!0,e.removeEventListener(mV,c),Fd(n))};e.addEventListener(mV,c),setTimeout(()=>{u||w5(e)},i)},yV=(n,e,t,r)=>{const i=n.length;let u=n.indexOf(e);return-1===u?!t&&r?n[i-1]:n[0]:(u+=t?1:-1,r&&(u=(u+i)%i),n[Math.max(0,Math.min(u,i-1))])},Ote=/[^.]*(?=\..*)\.|.*/,Pte=/\..*/,Lte=/::\d+$/,vV={};let D5=1;const T5={mouseenter:"mouseover",mouseleave:"mouseout"},Fte=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function S5(n,e){return e&&`${e}::${D5++}`||n.uidEvent||D5++}function A5(n){const e=S5(n);return n.uidEvent=e,vV[e]=vV[e]||{},vV[e]}function x5(n,e,t=null){return Object.values(n).find(r=>r.callable===e&&r.delegationSelector===t)}function N5(n,e,t){const r="string"==typeof e,i=r?t:e||t;let u=R5(n);return Fte.has(u)||(u=n),[r,i,u]}function M5(n,e,t,r,i){if("string"!=typeof e||!n)return;let[u,c,p]=N5(e,t,r);var Q;e in T5&&(Q=c,c=function(le){if(!le.relatedTarget||le.relatedTarget!==le.delegateTarget&&!le.delegateTarget.contains(le.relatedTarget))return Q.call(this,le)});const v=A5(n),I=v[p]||(v[p]={}),A=x5(I,c,u?t:null);if(A)return void(A.oneOff=A.oneOff&&i);const M=S5(c,e.replace(Ote,"")),P=u?function Ute(n,e,t){return function r(i){const u=n.querySelectorAll(e);for(let{target:c}=i;c&&c!==this;c=c.parentNode)for(const p of u)if(p===c)return wV(i,{delegateTarget:c}),r.oneOff&&at.off(n,i.type,e,t),t.apply(c,[i])}}(n,t,c):function Vte(n,e){return function t(r){return wV(r,{delegateTarget:n}),t.oneOff&&at.off(n,r.type,e),e.apply(n,[r])}}(n,c);P.delegationSelector=u?t:null,P.callable=c,P.oneOff=i,P.uidEvent=M,I[M]=P,n.addEventListener(p,P,u)}function EV(n,e,t,r,i){const u=x5(e[t],r,i);!u||(n.removeEventListener(t,u,Boolean(i)),delete e[t][u.uidEvent])}function Bte(n,e,t,r){const i=e[t]||{};for(const u of Object.keys(i))if(u.includes(r)){const c=i[u];EV(n,e,t,c.callable,c.delegationSelector)}}function R5(n){return n=n.replace(Pte,""),T5[n]||n}const at={on(n,e,t,r){M5(n,e,t,r,!1)},one(n,e,t,r){M5(n,e,t,r,!0)},off(n,e,t,r){if("string"!=typeof e||!n)return;const[i,u,c]=N5(e,t,r),p=c!==e,v=A5(n),I=v[c]||{},A=e.startsWith(".");if(typeof u<"u"){if(!Object.keys(I).length)return;EV(n,v,c,u,i?t:null)}else{if(A)for(const M of Object.keys(v))Bte(n,v,M,e.slice(1));for(const M of Object.keys(I)){const P=M.replace(Lte,"");if(!p||e.includes(P)){const $=I[M];EV(n,v,c,$.callable,$.delegationSelector)}}}},trigger(n,e,t){if("string"!=typeof e||!n)return null;const r=I5();let c=null,p=!0,v=!0,I=!1;e!==R5(e)&&r&&(c=r.Event(e,t),r(n).trigger(c),p=!c.isPropagationStopped(),v=!c.isImmediatePropagationStopped(),I=c.isDefaultPrevented());let A=new Event(e,{bubbles:p,cancelable:!0});return A=wV(A,t),I&&A.preventDefault(),v&&n.dispatchEvent(A),A.defaultPrevented&&c&&c.preventDefault(),A}};function wV(n,e){for(const[t,r]of Object.entries(e||{}))try{n[t]=r}catch{Object.defineProperty(n,t,{configurable:!0,get:()=>r})}return n}const qf=new Map,bV={set(n,e,t){qf.has(n)||qf.set(n,new Map);const r=qf.get(n);r.has(e)||0===r.size?r.set(e,t):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(n,e)=>qf.has(n)&&qf.get(n).get(e)||null,remove(n,e){if(!qf.has(n))return;const t=qf.get(n);t.delete(e),0===t.size&&qf.delete(n)}};function k5(n){if("true"===n)return!0;if("false"===n)return!1;if(n===Number(n).toString())return Number(n);if(""===n||"null"===n)return null;if("string"!=typeof n)return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function IV(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Vd={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${IV(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${IV(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of t){let i=r.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=k5(n.dataset[r])}return e},getDataAttribute:(n,e)=>k5(n.getAttribute(`data-bs-${IV(e)}`))};class MC{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=Ld(t)?Vd.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof r?r:{},...Ld(t)?Vd.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const r of Object.keys(t)){const i=t[r],u=e[r],c=Ld(u)?"element":Nte(u);if(!new RegExp(i).test(c))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${c}" but expected type "${i}".`)}}}class el extends MC{constructor(e,t){super(),(e=Wf(e))&&(this._element=e,this._config=this._getConfig(t),bV.set(this._element,this.constructor.DATA_KEY,this))}dispose(){bV.remove(this._element,this.constructor.DATA_KEY),at.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){C5(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return bV.get(Wf(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const SN=(n,e="hide")=>{const r=n.NAME;at.on(document,`click.dismiss${n.EVENT_KEY}`,`[data-bs-dismiss="${r}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),zf(this))return;const u=Pd(this)||this.closest(`.${r}`);n.getOrCreateInstance(u)[e]()})},O5=".bs.alert",Hte=`close${O5}`,Gte=`closed${O5}`;class AN extends el{static get NAME(){return"alert"}close(){if(at.trigger(this._element,Hte).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),at.trigger(this._element,Gte),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=AN.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}SN(AN,"close"),uu(AN);const P5='[data-bs-toggle="button"]';class xN extends el{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=xN.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}at.on(document,"click.bs.button.data-api",P5,n=>{n.preventDefault();const e=n.target.closest(P5);xN.getOrCreateInstance(e).toggle()}),uu(xN);const On={find:(n,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,n)),findOne:(n,e=document.documentElement)=>Element.prototype.querySelector.call(e,n),children:(n,e)=>[].concat(...n.children).filter(t=>t.matches(e)),parents(n,e){const t=[];let r=n.parentNode.closest(e);for(;r;)t.push(r),r=r.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!zf(t)&&c0(t))}},d0=".bs.swipe",Xte=`touchstart${d0}`,ene=`touchmove${d0}`,tne=`touchend${d0}`,nne=`pointerdown${d0}`,rne=`pointerup${d0}`,une={endCallback:null,leftCallback:null,rightCallback:null},lne={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class NN extends MC{constructor(e,t){super(),this._element=e,e&&NN.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return une}static get DefaultType(){return lne}static get NAME(){return"swipe"}dispose(){at.off(this._element,d0)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Fd(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&Fd(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(at.on(this._element,nne,e=>this._start(e)),at.on(this._element,rne,e=>this._end(e)),this._element.classList.add("pointer-event")):(at.on(this._element,Xte,e=>this._start(e)),at.on(this._element,ene,e=>this._move(e)),at.on(this._element,tne,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Kf=".bs.carousel",L5=".data-api",RC="next",h0="prev",f0="left",MN="right",pne=`slide${Kf}`,CV=`slid${Kf}`,gne=`keydown${Kf}`,mne=`mouseenter${Kf}`,_ne=`mouseleave${Kf}`,yne=`dragstart${Kf}`,vne=`load${Kf}${L5}`,Ene=`click${Kf}${L5}`,F5="carousel",RN="active",Mne={ArrowLeft:MN,ArrowRight:f0},Rne={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},kne={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class kC extends el{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=On.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===F5&&this.cycle()}static get Default(){return Rne}static get DefaultType(){return kne}static get NAME(){return"carousel"}next(){this._slide(RC)}nextWhenVisible(){!document.hidden&&c0(this._element)&&this.next()}prev(){this._slide(h0)}pause(){this._isSliding&&w5(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void at.one(this._element,CV,()=>this.cycle());this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void at.one(this._element,CV,()=>this.to(e));const r=this._getItemIndex(this._getActive());r!==e&&this._slide(e>r?RC:h0,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&at.on(this._element,gne,e=>this._keydown(e)),"hover"===this._config.pause&&(at.on(this._element,mne,()=>this.pause()),at.on(this._element,_ne,()=>this._maybeEnableCycle())),this._config.touch&&NN.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of On.find(".carousel-item img",this._element))at.on(r,yne,i=>i.preventDefault());this._swipeHelper=new NN(this._element,{leftCallback:()=>this._slide(this._directionToOrder(f0)),rightCallback:()=>this._slide(this._directionToOrder(MN)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Mne[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=On.findOne(".active",this._indicatorsElement);t.classList.remove(RN),t.removeAttribute("aria-current");const r=On.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(RN),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const r=this._getActive(),i=e===RC,u=t||yV(this._getItems(),r,i,this._config.wrap);if(u===r)return;const c=this._getItemIndex(u),p=$=>at.trigger(this._element,$,{relatedTarget:u,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:c});if(p(pne).defaultPrevented||!r||!u)return;const I=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=u;const A=i?"carousel-item-start":"carousel-item-end",M=i?"carousel-item-next":"carousel-item-prev";u.classList.add(M),r.classList.add(A),u.classList.add(A),this._queueCallback(()=>{u.classList.remove(A,M),u.classList.add(RN),r.classList.remove(RN,M,A),this._isSliding=!1,p(CV)},r,this._isAnimated()),I&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return On.findOne(".active.carousel-item",this._element)}_getItems(){return On.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return au()?e===f0?h0:RC:e===f0?RC:h0}_orderToDirection(e){return au()?e===h0?f0:MN:e===h0?MN:f0}static jQueryInterface(e){return this.each(function(){const t=kC.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}at.on(document,Ene,"[data-bs-slide], [data-bs-slide-to]",function(n){const e=Pd(this);if(!e||!e.classList.contains(F5))return;n.preventDefault();const t=kC.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");return r?(t.to(r),void t._maybeEnableCycle()):"next"===Vd.getDataAttribute(this,"slide")?(t.next(),void t._maybeEnableCycle()):(t.prev(),void t._maybeEnableCycle())}),at.on(window,vne,()=>{const n=On.find('[data-bs-ride="carousel"]');for(const e of n)kC.getOrCreateInstance(e)}),uu(kC);const OC=".bs.collapse",Lne=`show${OC}`,Fne=`shown${OC}`,Vne=`hide${OC}`,Une=`hidden${OC}`,Bne=`click${OC}.data-api`,DV="show",p0="collapse",kN="collapsing",$ne=`:scope .${p0} .${p0}`,TV='[data-bs-toggle="collapse"]',qne={parent:null,toggle:!0},Kne={parent:"(null|element)",toggle:"boolean"};class Sm extends el{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const r=On.find(TV);for(const i of r){const u=E5(i),c=On.find(u).filter(p=>p===this._element);null!==u&&c.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return qne}static get DefaultType(){return Kne}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(p=>p!==this._element).map(p=>Sm.getOrCreateInstance(p,{toggle:!1}))),e.length&&e[0]._isTransitioning||at.trigger(this._element,Lne).defaultPrevented)return;for(const p of e)p.hide();const r=this._getDimension();this._element.classList.remove(p0),this._element.classList.add(kN),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const c=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(kN),this._element.classList.add(p0,DV),this._element.style[r]="",at.trigger(this._element,Fne)},this._element,!0),this._element.style[r]=`${this._element[c]}px`}hide(){if(this._isTransitioning||!this._isShown()||at.trigger(this._element,Vne).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,this._element.classList.add(kN),this._element.classList.remove(p0,DV);for(const i of this._triggerArray){const u=Pd(i);u&&!this._isShown(u)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(kN),this._element.classList.add(p0),at.trigger(this._element,Une)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(DV)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Wf(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(TV);for(const t of e){const r=Pd(t);r&&this._addAriaAndCollapsedClass([t],this._isShown(r))}}_getFirstLevelChildren(e){const t=On.find($ne,this._config.parent);return On.find(e,this._config.parent).filter(r=>!t.includes(r))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const r of e)r.classList.toggle("collapsed",!t),r.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const r=Sm.getOrCreateInstance(this,t);if("string"==typeof e){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}at.on(document,Bne,TV,function(n){("A"===n.target.tagName||n.delegateTarget&&"A"===n.delegateTarget.tagName)&&n.preventDefault();const e=E5(this),t=On.find(e);for(const r of t)Sm.getOrCreateInstance(r,{toggle:!1}).toggle()}),uu(Sm);const B5="dropdown",Am=".bs.dropdown",SV=".data-api",Yne="ArrowUp",$5="ArrowDown",Jne=`hide${Am}`,Xne=`hidden${Am}`,ere=`show${Am}`,tre=`shown${Am}`,H5=`click${Am}${SV}`,G5=`keydown${Am}${SV}`,nre=`keyup${Am}${SV}`,g0="show",xm='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ure=`${xm}.show`,ON=".dropdown-menu",hre=au()?"top-end":"top-start",fre=au()?"top-start":"top-end",pre=au()?"bottom-end":"bottom-start",gre=au()?"bottom-start":"bottom-end",mre=au()?"left-start":"right-start",_re=au()?"right-start":"left-start",Ere={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},wre={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class cc extends el{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=On.next(this._element,ON)[0]||On.prev(this._element,ON)[0]||On.findOne(ON,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ere}static get DefaultType(){return wre}static get NAME(){return B5}toggle(){return this._isShown()?this.hide():this.show()}show(){if(zf(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!at.trigger(this._element,ere,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const r of[].concat(...document.body.children))at.on(r,"mouseover",TN);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(g0),this._element.classList.add(g0),at.trigger(this._element,tre,e)}}hide(){!zf(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!at.trigger(this._element,Jne,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))at.off(r,"mouseover",TN);this._popper&&this._popper.destroy(),this._menu.classList.remove(g0),this._element.classList.remove(g0),this._element.setAttribute("aria-expanded","false"),Vd.removeDataAttribute(this._menu,"popper"),at.trigger(this._element,Xne,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!Ld(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${B5.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof O>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:Ld(this._config.reference)?e=Wf(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=gV(e,this._menu,t)}_isShown(){return this._menu.classList.contains(g0)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return mre;if(e.classList.contains("dropstart"))return _re;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?fre:hre:t?gre:pre}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Vd.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const r=On.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(i=>c0(i));!r.length||yV(r,t,e===$5,!r.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=cc.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=On.find(ure);for(const r of t){const i=cc.getInstance(r);if(!i||!1===i._config.autoClose)continue;const u=e.composedPath(),c=u.includes(i._menu);if(u.includes(i._element)||"inside"===i._config.autoClose&&!c||"outside"===i._config.autoClose&&c||i._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const p={relatedTarget:i._element};"click"===e.type&&(p.clickEvent=e),i._completeHide(p)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),r="Escape"===e.key,i=[Yne,$5].includes(e.key);if(!i&&!r||t&&!r)return;e.preventDefault();const u=this.matches(xm)?this:On.prev(this,xm)[0]||On.next(this,xm)[0]||On.findOne(xm,e.delegateTarget.parentNode),c=cc.getOrCreateInstance(u);if(i)return e.stopPropagation(),c.show(),void c._selectMenuItem(e);c._isShown()&&(e.stopPropagation(),c.hide(),u.focus())}}at.on(document,G5,xm,cc.dataApiKeydownHandler),at.on(document,G5,ON,cc.dataApiKeydownHandler),at.on(document,H5,cc.clearMenus),at.on(document,nre,cc.clearMenus),at.on(document,H5,xm,function(n){n.preventDefault(),cc.getOrCreateInstance(this).toggle()}),uu(cc);const W5=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",z5=".sticky-top",PN="padding-right",q5="margin-right";class AV{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PN,t=>t+e),this._setElementAttributes(W5,PN,t=>t+e),this._setElementAttributes(z5,q5,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PN),this._resetElementAttributes(W5,PN),this._resetElementAttributes(z5,q5)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,r){const i=this.getWidth();this._applyManipulationCallback(e,c=>{if(c!==this._element&&window.innerWidth>c.clientWidth+i)return;this._saveInitialAttribute(c,t);const p=window.getComputedStyle(c).getPropertyValue(t);c.style.setProperty(t,`${r(Number.parseFloat(p))}px`)})}_saveInitialAttribute(e,t){const r=e.style.getPropertyValue(t);r&&Vd.setDataAttribute(e,t,r)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,i=>{const u=Vd.getDataAttribute(i,t);null!==u?(Vd.removeDataAttribute(i,t),i.style.setProperty(t,u)):i.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(Ld(e))t(e);else for(const r of On.find(e,this._element))t(r)}}const K5="backdrop",Y5=`mousedown.bs.${K5}`,Ire={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Cre={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Q5 extends MC{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Ire}static get DefaultType(){return Cre}static get NAME(){return K5}show(e){if(!this._config.isVisible)return void Fd(e);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{Fd(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),Fd(e)})):Fd(e)}dispose(){!this._isAppended||(at.off(this._element,Y5),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Wf(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),at.on(e,Y5,()=>{Fd(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){C5(e,this._getElement(),this._config.isAnimated)}}const LN=".bs.focustrap",Tre=`focusin${LN}`,Sre=`keydown.tab${LN}`,J5="backward",Nre={autofocus:!0,trapElement:null},Mre={autofocus:"boolean",trapElement:"element"};class X5 extends MC{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Nre}static get DefaultType(){return Mre}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),at.off(document,LN),at.on(document,Tre,e=>this._handleFocusin(e)),at.on(document,Sre,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,at.off(document,LN))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const r=On.focusableChildren(t);0===r.length?t.focus():this._lastTabNavDirection===J5?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?J5:"forward")}}const tl=".bs.modal",Pre=`hide${tl}`,Lre=`hidePrevented${tl}`,e8=`hidden${tl}`,t8=`show${tl}`,Fre=`shown${tl}`,Vre=`resize${tl}`,Ure=`click.dismiss${tl}`,Bre=`mousedown.dismiss${tl}`,jre=`keydown.dismiss${tl}`,$re=`click${tl}.data-api`,n8="modal-open",xV="modal-static",Kre={backdrop:!0,focus:!0,keyboard:!0},Zre={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Zf extends el{constructor(e,t){super(e,t),this._dialog=On.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new AV,this._addEventListeners()}static get Default(){return Kre}static get DefaultType(){return Zre}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||at.trigger(this._element,t8,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(n8),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||at.trigger(this._element,Pre).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])at.off(e,tl);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Q5({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new X5({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=On.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,at.trigger(this._element,Fre,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){at.on(this._element,jre,e=>{if("Escape"===e.key){if(this._config.keyboard)return e.preventDefault(),void this.hide();this._triggerBackdropTransition()}}),at.on(window,Vre,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),at.on(this._element,Bre,e=>{at.one(this._element,Ure,t=>{if(this._element===e.target&&this._element===t.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(n8),this._resetAdjustments(),this._scrollBar.reset(),at.trigger(this._element,e8)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(at.trigger(this._element,Lre).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;"hidden"===r||this._element.classList.contains(xV)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(xV),this._queueCallback(()=>{this._element.classList.remove(xV),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),r=t>0;if(r&&!e){const i=au()?"paddingLeft":"paddingRight";this._element.style[i]=`${t}px`}if(!r&&e){const i=au()?"paddingRight":"paddingLeft";this._element.style[i]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const r=Zf.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](t)}})}}at.on(document,$re,'[data-bs-toggle="modal"]',function(n){const e=Pd(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),at.one(e,t8,i=>{i.defaultPrevented||at.one(e,e8,()=>{c0(this)&&this.focus()})});const t=On.findOne(".modal.show");t&&Zf.getInstance(t).hide(),Zf.getOrCreateInstance(e).toggle(this)}),SN(Zf),uu(Zf);const Ud=".bs.offcanvas",i8=".data-api",Qre=`load${Ud}${i8}`,o8="showing",u8=".offcanvas.show",eie=`show${Ud}`,tie=`shown${Ud}`,nie=`hide${Ud}`,l8=`hidePrevented${Ud}`,c8=`hidden${Ud}`,rie=`resize${Ud}`,iie=`click${Ud}${i8}`,sie=`keydown.dismiss${Ud}`,aie={backdrop:!0,keyboard:!0,scroll:!1},uie={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Yf extends el{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return aie}static get DefaultType(){return uie}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||at.trigger(this._element,eie,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new AV).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(o8),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(o8),at.trigger(this._element,tie,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&!at.trigger(this._element,nie).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new AV).reset(),at.trigger(this._element,c8)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new Q5({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():at.trigger(this._element,l8)}:null})}_initializeFocusTrap(){return new X5({trapElement:this._element})}_addEventListeners(){at.on(this._element,sie,e=>{if("Escape"===e.key){if(!this._config.keyboard)return void at.trigger(this._element,l8);this.hide()}})}static jQueryInterface(e){return this.each(function(){const t=Yf.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}at.on(document,iie,'[data-bs-toggle="offcanvas"]',function(n){const e=Pd(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),zf(this))return;at.one(e,c8,()=>{c0(this)&&this.focus()});const t=On.findOne(u8);t&&t!==e&&Yf.getInstance(t).hide(),Yf.getOrCreateInstance(e).toggle(this)}),at.on(window,Qre,()=>{for(const n of On.find(u8))Yf.getOrCreateInstance(n).show()}),at.on(window,rie,()=>{for(const n of On.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(n).position&&Yf.getOrCreateInstance(n).hide()}),SN(Yf),uu(Yf);const lie=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),die=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,hie=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,fie=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?!lie.has(t)||Boolean(die.test(n.nodeValue)||hie.test(n.nodeValue)):e.filter(r=>r instanceof RegExp).some(r=>r.test(t))},d8={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},mie={allowList:d8,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},_ie={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},yie={entry:"(string|element|function|null)",selector:"(string|element)"};class vie extends MC{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return mie}static get DefaultType(){return _ie}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,u]of Object.entries(this._config.content))this._setContent(e,u,i);const t=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&t.classList.add(...r.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,r]of Object.entries(e))super._typeCheckConfig({selector:t,entry:r},yie)}_setContent(e,t,r){const i=On.findOne(r,e);if(i){if(!(t=this._resolvePossibleFunction(t)))return void i.remove();if(Ld(t))return void this._putElementInTemplate(Wf(t),i);if(this._config.html)return void(i.innerHTML=this._maybeSanitize(t));i.textContent=t}}_maybeSanitize(e){return this._config.sanitize?function pie(n,e,t){if(!n.length)return n;if(t&&"function"==typeof t)return t(n);const i=(new window.DOMParser).parseFromString(n,"text/html"),u=[].concat(...i.body.querySelectorAll("*"));for(const c of u){const p=c.nodeName.toLowerCase();if(!Object.keys(e).includes(p)){c.remove();continue}const v=[].concat(...c.attributes),I=[].concat(e["*"]||[],e[p]||[]);for(const A of v)fie(A,I)||c.removeAttribute(A.nodeName)}return i.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return"function"==typeof e?e(this):e}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const wie=new Set(["sanitize","allowList","sanitizeFn"]),NV="fade",FN="show",f8="hide.bs.modal",PC="hover",MV="focus",Lie={AUTO:"auto",TOP:"top",RIGHT:au()?"left":"right",BOTTOM:"bottom",LEFT:au()?"right":"left"},Fie={allowList:d8,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Vie={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Nm extends el{constructor(e,t){if(typeof O>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Fie}static get DefaultType(){return Vie}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),at.off(this._element.closest(".modal"),f8,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=at.trigger(this._element,this.constructor.eventName("show")),r=(b5(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:u}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(u.append(i),at.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(FN),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))at.on(p,"mouseover",TN);this._queueCallback(()=>{at.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!at.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(FN),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))at.off(i,"mouseover",TN);this._activeTrigger.click=!1,this._activeTrigger[MV]=!1,this._activeTrigger[PC]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),at.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(NV,FN),t.classList.add(`bs-${this.constructor.NAME}-auto`);const r=(n=>{do{n+=Math.floor(1e6*Math.random())}while(document.getElementById(n));return n})(this.constructor.NAME).toString();return t.setAttribute("id",r),this._isAnimated()&&t.classList.add(NV),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new vie({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(NV)}_isShown(){return this.tip&&this.tip.classList.contains(FN)}_createPopper(e){const t="function"==typeof this._config.placement?this._config.placement.call(this,e,this._element):this._config.placement,r=Lie[t.toUpperCase()];return gV(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return"function"==typeof e?e.call(this._element):e}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)at.on(this._element,this.constructor.eventName("click"),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if("manual"!==t){const r=this.constructor.eventName(t===PC?"mouseenter":"focusin"),i=this.constructor.eventName(t===PC?"mouseleave":"focusout");at.on(this._element,r,this._config.selector,u=>{const c=this._initializeOnDelegatedTarget(u);c._activeTrigger["focusin"===u.type?MV:PC]=!0,c._enter()}),at.on(this._element,i,this._config.selector,u=>{const c=this._initializeOnDelegatedTarget(u);c._activeTrigger["focusout"===u.type?MV:PC]=c._element.contains(u.relatedTarget),c._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},at.on(this._element.closest(".modal"),f8,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");!e||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=Vd.getDataAttributes(this._element);for(const r of Object.keys(t))wie.has(r)&&delete t[r];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:Wf(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=Nm.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}uu(Nm);const $ie={...Nm.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Hie={...Nm.DefaultType,content:"(null|string|element|function)"};class RV extends Nm{static get Default(){return $ie}static get DefaultType(){return Hie}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=RV.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}uu(RV);const kV=".bs.scrollspy",zie=`activate${kV}`,p8=`click${kV}`,qie=`load${kV}.data-api`,m0="active",OV="[href]",g8=".nav-link",Qie=`${g8}, .nav-item > ${g8}, .list-group-item`,ese={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},tse={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class VN extends el{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ese}static get DefaultType(){return tse}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Wf(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(at.off(this._config.target,p8),at.on(this._config.target,p8,OV,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const r=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(r.scrollTo)return void r.scrollTo({top:i,behavior:"smooth"});r.scrollTop=i}}))}_getNewObserver(){return new IntersectionObserver(t=>this._observerCallback(t),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(e){const t=c=>this._targetLinks.get(`#${c.target.id}`),r=c=>{this._previousScrollData.visibleEntryTop=c.target.offsetTop,this._process(t(c))},i=(this._rootElement||document.documentElement).scrollTop,u=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const c of e){if(!c.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(c));continue}const p=c.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&p){if(r(c),!i)return}else!u&&!p&&r(c)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=On.find(OV,this._config.target);for(const t of e){if(!t.hash||zf(t))continue;const r=On.findOne(t.hash,this._element);c0(r)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(m0),this._activateParents(e),at.trigger(this._element,zie,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))On.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(m0);else for(const t of On.parents(e,".nav, .list-group"))for(const r of On.prev(t,Qie))r.classList.add(m0)}_clearActiveClass(e){e.classList.remove(m0);const t=On.find(`${OV}.${m0}`,e);for(const r of t)r.classList.remove(m0)}static jQueryInterface(e){return this.each(function(){const t=VN.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}at.on(window,qie,()=>{for(const n of On.find('[data-bs-spy="scroll"]'))VN.getOrCreateInstance(n)}),uu(VN);const Mm=".bs.tab",rse=`hide${Mm}`,ise=`hidden${Mm}`,sse=`show${Mm}`,ose=`shown${Mm}`,ase=`click${Mm}`,use=`keydown${Mm}`,lse=`load${Mm}`,cse="ArrowLeft",m8="ArrowRight",dse="ArrowUp",_8="ArrowDown",Rm="active",PV="show",LV=":not(.dropdown-toggle)",v8='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',FV=`.nav-link${LV}, .list-group-item${LV}, [role="tab"]${LV}, ${v8}`,yse=`.${Rm}[data-bs-toggle="tab"], .${Rm}[data-bs-toggle="pill"], .${Rm}[data-bs-toggle="list"]`;class _0 extends el{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),at.on(this._element,use,t=>this._keydown(t)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),r=t?at.trigger(t,rse,{relatedTarget:e}):null;at.trigger(e,sse,{relatedTarget:t}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Rm),this._activate(Pd(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),at.trigger(e,ose,{relatedTarget:t})):e.classList.add(PV)},e,e.classList.contains("fade")))}_deactivate(e,t){e&&(e.classList.remove(Rm),e.blur(),this._deactivate(Pd(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),at.trigger(e,ise,{relatedTarget:t})):e.classList.remove(PV)},e,e.classList.contains("fade")))}_keydown(e){if(![cse,m8,dse,_8].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=[m8,_8].includes(e.key),r=yV(this._getChildren().filter(i=>!zf(i)),e.target,t,!0);r&&(r.focus({preventScroll:!0}),_0.getOrCreateInstance(r).show())}_getChildren(){return On.find(FV,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const r of t)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",t),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Pd(e);!t||(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,t){const r=this._getOuterElement(e);if(!r.classList.contains("dropdown"))return;const i=(u,c)=>{const p=On.findOne(u,r);p&&p.classList.toggle(c,t)};i(".dropdown-toggle",Rm),i(".dropdown-menu",PV),r.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,r){e.hasAttribute(t)||e.setAttribute(t,r)}_elemIsActive(e){return e.classList.contains(Rm)}_getInnerElement(e){return e.matches(FV)?e:On.findOne(FV,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=_0.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}at.on(document,ase,v8,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!zf(this)&&_0.getOrCreateInstance(this).show()}),at.on(window,lse,()=>{for(const n of On.find(yse))_0.getOrCreateInstance(n)}),uu(_0);const Qf=".bs.toast",Ese=`mouseover${Qf}`,wse=`mouseout${Qf}`,bse=`focusin${Qf}`,Ise=`focusout${Qf}`,Cse=`hide${Qf}`,Dse=`hidden${Qf}`,Tse=`show${Qf}`,Sse=`shown${Qf}`,UN="show",BN="showing",xse={animation:"boolean",autohide:"boolean",delay:"number"},Nse={animation:!0,autohide:!0,delay:5e3};class jN extends el{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Nse}static get DefaultType(){return xse}static get NAME(){return"toast"}show(){at.trigger(this._element,Tse).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(UN,BN),this._queueCallback(()=>{this._element.classList.remove(BN),at.trigger(this._element,Sse),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!at.trigger(this._element,Cse).defaultPrevented&&(this._element.classList.add(BN),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(BN,UN),at.trigger(this._element,Dse)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(UN),super.dispose()}isShown(){return this._element.classList.contains(UN)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){at.on(this._element,Ese,e=>this._onInteraction(e,!0)),at.on(this._element,wse,e=>this._onInteraction(e,!1)),at.on(this._element,bse,e=>this._onInteraction(e,!0)),at.on(this._element,Ise,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=jN.getOrCreateInstance(this,e);if("string"==typeof e){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}function Mse(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",30)(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.ALo(5,"date"),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.qZA(),f.TgZ(10,"td"),f._uU(11),f.qZA(),f.TgZ(12,"td"),f._uU(13),f.ALo(14,"date"),f.qZA(),f.TgZ(15,"a",31),f.NdJ("click",function(){const u=f.CHM(t).$implicit,c=f.oxw();return f.KtG(c.view_order(u.key))}),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.value.info),f.xp6(2),f.Oqu(f.xi3(5,6,t.value.created_ts,"short")),f.xp6(3),f.Oqu(t.value.customer_name),f.xp6(2),f.Oqu(t.value.pathway),f.xp6(2),f.Oqu(t.value.checkpoints[t.value.reached_idx].name),f.xp6(2),f.Oqu(f.xi3(14,9,t.value.checkpoints[t.value.reached_idx].reached_ts,"short"))}}function Rse(n,e){if(1&n&&(f.TgZ(0,"option",32),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("value",t.key),f.xp6(1),f.Oqu(t.value.name)}}function kse(n,e){1&n&&(f.ynx(0),f._uU(1," (Finished)"),f.BQk())}function Ose(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",t.desc," ")}}function Pse(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",t.extra_info," ")}}function Lse(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",41)(1,"h2",42)(2,"button",43),f.NdJ("click",function(i){f.CHM(t);const u=f.oxw().index,c=f.oxw(2);return f.KtG(c.toggle_order_modal_accordian("#collapse"+u,i.currentTarget))}),f.TgZ(3,"span"),f._uU(4),f.qZA(),f.TgZ(5,"span",44),f._uU(6),f.ALo(7,"date"),f.qZA()()(),f.TgZ(8,"div",45)(9,"div",46),f.YNc(10,Ose,2,1,"p",35),f.YNc(11,Pse,2,1,"p",35),f.qZA()()()}if(2&n){const t=f.oxw(),r=t.$implicit,i=t.index;f.xp6(4),f.Oqu(r.name),f.xp6(2),f.hij(" ",f.xi3(7,5,r.reached_ts,"short")," "),f.xp6(2),f.MGl("id","collapse",i,""),f.xp6(2),f.Q6J("ngIf",r.desc),f.xp6(1),f.Q6J("ngIf",r.extra_info)}}function Fse(n,e){if(1&n&&(f.ynx(0),f.YNc(1,Lse,12,8,"div",40),f.BQk()),2&n){const t=e.index,r=f.oxw().ngIf;f.xp6(1),f.Q6J("ngIf",t<=r.reached_idx)}}function Vse(n,e){if(1&n){const t=f.EpF();f.ynx(0),f.TgZ(1,"h2",47),f._uU(2),f.qZA(),f._UZ(3,"textarea",48),f.TgZ(4,"button",49),f.NdJ("click",function(){f.CHM(t);const i=f.oxw(2);return f.KtG(i.complete_checkpoint())}),f._uU(5,"Complete"),f.qZA(),f.BQk()}if(2&n){const t=f.oxw().ngIf,r=f.oxw();f.xp6(2),f.hij('Complete checkpoint "',t.checkpoints[t.reached_idx+1].name,'":'),f.xp6(1),f.Q6J("formControl",r.viewOrderExtraInfo)}}function Use(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",11)(1,"div",12)(2,"h5",13),f._uU(3),f.qZA(),f._UZ(4,"button",33),f.qZA(),f.TgZ(5,"div",16)(6,"p"),f._uU(7),f.qZA(),f.TgZ(8,"p"),f._uU(9),f.ALo(10,"date"),f.qZA(),f._UZ(11,"br"),f.TgZ(12,"h2",34),f._uU(13,"Progress"),f.YNc(14,kse,2,0,"ng-container",35),f._uU(15,":"),f.qZA(),f.TgZ(16,"div",36),f.YNc(17,Fse,2,1,"ng-container",37),f.qZA(),f.YNc(18,Vse,6,2,"ng-container",35),f.qZA(),f.TgZ(19,"div",25)(20,"button",38),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.copy_permalink(i.current_order))}),f._UZ(21,"i",39),f._uU(22," Copy Link"),f.qZA(),f.TgZ(23,"button",26),f._uU(24,"Close"),f.qZA()()()}if(2&n){const t=e.ngIf;f.xp6(3),f.AsE("View Order: ",t.info," (",t.pathway,")"),f.xp6(4),f.hij("Customer Name: ",t.customer_name,""),f.xp6(2),f.hij("Created: ",f.xi3(10,7,t.created_ts,"medium"),""),f.xp6(5),f.Q6J("ngIf",t.done),f.xp6(3),f.Q6J("ngForOf",t.checkpoints),f.xp6(1),f.Q6J("ngIf",!t.done)}}SN(jN),uu(jN);class $N{constructor(e,t,r){this.fb=e,this.auth=t,this.db=r,this.all_pathways=St({}),this.all_orders=St({}),this.order_form=this.fb.group({pathway:[""],customer_name:[""],order_info:[""]}),this.current_order=null,this.viewOrderExtraInfo=new cg("")}ngOnInit(){var e=this;return(0,Oe.Z)(function*(){let t=(yield e.auth.currentUser)?.uid;null!=t&&(e.all_pathways=e.db.list(`pathways/${t}`).snapshotChanges().pipe((0,At.U)(r=>Object.fromEntries(r.map(i=>[i.payload.key,i.payload.val()])))),e.all_orders=e.db.list(`orders/${t}`).snapshotChanges().pipe((0,At.U)(r=>Object.fromEntries(r.map(i=>[i.payload.key,i.payload.val()])))),console.log(t),new Zf("#view-order-modal"))})()}create_order(){var e=this;return(0,Oe.Z)(function*(){let t=+new Date,r=e.order_form.value,i=(yield X2(e.all_pathways))[r.pathway];e.order_form.reset();let u={customer_name:r.customer_name,info:r.order_info,pathway:i.name,created_ts:t,done:!1,reached_idx:0,checkpoints:i.checkpoints};u.checkpoints[0].reached_ts=t;let c=(yield e.auth.currentUser)?.uid;if(null==c)return;let p=yield e.db.list(`orders/${c}`).push(u);document.getElementById("order-create-close")?.click(),p.key&&e.view_order(p.key)})()}view_order(e){this.current_order=e,Zf.getInstance("#view-order-modal")?.show()}toggle_order_modal_accordian(e,t){Sm.getOrCreateInstance(e).toggle(),t.classList.toggle("collapsed")}complete_checkpoint(){var e=this;return(0,Oe.Z)(function*(){let t=e.current_order,r=(yield X2(e.all_orders))[t],i=+new Date;r.reached_idx++,r.checkpoints[r.reached_idx].reached_ts=i,e.viewOrderExtraInfo.value&&(r.checkpoints[r.reached_idx].extra_info=e.viewOrderExtraInfo.value),r.reached_idx==r.checkpoints.length-1&&(r.done=!0);let u=(yield e.auth.currentUser)?.uid;null!=u&&(yield e.db.object(`orders/${u}/${t}`).set(r))})()}copy_permalink(e){var t=this;return(0,Oe.Z)(function*(){console.log(e);let r=(yield t.auth.currentUser)?.uid;if(null==r)return;let i=new URL(`/track/${r}/${e}`,document.location.href)+"";yield navigator.clipboard.writeText(i)})()}static#e=this.\u0275fac=function(t){return new(t||$N)(f.Y36($l),f.Y36(Xs),f.Y36(Cv))};static#t=this.\u0275cmp=f.Xpm({type:$N,selectors:[["app-dashboard"]],decls:63,vars:14,consts:[[1,"container"],[1,"mt-5"],[2,"width","100%"],["routerLink","/new-pathway",1,"btn","btn-success","ms-3",2,"float","right"],[1,"bi","bi-plus-lg"],["type","button","id","temptemp","data-bs-toggle","modal","data-bs-target","#new-order-modal",1,"btn","btn-success","ms-3",2,"float","right"],[1,"mt-5","mb-5"],[1,"table","table-hover",2,"font-size","14pt"],["style","position: relative;",4,"ngFor","ngForOf"],["id","new-order-modal","tabindex","-1",1,"modal","modal-lg"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","order-create-close",1,"btn-close"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"modal-body"],["for","order-pathway",1,"col-form-label"],["formControlName","pathway","required","",1,"form-select"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","customer-name",1,"col-form-label"],["formControlName","customer_name","id","customer-name","required","",1,"form-control"],["for","order-info",1,"col-form-label"],["formControlName","order_info","id","order-info","required","",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["id","view-order-modal","tabindex","-1",1,"modal","modal-lg"],["class","modal-content",4,"ngIf"],[2,"position","relative"],["href","javascript:void(0);",1,"stretched-link",2,"padding","0",3,"click"],[3,"value"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"fs-5"],[4,"ngIf"],["id","order-accordion",1,"accordion"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-clipboard2-fill"],["class","accordion-item",4,"ngIf"],[1,"accordion-item"],[1,"accordion-header"],["type","button",1,"accordion-button","collapsed",2,"display","grid","grid-template-columns","1fr max-content max-content","align-items","center","grid-gap","10px",3,"click"],[2,"padding-right","20px"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"fs-5","mt-5"],["placeholder","Extra Info (Optional)",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-success","mt-2",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1",1),f._uU(2,"Dashboard"),f.qZA(),f.TgZ(3,"div",2)(4,"a",3),f._UZ(5,"i",4),f._uU(6," New Pathway"),f.qZA(),f.TgZ(7,"button",5),f._UZ(8,"i",4),f._uU(9," Create Order"),f.qZA()(),f.TgZ(10,"h2",6),f._uU(11,"Orders:"),f.qZA(),f.TgZ(12,"table",7)(13,"thead")(14,"tr")(15,"th"),f._uU(16,"Info"),f.qZA(),f.TgZ(17,"th"),f._uU(18,"Created"),f.qZA(),f.TgZ(19,"th"),f._uU(20,"Customer Name"),f.qZA(),f.TgZ(21,"th"),f._uU(22,"Pathway"),f.qZA(),f.TgZ(23,"th"),f._uU(24,"Current Stage"),f.qZA(),f.TgZ(25,"th"),f._uU(26,"Last Updated"),f.qZA()()(),f.TgZ(27,"tbody"),f.YNc(28,Mse,16,12,"tr",8),f.ALo(29,"keyvalue"),f.ALo(30,"async"),f.qZA()()(),f.TgZ(31,"div",9)(32,"div",10)(33,"div",11)(34,"div",12)(35,"h5",13),f._uU(36,"Create Order"),f.qZA(),f._UZ(37,"button",14),f.qZA(),f.TgZ(38,"form",15),f.NdJ("ngSubmit",function(){return r.create_order()}),f.TgZ(39,"div",16)(40,"label",17),f._uU(41,"Pathway:"),f.qZA(),f.TgZ(42,"select",18)(43,"option",19),f._uU(44,"Select Pathway"),f.qZA(),f.YNc(45,Rse,2,2,"option",20),f.ALo(46,"keyvalue"),f.ALo(47,"async"),f.qZA(),f.TgZ(48,"label",21),f._uU(49,"Customer Name:"),f.qZA(),f._UZ(50,"input",22),f.TgZ(51,"label",23),f._uU(52,"Order Info:"),f.qZA(),f._UZ(53,"input",24),f.qZA(),f.TgZ(54,"div",25)(55,"button",26),f._uU(56,"Cancel"),f.qZA(),f.TgZ(57,"button",27),f._uU(58,"Create"),f.qZA()()()()()(),f.TgZ(59,"div",28)(60,"div",10),f.YNc(61,Use,25,10,"div",29),f.ALo(62,"async"),f.qZA()()),2&t&&(f.xp6(28),f.Q6J("ngForOf",f.lcZ(29,4,f.lcZ(30,6,r.all_orders))),f.xp6(10),f.Q6J("formGroup",r.order_form),f.xp6(7),f.Q6J("ngForOf",f.lcZ(46,8,f.lcZ(47,10,r.all_pathways))),f.xp6(16),f.Q6J("ngIf",r.current_order&&f.lcZ(62,12,r.all_orders)[r.current_order]))},dependencies:[xr,fs,ed,gg,Lw,Ll,Cy,sg,ay,zh,Ey,Gh,by,ps,Oa,fu]})}function Bse(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().index,u=f.oxw();return f.KtG(u.delete_checkpoint(i))}),f.qZA()}}function jse(n,e){if(1&n&&(f.ynx(0),f.TgZ(1,"div",10)(2,"div",11)(3,"label",12),f._uU(4,"Checkpoint Name"),f.qZA(),f.YNc(5,Bse,1,0,"button",13),f._UZ(6,"input",14),f.TgZ(7,"label",15),f._uU(8,"Checkpoint Description (Optional)"),f.qZA(),f._UZ(9,"textarea",16),f.qZA()(),f.BQk()),2&n){const t=e.index,r=f.oxw();f.xp6(1),f.Q6J("formGroupName",t),f.xp6(2),f.s9C("for","checkname"+t),f.xp6(2),f.Q6J("ngIf",t&&t!=r.checkpoints.controls.length-1),f.xp6(1),f.s9C("id","checkname"+t),f.xp6(1),f.s9C("for","desc"+t),f.xp6(2),f.s9C("id","desc"+t)}}class HN{constructor(e,t,r,i){this.fb=e,this.auth=t,this.db=r,this.router=i,this.form=this.fb.group({name:[""],checkpoints:this.fb.array([this.new_checkpoint(),this.new_checkpoint()])}),this.is_submitting=!1}get checkpoints(){return this.form.controls.checkpoints}new_checkpoint(){return this.fb.group({name:[""],desc:[""]})}add_checkpoint(){this.checkpoints.push(this.new_checkpoint())}delete_checkpoint(e){this.checkpoints.removeAt(e)}submit(){var e=this;return(0,Oe.Z)(function*(){e.is_submitting=!0;let t=e.form.value,r=(yield e.auth.currentUser)?.uid;null!=r&&(yield e.db.list(`pathways/${r}`).push(t),yield e.router.navigate(["dashboard"]))})()}static#e=this.\u0275fac=function(t){return new(t||HN)(f.Y36($l),f.Y36(Xs),f.Y36(Cv),f.Y36(Ii))};static#t=this.\u0275cmp=f.Xpm({type:HN,selectors:[["app-new-pathway"]],decls:15,vars:3,consts:[[1,"container"],[1,"mt-5"],["ngNativeValidate","",3,"formGroup","ngSubmit"],["for","pathname",1,"form-label","mt-5"],["id","pathname","formControlName","name","placeholder","Pathway Name","required","",1,"form-control"],[1,"mt-5","mb-3"],["formArrayName","checkpoints"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success","mb-5",3,"click"],["type","submit",1,"btn","btn-primary",2,"float","right",3,"disabled"],[1,"card","mb-5",3,"formGroupName"],[1,"card-body"],[1,"form-label",3,"for"],["type","button","class","btn-close","style","float:right;","aria-label","Close",3,"click",4,"ngIf"],["formControlName","name","placeholder","Checkpoint Name","required","",1,"form-control",3,"id"],[1,"form-label","mt-3",3,"for"],["formControlName","desc","placeholder","Checkpoint Description",1,"form-control",3,"id"],["type","button","aria-label","Close",1,"btn-close",2,"float","right",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1",1),f._uU(2,"Make New Pathway"),f.qZA(),f.TgZ(3,"form",2),f.NdJ("ngSubmit",function(){return r.submit()}),f.TgZ(4,"label",3),f._uU(5,"Name"),f.qZA(),f._UZ(6,"input",4),f.TgZ(7,"h4",5),f._uU(8," Checkpoints: "),f.qZA(),f.ynx(9,6),f.YNc(10,jse,10,6,"ng-container",7),f.BQk(),f.TgZ(11,"button",8),f.NdJ("click",function(){return r.add_checkpoint()}),f._uU(12,"Add Additional Checkpoint"),f.qZA(),f.TgZ(13,"button",9),f._uU(14,"Submit"),f.qZA()()()),2&t&&(f.xp6(3),f.Q6J("formGroup",r.form),f.xp6(7),f.Q6J("ngForOf",r.checkpoints.controls),f.xp6(3),f.Q6J("disabled",r.is_submitting))},dependencies:[xr,fs,Ll,sg,ay,zh,Gh,by,pg,wy]})}class GN{static#e=this.\u0275fac=function(t){return new(t||GN)};static#t=this.\u0275cmp=f.Xpm({type:GN,selectors:[["app-page-not-found"]],decls:5,vars:0,consts:[[1,"container"],[1,"mt-5"],[1,"lead","mt-4"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h2",1),f._uU(2,"Page Not Found"),f.qZA(),f.TgZ(3,"p",2),f._uU(4,"Sorry, we don't know that url."),f.qZA()())}})}const $se=["checkpointCircle"];function Hse(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw().ngIf;f.xp6(1),f.Oqu(t.desc)}}function Gse(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw().ngIf;f.xp6(1),f.Oqu(t.extra_info)}}function Wse(n,e){if(1&n&&(f.TgZ(0,"div",14)(1,"h3",15),f._uU(2),f.qZA(),f.TgZ(3,"p"),f._uU(4),f.ALo(5,"date"),f.qZA(),f.YNc(6,Hse,2,1,"p",16),f.YNc(7,Gse,2,1,"p",16),f.qZA()),2&n){const t=e.ngIf;f.xp6(2),f.hij("Status: ",t.name,""),f.xp6(2),f.hij("At ",f.xi3(5,4,t.reached_ts,"short"),""),f.xp6(2),f.Q6J("ngIf",t.desc),f.xp6(1),f.Q6J("ngIf",t.extra_info)}}const zse=function(n,e){return{"checkpoint-circle":!0,current:n,reached:e}};function qse(n,e){if(1&n&&(f.ynx(0),f._UZ(1,"div",17,18),f.ALo(3,"date"),f.BQk()),2&n){const t=e.$implicit,r=e.index,i=f.oxw().ngIf;f.xp6(1),f.zWS("data-bs-title","<p class='lead'>",t.name,"</p>",t.reached_ts?"Reached: "+f.xi3(3,3,t.reached_ts,"short"):"(pending)",""),f.Q6J("ngClass",f.WLB(6,zse,r==i.reached_idx,r<=i.reached_idx))}}function Kse(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",t.desc," ")}}function Zse(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",t.extra_info," ")}}function Yse(n,e){if(1&n&&(f.TgZ(0,"div",24)(1,"div",25),f.YNc(2,Kse,2,1,"p",16),f.YNc(3,Zse,2,1,"p",16),f.qZA()()),2&n){const t=f.oxw(),i=t.$implicit;f.MGl("id","collapse",t.index,""),f.xp6(2),f.Q6J("ngIf",i.desc),f.xp6(1),f.Q6J("ngIf",i.extra_info)}}function Qse(n,e){if(1&n){const t=f.EpF();f.ynx(0),f.TgZ(1,"div",19)(2,"h2",20)(3,"button",21),f.NdJ("click",function(i){const c=f.CHM(t).index,p=f.oxw(2);return f.KtG(p.toggle_order_modal_accordian("#collapse"+c,i.currentTarget))}),f.TgZ(4,"span"),f._uU(5),f.qZA(),f.TgZ(6,"span",22),f._uU(7),f.ALo(8,"date"),f.qZA()()(),f.YNc(9,Yse,4,3,"div",23),f.qZA(),f.BQk()}if(2&n){const t=e.$implicit,r=e.index,i=f.oxw().ngIf;f.xp6(3),f.Q6J("disabled",r>i.reached_idx),f.xp6(2),f.Oqu(t.name),f.xp6(2),f.hij(" ",f.xi3(8,4,t.reached_ts,"short")," "),f.xp6(2),f.Q6J("ngIf",r<=i.reached_idx)}}function Jse(n,e){if(1&n&&(f.TgZ(0,"div",5)(1,"h1",6),f._uU(2),f.TgZ(3,"span",7),f._uU(4),f.qZA()(),f.TgZ(5,"h3",8)(6,"span"),f._uU(7),f.qZA(),f.TgZ(8,"span",9),f._uU(9),f.ALo(10,"date"),f.qZA()(),f.YNc(11,Wse,8,7,"div",10),f.TgZ(12,"div",11),f.YNc(13,qse,4,9,"ng-container",12),f.qZA(),f.TgZ(14,"h4",6),f._uU(15,"History:"),f.qZA(),f.TgZ(16,"div",13),f.YNc(17,Qse,10,7,"ng-container",12),f.qZA()()),2&n){const t=e.ngIf;f.xp6(2),f.hij("Track ",t.pathway," "),f.xp6(2),f.hij("(",t.info,")"),f.xp6(3),f.hij("For ",t.customer_name,""),f.xp6(2),f.hij("Created: ",f.xi3(10,7,t.created_ts,"short"),""),f.xp6(2),f.Q6J("ngIf",t.checkpoints[t.reached_idx]),f.xp6(2),f.Q6J("ngForOf",t.checkpoints),f.xp6(4),f.Q6J("ngForOf",t.checkpoints)}}class WN{constructor(e,t,r){this.db=e,this.route=t,this.router=r,this.order_obv=St(null)}static#e=this.hide_nav=!0;ngOnInit(){var e=this;return(0,Oe.Z)(function*(){const t=e.route.snapshot.params.uid,r=e.route.snapshot.params.oid;t&&r?(e.order_obv=e.db.object(`orders/${t}/${r}`).valueChanges(),(yield X2(e.order_obv))||(yield e.router.navigate(["404"]))):yield e.router.navigate(["404"])})()}ngAfterViewInit(){let e=()=>{[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(i=>Nm.getOrCreateInstance(i))};e(),this.checkpoint_circle_refs.changes.subscribe(e)}toggle_order_modal_accordian(e,t){Sm.getOrCreateInstance(e).toggle(),t.classList.toggle("collapsed")}static#t=this.\u0275fac=function(t){return new(t||WN)(f.Y36(Cv),f.Y36(Lu),f.Y36(Ii))};static#n=this.\u0275cmp=f.Xpm({type:WN,selectors:[["app-track"]],viewQuery:function(t,r){if(1&t&&f.Gf($se,5),2&t){let i;f.iGM(i=f.CRH())&&(r.checkpoint_circle_refs=i)}},decls:8,vars:3,consts:[["class","container",4,"ngIf"],[2,"flex","1"],[1,"bg-dark","text-light"],[1,"pt-2","pb-2",2,"text-align","center"],["routerLink","/",1,"text-light"],[1,"container"],[1,"mt-5"],[1,"text-muted","ms-3"],[1,"text-med","mt-4"],[1,"fs-5",2,"float","right"],["style","text-align: center;","class","lead",4,"ngIf"],[1,"mt-5","progress-container"],[4,"ngFor","ngForOf"],["id","order-accordion",1,"accordion","mt-3"],[1,"lead",2,"text-align","center"],[1,"mt-5","mb-3",2,"text-align","center"],[4,"ngIf"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-custom-class","checkpoint-tooltip","data-bs-html","true",3,"ngClass"],["checkpointCircle",""],[1,"accordion-item"],[1,"accordion-header"],["type","button",1,"accordion-button","collapsed",2,"display","grid","grid-template-columns","1fr max-content max-content","align-items","center","grid-gap","10px",3,"disabled","click"],[2,"padding-right","20px"],["class","accordion-collapse collapse",3,"id",4,"ngIf"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"]],template:function(t,r){1&t&&(f.YNc(0,Jse,18,10,"div",0),f.ALo(1,"async"),f._UZ(2,"div",1),f.TgZ(3,"footer",2)(4,"div",3),f._uU(5," Powered by "),f.TgZ(6,"a",4),f._uU(7,"Tellotrack"),f.qZA()()()),2&t&&f.Q6J("ngIf",f.lcZ(1,1,r.order_obv))},dependencies:[Tt,xr,fs,ed,ps,Oa]})}var Xse=U(8247);function eoe(n,e){if(1&n&&(f.TgZ(0,"div",12)(1,"span",5),f._uU(2,"Sign-In Method:"),f.qZA(),f._uU(3),f.qZA()),2&n){const t=e.ngIf,r=f.oxw(2);f.xp6(3),f.hij("",r.SigninMethodTable[t[0].providerId]," ")}}function toe(n,e){if(1&n&&(f.TgZ(0,"div",12)(1,"label",13),f._uU(2,"Email:"),f.qZA(),f._UZ(3,"input",14),f.qZA()),2&n){const t=f.oxw().ngIf;f.xp6(3),f.s9C("value",t.email)}}function noe(n,e){1&n&&(f.TgZ(0,"div",15)(1,"span",16),f._uU(2,"Loading..."),f.qZA()())}function roe(n,e){1&n&&(f.TgZ(0,"div",21)(1,"span",16),f._uU(2,"Loading..."),f.qZA()())}function ioe(n,e){if(1&n&&(f.ynx(0),f._uU(1," Send Reset Password Email "),f.YNc(2,roe,3,0,"div",20),f.BQk()),2&n){const t=f.oxw(3);f.xp6(2),f.Q6J("ngIf",t.reset_email_loading)}}function soe(n,e){1&n&&(f.ynx(0),f._uU(1,"Reset Password Email Sent"),f.BQk())}function ooe(n,e){if(1&n){const t=f.EpF();f.ynx(0),f._UZ(1,"hr"),f.TgZ(2,"h2",17),f._uU(3,"Security"),f.qZA(),f.TgZ(4,"div",18)(5,"button",19),f.NdJ("click",function(){f.CHM(t);const i=f.oxw(2);return f.KtG(i.send_reset_email())}),f.YNc(6,ioe,3,1,"ng-container",0),f.YNc(7,soe,2,0,"ng-container",0),f.qZA()(),f.BQk()}if(2&n){const t=f.oxw(2);f.xp6(5),f.Q6J("disabled",t.reset_email_sent||t.reset_email_loading),f.xp6(1),f.Q6J("ngIf",!t.reset_email_sent),f.xp6(1),f.Q6J("ngIf",t.reset_email_sent)}}const aoe=function(){return{standalone:!0}},w8=function(){return[null]};function uoe(n,e){if(1&n){const t=f.EpF();f.ynx(0),f.TgZ(1,"div",1)(2,"h1",2),f._uU(3,"Account Settings"),f.qZA(),f.YNc(4,eoe,4,1,"div",3),f.YNc(5,toe,4,1,"div",3),f.TgZ(6,"div",4)(7,"span",5),f._uU(8,"Manage Subscription:"),f.qZA(),f.TgZ(9,"button",6),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.open_stripe_portal())}),f._uU(10," Open Stripe Portal "),f.YNc(11,noe,3,0,"div",7),f.qZA()(),f._UZ(12,"hr"),f.TgZ(13,"h2",2),f._uU(14,"Branding"),f.qZA(),f.TgZ(15,"div",4)(16,"form",8),f.NdJ("ngSubmit",function(){const u=f.CHM(t).ngIf,c=f.oxw();return f.KtG(c.update_display_name(u))}),f.TgZ(17,"label",9),f._uU(18,"Display Name:"),f.qZA(),f.TgZ(19,"input",10),f.NdJ("ngModelChange",function(i){f.CHM(t);const u=f.oxw();return f.KtG(u.display_name_input=i)}),f.qZA(),f.TgZ(20,"button",11),f._uU(21,"Save"),f.qZA()()(),f.YNc(22,ooe,8,3,"ng-container",0),f.qZA(),f.BQk()}if(2&n){const t=e.ngIf,r=f.oxw();f.xp6(4),f.Q6J("ngIf",t.providerData),f.xp6(1),f.Q6J("ngIf",t.email),f.xp6(4),f.Q6J("disabled",r.is_portal_loading),f.xp6(2),f.Q6J("ngIf",r.is_portal_loading),f.xp6(8),f.Q6J("ngModelOptions",f.DdM(8,aoe))("ngModel",r.display_name_input),f.xp6(1),f.Q6J("disabled",!(r.display_name_input&&r.display_name_input!=t.displayName)),f.xp6(2),f.Q6J("ngIf",t.email&&"password"===(null==(t.providerData||f.DdM(9,w8))[0]?null:(t.providerData||f.DdM(10,w8))[0].providerId))}}class zN{constructor(e,t,r){this.firebase_auth=e,this.db=t,this.fns=r,this.SigninMethodTable={password:"Email and Password","google.com":"Google"},this.is_portal_loading=!1,this.reset_email_sent=!1,this.reset_email_loading=!1}ngOnInit(){this.firebase_auth.user.subscribe(e=>{this.display_name_input=e?.displayName})}update_display_name(e){var t=this;return(0,Oe.Z)(function*(){let r=(0,Xse.af)(e,{displayName:t.display_name_input}),i=t.db.object(`branding/${e.uid}`).update({display_name:t.display_name_input});yield Promise.all([r,i])})()}open_stripe_portal(){var e=this;return(0,Oe.Z)(function*(){e.is_portal_loading=!0;const r=yield e.fns.httpsCallable("ext-firestore-stripe-payments-createPortalLink")({returnUrl:document.location.href}).toPromise();window.location.assign(r.url)})()}send_reset_email(){var e=this;return(0,Oe.Z)(function*(){e.reset_email_loading=!0;let t=(yield e.firebase_auth.currentUser)?.email;t?e.firebase_auth.sendPasswordResetEmail(t).then(()=>{e.reset_email_sent=!0}).catch(r=>{alert(JSON.stringify(r)),e.reset_email_loading=!1}):e.reset_email_loading=!1})()}static#e=this.\u0275fac=function(t){return new(t||zN)(f.Y36(Xs),f.Y36(Cv),f.Y36(Y2))};static#t=this.\u0275cmp=f.Xpm({type:zN,selectors:[["app-settings"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"container",2,"font-size","16pt"],[1,"mt-5","mb-5"],["class","mb-4",4,"ngIf"],[1,"mb-5"],[1,"me-3"],[1,"btn","btn-success",3,"disabled","click"],["class","spinner-border spinner-border-sm ms-2","style","display: inline-block;","role","status",4,"ngIf"],[3,"ngSubmit"],["for","display-name",1,"form-label","me-3"],["id","display-name",1,"form-control","me-3",2,"width","400px","display","inline-block",3,"ngModelOptions","ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-4"],["for","user-email",1,"form-label","me-3"],["disabled","","id","user-email",1,"form-control",2,"width","400px","display","inline-block",3,"value"],["role","status",1,"spinner-border","spinner-border-sm","ms-2",2,"display","inline-block"],[1,"visually-hidden"],[1,"mb-5","mt-5"],["id","reset-link",1,"mb-5"],[1,"btn","btn-primary","btn-lg",3,"disabled","click"],["class","spinner-border ms-3","style","display: inline-block; vertical-align: bottom;","role","status",4,"ngIf"],["role","status",1,"spinner-border","ms-3",2,"display","inline-block","vertical-align","bottom"]],template:function(t,r){1&t&&(f.YNc(0,uoe,23,11,"ng-container",0),f.ALo(1,"async")),2&t&&f.Q6J("ngIf",f.lcZ(1,1,r.firebase_auth.user))},dependencies:[fs,ad,Ll,sg,ay,dg,ug,ps]})}function loe(n,e){1&n&&(f.TgZ(0,"div",5)(1,"span",6),f._uU(2,"Loading..."),f.qZA()())}class qN{constructor(e,t){this.firebase_auth=e,this.db=t,this.is_loading=!1}ngOnInit(){var e=this;return(0,Oe.Z)(function*(){yield(yield e.firebase_auth.currentUser)?.getIdToken(!0);let t=yield(yield e.firebase_auth.currentUser)?.getIdTokenResult();console.log(t)})()}gotoCheckout(){var e=this;return(0,Oe.Z)(function*(){let t=(yield e.firebase_auth.currentUser)?.uid;null!=t&&(e.is_loading=!0,(yield e.db.collection("customers").doc(t).collection("checkout_sessions").add({price:"price_1MCp5rD6M2UKk7XjtYLHGsYD",success_url:window.location.origin,cancel_url:window.location.origin})).onSnapshot(i=>{const{error:u,url:c}=i.data()||{};u&&(alert(`An error occured: ${u.message}`),e.is_loading=!1),c&&window.location.assign(c)}))})()}static#e=this.\u0275fac=function(t){return new(t||qN)(f.Y36(Xs),f.Y36(PG))};static#t=this.\u0275cmp=f.Xpm({type:qN,selectors:[["app-payment"]],decls:8,vars:2,consts:[[1,"container"],[1,"mb-3",2,"text-align","center","margin-top","20%"],[1,"mb-5",2,"text-align","center"],[1,"btn","btn-lg","btn-success",2,"margin","0 auto","display","block",3,"disabled","click"],["class","spinner-border ms-3","style","display: inline-block; vertical-align: bottom;","role","status",4,"ngIf"],["role","status",1,"spinner-border","ms-3",2,"display","inline-block","vertical-align","bottom"],[1,"visually-hidden"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1",1),f._uU(2,"Account Subscription"),f.qZA(),f.TgZ(3,"h2",2),f._uU(4,"$2.49/month"),f.qZA(),f.TgZ(5,"button",3),f.NdJ("click",function(){return r.gotoCheckout()}),f._uU(6," Pay with Stripe "),f.YNc(7,loe,3,0,"div",4),f.qZA()()),2&t&&(f.xp6(5),f.Q6J("disabled",r.is_loading),f.xp6(2),f.Q6J("ngIf",r.is_loading))},dependencies:[fs]})}class KN{static#e=this.\u0275fac=function(t){return new(t||KN)};static#t=this.\u0275mod=f.oAB({type:KN,bootstrap:[_N]});static#n=this.\u0275inj=f.cJS({providers:[bb,Zy,bb,Zy,{provide:LG,useValue:"us-central1"}],imports:[Il,dS.forRoot([{path:"",title:"Tellotrack",component:yN,...BG},{path:"login",title:"Login",component:vN,...BG},{path:"payment",title:"Payment",component:qN,...Fee},{path:"dashboard",title:"Dashboard",component:$N,...J2},{path:"settings",title:"Account Settings",component:zN,...J2},{path:"new-pathway",title:"New Pathway",component:HN,...J2},{path:"track/:uid/:oid",component:WN},{path:"404",component:GN},{path:"**",redirectTo:"/404"}]),Sr.hO.initializeApp(Mee_firebase),zO,nZ,Eee,CO,Cee,xee.forRoot(Nee),mg,qS]})}w_().bootstrapModule(KN).catch(n=>console.error(n))},4159:(Ee,pe,U)=>{var O;!function(){var f=window.CustomEvent;function he(J){for(;J;){if("dialog"===J.localName)return J;J=J.parentElement}return null}function De(J){J&&J.blur&&J!==document.body&&J.blur()}function Ne(J,X){for(var ae=0;ae<J.length;++ae)if(J[ae]===X)return!0;return!1}function Me(J){return!(!J||!J.hasAttribute("method"))&&"dialog"===J.getAttribute("method").toLowerCase()}function be(J){if(this.dialog_=J,this.replacedStyleTop_=!1,this.openAsModal_=!1,J.hasAttribute("role")||J.setAttribute("role","dialog"),J.show=this.show.bind(this),J.showModal=this.showModal.bind(this),J.close=this.close.bind(this),"returnValue"in J||(J.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(J,{attributes:!0,attributeFilter:["open"]});else{var Fe,ae=!1,Se=function(){ae?this.downgradeModal():this.maybeHideModal(),ae=!1}.bind(this),He=function(Ve){if(Ve.target===J){var Be="DOMNodeRemoved";ae|=Ve.type.substr(0,Be.length)===Be,window.clearTimeout(Fe),Fe=window.setTimeout(Se,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(Ve){J.addEventListener(Ve,He)})}Object.defineProperty(J,"open",{set:this.setOpen.bind(this),get:J.hasAttribute.bind(J,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}(!f||"object"==typeof f)&&((f=function(X,ae){ae=ae||{};var Se=document.createEvent("CustomEvent");return Se.initCustomEvent(X,!!ae.bubbles,!!ae.cancelable,ae.detail||null),Se}).prototype=window.Event.prototype),be.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){!this.openAsModal_||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),ge.dm.removeDialog(this))},setOpen:function(J){J?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(J){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var X=document.createElement("div");this.dialog_.insertBefore(X,this.dialog_.firstChild),X.tabIndex=-1,X.focus(),this.dialog_.removeChild(X)}var ae=document.createEvent("MouseEvents");ae.initMouseEvent(J.type,J.bubbles,J.cancelable,window,J.detail,J.screenX,J.screenY,J.clientX,J.clientY,J.ctrlKey,J.altKey,J.shiftKey,J.metaKey,J.button,J.relatedTarget),this.dialog_.dispatchEvent(ae),J.stopPropagation()},focus_:function(){var J=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!J&&this.dialog_.tabIndex>=0&&(J=this.dialog_),!J){var ae=["button","input","keygen","select","textarea"].map(function(Se){return Se+":not([disabled])"});ae.push('[tabindex]:not([disabled]):not([tabindex=""])'),J=this.dialog_.querySelector(ae.join(", "))}De(document.activeElement),J&&J.focus()},updateZIndex:function(J,X){if(J<X)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=J,this.backdrop_.style.zIndex=X},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!ge.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function G(J){for(;J&&J!==document.body;){var X=window.getComputedStyle(J),ae=function(Se,Fe){return!(void 0===X[Se]||X[Se]===Fe)};if(X.opacity<1||ae("zIndex","auto")||ae("transform","none")||ae("mixBlendMode","normal")||ae("filter","none")||ae("perspective","none")||"isolate"===X.isolation||"fixed"===X.position||"touch"===X.webkitOverflowScrolling)return!0;J=J.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,ge.needsCentering(this.dialog_)?(ge.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(J){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==J&&(this.dialog_.returnValue=J);var X=new f("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(X)}};var ge={reposition:function(J){var X=document.body.scrollTop||document.documentElement.scrollTop,ae=X+(window.innerHeight-J.offsetHeight)/2;J.style.top=Math.max(X,ae)+"px"},isInlinePositionSetByStylesheet:function(J){for(var X=0;X<document.styleSheets.length;++X){var ae=document.styleSheets[X],Se=null;try{Se=ae.cssRules}catch{}if(Se)for(var Fe=0;Fe<Se.length;++Fe){var He=Se[Fe],Ve=null;try{Ve=document.querySelectorAll(He.selectorText)}catch{}if(Ve&&Ne(Ve,J)){var Be=He.style.getPropertyValue("top"),st=He.style.getPropertyValue("bottom");if(Be&&"auto"!==Be||st&&"auto"!==st)return!0}}}return!1},needsCentering:function(J){return!("absolute"!==window.getComputedStyle(J).position||"auto"!==J.style.top&&""!==J.style.top||"auto"!==J.style.bottom&&""!==J.style.bottom||ge.isInlinePositionSetByStylesheet(J))},forceRegisterDialog:function(J){if((window.HTMLDialogElement||J.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",J),"dialog"!==J.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new be(J)},registerDialog:function(J){J.showModal||ge.forceRegisterDialog(J)},DialogManager:function(){this.pendingDialogStack=[];var J=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(X){this.forwardTab_=void 0,X.stopPropagation(),J([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(X){var ae=[];X.forEach(function(Se){for(var He,Fe=0;He=Se.removedNodes[Fe];++Fe)He instanceof Element&&("dialog"===He.localName&&ae.push(He),ae=ae.concat(He.querySelectorAll("dialog")))}),ae.length&&J(ae)}))}};if(ge.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},ge.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},ge.DialogManager.prototype.updateStacking=function(){for(var ae,J=this.zIndexHigh_,X=0;ae=this.pendingDialogStack[X];++X)ae.updateZIndex(--J,--J),0===X&&(this.overlay.style.zIndex=--J);var Se=this.pendingDialogStack[0];Se?(Se.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},ge.DialogManager.prototype.containedByTopDialog_=function(J){for(;J=he(J);){for(var ae,X=0;ae=this.pendingDialogStack[X];++X)if(ae.dialog===J)return 0===X;J=J.parentElement}return!1},ge.DialogManager.prototype.handleFocus_=function(J){if(!this.containedByTopDialog_(J.target)&&(J.preventDefault(),J.stopPropagation(),De(J.target),void 0!==this.forwardTab_)){var X=this.pendingDialogStack[0];return X.dialog.compareDocumentPosition(J.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?X.focus_():document.documentElement.focus()),!1}},ge.DialogManager.prototype.handleKey_=function(J){if(this.forwardTab_=void 0,27===J.keyCode){J.preventDefault(),J.stopPropagation();var X=new f("cancel",{bubbles:!1,cancelable:!0}),ae=this.pendingDialogStack[0];ae&&ae.dialog.dispatchEvent(X)&&ae.dialog.close()}else 9===J.keyCode&&(this.forwardTab_=!J.shiftKey)},ge.DialogManager.prototype.checkDOM_=function(J){this.pendingDialogStack.slice().forEach(function(ae){-1!==J.indexOf(ae.dialog)?ae.downgradeModal():ae.maybeHideModal()})},ge.DialogManager.prototype.pushDialog=function(J){return!(this.pendingDialogStack.length>=(this.zIndexHigh_-this.zIndexLow_)/2-1||(1===this.pendingDialogStack.unshift(J)&&this.blockDocument(),this.updateStacking(),0))},ge.DialogManager.prototype.removeDialog=function(J){var X=this.pendingDialogStack.indexOf(J);-1!==X&&(this.pendingDialogStack.splice(X,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},ge.dm=new ge.DialogManager,ge.formSubmitter=null,ge.useValue=null,void 0===window.HTMLDialogElement){var ne=document.createElement("form");if(ne.setAttribute("method","dialog"),"dialog"!==ne.method){var te=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(te){var ce=te.get;te.get=function(){return Me(this)?"dialog":ce.call(this)};var Ge=te.set;te.set=function(J){return"string"==typeof J&&"dialog"===J.toLowerCase()?this.setAttribute("method",J):Ge.call(this,J)},Object.defineProperty(HTMLFormElement.prototype,"method",te)}}document.addEventListener("click",function(J){if(ge.formSubmitter=null,ge.useValue=null,!J.defaultPrevented){var X=J.target;if(X&&Me(X.form)){if(!("submit"===X.type&&["button","input"].indexOf(X.localName)>-1)){if("input"!==X.localName||"image"!==X.type)return;ge.useValue=J.offsetX+","+J.offsetY}!he(X)||(ge.formSubmitter=X)}}},!1);var de=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!Me(this))return de.call(this);var J=he(this);J&&J.close()},document.addEventListener("submit",function(J){var X=J.target;if(Me(X)){J.preventDefault();var ae=he(X);if(ae){var Se=ge.formSubmitter;Se&&Se.form===X?ae.close(ge.useValue||Se.value):ae.close(),ge.formSubmitter=null}}},!0)}ge.forceRegisterDialog=ge.forceRegisterDialog,ge.registerDialog=ge.registerDialog,"amd"in U.amdD?void 0!==(O=function(){return ge}.call(pe,U,pe,Ee))&&(Ee.exports=O):"object"==typeof Ee.exports?Ee.exports=ge:window.dialogPolyfill=ge}()},7982:(Ee,pe,U)=>{"use strict";U.d(pe,{Gb:()=>O.Gb});var O=U(579)},5867:(Ee,pe,U)=>{"use strict";U.d(pe,{C6:()=>O.getApps,Mq:()=>O.getApp});var O=U(9681);(0,O.registerVersion)("firebase","9.14.0","app")},127:(Ee,pe,U)=>{"use strict";U.d(pe,{Z:()=>O.Z});var O=U(3942);O.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(Ee,pe,U)=>{"use strict";U.r(pe);var O=U(5861),f=U(3942),G=U(8247),he=U(2090),Me=(U(9681),U(1877),U(4859));function be(){return window}function te(){return(te=(0,O.Z)(function*(V,k,j){var ie;const{BuildInfo:Ce}=be();(0,G.ap)(k.sessionId,"AuthEvent did not contain a session ID");const Qe=yield ae(k.sessionId),qe={};return(0,G.aq)()?qe.ibi=Ce.packageName:(0,G.ar)()?qe.apn=Ce.packageName:(0,G.as)(V,"operation-not-supported-in-this-environment"),Ce.displayName&&(qe.appDisplayName=Ce.displayName),qe.sessionId=Qe,(0,G.at)(V,j,k.type,void 0,null!==(ie=k.eventId)&&void 0!==ie?ie:void 0,qe)})).apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(V){const{BuildInfo:k}=be(),j={};(0,G.aq)()?j.iosBundleId=k.packageName:(0,G.ar)()?j.androidPackageName=k.packageName:(0,G.as)(V,"operation-not-supported-in-this-environment"),yield(0,G.au)(V,j)})).apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(V,k,j){const{cordova:ie}=be();let Ce=()=>{};try{yield new Promise((Qe,qe)=>{let Dt=null;function mt(){var zt;Qe();const Gn=null===(zt=ie.plugins.browsertab)||void 0===zt?void 0:zt.close;"function"==typeof Gn&&Gn(),"function"==typeof j?.close&&j.close()}function Qt(){Dt||(Dt=window.setTimeout(()=>{qe((0,G.aw)(V,"redirect-cancelled-by-user"))},2e3))}function Qn(){"visible"===document?.visibilityState&&Qt()}k.addPassiveListener(mt),document.addEventListener("resume",Qt,!1),(0,G.ar)()&&document.addEventListener("visibilitychange",Qn,!1),Ce=()=>{k.removePassiveListener(mt),document.removeEventListener("resume",Qt,!1),document.removeEventListener("visibilitychange",Qn,!1),Dt&&window.clearTimeout(Dt)}})}finally{Ce()}})).apply(this,arguments)}function ae(V){return Se.apply(this,arguments)}function Se(){return(Se=(0,O.Z)(function*(V){const k=Fe(V),j=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(j)).map(Ce=>Ce.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fe(V){if((0,G.ap)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(V);const k=new ArrayBuffer(V.length),j=new Uint8Array(k);for(let ie=0;ie<V.length;ie++)j[ie]=V.charCodeAt(ie);return j}class Ve extends G.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(j=>j(k)),super.onEvent(k)}initialized(){var k=this;return(0,O.Z)(function*(){yield k.initPromise})()}}function ue(V){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*(V){const k=yield me()._get(Ie(V));return k&&(yield me()._remove(Ie(V))),k})).apply(this,arguments)}function fe(){const V=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let j=0;j<20;j++){const ie=Math.floor(Math.random()*k.length);V.push(k.charAt(ie))}return V.join("")}function me(){return(0,G.az)(G.b)}function Ie(V){return(0,G.aA)("authEvent",V.config.apiKey,V.name)}function nt(V){if(!V?.includes("?"))return{};const[k,...j]=V.split("?");return(0,he.zd)(j.join("?"))}const bn=class wn{constructor(){this._redirectPersistence=G.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=G.aB,this._overrideRedirectResult=G.aC}_initialize(k){var j=this;return(0,O.Z)(function*(){const ie=k._key();let Ce=j.eventManagers.get(ie);return Ce||(Ce=new Ve(k),j.eventManagers.set(ie,Ce),j.attachCallbackListeners(k,Ce)),Ce})()}_openPopup(k){(0,G.as)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,j,ie,Ce){var Qe=this;return(0,O.Z)(function*(){!function X(V){var k,j,ie,Ce,Qe,qe,Dt,mt,Qt,Qn;const zt=be();(0,G.ax)("function"==typeof(null===(k=zt?.universalLinks)||void 0===k?void 0:k.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,G.ax)(typeof(null===(j=zt?.BuildInfo)||void 0===j?void 0:j.packageName)<"u",V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,G.ax)("function"==typeof(null===(Qe=null===(Ce=null===(ie=zt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===Qe?void 0:Qe.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.ax)("function"==typeof(null===(mt=null===(Dt=null===(qe=zt?.cordova)||void 0===qe?void 0:qe.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===mt?void 0:mt.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.ax)("function"==typeof(null===(Qn=null===(Qt=zt?.cordova)||void 0===Qt?void 0:Qt.InAppBrowser)||void 0===Qn?void 0:Qn.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const qe=yield Qe._initialize(k);yield qe.initialized(),qe.resetRedirect(),(0,G.aD)(),yield Qe._originValidation(k);const Dt=function Be(V,k,j=null){return{type:k,eventId:j,urlResponse:null,sessionId:fe(),postBody:null,tenantId:V.tenantId,error:(0,G.aw)(V,"no-auth-event")}}(k,ie,Ce);yield function st(V,k){return me()._set(Ie(V),k)}(k,Dt);const mt=yield function ne(V,k,j){return te.apply(this,arguments)}(k,Dt,j),Qt=yield function de(V){const{cordova:k}=be();return new Promise(j=>{k.plugins.browsertab.isAvailable(ie=>{let Ce=null;ie?k.plugins.browsertab.openUrl(V):Ce=k.InAppBrowser.open(V,(0,G.av)()?"_blank":"_system","location=yes"),j(Ce)})})}(mt);return function ze(V,k,j){return J.apply(this,arguments)}(k,qe,Qt)})()}_isIframeWebStorageSupported(k,j){throw new Error("Method not implemented.")}_originValidation(k){const j=k._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function ce(V){return Ge.apply(this,arguments)}(k)),this.originValidationPromises[j]}attachCallbackListeners(k,j){const{universalLinks:ie,handleOpenURL:Ce,BuildInfo:Qe}=be(),qe=setTimeout((0,O.Z)(function*(){yield ue(k),j.onEvent(Ft())}),500),Dt=function(){var Qn=(0,O.Z)(function*(zt){clearTimeout(qe);const Gn=yield ue(k);let Ao=null;Gn&&zt?.url&&(Ao=function je(V,k){var j,ie;const Ce=function Te(V){const k=nt(V),j=k.link?decodeURIComponent(k.link):void 0,ie=nt(j).link,Ce=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return nt(Ce).link||Ce||ie||j||V}(k);if(Ce.includes("/__/auth/callback")){const Qe=nt(Ce),qe=Qe.firebaseError?function ke(V){try{return JSON.parse(V)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,Dt=null===(ie=null===(j=qe?.code)||void 0===j?void 0:j.split("auth/"))||void 0===ie?void 0:ie[1],mt=Dt?(0,G.aw)(Dt):null;return mt?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:mt,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:Ce,postBody:null}}return null}(Gn,zt.url)),j.onEvent(Ao||Ft())});return function(Gn){return Qn.apply(this,arguments)}}();typeof ie<"u"&&"function"==typeof ie.subscribe&&ie.subscribe(null,Dt);const mt=Ce,Qt=`${Qe.packageName.toLowerCase()}://`;be().handleOpenURL=function(){var Qn=(0,O.Z)(function*(zt){if(zt.toLowerCase().startsWith(Qt)&&Dt({url:zt}),"function"==typeof mt)try{mt(zt)}catch(Gn){console.error(Gn)}});return function(zt){return Qn.apply(this,arguments)}}()}};function Ft(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,G.aw)("no-auth-event")}}function tn(){var V;return(null===(V=self?.location)||void 0===V?void 0:V.protocol)||null}function Ln(V=(0,he.z$)()){return!("file:"!==tn()&&"ionic:"!==tn()&&"capacitor:"!==tn()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function ki(){try{const V=self.localStorage,k=G.aI();if(V)return V.setItem(k,"1"),V.removeItem(k),!function Pr(V=(0,he.z$)()){return function mi(){return(0,he.w1)()&&11===document?.documentMode}()||function cr(V=(0,he.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,he.hl)()}catch{return ni()&&(0,he.hl)()}return!1}function ni(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function br(){return(function kt(){return"http:"===tn()||"https:"===tn()}()||(0,he.ru)()||Ln())&&!function Or(){return(0,he.b$)()||(0,he.UG)()}()&&ki()&&!ni()}function Br(){return Ln()&&typeof document<"u"}function jr(){return(jr=(0,O.Z)(function*(){return!!Br()&&new Promise(V=>{const k=setTimeout(()=>{V(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),V(!0)})})})).apply(this,arguments)}const It={LOCAL:"local",NONE:"none",SESSION:"session"},Ir=G.ax,Yr="persistence";function $r(V){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(V){yield V._initializationPromise;const k=Bn(),j=G.aA(Yr,V.config.apiKey,V.name);k&&k.setItem(j,V._getPersistence())})).apply(this,arguments)}function Bn(){var V;try{return(null===(V=function vn(){return typeof window<"u"?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch{return null}}const Nt=G.ax;class ft{constructor(){this.browserResolver=G.az(G.k),this.cordovaResolver=G.az(bn),this.underlyingResolver=null,this._redirectPersistence=G.a,this._completeRedirectFn=G.aB,this._overrideRedirectResult=G.aC}_initialize(k){var j=this;return(0,O.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,j,ie,Ce){var Qe=this;return(0,O.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(k,j,ie,Ce)})()}_openRedirect(k,j,ie,Ce){var Qe=this;return(0,O.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(k,j,ie,Ce)})()}_isIframeWebStorageSupported(k,j){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,j)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return Br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,O.Z)(function*(){if(k.underlyingResolver)return;const j=yield function ri(){return jr.apply(this,arguments)}();k.underlyingResolver=j?k.cordovaResolver:k.browserResolver})()}}function Hn(V){return V.unwrap()}function Cr(V){return ar(V)}function ar(V){const{_tokenResponse:k}=V instanceof he.ZR?V.customData:V;if(!k)return null;if(!(V instanceof he.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return G.P.credentialFromResult(V);const j=k.providerId;if(!j||j===G.o.PASSWORD)return null;let ie;switch(j){case G.o.GOOGLE:ie=G.Q;break;case G.o.FACEBOOK:ie=G.N;break;case G.o.GITHUB:ie=G.T;break;case G.o.TWITTER:ie=G.W;break;default:const{oauthIdToken:Ce,oauthAccessToken:Qe,oauthTokenSecret:qe,pendingToken:Dt,nonce:mt}=k;return Qe||qe||Ce||Dt?Dt?j.startsWith("saml.")?G.aL._create(j,Dt):G.J._fromParams({providerId:j,signInMethod:j,pendingToken:Dt,idToken:Ce,accessToken:Qe}):new G.U(j).credential({idToken:Ce,accessToken:Qe,rawNonce:mt}):null}return V instanceof he.ZR?ie.credentialFromError(V):ie.credentialFromResult(V)}function Yn(V,k){return k.catch(j=>{throw j instanceof he.ZR&&function ci(V,k){var j,ie;const Ce=null===(j=k.customData)||void 0===j?void 0:j._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ie=k)||void 0===ie?void 0:ie.code))k.resolver=new nn(V,G.an(V,k));else if(Ce){const Qe=ar(k),qe=k;Qe&&(qe.credential=Qe,qe.tenantId=Ce.tenantId||void 0,qe.email=Ce.email||void 0,qe.phoneNumber=Ce.phoneNumber||void 0)}}(V,j),j}).then(j=>{const Ce=j.user;return{operationType:j.operationType,credential:Cr(j),additionalUserInfo:G.al(j),user:Wr.getOrCreate(Ce)}})}function In(V,k){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(V,k){const j=yield k;return{verificationId:j.verificationId,confirm:ie=>Yn(V,j.confirm(ie))}})).apply(this,arguments)}class nn{constructor(k,j){this.resolver=j,this.auth=function Hr(V){return V.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return Yn(Hn(this.auth),this.resolver.resolveSignIn(k))}}class Wr{constructor(k){this._delegate=k,this.multiFactor=G.ao(k)}static getOrCreate(k){return Wr.USER_MAP.has(k)||Wr.USER_MAP.set(k,new Wr(k)),Wr.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var j=this;return(0,O.Z)(function*(){return Yn(j.auth,G.Z(j._delegate,k))})()}linkWithPhoneNumber(k,j){var ie=this;return(0,O.Z)(function*(){return In(ie.auth,G.l(ie._delegate,k,j))})()}linkWithPopup(k){var j=this;return(0,O.Z)(function*(){return Yn(j.auth,G.d(j._delegate,k,ft))})()}linkWithRedirect(k){var j=this;return(0,O.Z)(function*(){return yield $r(G.aE(j.auth)),G.g(j._delegate,k,ft)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var j=this;return(0,O.Z)(function*(){return Yn(j.auth,G._(j._delegate,k))})()}reauthenticateWithPhoneNumber(k,j){return In(this.auth,G.r(this._delegate,k,j))}reauthenticateWithPopup(k){return Yn(this.auth,G.e(this._delegate,k,ft))}reauthenticateWithRedirect(k){var j=this;return(0,O.Z)(function*(){return yield $r(G.aE(j.auth)),G.h(j._delegate,k,ft)})()}sendEmailVerification(k){return G.ab(this._delegate,k)}unlink(k){var j=this;return(0,O.Z)(function*(){return yield G.ak(j._delegate,k),j})()}updateEmail(k){return G.ag(this._delegate,k)}updatePassword(k){return G.ah(this._delegate,k)}updatePhoneNumber(k){return G.u(this._delegate,k)}updateProfile(k){return G.af(this._delegate,k)}verifyBeforeUpdateEmail(k,j){return G.ac(this._delegate,k,j)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wr.USER_MAP=new WeakMap;const Je=G.ax;let We=(()=>{class V{constructor(j,ie){if(this.app=j,ie.isInitialized())return this._delegate=ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ce}=j.options;Je(Ce,"invalid-api-key",{appName:j.name}),Je(Ce,"invalid-api-key",{appName:j.name});const Qe=typeof window<"u"?ft:void 0;this._delegate=ie.initialize({options:{persistence:Ot(Ce,j.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(G.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(j){this._delegate.languageCode=j}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(j){this._delegate.tenantId=j}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(j,ie){G.G(this._delegate,j,ie)}applyActionCode(j){return G.a2(this._delegate,j)}checkActionCode(j){return G.a3(this._delegate,j)}confirmPasswordReset(j,ie){return G.a1(this._delegate,j,ie)}createUserWithEmailAndPassword(j,ie){var Ce=this;return(0,O.Z)(function*(){return Yn(Ce._delegate,G.a5(Ce._delegate,j,ie))})()}fetchProvidersForEmail(j){return this.fetchSignInMethodsForEmail(j)}fetchSignInMethodsForEmail(j){return G.aa(this._delegate,j)}isSignInWithEmailLink(j){return G.a8(this._delegate,j)}getRedirectResult(){var j=this;return(0,O.Z)(function*(){Je(br(),j._delegate,"operation-not-supported-in-this-environment");const ie=yield G.j(j._delegate,ft);return ie?Yn(j._delegate,Promise.resolve(ie)):{credential:null,user:null}})()}addFrameworkForLogging(j){!function Xt(V,k){(0,G.aE)(V)._logFramework(k)}(this._delegate,j)}onAuthStateChanged(j,ie,Ce){const{next:Qe,error:qe,complete:Dt}=gt(j,ie,Ce);return this._delegate.onAuthStateChanged(Qe,qe,Dt)}onIdTokenChanged(j,ie,Ce){const{next:Qe,error:qe,complete:Dt}=gt(j,ie,Ce);return this._delegate.onIdTokenChanged(Qe,qe,Dt)}sendSignInLinkToEmail(j,ie){return G.a7(this._delegate,j,ie)}sendPasswordResetEmail(j,ie){return G.a0(this._delegate,j,ie||void 0)}setPersistence(j){var ie=this;return(0,O.Z)(function*(){let Ce;switch(function Zn(V,k){Ir(Object.values(It).includes(k),V,"invalid-persistence-type"),(0,he.b$)()?Ir(k!==It.SESSION,V,"unsupported-persistence-type"):(0,he.UG)()?Ir(k===It.NONE,V,"unsupported-persistence-type"):ni()?Ir(k===It.NONE||k===It.LOCAL&&(0,he.hl)(),V,"unsupported-persistence-type"):Ir(k===It.NONE||ki(),V,"unsupported-persistence-type")}(ie._delegate,j),j){case It.SESSION:Ce=G.a;break;case It.LOCAL:Ce=(yield G.az(G.i)._isAvailable())?G.i:G.b;break;case It.NONE:Ce=G.L;break;default:return G.as("argument-error",{appName:ie._delegate.name})}return ie._delegate.setPersistence(Ce)})()}signInAndRetrieveDataWithCredential(j){return this.signInWithCredential(j)}signInAnonymously(){return Yn(this._delegate,G.X(this._delegate))}signInWithCredential(j){return Yn(this._delegate,G.Y(this._delegate,j))}signInWithCustomToken(j){return Yn(this._delegate,G.$(this._delegate,j))}signInWithEmailAndPassword(j,ie){return Yn(this._delegate,G.a6(this._delegate,j,ie))}signInWithEmailLink(j,ie){return Yn(this._delegate,G.a9(this._delegate,j,ie))}signInWithPhoneNumber(j,ie){return In(this._delegate,G.s(this._delegate,j,ie))}signInWithPopup(j){var ie=this;return(0,O.Z)(function*(){return Je(br(),ie._delegate,"operation-not-supported-in-this-environment"),Yn(ie._delegate,G.c(ie._delegate,j,ft))})()}signInWithRedirect(j){var ie=this;return(0,O.Z)(function*(){return Je(br(),ie._delegate,"operation-not-supported-in-this-environment"),yield $r(ie._delegate),G.f(ie._delegate,j,ft)})()}updateCurrentUser(j){return this._delegate.updateCurrentUser(j)}verifyPasswordResetCode(j){return G.a4(this._delegate,j)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=It,V})();function gt(V,k,j){let ie=V;"function"!=typeof V&&({next:ie,error:k,complete:j}=V);const Ce=ie;return{next:qe=>Ce(qe&&Wr.getOrCreate(qe)),error:k,complete:j}}function Ot(V,k){const j=function En(V,k){const j=Bn();if(!j)return[];const ie=G.aA(Yr,V,k);switch(j.getItem(ie)){case It.NONE:return[G.L];case It.LOCAL:return[G.i,G.a];case It.SESSION:return[G.a];default:return[]}}(V,k);if(typeof self<"u"&&!j.includes(G.i)&&j.push(G.i),typeof window<"u")for(const ie of[G.b,G.a])j.includes(ie)||j.push(ie);return j.includes(G.L)||j.push(G.L),j}class $t{constructor(){this.providerId="phone",this._delegate=new G.P(Hn(f.Z.auth()))}static credential(k,j){return G.P.credential(k,j)}verifyPhoneNumber(k,j){return this._delegate.verifyPhoneNumber(k,j)}unwrap(){return this._delegate}}$t.PHONE_SIGN_IN_METHOD=G.P.PHONE_SIGN_IN_METHOD,$t.PROVIDER_ID=G.P.PROVIDER_ID;const dn=G.ax;class re{constructor(k,j,ie=f.Z.app()){var Ce;dn(null===(Ce=ie.options)||void 0===Ce?void 0:Ce.apiKey,"invalid-api-key",{appName:ie.name}),this._delegate=new G.R(k,j,ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(V){V.INTERNAL.registerComponent(new Me.wA("auth-compat",k=>{const j=k.getProvider("app-compat").getImmediate(),ie=k.getProvider("auth");return new We(j,ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:G.A.EMAIL_SIGNIN,PASSWORD_RESET:G.A.PASSWORD_RESET,RECOVER_EMAIL:G.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:G.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:G.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:G.A.VERIFY_EMAIL}},EmailAuthProvider:G.M,FacebookAuthProvider:G.N,GithubAuthProvider:G.T,GoogleAuthProvider:G.Q,OAuthProvider:G.U,SAMLAuthProvider:G.V,PhoneAuthProvider:$t,PhoneMultiFactorGenerator:G.m,RecaptchaVerifier:re,TwitterAuthProvider:G.W,Auth:We,AuthCredential:G.H,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.2.24")}(f.Z)},5473:()=>{!function(){"use strict";var Ee=function(U){this.element_=U,this.init()};window.MaterialButton=Ee,Ee.prototype.Constant_={},Ee.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},Ee.prototype.blurHandler_=function(pe){pe&&this.element_.blur()},Ee.prototype.disable=Ee.prototype.disable=function(){this.element_.disabled=!0},Ee.prototype.enable=Ee.prototype.enable=function(){this.element_.disabled=!1},Ee.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var pe=document.createElement("span");pe.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),pe.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(pe)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:Ee,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}()},2125:()=>{var Ee={upgradeDom:function(pe,U){},upgradeElement:function(pe,U){},upgradeElements:function(pe){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(pe,U){},register:function(pe){},downgradeElements:function(pe){}};(Ee=function(){"use strict";var pe=[],U=[],O="mdlComponentConfigInternal_";function f(de,ze){for(var J=0;J<pe.length;J++)if(pe[J].className===de)return typeof ze<"u"&&(pe[J]=ze),pe[J];return!1}function G(de){var ze=de.getAttribute("data-upgraded");return null===ze?[""]:ze.split(",")}function he(de,ze){return-1!==G(de).indexOf(ze)}function De(de,ze,J){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(de,{bubbles:ze,cancelable:J});var X=document.createEvent("Events");return X.initEvent(de,ze,J),X}function Ne(de,ze){if(typeof de>"u"&&typeof ze>"u")for(var J=0;J<pe.length;J++)Ne(pe[J].className,pe[J].cssClass);else{var X=de;if(typeof ze>"u"){var ae=f(X);ae&&(ze=ae.cssClass)}for(var Se=document.querySelectorAll("."+ze),Fe=0;Fe<Se.length;Fe++)Me(Se[Fe],X)}}function Me(de,ze){if(!("object"==typeof de&&de instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var J=De("mdl-componentupgrading",!0,!0);if(de.dispatchEvent(J),!J.defaultPrevented){var X=G(de),ae=[];if(ze)he(de,ze)||ae.push(f(ze));else{var Se=de.classList;pe.forEach(function(je){Se.contains(je.cssClass)&&-1===ae.indexOf(je)&&!he(de,je.className)&&ae.push(je)})}for(var Ve,Fe=0,He=ae.length;Fe<He;Fe++){if(!(Ve=ae[Fe]))throw new Error("Unable to find a registered component for the given class.");X.push(Ve.className),de.setAttribute("data-upgraded",X.join(","));var Be=new Ve.classConstructor(de);Be[O]=Ve,U.push(Be);for(var st=0,ue=Ve.callbacks.length;st<ue;st++)Ve.callbacks[st](de);Ve.widget&&(de[Ve.className]=Be);var Re=De("mdl-componentupgraded",!0,!1);de.dispatchEvent(Re)}}}function ce(de){if(de){var ze=U.indexOf(de);U.splice(ze,1);var J=de.element_.getAttribute("data-upgraded").split(","),X=J.indexOf(de[O].classAsString);J.splice(X,1),de.element_.setAttribute("data-upgraded",J.join(","));var ae=De("mdl-componentdowngraded",!0,!1);de.element_.dispatchEvent(ae)}}return{upgradeDom:Ne,upgradeElement:Me,upgradeElements:function be(de){Array.isArray(de)||(de=de instanceof Element?[de]:Array.prototype.slice.call(de));for(var X,ze=0,J=de.length;ze<J;ze++)(X=de[ze])instanceof HTMLElement&&(Me(X),X.children.length>0&&be(X.children))},upgradeAllRegistered:function te(){for(var de=0;de<pe.length;de++)Ne(pe[de].className)},registerUpgradedCallback:function ne(de,ze){var J=f(de);J&&J.callbacks.push(ze)},register:function ge(de){var J=!0;typeof de.widget>"u"&&typeof de.widget>"u"||(J=de.widget||de.widget);var X={classConstructor:de.constructor||de.constructor,className:de.classAsString||de.classAsString,cssClass:de.cssClass||de.cssClass,widget:J,callbacks:[]};if(pe.forEach(function(Se){if(Se.cssClass===X.cssClass)throw new Error("The provided cssClass has already been registered: "+Se.cssClass);if(Se.className===X.className)throw new Error("The provided className has already been registered")}),de.constructor.prototype.hasOwnProperty(O))throw new Error("MDL component classes must not have "+O+" defined as a property.");f(de.classAsString,X)||pe.push(X)},downgradeElements:function Ge(de){var ze=function(X){U.filter(function(ae){return ae.element_===X}).forEach(ce)};if(de instanceof Array||de instanceof NodeList)for(var J=0;J<de.length;J++)ze(de[J]);else{if(!(de instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");ze(de)}}}}()).upgradeDom=Ee.upgradeDom,Ee.upgradeElement=Ee.upgradeElement,Ee.upgradeElements=Ee.upgradeElements,Ee.upgradeAllRegistered=Ee.upgradeAllRegistered,Ee.registerUpgradedCallback=Ee.registerUpgradedCallback,Ee.register=Ee.register,Ee.downgradeElements=Ee.downgradeElements,window.componentHandler=Ee,window.componentHandler=Ee,window.addEventListener("load",function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),Ee.upgradeAllRegistered()):(Ee.upgradeElement=function(){},Ee.register=function(){})})},9812:()=>{!function(){"use strict";var Ee=function(U){this.element_=U,this.init()};window.MaterialProgress=Ee,Ee.prototype.Constant_={},Ee.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},Ee.prototype.setProgress=Ee.prototype.setProgress=function(pe){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=pe+"%")},Ee.prototype.setBuffer=Ee.prototype.setBuffer=function(pe){this.bufferbar_.style.width=pe+"%",this.auxbar_.style.width=100-pe+"%"},Ee.prototype.init=function(){if(this.element_){var pe=document.createElement("div");pe.className="progressbar bar bar1",this.element_.appendChild(pe),this.progressbar_=pe,(pe=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(pe),this.bufferbar_=pe,(pe=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(pe),this.auxbar_=pe,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:Ee,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}()},7792:()=>{!function(){"use strict";var Ee=function(U){this.element_=U,this.init()};window.MaterialSpinner=Ee,Ee.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},Ee.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},Ee.prototype.createLayer=Ee.prototype.createLayer=function(pe){var U=document.createElement("div");U.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),U.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+pe);var O=document.createElement("div");O.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),O.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var f=document.createElement("div");f.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var G=document.createElement("div");G.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),G.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var he=[O,f,G],De=0;De<he.length;De++){var Ne=document.createElement("div");Ne.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),he[De].appendChild(Ne)}U.appendChild(O),U.appendChild(f),U.appendChild(G),this.element_.appendChild(U)},Ee.prototype.stop=Ee.prototype.stop=function(){this.element_.classList.remove("is-active")},Ee.prototype.start=Ee.prototype.start=function(){this.element_.classList.add("is-active")},Ee.prototype.init=function(){if(this.element_){for(var pe=1;pe<=this.Constant_.MDL_SPINNER_LAYER_COUNT;pe++)this.createLayer(pe);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:Ee,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}()},2910:()=>{!function(){"use strict";var Ee=function(U){this.element_=U,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=Ee,Ee.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},Ee.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},Ee.prototype.onKeyDown_=function(pe){var U=pe.target.value.split("\n").length;13===pe.keyCode&&U>=this.maxRows&&pe.preventDefault()},Ee.prototype.onFocus_=function(pe){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},Ee.prototype.onBlur_=function(pe){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Ee.prototype.onReset_=function(pe){this.updateClasses_()},Ee.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},Ee.prototype.checkDisabled=Ee.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},Ee.prototype.checkFocus=Ee.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Ee.prototype.checkValidity=Ee.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},Ee.prototype.checkDirty=Ee.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},Ee.prototype.disable=Ee.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},Ee.prototype.enable=Ee.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},Ee.prototype.change=Ee.prototype.change=function(pe){this.input_.value=pe||"",this.updateClasses_()},Ee.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var pe=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),pe&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:Ee,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}()},9751:(Ee,pe,U)=>{"use strict";U.d(pe,{y:()=>be});var O=U(930),f=U(727),G=U(8822),he=U(9635),De=U(2416),Ne=U(576),Me=U(2806);let be=(()=>{class ce{constructor(de){de&&(this._subscribe=de)}lift(de){const ze=new ce;return ze.source=this,ze.operator=de,ze}subscribe(de,ze,J){const X=function te(ce){return ce&&ce instanceof O.Lv||function ne(ce){return ce&&(0,Ne.m)(ce.next)&&(0,Ne.m)(ce.error)&&(0,Ne.m)(ce.complete)}(ce)&&(0,f.Nn)(ce)}(de)?de:new O.Hp(de,ze,J);return(0,Me.x)(()=>{const{operator:ae,source:Se}=this;X.add(ae?ae.call(X,Se):Se?this._subscribe(X):this._trySubscribe(X))}),X}_trySubscribe(de){try{return this._subscribe(de)}catch(ze){de.error(ze)}}forEach(de,ze){return new(ze=ge(ze))((J,X)=>{const ae=new O.Hp({next:Se=>{try{de(Se)}catch(Fe){X(Fe),ae.unsubscribe()}},error:X,complete:J});this.subscribe(ae)})}_subscribe(de){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(de)}[G.L](){return this}pipe(...de){return(0,he.U)(de)(this)}toPromise(de){return new(de=ge(de))((ze,J)=>{let X;this.subscribe(ae=>X=ae,ae=>J(ae),()=>ze(X))})}}return ce.create=Ge=>new ce(Ge),ce})();function ge(ce){var Ge;return null!==(Ge=ce??De.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(Ee,pe,U)=>{"use strict";U.d(pe,{x:()=>Me});var O=U(9751),f=U(727);const he=(0,U(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=U(8737),Ne=U(2806);let Me=(()=>{class ge extends O.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const ce=new be(this,this);return ce.operator=te,ce}_throwIfClosed(){if(this.closed)throw new he}next(te){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ce of this.currentObservers)ce.next(te)}})}error(te){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:ce}=this;for(;ce.length;)ce.shift().error(te)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:ce,isStopped:Ge,observers:de}=this;return ce||Ge?f.Lc:(this.currentObservers=null,de.push(te),new f.w0(()=>{this.currentObservers=null,(0,De.P)(de,te)}))}_checkFinalizedStatuses(te){const{hasError:ce,thrownError:Ge,isStopped:de}=this;ce?te.error(Ge):de&&te.complete()}asObservable(){const te=new O.y;return te.source=this,te}}return ge.create=(ne,te)=>new be(ne,te),ge})();class be extends Me{constructor(ne,te){super(),this.destination=ne,this.source=te}next(ne){var te,ce;null===(ce=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===ce||ce.call(te,ne)}error(ne){var te,ce;null===(ce=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===ce||ce.call(te,ne)}complete(){var ne,te;null===(te=null===(ne=this.destination)||void 0===ne?void 0:ne.complete)||void 0===te||te.call(ne)}_subscribe(ne){var te,ce;return null!==(ce=null===(te=this.source)||void 0===te?void 0:te.subscribe(ne))&&void 0!==ce?ce:f.Lc}}},930:(Ee,pe,U)=>{"use strict";U.d(pe,{Hp:()=>J,Lv:()=>ce});var O=U(576),f=U(727),G=U(2416),he=U(7849),De=U(5032);const Ne=ge("C",void 0,void 0);function ge(He,Ve,Be){return{kind:He,value:Ve,error:Be}}var ne=U(3410),te=U(2806);class ce extends f.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,f.Nn)(Ve)&&Ve.add(this)):this.destination=Fe}static create(Ve,Be,st){return new J(Ve,Be,st)}next(Ve){this.isStopped?Se(function be(He){return ge("N",He,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?Se(function Me(He){return ge("E",void 0,He)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?Se(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function de(He,Ve){return Ge.call(He,Ve)}class ze{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:Be}=this;if(Be.next)try{Be.next(Ve)}catch(st){X(st)}}error(Ve){const{partialObserver:Be}=this;if(Be.error)try{Be.error(Ve)}catch(st){X(st)}else X(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(Be){X(Be)}}}class J extends ce{constructor(Ve,Be,st){let ue;if(super(),(0,O.m)(Ve)||!Ve)ue={next:Ve??void 0,error:Be??void 0,complete:st??void 0};else{let Re;this&&G.v.useDeprecatedNextContext?(Re=Object.create(Ve),Re.unsubscribe=()=>this.unsubscribe(),ue={next:Ve.next&&de(Ve.next,Re),error:Ve.error&&de(Ve.error,Re),complete:Ve.complete&&de(Ve.complete,Re)}):ue=Ve}this.destination=new ze(ue)}}function X(He){G.v.useDeprecatedSynchronousErrorHandling?(0,te.O)(He):(0,he.h)(He)}function Se(He,Ve){const{onStoppedNotification:Be}=G.v;Be&&ne.z.setTimeout(()=>Be(He,Ve))}const Fe={closed:!0,next:De.Z,error:function ae(He){throw He},complete:De.Z}},727:(Ee,pe,U)=>{"use strict";U.d(pe,{Lc:()=>Ne,w0:()=>De,Nn:()=>Me});var O=U(576);const G=(0,U(3888).d)(ge=>function(te){ge(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((ce,Ge)=>`${Ge+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var he=U(8737);class De{constructor(ne){this.initialTeardown=ne,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ne;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const de of te)de.remove(this);else te.remove(this);const{initialTeardown:ce}=this;if((0,O.m)(ce))try{ce()}catch(de){ne=de instanceof G?de.errors:[de]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const de of Ge)try{be(de)}catch(ze){ne=ne??[],ze instanceof G?ne=[...ne,...ze.errors]:ne.push(ze)}}if(ne)throw new G(ne)}}add(ne){var te;if(ne&&ne!==this)if(this.closed)be(ne);else{if(ne instanceof De){if(ne.closed||ne._hasParent(this))return;ne._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(ne)}}_hasParent(ne){const{_parentage:te}=this;return te===ne||Array.isArray(te)&&te.includes(ne)}_addParent(ne){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(ne),te):te?[te,ne]:ne}_removeParent(ne){const{_parentage:te}=this;te===ne?this._parentage=null:Array.isArray(te)&&(0,he.P)(te,ne)}remove(ne){const{_finalizers:te}=this;te&&(0,he.P)(te,ne),ne instanceof De&&ne._removeParent(this)}}De.EMPTY=(()=>{const ge=new De;return ge.closed=!0,ge})();const Ne=De.EMPTY;function Me(ge){return ge instanceof De||ge&&"closed"in ge&&(0,O.m)(ge.remove)&&(0,O.m)(ge.add)&&(0,O.m)(ge.unsubscribe)}function be(ge){(0,O.m)(ge)?ge():ge.unsubscribe()}},2416:(Ee,pe,U)=>{"use strict";U.d(pe,{v:()=>O});const O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ee,pe,U)=>{"use strict";U.d(pe,{E:()=>f});const f=new(U(9751).y)(De=>De.complete())},8996:(Ee,pe,U)=>{"use strict";U.d(pe,{D:()=>Ve});var O=U(8421),f=U(5363),G=U(9468),Ne=U(9751),be=U(2202),ge=U(576),ne=U(9672);function ce(Be,st){if(!Be)throw new Error("Iterable cannot be null");return new Ne.y(ue=>{(0,ne.f)(ue,st,()=>{const Re=Be[Symbol.asyncIterator]();(0,ne.f)(ue,st,()=>{Re.next().then(je=>{je.done?ue.complete():ue.next(je.value)})},0,!0)})})}var Ge=U(3670),de=U(8239),ze=U(1144),J=U(6495),X=U(2206),ae=U(4532),Se=U(3260);function Ve(Be,st){return st?function He(Be,st){if(null!=Be){if((0,Ge.c)(Be))return function he(Be,st){return(0,O.Xf)(Be).pipe((0,G.R)(st),(0,f.Q)(st))}(Be,st);if((0,ze.z)(Be))return function Me(Be,st){return new Ne.y(ue=>{let Re=0;return st.schedule(function(){Re===Be.length?ue.complete():(ue.next(Be[Re++]),ue.closed||this.schedule())})})}(Be,st);if((0,de.t)(Be))return function De(Be,st){return(0,O.Xf)(Be).pipe((0,G.R)(st),(0,f.Q)(st))}(Be,st);if((0,X.D)(Be))return ce(Be,st);if((0,J.T)(Be))return function te(Be,st){return new Ne.y(ue=>{let Re;return(0,ne.f)(ue,st,()=>{Re=Be[be.h](),(0,ne.f)(ue,st,()=>{let je,fe;try{({value:je,done:fe}=Re.next())}catch(me){return void ue.error(me)}fe?ue.complete():ue.next(je)},0,!0)}),()=>(0,ge.m)(Re?.return)&&Re.return()})}(Be,st);if((0,Se.L)(Be))return function Fe(Be,st){return ce((0,Se.Q)(Be),st)}(Be,st)}throw(0,ae.z)(Be)}(Be,st):(0,O.Xf)(Be)}},8421:(Ee,pe,U)=>{"use strict";U.d(pe,{Xf:()=>Ge});var O=U(655),f=U(1144),G=U(8239),he=U(9751),De=U(3670),Ne=U(2206),Me=U(4532),be=U(6495),ge=U(3260),ne=U(576),te=U(7849),ce=U(8822);function Ge(He){if(He instanceof he.y)return He;if(null!=He){if((0,De.c)(He))return function de(He){return new he.y(Ve=>{const Be=He[ce.L]();if((0,ne.m)(Be.subscribe))return Be.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(He);if((0,f.z)(He))return function ze(He){return new he.y(Ve=>{for(let Be=0;Be<He.length&&!Ve.closed;Be++)Ve.next(He[Be]);Ve.complete()})}(He);if((0,G.t)(He))return function J(He){return new he.y(Ve=>{He.then(Be=>{Ve.closed||(Ve.next(Be),Ve.complete())},Be=>Ve.error(Be)).then(null,te.h)})}(He);if((0,Ne.D)(He))return ae(He);if((0,be.T)(He))return function X(He){return new he.y(Ve=>{for(const Be of He)if(Ve.next(Be),Ve.closed)return;Ve.complete()})}(He);if((0,ge.L)(He))return function Se(He){return ae((0,ge.Q)(He))}(He)}throw(0,Me.z)(He)}function ae(He){return new he.y(Ve=>{(function Fe(He,Ve){var Be,st,ue,Re;return(0,O.mG)(this,void 0,void 0,function*(){try{for(Be=(0,O.KL)(He);!(st=yield Be.next()).done;)if(Ve.next(st.value),Ve.closed)return}catch(je){ue={error:je}}finally{try{st&&!st.done&&(Re=Be.return)&&(yield Re.call(Be))}finally{if(ue)throw ue.error}}Ve.complete()})})(He,Ve).catch(Be=>Ve.error(Be))})}},6451:(Ee,pe,U)=>{"use strict";U.d(pe,{T:()=>Ne});var O=U(8189),f=U(8421),G=U(515),he=U(7669),De=U(8996);function Ne(...Me){const be=(0,he.yG)(Me),ge=(0,he._6)(Me,1/0),ne=Me;return ne.length?1===ne.length?(0,f.Xf)(ne[0]):(0,O.J)(ge)((0,De.D)(ne,be)):G.E}},5403:(Ee,pe,U)=>{"use strict";U.d(pe,{Q:()=>G,x:()=>f});var O=U(930);function f(he,De,Ne,Me,be){return new G(he,De,Ne,Me,be)}class G extends O.Lv{constructor(De,Ne,Me,be,ge,ne){super(De),this.onFinalize=ge,this.shouldUnsubscribe=ne,this._next=Ne?function(te){try{Ne(te)}catch(ce){De.error(ce)}}:super._next,this._error=be?function(te){try{be(te)}catch(ce){De.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=Me?function(){try{Me()}catch(te){De.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},4004:(Ee,pe,U)=>{"use strict";U.d(pe,{U:()=>G});var O=U(4482),f=U(5403);function G(he,De){return(0,O.e)((Ne,Me)=>{let be=0;Ne.subscribe((0,f.x)(Me,ge=>{Me.next(he.call(De,ge,be++))}))})}},8189:(Ee,pe,U)=>{"use strict";U.d(pe,{J:()=>G});var O=U(5577),f=U(4671);function G(he=1/0){return(0,O.z)(f.y,he)}},5577:(Ee,pe,U)=>{"use strict";U.d(pe,{z:()=>be});var O=U(4004),f=U(8421),G=U(4482),he=U(9672),De=U(5403),Me=U(576);function be(ge,ne,te=1/0){return(0,Me.m)(ne)?be((ce,Ge)=>(0,O.U)((de,ze)=>ne(ce,de,Ge,ze))((0,f.Xf)(ge(ce,Ge))),te):("number"==typeof ne&&(te=ne),(0,G.e)((ce,Ge)=>function Ne(ge,ne,te,ce,Ge,de,ze,J){const X=[];let ae=0,Se=0,Fe=!1;const He=()=>{Fe&&!X.length&&!ae&&ne.complete()},Ve=st=>ae<ce?Be(st):X.push(st),Be=st=>{de&&ne.next(st),ae++;let ue=!1;(0,f.Xf)(te(st,Se++)).subscribe((0,De.x)(ne,Re=>{Ge?.(Re),de?Ve(Re):ne.next(Re)},()=>{ue=!0},void 0,()=>{if(ue)try{for(ae--;X.length&&ae<ce;){const Re=X.shift();ze?(0,he.f)(ne,ze,()=>Be(Re)):Be(Re)}He()}catch(Re){ne.error(Re)}}))};return ge.subscribe((0,De.x)(ne,Ve,()=>{Fe=!0,He()})),()=>{J?.()}}(ce,Ge,ge,te)))}},5363:(Ee,pe,U)=>{"use strict";U.d(pe,{Q:()=>he});var O=U(9672),f=U(4482),G=U(5403);function he(De,Ne=0){return(0,f.e)((Me,be)=>{Me.subscribe((0,G.x)(be,ge=>(0,O.f)(be,De,()=>be.next(ge),Ne),()=>(0,O.f)(be,De,()=>be.complete(),Ne),ge=>(0,O.f)(be,De,()=>be.error(ge),Ne)))})}},3099:(Ee,pe,U)=>{"use strict";U.d(pe,{B:()=>De});var O=U(8421),f=U(7579),G=U(930),he=U(4482);function De(Me={}){const{connector:be=(()=>new f.x),resetOnError:ge=!0,resetOnComplete:ne=!0,resetOnRefCountZero:te=!0}=Me;return ce=>{let Ge,de,ze,J=0,X=!1,ae=!1;const Se=()=>{de?.unsubscribe(),de=void 0},Fe=()=>{Se(),Ge=ze=void 0,X=ae=!1},He=()=>{const Ve=Ge;Fe(),Ve?.unsubscribe()};return(0,he.e)((Ve,Be)=>{J++,!ae&&!X&&Se();const st=ze=ze??be();Be.add(()=>{J--,0===J&&!ae&&!X&&(de=Ne(He,te))}),st.subscribe(Be),!Ge&&J>0&&(Ge=new G.Hp({next:ue=>st.next(ue),error:ue=>{ae=!0,Se(),de=Ne(Fe,ge,ue),st.error(ue)},complete:()=>{X=!0,Se(),de=Ne(Fe,ne),st.complete()}}),(0,O.Xf)(Ve).subscribe(Ge))})(ce)}}function Ne(Me,be,...ge){if(!0===be)return void Me();if(!1===be)return;const ne=new G.Hp({next:()=>{ne.unsubscribe(),Me()}});return be(...ge).subscribe(ne)}},9468:(Ee,pe,U)=>{"use strict";U.d(pe,{R:()=>f});var O=U(4482);function f(G,he=0){return(0,O.e)((De,Ne)=>{Ne.add(G.schedule(()=>De.subscribe(Ne),he))})}},8505:(Ee,pe,U)=>{"use strict";U.d(pe,{b:()=>De});var O=U(576),f=U(4482),G=U(5403),he=U(4671);function De(Ne,Me,be){const ge=(0,O.m)(Ne)||Me||be?{next:Ne,error:Me,complete:be}:Ne;return ge?(0,f.e)((ne,te)=>{var ce;null===(ce=ge.subscribe)||void 0===ce||ce.call(ge);let Ge=!0;ne.subscribe((0,G.x)(te,de=>{var ze;null===(ze=ge.next)||void 0===ze||ze.call(ge,de),te.next(de)},()=>{var de;Ge=!1,null===(de=ge.complete)||void 0===de||de.call(ge),te.complete()},de=>{var ze;Ge=!1,null===(ze=ge.error)||void 0===ze||ze.call(ge,de),te.error(de)},()=>{var de,ze;Ge&&(null===(de=ge.unsubscribe)||void 0===de||de.call(ge)),null===(ze=ge.finalize)||void 0===ze||ze.call(ge)}))}):he.y}},4408:(Ee,pe,U)=>{"use strict";U.d(pe,{o:()=>De});var O=U(727);class f extends O.w0{constructor(Me,be){super()}schedule(Me,be=0){return this}}const G={setInterval(Ne,Me,...be){const{delegate:ge}=G;return ge?.setInterval?ge.setInterval(Ne,Me,...be):setInterval(Ne,Me,...be)},clearInterval(Ne){const{delegate:Me}=G;return(Me?.clearInterval||clearInterval)(Ne)},delegate:void 0};var he=U(8737);class De extends f{constructor(Me,be){super(Me,be),this.scheduler=Me,this.work=be,this.pending=!1}schedule(Me,be=0){var ge;if(this.closed)return this;this.state=Me;const ne=this.id,te=this.scheduler;return null!=ne&&(this.id=this.recycleAsyncId(te,ne,be)),this.pending=!0,this.delay=be,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(te,this.id,be),this}requestAsyncId(Me,be,ge=0){return G.setInterval(Me.flush.bind(Me,this),ge)}recycleAsyncId(Me,be,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return be;null!=be&&G.clearInterval(be)}execute(Me,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(Me,be);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,be){let ne,ge=!1;try{this.work(Me)}catch(te){ge=!0,ne=te||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),ne}unsubscribe(){if(!this.closed){const{id:Me,scheduler:be}=this,{actions:ge}=be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ge,this),null!=Me&&(this.id=this.recycleAsyncId(be,Me,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ee,pe,U)=>{"use strict";U.d(pe,{v:()=>G});var O=U(6063);class f{constructor(De,Ne=f.now){this.schedulerActionCtor=De,this.now=Ne}schedule(De,Ne=0,Me){return new this.schedulerActionCtor(this,De).schedule(Me,Ne)}}f.now=O.l.now;class G extends f{constructor(De,Ne=f.now){super(De,Ne),this.actions=[],this._active=!1}flush(De){const{actions:Ne}=this;if(this._active)return void Ne.push(De);let Me;this._active=!0;do{if(Me=De.execute(De.state,De.delay))break}while(De=Ne.shift());if(this._active=!1,Me){for(;De=Ne.shift();)De.unsubscribe();throw Me}}}},4986:(Ee,pe,U)=>{"use strict";U.d(pe,{z:()=>G});var O=U(4408);const G=new(U(7565).v)(O.o)},6063:(Ee,pe,U)=>{"use strict";U.d(pe,{l:()=>O});const O={now:()=>(O.delegate||Date).now(),delegate:void 0}},3410:(Ee,pe,U)=>{"use strict";U.d(pe,{z:()=>O});const O={setTimeout(f,G,...he){const{delegate:De}=O;return De?.setTimeout?De.setTimeout(f,G,...he):setTimeout(f,G,...he)},clearTimeout(f){const{delegate:G}=O;return(G?.clearTimeout||clearTimeout)(f)},delegate:void 0}},2202:(Ee,pe,U)=>{"use strict";U.d(pe,{h:()=>f});const f=function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ee,pe,U)=>{"use strict";U.d(pe,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ee,pe,U)=>{"use strict";U.d(pe,{_6:()=>Ne,jO:()=>he,yG:()=>De});var O=U(576);function G(Me){return Me[Me.length-1]}function he(Me){return(0,O.m)(G(Me))?Me.pop():void 0}function De(Me){return function f(Me){return Me&&(0,O.m)(Me.schedule)}(G(Me))?Me.pop():void 0}function Ne(Me,be){return"number"==typeof G(Me)?Me.pop():be}},8737:(Ee,pe,U)=>{"use strict";function O(f,G){if(f){const he=f.indexOf(G);0<=he&&f.splice(he,1)}}U.d(pe,{P:()=>O})},3888:(Ee,pe,U)=>{"use strict";function O(f){const he=f(De=>{Error.call(De),De.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}U.d(pe,{d:()=>O})},2806:(Ee,pe,U)=>{"use strict";U.d(pe,{O:()=>he,x:()=>G});var O=U(2416);let f=null;function G(De){if(O.v.useDeprecatedSynchronousErrorHandling){const Ne=!f;if(Ne&&(f={errorThrown:!1,error:null}),De(),Ne){const{errorThrown:Me,error:be}=f;if(f=null,Me)throw be}}else De()}function he(De){O.v.useDeprecatedSynchronousErrorHandling&&f&&(f.errorThrown=!0,f.error=De)}},9672:(Ee,pe,U)=>{"use strict";function O(f,G,he,De=0,Ne=!1){const Me=G.schedule(function(){he(),Ne?f.add(this.schedule(null,De)):this.unsubscribe()},De);if(f.add(Me),!Ne)return Me}U.d(pe,{f:()=>O})},4671:(Ee,pe,U)=>{"use strict";function O(f){return f}U.d(pe,{y:()=>O})},1144:(Ee,pe,U)=>{"use strict";U.d(pe,{z:()=>O});const O=f=>f&&"number"==typeof f.length&&"function"!=typeof f},2206:(Ee,pe,U)=>{"use strict";U.d(pe,{D:()=>f});var O=U(576);function f(G){return Symbol.asyncIterator&&(0,O.m)(G?.[Symbol.asyncIterator])}},576:(Ee,pe,U)=>{"use strict";function O(f){return"function"==typeof f}U.d(pe,{m:()=>O})},3670:(Ee,pe,U)=>{"use strict";U.d(pe,{c:()=>G});var O=U(8822),f=U(576);function G(he){return(0,f.m)(he[O.L])}},6495:(Ee,pe,U)=>{"use strict";U.d(pe,{T:()=>G});var O=U(2202),f=U(576);function G(he){return(0,f.m)(he?.[O.h])}},8239:(Ee,pe,U)=>{"use strict";U.d(pe,{t:()=>f});var O=U(576);function f(G){return(0,O.m)(G?.then)}},3260:(Ee,pe,U)=>{"use strict";U.d(pe,{L:()=>he,Q:()=>G});var O=U(655),f=U(576);function G(De){return(0,O.FC)(this,arguments,function*(){const Me=De.getReader();try{for(;;){const{value:be,done:ge}=yield(0,O.qq)(Me.read());if(ge)return yield(0,O.qq)(void 0);yield yield(0,O.qq)(be)}}finally{Me.releaseLock()}})}function he(De){return(0,f.m)(De?.getReader)}},4482:(Ee,pe,U)=>{"use strict";U.d(pe,{A:()=>f,e:()=>G});var O=U(576);function f(he){return(0,O.m)(he?.lift)}function G(he){return De=>{if(f(De))return De.lift(function(Ne){try{return he(Ne,this)}catch(Me){this.error(Me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ee,pe,U)=>{"use strict";function O(){}U.d(pe,{Z:()=>O})},9635:(Ee,pe,U)=>{"use strict";U.d(pe,{U:()=>G,z:()=>f});var O=U(4671);function f(...he){return G(he)}function G(he){return 0===he.length?O.y:1===he.length?he[0]:function(Ne){return he.reduce((Me,be)=>be(Me),Ne)}}},7849:(Ee,pe,U)=>{"use strict";U.d(pe,{h:()=>G});var O=U(2416),f=U(3410);function G(he){f.z.setTimeout(()=>{const{onUnhandledError:De}=O.v;if(!De)throw he;De(he)})}},4532:(Ee,pe,U)=>{"use strict";function O(f){return new TypeError(`You provided ${null!==f&&"object"==typeof f?"an invalid object":`'${f}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(pe,{z:()=>O})},655:(Ee,pe,U)=>{"use strict";function he(fe,me){var Ie={};for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&me.indexOf(ke)<0&&(Ie[ke]=fe[ke]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(ke=Object.getOwnPropertySymbols(fe);Te<ke.length;Te++)me.indexOf(ke[Te])<0&&Object.prototype.propertyIsEnumerable.call(fe,ke[Te])&&(Ie[ke[Te]]=fe[ke[Te]])}return Ie}function be(fe,me,Ie,ke){return new(Ie||(Ie=Promise))(function(nt,xt){function wn(Xt){try{Ft(ke.next(Xt))}catch(Wt){xt(Wt)}}function bn(Xt){try{Ft(ke.throw(Xt))}catch(Wt){xt(Wt)}}function Ft(Xt){Xt.done?nt(Xt.value):function Te(nt){return nt instanceof Ie?nt:new Ie(function(xt){xt(nt)})}(Xt.value).then(wn,bn)}Ft((ke=ke.apply(fe,me||[])).next())})}function X(fe){return this instanceof X?(this.v=fe,this):new X(fe)}function ae(fe,me,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,ke=Ie.apply(fe,me||[]),nt=[];return Te={},xt("next"),xt("throw"),xt("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function xt(qn){ke[qn]&&(Te[qn]=function(kr){return new Promise(function(tn,kt){nt.push([qn,kr,tn,kt])>1||wn(qn,kr)})})}function wn(qn,kr){try{!function bn(qn){qn.value instanceof X?Promise.resolve(qn.value.v).then(Ft,Xt):Wt(nt[0][2],qn)}(ke[qn](kr))}catch(tn){Wt(nt[0][3],tn)}}function Ft(qn){wn("next",qn)}function Xt(qn){wn("throw",qn)}function Wt(qn,kr){qn(kr),nt.shift(),nt.length&&wn(nt[0][0],nt[0][1])}}function Fe(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,me=fe[Symbol.asyncIterator];return me?me.call(fe):(fe=function ce(fe){var me="function"==typeof Symbol&&Symbol.iterator,Ie=me&&fe[me],ke=0;if(Ie)return Ie.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&ke>=fe.length&&(fe=void 0),{value:fe&&fe[ke++],done:!fe}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),Ie={},ke("next"),ke("throw"),ke("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function ke(nt){Ie[nt]=fe[nt]&&function(xt){return new Promise(function(wn,bn){!function Te(nt,xt,wn,bn){Promise.resolve(bn).then(function(Ft){nt({value:Ft,done:wn})},xt)}(wn,bn,(xt=fe[nt](xt)).done,xt.value)})}}}U.d(pe,{FC:()=>ae,KL:()=>Fe,_T:()=>he,mG:()=>be,qq:()=>X})},4650:(Ee,pe,U)=>{"use strict";U.d(pe,{$8M:()=>oh,$Z:()=>_S,AFp:()=>m1,ALo:()=>Qy,AaK:()=>be,AsE:()=>Kw,BQk:()=>Wh,CHM:()=>lE,CRH:()=>iv,CZH:()=>ql,CqO:()=>BS,D6c:()=>TP,DdM:()=>Yy,EJc:()=>cv,EpF:()=>Fw,F4k:()=>jl,FYo:()=>XE,FiY:()=>ja,Gf:()=>Rb,GfV:()=>qT,Gpc:()=>te,JOm:()=>yr,KtG:()=>Ep,LFG:()=>Je,Lbi:()=>y1,Lck:()=>$O,MGl:()=>Ny,MMx:()=>vb,NdJ:()=>Ay,OlP:()=>ur,Oqu:()=>qw,P3R:()=>Yp,PXZ:()=>D1,Q6J:()=>Iy,QGY:()=>Sy,QP$:()=>_i,Qsj:()=>KR,R0b:()=>Un,RDi:()=>ET,Rgc:()=>sf,SBq:()=>X_,Sil:()=>Hb,Suo:()=>ZA,TTD:()=>yu,TgZ:()=>gg,WLB:()=>FA,X6Q:()=>k1,XFs:()=>It,Xpm:()=>xa,Xts:()=>KE,Y36:()=>co,YKP:()=>xA,YNc:()=>US,Yjl:()=>dr,Yz7:()=>kt,Z0I:()=>cr,ZZ4:()=>yv,_Bn:()=>AA,_UZ:()=>Ty,_Vd:()=>eg,_c5:()=>CP,_uU:()=>zw,aQg:()=>Xl,c2e:()=>lv,cJS:()=>Or,cg1:()=>bg,dDg:()=>yP,dqk:()=>En,eFA:()=>S1,ekj:()=>XS,eoX:()=>qr,f3M:()=>gt,g9A:()=>_1,h0i:()=>Ng,hGG:()=>DP,hij:()=>Py,iGM:()=>KA,ifc:()=>Ce,ip1:()=>uv,jDz:()=>MA,kL8:()=>cA,lG2:()=>Bt,lcZ:()=>jA,lqb:()=>Pl,lri:()=>b1,n5z:()=>D_,oAB:()=>_e,oxw:()=>Vw,q4F:()=>KT,qLn:()=>kh,qOj:()=>Aw,qZA:()=>Dy,rWj:()=>df,s9C:()=>xy,sBO:()=>tI,sIi:()=>_y,s_b:()=>kg,soG:()=>fo,tb:()=>Kl,tp0:()=>Al,uIk:()=>dg,vHH:()=>X,vpe:()=>jo,wAp:()=>Yt,xi3:()=>Rg,xp6:()=>td,ynx:()=>Pw,z2F:()=>mf,zSh:()=>xh,zWS:()=>fg,zs3:()=>nd});var O=U(7579),f=U(727),G=U(9751),he=U(6451),De=U(3099);function Ne(o){for(let a in o)if(o[a]===Ne)return a;throw Error("Could not find renamed property on target object.")}function Me(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function be(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(be).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ge(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const ne=Ne({__forward_ref__:Ne});function te(o){return o.__forward_ref__=te,o.toString=function(){return be(this())},o}function ce(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(ne)&&o.__forward_ref__===te}function de(o){return o&&!!o.\u0275providers}const J="https://g.co/ng/security#xss";class X extends Error{constructor(a,l){super(function ae(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function Se(o){return"string"==typeof o?o:null==o?"":String(o)}function st(o,a){throw new X(-201,!1)}function Xt(o,a){null==o&&function Wt(o,a,l,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${l} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function kt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Or(o){return{providers:o.providers||[],imports:o.imports||[]}}function mi(o){return Pr(o,Br)||Pr(o,jr)}function cr(o){return null!==mi(o)}function Pr(o,a){return o.hasOwnProperty(a)?o[a]:null}function br(o){return o&&(o.hasOwnProperty(ri)||o.hasOwnProperty(vn))?o[ri]:null}const Br=Ne({\u0275prov:Ne}),ri=Ne({\u0275inj:Ne}),jr=Ne({ngInjectableDef:Ne}),vn=Ne({ngInjectorDef:Ne});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let Ir;function Zn(o){const a=Ir;return Ir=o,a}function $r(o,a,l){const h=mi(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&It.Optional?null:void 0!==a?a:void st(be(o))}const En=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hn={},Hr="__NG_DI_FLAG__",Cr="ngTempTokenPath",ar=/\n/gm,In="__source";let Gr;function nn(o){const a=Gr;return Gr=o,a}function Wr(o,a=It.Default){if(void 0===Gr)throw new X(-203,!1);return null===Gr?$r(o,void 0,a):Gr.get(o,a&It.Optional?null:void 0,a)}function Je(o,a=It.Default){return(function Yr(){return Ir}()||Wr)(ce(o),a)}function gt(o,a=It.Default){return Je(o,Ot(a))}function Ot(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function $t(o){const a=[];for(let l=0;l<o.length;l++){const h=ce(o[l]);if(Array.isArray(h)){if(0===h.length)throw new X(900,!1);let g,_=It.Default;for(let b=0;b<h.length;b++){const T=h[b],N=re(T);"number"==typeof N?-1===N?g=T.token:_|=N:g=T}a.push(Je(g,_))}else a.push(Je(h))}return a}function dn(o,a){return o[Hr]=a,o.prototype[Hr]=a,o}function re(o){return o[Hr]}function V(o){return{toString:o}.toString()}var k=(()=>((k=k||{})[k.OnPush=0]="OnPush",k[k.Default=1]="Default",k))(),Ce=(()=>{return(o=Ce||(Ce={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ce;var o})();const Qe={},qe=[],Dt=Ne({\u0275cmp:Ne}),mt=Ne({\u0275dir:Ne}),Qt=Ne({\u0275pipe:Ne}),Qn=Ne({\u0275mod:Ne}),zt=Ne({\u0275fac:Ne}),Gn=Ne({__NG_ELEMENT_ID__:Ne});let Ao=0;function xa(o){return V(()=>{const l=!0===o.standalone,h={},g={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===k.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||qe,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ce.Emulated,id:"c"+Ao++,styles:o.styles||qe,_:null,setInput:null,schemas:o.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},_=o.dependencies,b=o.features;return g.inputs=ot(o.inputs,h),g.outputs=ot(o.outputs),b&&b.forEach(T=>T(g)),g.directiveDefs=_?()=>("function"==typeof _?_():_).map(cu).filter(Fr):null,g.pipeDefs=_?()=>("function"==typeof _?_():_).map(jn).filter(Fr):null,g})}function cu(o){return Pt(o)||Cn(o)}function Fr(o){return null!==o}function _e(o){return V(()=>({type:o.type,bootstrap:o.bootstrap||qe,declarations:o.declarations||qe,imports:o.imports||qe,exports:o.exports||qe,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function ot(o,a){if(null==o)return Qe;const l={};for(const h in o)if(o.hasOwnProperty(h)){let g=o[h],_=g;Array.isArray(g)&&(_=g[1],g=g[0]),l[g]=h,a&&(a[g]=_)}return l}const Bt=xa;function dr(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function Pt(o){return o[Dt]||null}function Cn(o){return o[mt]||null}function jn(o){return o[Qt]||null}function _i(o){const a=Pt(o)||Cn(o)||jn(o);return null!==a&&a.standalone}function hr(o,a){const l=o[Qn]||null;if(!l&&!0===a)throw new Error(`Type ${be(o)} does not have '\u0275mod' property.`);return l}function Pi(o){return Array.isArray(o)&&"object"==typeof o[1]}function gs(o){return Array.isArray(o)&&!0===o[1]}function Mo(o){return 0!=(4&o.flags)}function hl(o){return o.componentOffset>-1}function Oa(o){return 1==(1&o.flags)}function Li(o){return null!==o.template}function t_(o){return 0!=(256&o[2])}function Xo(o,a){return o.hasOwnProperty(zt)?o[zt]:null}class Ec{constructor(a,l,h){this.previousValue=a,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function yu(){return Ns}function Ns(o){return o.type.prototype.ngOnChanges&&(o.setInput=Ro),ml}function ml(){const o=Zd(this),a=o?.current;if(a){const l=o.previous;if(l===Qe)o.previous=a;else for(let h in a)l[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Ro(o,a,l,h){const g=this.declaredInputs[l],_=Zd(o)||function vu(o,a){return o[Kd]=a}(o,{previous:Qe,current:null}),b=_.current||(_.current={}),T=_.previous,N=T[g];b[g]=new Ec(N&&N.currentValue,a,T===Qe),o[h]=a}yu.ngInherit=!0;const Kd="__ngSimpleChanges__";function Zd(o){return o[Kd]||null}function it(o){for(;Array.isArray(o);)o=o[0];return o}function _r(o,a){return it(a[o])}function rr(o,a){return it(a[o.index])}function un(o,a){return o.data[a]}function Fi(o,a){return o[a]}function Ei(o,a){const l=a[o];return Pi(l)?l:l[0]}function ko(o){return 64==(64&o[2])}function uo(o,a){return null==a?null:o[a]}function La(o){o[18]=0}function ta(o,a){o[5]+=a;let l=o,h=o[3];for(;null!==h&&(1===a&&1===l[5]||-1===a&&0===l[5]);)h[5]+=a,l=h,h=h[3]}const Kt={lFrame:YD(null),bindingsEnabled:!0};function uE(){return Kt.bindingsEnabled}function Ze(){return Kt.lFrame.lView}function Rn(){return Kt.lFrame.tView}function lE(o){return Kt.lFrame.contextLView=o,o[8]}function Ep(o){return Kt.lFrame.contextLView=null,o}function Zi(){let o=bc();for(;null!==o&&64===o.type;)o=o.parent;return o}function bc(){return Kt.lFrame.currentTNode}function Ks(o,a){const l=Kt.lFrame;l.currentTNode=o,l.isParent=a}function Cc(){return Kt.lFrame.isParent}function na(){Kt.lFrame.isParent=!1}function Yi(){const o=Kt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Oo(){return Kt.lFrame.bindingIndex++}function ra(o){const a=Kt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function qD(o,a){const l=Kt.lFrame;l.bindingIndex=l.bindingRootIndex=o,c_(a)}function c_(o){Kt.lFrame.currentDirectiveIndex=o}function pE(){return Kt.lFrame.currentQueryIndex}function bp(o){Kt.lFrame.currentQueryIndex=o}function pR(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function gE(o,a,l){if(l&It.SkipSelf){let g=a,_=o;for(;!(g=g.parent,null!==g||l&It.Host||(g=pR(_),null===g||(_=_[15],10&g.type))););if(null===g)return!1;a=g,o=_}const h=Kt.lFrame=ZD();return h.currentTNode=a,h.lView=o,!0}function d_(o){const a=ZD(),l=o[1];Kt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function ZD(){const o=Kt.lFrame,a=null===o?null:o.child;return null===a?YD(o):a}function YD(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Ip(){const o=Kt.lFrame;return Kt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Eu=Ip;function Yd(){const o=Ip();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ms(){return Kt.lFrame.selectedIndex}function wu(o){Kt.lFrame.selectedIndex=o}function pr(){const o=Kt.lFrame;return un(o.tView,o.selectedIndex)}function Qd(o,a){for(let l=a.directiveStart,h=a.directiveEnd;l<h;l++){const _=o.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:N,ngAfterViewChecked:R,ngOnDestroy:F}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-l,b),T&&((o.contentHooks||(o.contentHooks=[])).push(l,T),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,T)),N&&(o.viewHooks||(o.viewHooks=[])).push(-l,N),R&&((o.viewHooks||(o.viewHooks=[])).push(l,R),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,R)),null!=F&&(o.destroyHooks||(o.destroyHooks=[])).push(l,F)}}function Cp(o,a,l){Cu(o,a,3,l)}function Dc(o,a,l,h){(3&o[2])===l&&Cu(o,a,l,h)}function Tc(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Cu(o,a,l,h){const _=h??-1,b=a.length-1;let T=0;for(let N=void 0!==h?65535&o[18]:0;N<b;N++)if("number"==typeof a[N+1]){if(T=a[N],null!=h&&T>=h)break}else a[N]<0&&(o[18]+=65536),(T<_||-1==_)&&(p_(o,l,a,N),o[18]=(4294901760&o[18])+N+2),N++}function p_(o,a,l,h){const g=l[h]<0,_=l[h+1],T=o[g?-l[h]:l[h]];if(g){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(T)}finally{}}}else try{_.call(T)}finally{}}class Ms{constructor(a,l,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function Jd(o,a,l){let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const _=l[h++],b=l[h++],T=l[h++];o.setAttribute(a,b,T,_)}else{const _=g,b=l[++h];El(_)?o.setProperty(a,_,b):o.setAttribute(a,_,b),h++}}return h}function Ac(o){return 3===o||4===o||6===o}function El(o){return 64===o.charCodeAt(0)}function xc(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let h=0;h<a.length;h++){const g=a[h];"number"==typeof g?l=g:0===l||Va(o,l,g,null,-1===l||2===l?a[++h]:null)}}return o}function Va(o,a,l,h,g){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const T=o[_++];if("number"==typeof T){if(T===a){b=-1;break}if(T>a){b=_-1;break}}}for(;_<o.length;){const T=o[_];if("number"==typeof T)break;if(T===l){if(null===h)return void(null!==g&&(o[_+1]=g));if(h===o[_+1])return void(o[_+2]=g)}_++,null!==h&&_++,null!==g&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,l),null!==h&&o.splice(_++,0,h),null!==g&&o.splice(_++,0,g)}function Tu(o){return-1!==o}function Xd(o){return 32767&o}function wl(o,a){let l=function eh(o){return o>>16}(o),h=a;for(;l>0;)h=h[15],l--;return h}let Nc=!0;function th(o){const a=Nc;return Nc=o,a}let yE=0;const ia={};function Tp(o,a){const l=Sp(o,a);if(-1!==l)return l;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,v_(h.data,o),v_(a,null),v_(h.blueprint,null));const g=ih(o,a),_=o.injectorIndex;if(Tu(g)){const b=Xd(g),T=wl(g,a),N=T[1].data;for(let R=0;R<8;R++)a[_+R]=T[b+R]|N[b+R]}return a[_+8]=g,_}function v_(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Sp(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ih(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,h=null,g=a;for(;null!==g;){if(h=EE(g),null===h)return-1;if(l++,g=g[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function Ap(o,a,l){!function rh(o,a,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(Gn)&&(h=l[Gn]),null==h&&(h=l[Gn]=yE++);const g=255&h;a.data[o+(g>>5)]|=1<<g}(o,a,l)}function xp(o,a,l){if(l&It.Optional||void 0!==o)return o;st()}function Np(o,a,l,h){if(l&It.Optional&&void 0===h&&(h=null),0==(l&(It.Self|It.Host))){const g=o[9],_=Zn(void 0);try{return g?g.get(a,h,l&It.Optional):$r(a,h,l&It.Optional)}finally{Zn(_)}}return xp(h,0,l)}function w_(o,a,l,h=It.Default,g){if(null!==o){if(1024&a[2]){const b=function tT(o,a,l,h,g){let _=o,b=a;for(;null!==_&&null!==b&&1024&b[2]&&!(256&b[2]);){const T=bl(_,b,l,h|It.Self,ia);if(T!==ia)return T;let N=_.parent;if(!N){const R=b[21];if(R){const F=R.get(l,ia,h);if(F!==ia)return F}N=EE(b),b=b[15]}_=N}return g}(o,a,l,h,ia);if(b!==ia)return b}const _=bl(o,a,l,h,ia);if(_!==ia)return _}return Np(a,l,h,g)}function bl(o,a,l,h,g){const _=function I_(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Gn)?o[Gn]:void 0;return"number"==typeof a?a>=0?255&a:Mp:a}(l);if("function"==typeof _){if(!gE(a,o,h))return h&It.Host?xp(g,0,h):Np(a,l,h,g);try{const b=_(h);if(null!=b||h&It.Optional)return b;st()}finally{Eu()}}else if("number"==typeof _){let b=null,T=Sp(o,a),N=-1,R=h&It.Host?a[16][6]:null;for((-1===T||h&It.SkipSelf)&&(N=-1===T?ih(o,a):a[T+8],-1!==N&&vE(h,!1)?(b=a[1],T=Xd(N),a=wl(N,a)):T=-1);-1!==T;){const F=a[1];if(C_(_,T,F.data)){const Z=b_(T,a,l,b,h,R);if(Z!==ia)return Z}N=a[T+8],-1!==N&&vE(h,a[1].data[T+8]===R)&&C_(_,T,a)?(b=F,T=Xd(N),a=wl(N,a)):T=-1}}return g}function b_(o,a,l,h,g,_){const b=a[1],T=b.data[o+8],F=Mc(T,b,l,null==h?hl(T)&&Nc:h!=b&&0!=(3&T.type),g&It.Host&&_===T);return null!==F?Il(a,b,F,T):ia}function Mc(o,a,l,h,g){const _=o.providerIndexes,b=a.data,T=1048575&_,N=o.directiveStart,F=_>>20,oe=g?T+F:o.directiveEnd;for(let we=h?T:T+F;we<oe;we++){const $e=b[we];if(we<N&&l===$e||we>=N&&$e.type===l)return we}if(g){const we=b[N];if(we&&Li(we)&&we.type===l)return N}return null}function Il(o,a,l,h){let g=o[l];const _=a.data;if(function g_(o){return o instanceof Ms}(g)){const b=g;b.resolving&&function He(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new X(-200,`Circular dependency in DI detected for ${o}${l}`)}(function Fe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Se(o)}(_[l]));const T=th(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?Zn(b.injectImpl):null;gE(o,h,It.Default);try{g=o[l]=b.factory(void 0,_,o,h),a.firstCreatePass&&l>=h.directiveStart&&function _E(o,a,l){const{ngOnChanges:h,ngOnInit:g,ngDoCheck:_}=a.type.prototype;if(h){const b=Ns(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,b)}g&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,g),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,_))}(l,_[l],a)}finally{null!==N&&Zn(N),th(T),b.resolving=!1,Eu()}}return g}function C_(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function vE(o,a){return!(o&It.Self||o&It.Host&&a)}class Cl{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,h){return w_(this._tNode,this._lView,a,Ot(h),l)}}function Mp(){return new Cl(Zi(),Ze())}function D_(o){return V(()=>{const a=o.prototype.constructor,l=a[zt]||sh(a),h=Object.prototype;let g=Object.getPrototypeOf(o.prototype).constructor;for(;g&&g!==h;){const _=g[zt]||sh(g);if(_&&_!==l)return _;g=Object.getPrototypeOf(g)}return _=>new _})}function sh(o){return Ge(o)?()=>{const a=sh(ce(o));return a&&a()}:Xo(o)}function EE(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function oh(o){return function E_(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const h=l.length;let g=0;for(;g<h;){const _=l[g];if(Ac(_))break;if(0===_)g+=2;else if("number"==typeof _)for(g++;g<h&&"string"==typeof l[g];)g++;else{if(_===a)return l[g+1];g+=2}}}return null}(Zi(),o)}const Dl="__parameters__";function Rc(o,a,l){return V(()=>{const h=function Tl(o){return function(...l){if(o){const h=o(...l);for(const g in h)this[g]=h[g]}}}(a);function g(..._){if(this instanceof g)return h.apply(this,_),this;const b=new g(..._);return T.annotation=b,T;function T(N,R,F){const Z=N.hasOwnProperty(Dl)?N[Dl]:Object.defineProperty(N,Dl,{value:[]})[Dl];for(;Z.length<=F;)Z.push(null);return(Z[F]=Z[F]||[]).push(b),N}}return l&&(g.prototype=Object.create(l.prototype)),g.prototype.ngMetadataName=o,g.annotationCls=g,g})}class ur{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=kt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ys(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let h=o[l];Array.isArray(h)?(a===o&&(a=o.slice(0,l)),Ys(h,a)):a!==o&&a.push(h)}return a}function $n(o,a){o.forEach(l=>Array.isArray(l)?$n(l,a):a(l))}function Po(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function St(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function _s(o,a,l){let h=Ba(o,a);return h>=0?o[1|h]=l:(h=~h,function Su(o,a,l,h){let g=o.length;if(g==a)o.push(l,h);else if(1===g)o.push(h,o[0]),o[0]=l;else{for(g--,o.push(o[g-1],o[g]);g>a;)o[g]=o[g-2],g--;o[a]=l,o[a+1]=h}}(o,h,a,l)),h}function lh(o,a){const l=Ba(o,a);if(l>=0)return o[1|l]}function Ba(o,a){return function Au(o,a,l){let h=0,g=o.length>>l;for(;g!==h;){const _=h+(g-h>>1),b=o[_<<l];if(a===b)return _<<l;b>a?g=_:h=_+1}return~(g<<l)}(o,a,1)}const ja=dn(Rc("Optional"),8),Al=dn(Rc("SkipSelf"),4);var yr=(()=>((yr=yr||{})[yr.Important=1]="Important",yr[yr.DashCase=2]="DashCase",yr))();const mh=new Map;let NE=0;const w="__ngContext__";function S(o,a){Pi(a)?(o[w]=a[20],function ME(o){mh.set(o[20],o)}(a)):o[w]=a}function Nl(o,a){return undefined(o,a)}function la(o){const a=o[3];return gs(a)?a[3]:a}function yh(o){return vh(o[13])}function jp(o){return vh(o[4])}function vh(o){for(;null!==o&&!gs(o);)o=o[4];return o}function Ou(o,a,l,h,g){if(null!=h){let _,b=!1;gs(h)?_=h:Pi(h)&&(b=!0,h=h[0]);const T=it(h);0===o&&null!==l?null==g?wh(a,l,T):Pu(a,l,T,g||null,!0):1===o&&null!==l?Pu(a,l,T,g||null,!0):2===o?function BE(o,a,l){const h=Gp(o,a);h&&function FE(o,a,l,h){o.removeChild(a,l,h)}(o,h,a,l)}(a,T,b):3===o&&a.destroyNode(T),null!=_&&function DR(o,a,l,h,g){const _=l[7];_!==it(l)&&Ou(a,o,h,_,g);for(let T=10;T<l.length;T++){const N=l[T];Wp(N[1],N,o,a,h,_)}}(a,o,_,l,g)}}function cT(o,a,l){return o.createElement(a,l)}function OE(o,a){const l=o[9],h=l.indexOf(a),g=a[3];512&a[2]&&(a[2]&=-513,ta(g,-1)),l.splice(h,1)}function F_(o,a){if(o.length<=10)return;const l=10+a,h=o[l];if(h){const g=h[17];null!==g&&g!==o&&OE(g,h),a>0&&(o[l-1][4]=h[4]);const _=St(o,10+a);!function vR(o,a){Wp(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=_[19];null!==b&&b.detachView(_[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function PE(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Wp(o,a,l,3,null,null),function $p(o){let a=o[13];if(!a)return Rl(o[1],o);for(;a;){let l=null;if(Pi(a))l=a[13];else{const h=a[10];h&&(l=h)}if(!l){for(;a&&!a[4]&&a!==o;)Pi(a)&&Rl(a[1],a),a=a[3];null===a&&(a=o),Pi(a)&&Rl(a[1],a),l=a&&a[4]}a=l}}(a)}}function Rl(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function IR(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let h=0;h<l.length;h+=2){const g=a[l[h]];if(!(g instanceof Ms)){const _=l[h+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const T=g[_[b]],N=_[b+1];try{N.call(T)}finally{}}else try{_.call(g)}finally{}}}}(o,a),function bR(o,a){const l=o.cleanup,h=a[7];let g=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const b=l[_+3];b>=0?h[g=b]():h[g=-b].unsubscribe(),_+=2}else{const b=h[g=l[_+1]];l[_].call(b)}if(null!==h){for(let _=g+1;_<h.length;_++)(0,h[_])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&gs(a[3])){l!==a[3]&&OE(l,a);const h=a[19];null!==h&&h.detachView(o)}!function Fp(o){mh.delete(o[20])}(a)}}function LE(o,a,l){return function dT(o,a,l){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return l[0];{const{componentOffset:g}=h;if(g>-1){const{encapsulation:_}=o.data[h.directiveStart+g];if(_===Ce.None||_===Ce.Emulated)return null}return rr(h,l)}}(o,a.parent,l)}function Pu(o,a,l,h,g){o.insertBefore(a,l,h,g)}function wh(o,a,l){o.appendChild(a,l)}function hT(o,a,l,h,g){null!==h?Pu(o,a,l,h,g):wh(o,a,l)}function Gp(o,a){return o.parentNode(a)}let Lu,qc,kl=function V_(o,a,l){return 40&o.type?rr(o,l):null};function U_(o,a,l,h){const g=LE(o,h,a),_=a[11],T=function Ga(o,a,l){return kl(o,a,l)}(h.parent||a[6],h,a);if(null!=g)if(Array.isArray(l))for(let N=0;N<l.length;N++)hT(_,g,l[N],T,!1);else hT(_,g,l,T,!1)}function B_(o,a){if(null!==a){const l=a.type;if(3&l)return rr(a,o);if(4&l)return UE(-1,o[a.index]);if(8&l){const h=a.child;if(null!==h)return B_(o,h);{const g=o[a.index];return gs(g)?UE(-1,g):it(g)}}if(32&l)return Nl(a,o)()||it(o[a.index]);{const h=pT(o,a);return null!==h?Array.isArray(h)?h[0]:B_(la(o[16]),h):B_(o,a.next)}}return null}function pT(o,a){return null!==a?o[16][6].projection[a.projection]:null}function UE(o,a){const l=10+o+1;if(l<a.length){const h=a[l],g=h[1].firstChild;if(null!==g)return B_(h,g)}return a[7]}function jE(o,a,l,h,g,_,b){for(;null!=l;){const T=h[l.index],N=l.type;if(b&&0===a&&(T&&S(it(T),h),l.flags|=2),32!=(32&l.flags))if(8&N)jE(o,a,l.child,h,g,_,!1),Ou(a,o,g,T,_);else if(32&N){const R=Nl(l,h);let F;for(;F=R();)Ou(a,o,g,F,_);Ou(a,o,g,T,_)}else 16&N?gT(o,a,h,l,g,_):Ou(a,o,g,T,_);l=b?l.projectionNext:l.next}}function Wp(o,a,l,h,g,_){jE(l,h,o.firstChild,a,g,_,!1)}function gT(o,a,l,h,g,_){const b=l[16],N=b[6].projection[h.projection];if(Array.isArray(N))for(let R=0;R<N.length;R++)Ou(a,o,g,N[R],_);else jE(o,a,N,b[3],g,_,!0)}function yT(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function $E(o,a,l){const{mergedAttrs:h,classes:g,styles:_}=l;null!==h&&Jd(o,a,h),null!==g&&yT(o,a,g),null!==_&&function _T(o,a,l){o.setAttribute(a,"style",l)}(o,a,_)}function ET(o){Lu=o}function H_(o){return function j_(){if(void 0===qc&&(qc=null,En.trustedTypes))try{qc=En.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return qc}()?.createScriptURL(o)||o}class G_{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${J})`}}function Fu(o){return o instanceof G_?o.changingThisBreaksApplicationSecurity:o}function Dh(o,a){const l=function bT(o){return o instanceof G_&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${J})`)}return l===a}const IB=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var bi=(()=>((bi=bi||{})[bi.NONE=0]="NONE",bi[bi.HTML=1]="HTML",bi[bi.STYLE=2]="STYLE",bi[bi.SCRIPT=3]="SCRIPT",bi[bi.URL=4]="URL",bi[bi.RESOURCE_URL=5]="RESOURCE_URL",bi))();function NT(o){const a=Jp();return a?a.sanitize(bi.URL,o)||"":Dh(o,"URL")?Fu(o):function TT(o){return(o=String(o)).match(IB)?o:"unsafe:"+o}(Se(o))}function MT(o){const a=Jp();if(a)return H_(a.sanitize(bi.RESOURCE_URL,o)||"");if(Dh(o,"ResourceURL"))return H_(Fu(o));throw new X(904,!1)}function Yp(o,a,l){return function qE(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?MT:NT}(a,l)(o)}function Jp(){const o=Ze();return o&&o[12]}const KE=new ur("ENVIRONMENT_INITIALIZER"),RT=new ur("INJECTOR",-1),kT=new ur("INJECTOR_DEF_TYPES");class OT{get(a,l=Hn){if(l===Hn){const h=new Error(`NullInjectorError: No provider for ${be(a)}!`);throw h.name="NullInjectorError",h}return l}}function BR(...o){return{\u0275providers:PT(0,o),\u0275fromNgModule:!0}}function PT(o,...a){const l=[],h=new Set;let g;return $n(a,_=>{const b=_;YE(b,l,[],h)&&(g||(g=[]),g.push(b))}),void 0!==g&&ZE(g,l),l}function ZE(o,a){for(let l=0;l<o.length;l++){const{providers:g}=o[l];Q_(g,_=>{a.push(_)})}}function YE(o,a,l,h){if(!(o=ce(o)))return!1;let g=null,_=br(o);const b=!_&&Pt(o);if(_||b){if(b&&!b.standalone)return!1;g=o}else{const N=o.ngModule;if(_=br(N),!_)return!1;g=N}const T=h.has(g);if(b){if(T)return!1;if(h.add(g),b.dependencies){const N="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const R of N)YE(R,a,l,h)}}else{if(!_)return!1;{if(null!=_.imports&&!T){let R;h.add(g);try{$n(_.imports,F=>{YE(F,a,l,h)&&(R||(R=[]),R.push(F))})}finally{}void 0!==R&&ZE(R,a)}if(!T){const R=Xo(g)||(()=>new g);a.push({provide:g,useFactory:R,deps:qe},{provide:kT,useValue:g,multi:!0},{provide:KE,useValue:()=>Je(g),multi:!0})}const N=_.providers;null==N||T||Q_(N,F=>{a.push(F)})}}return g!==o&&void 0!==o.providers}function Q_(o,a){for(let l of o)de(l)&&(l=l.\u0275providers),Array.isArray(l)?Q_(l,a):a(l)}const QE=Ne({provide:String,useValue:Ne});function Ah(o){return null!==o&&"object"==typeof o&&QE in o}function Yc(o){return"function"==typeof o}const xh=new ur("Set Injector scope."),Xp={},UT={};let Nh;function Qc(){return void 0===Nh&&(Nh=new OT),Nh}class Pl{}class Mh extends Pl{constructor(a,l,h,g){super(),this.parent=l,this.source=h,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,JE(a,b=>this.processProvider(b)),this.records.set(RT,Rh(void 0,this)),g.has("environment")&&this.records.set(Pl,Rh(void 0,this));const _=this.records.get(xh);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(kT.multi,qe,It.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=nn(this),h=Zn(void 0);try{return a()}finally{nn(l),Zn(h)}}get(a,l=Hn,h=It.Default){this.assertNotDestroyed(),h=Ot(h);const g=nn(this),_=Zn(void 0);try{if(!(h&It.SkipSelf)){let T=this.records.get(a);if(void 0===T){const N=function WR(o){return"function"==typeof o||"object"==typeof o&&o instanceof ur}(a)&&mi(a);T=N&&this.injectableDefInScope(N)?Rh(J_(a),Xp):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(h&It.Self?Qc():this.parent).get(a,l=h&It.Optional&&l===Hn?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[Cr]=b[Cr]||[]).unshift(be(a)),g)throw b;return function Y(o,a,l,h){const g=o[Cr];throw a[In]&&g.unshift(a[In]),o.message=function H(o,a,l,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let g=be(a);if(Array.isArray(a))g=a.map(be).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let T=a[b];_.push(b+":"+("string"==typeof T?JSON.stringify(T):be(T)))}g=`{${_.join(", ")}}`}return`${l}${h?"("+h+")":""}[${g}]: ${o.replace(ar,"\n  ")}`}("\n"+o.message,g,l,h),o.ngTokenPath=g,o[Cr]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Zn(_),nn(g)}}resolveInjectorInitializers(){const a=nn(this),l=Zn(void 0);try{const h=this.get(KE.multi,qe,It.Self);for(const g of h)g()}finally{nn(a),Zn(l)}}toString(){const a=[],l=this.records;for(const h of l.keys())a.push(be(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(a){let l=Yc(a=ce(a))?a:ce(a&&a.provide);const h=function HR(o){return Ah(o)?Rh(void 0,o.useValue):Rh(BT(o),Xp)}(a);if(Yc(a)||!0!==a.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=Rh(void 0,Xp,!0),g.factory=()=>$t(g.multi),this.records.set(l,g)),l=a,g.multi.push(a)}this.records.set(l,h)}hydrate(a,l){return l.value===Xp&&(l.value=UT,l.value=l.factory()),"object"==typeof l.value&&l.value&&function jT(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ce(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function J_(o){const a=mi(o),l=null!==a?a.factory:Xo(o);if(null!==l)return l;if(o instanceof ur)throw new X(204,!1);if(o instanceof Function)return function $R(o){const a=o.length;if(a>0)throw function Vi(o,a){const l=[];for(let h=0;h<o;h++)l.push(a);return l}(a,"?"),new X(204,!1);const l=function ki(o){const a=o&&(o[Br]||o[jr]);if(a){const l=function ni(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new X(204,!1)}function BT(o,a,l){let h;if(Yc(o)){const g=ce(o);return Xo(g)||J_(g)}if(Ah(o))h=()=>ce(o.useValue);else if(function VT(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...$t(o.deps||[]));else if(function FT(o){return!(!o||!o.useExisting)}(o))h=()=>Je(ce(o.useExisting));else{const g=ce(o&&(o.useClass||o.provide));if(!function GR(o){return!!o.deps}(o))return Xo(g)||J_(g);h=()=>new g(...$t(o.deps))}return h}function Rh(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function JE(o,a){for(const l of o)Array.isArray(l)?JE(l,a):l&&de(l)?JE(l.\u0275providers,a):a(l)}class zR{}class $T{}class GT{resolveComponentFactory(a){throw function qR(o){const a=Error(`No component factory found for ${be(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let eg=(()=>{class o{}return o.NULL=new GT,o})();function WT(){return Jc(Zi(),Ze())}function Jc(o,a){return new X_(rr(o,a))}let X_=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=WT,o})();function zT(o){return o instanceof X_?o.nativeElement:o}class XE{}let KR=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function ZR(){const o=Ze(),l=Ei(Zi().index,o);return(Pi(l)?l:o)[11]}(),o})(),YR=(()=>{class o{}return o.\u0275prov=kt({token:o,providedIn:"root",factory:()=>null}),o})();class qT{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const KT=new qT("15.0.2"),ew={};function nw(o){return o.ngOriginalError}class kh{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&nw(a);for(;l&&nw(l);)l=nw(l);return l||null}}function Vu(o){return o instanceof Function?o():o}function JT(o,a,l){let h=o.length;for(;;){const g=o.indexOf(a,l);if(-1===g)return g;if(0===g||o.charCodeAt(g-1)<=32){const _=a.length;if(g+_===h||o.charCodeAt(g+_)<=32)return g}l=g+1}}const XT="ng-template";function tk(o,a,l){let h=0;for(;h<o.length;){let g=o[h++];if(l&&"class"===g){if(g=o[h],-1!==JT(g.toLowerCase(),a,0))return!0}else if(1===g){for(;h<o.length&&"string"==typeof(g=o[h++]);)if(g.toLowerCase()===a)return!0;return!1}}return!1}function eS(o){return 4===o.type&&o.value!==XT}function nk(o,a,l){return a===(4!==o.type||l?o.value:XT)}function rk(o,a,l){let h=4;const g=o.attrs||[],_=function ik(o){for(let a=0;a<o.length;a++)if(Ac(o[a]))return a;return o.length}(g);let b=!1;for(let T=0;T<a.length;T++){const N=a[T];if("number"!=typeof N){if(!b)if(4&h){if(h=2|1&h,""!==N&&!nk(o,N,l)||""===N&&1===a.length){if(Uo(h))return!1;b=!0}}else{const R=8&h?N:a[++T];if(8&h&&null!==o.attrs){if(!tk(o.attrs,R,l)){if(Uo(h))return!1;b=!0}continue}const Z=Ii(8&h?"class":N,g,eS(o),l);if(-1===Z){if(Uo(h))return!1;b=!0;continue}if(""!==R){let oe;oe=Z>_?"":g[Z+1].toLowerCase();const we=8&h?oe:null;if(we&&-1!==JT(we,R,0)||2&h&&R!==oe){if(Uo(h))return!1;b=!0}}}}else{if(!b&&!Uo(h)&&!Uo(N))return!1;if(b&&Uo(N))continue;b=!1,h=N|1&h}}return Uo(h)||b}function Uo(o){return 0==(1&o)}function Ii(o,a,l,h){if(null===a)return-1;let g=0;if(h||!l){let _=!1;for(;g<a.length;){const b=a[g];if(b===o)return g;if(3===b||6===b)_=!0;else{if(1===b||2===b){let T=a[++g];for(;"string"==typeof T;)T=a[++g];continue}if(4===b)break;if(0===b){g+=4;continue}}g+=_?1:2}return-1}return function sk(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const h=o[l];if("number"==typeof h)return-1;if(h===a)return l;l++}return-1}(a,o)}function tS(o,a,l=!1){for(let h=0;h<a.length;h++)if(rk(o,a[h],l))return!0;return!1}function ok(o,a){return o?":not("+a.trim()+")":a}function OB(o){let a=o[0],l=1,h=2,g="",_=!1;for(;l<o.length;){let b=o[l];if("string"==typeof b)if(2&h){const T=o[++l];g+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?g+="."+b:4&h&&(g+=" "+b);else""!==g&&!Uo(b)&&(a+=ok(_,g),g=""),h=b,_=_||!Uo(h);l++}return""!==g&&(a+=ok(_,g)),a}const pn={};function td(o){uk(Rn(),Ze(),ms()+o,!1)}function uk(o,a,l,h){if(!h)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&Cp(a,_,l)}else{const _=o.preOrderHooks;null!==_&&Dc(a,_,0,l)}wu(l)}function aS(o,a=null,l=null,h){const g=uS(o,a,l,h);return g.resolveInjectorInitializers(),g}function uS(o,a=null,l=null,h,g=new Set){const _=[l||qe,BR(o)];return h=h||("object"==typeof o?void 0:be(o)),new Mh(_,a||Qc(),h||null,g)}let nd=(()=>{class o{static create(l,h){if(Array.isArray(l))return aS({name:""},h,l,"");{const g=l.name??"";return aS({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=Hn,o.NULL=new OT,o.\u0275prov=kt({token:o,providedIn:"any",factory:()=>Je(RT)}),o.__NG_ELEMENT_ID__=-1,o})();function co(o,a=It.Default){const l=Ze();return null===l?Je(o,a):w_(Zi(),l,ce(o),a)}function _S(){throw new Error("invalid")}function cw(o,a){const l=o.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const g=l[h],_=l[h+1];if(-1!==_){const b=o.data[_];bp(g),b.contentQueries(2,a[_],_)}}}function ig(o,a,l,h,g,_,b,T,N,R,F){const Z=a.blueprint.slice();return Z[0]=g,Z[2]=76|h,(null!==F||o&&1024&o[2])&&(Z[2]|=1024),La(Z),Z[3]=Z[15]=o,Z[8]=l,Z[10]=b||o&&o[10],Z[11]=T||o&&o[11],Z[12]=N||o&&o[12]||null,Z[9]=R||o&&o[9]||null,Z[6]=_,Z[20]=function k_(){return NE++}(),Z[21]=F,Z[16]=2==a.type?o[16]:Z,Z}function id(o,a,l,h,g){let _=o.data[a];if(null===_)_=function ty(o,a,l,h,g){const _=bc(),b=Cc(),N=o.data[a]=function pw(o,a,l,h,g,_){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,l,a,h,g);return null===o.firstChild&&(o.firstChild=N),null!==_&&(b?null==_.child&&null!==N.parent&&(_.child=N):null===_.next&&(_.next=N)),N}(o,a,l,h,g),function zD(){return Kt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=l,_.value=h,_.attrs=g;const b=function Ic(){const o=Kt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return Ks(_,!0),_}function Fh(o,a,l,h){if(0===l)return-1;const g=a.length;for(let _=0;_<l;_++)a.push(h),o.blueprint.push(h),o.data.push(null);return g}function ny(o,a,l){d_(a);try{const h=o.viewQuery;null!==h&&og(1,h,l);const g=o.template;null!==g&&dw(o,a,g,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&cw(o,a),o.staticViewQueries&&og(2,o.viewQuery,l);const _=o.components;null!==_&&function vS(o,a){for(let l=0;l<a.length;l++)Dk(o,a[l])}(a,_)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Yd()}}function sd(o,a,l,h){const g=a[2];if(128!=(128&g)){d_(a);try{La(a),function dE(o){return Kt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&dw(o,a,l,2,h);const b=3==(3&g);if(b){const R=o.preOrderCheckHooks;null!==R&&Cp(a,R,null)}else{const R=o.preOrderHooks;null!==R&&Dc(a,R,0,null),Tc(a,0)}if(function TS(o){for(let a=yh(o);null!==a;a=jp(a)){if(!a[2])continue;const l=a[9];for(let h=0;h<l.length;h++){const g=l[h],_=g[3];0==(512&g[2])&&ta(_,1),g[2]|=512}}}(a),function Ik(o){for(let a=yh(o);null!==a;a=jp(a))for(let l=10;l<a.length;l++){const h=a[l],g=h[1];ko(h)&&sd(g,h,g.template,h[8])}}(a),null!==o.contentQueries&&cw(o,a),b){const R=o.contentCheckHooks;null!==R&&Cp(a,R)}else{const R=o.contentHooks;null!==R&&Dc(a,R,1),Tc(a,1)}!function UB(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const g=l[h];if(g<0)wu(~g);else{const _=g,b=l[++h],T=l[++h];qD(b,_),T(2,a[_])}}}finally{wu(-1)}}(o,a);const T=o.components;null!==T&&function yS(o,a){for(let l=0;l<a.length;l++)Ck(o,a[l])}(a,T);const N=o.viewQuery;if(null!==N&&og(2,N,h),b){const R=o.viewCheckHooks;null!==R&&Cp(a,R)}else{const R=o.viewHooks;null!==R&&Dc(a,R,2),Tc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,ta(a[3],-1))}finally{Yd()}}}function dw(o,a,l,h,g){const _=ms(),b=2&h;try{wu(-1),b&&a.length>22&&uk(o,a,22,!1),l(h,g)}finally{wu(_)}}function ry(o,a,l){if(Mo(a)){const g=a.directiveEnd;for(let _=a.directiveStart;_<g;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,l[_],_)}}}function iy(o,a,l){!uE()||(function jB(o,a,l,h){const g=l.directiveStart,_=l.directiveEnd;o.firstCreatePass||Tp(l,a),S(h,a);const b=l.initialInputs;for(let T=g;T<_;T++){const N=o.data[T],R=Li(N);R&&HB(a,l,N);const F=Il(a,o,T,l);S(F,a),null!==b&&GB(0,T-g,F,N,0,b),R&&(Ei(l.index,a)[8]=F)}}(o,a,l,rr(l,a)),64==(64&l.flags)&&sg(o,a,l))}function sy(o,a,l=rr){const h=a.localNames;if(null!==h){let g=a.index+1;for(let _=0;_<h.length;_+=2){const b=h[_+1],T=-1===b?l(a,o):o[b];o[g++]=T}}}function ES(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=oy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function oy(o,a,l,h,g,_,b,T,N,R){const F=22+h,Z=F+g,oe=function wS(o,a){const l=[];for(let h=0;h<a;h++)l.push(h<o?null:pn);return l}(F,Z),we="function"==typeof R?R():R;return oe[1]={type:o,blueprint:oe,template:l,queries:null,viewQuery:T,declTNode:a,data:oe.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:we,incompleteFirstPass:!1}}function fw(o,a,l,h){const g=ly(a);null===l?g.push(h):(g.push(l),o.firstCreatePass&&SS(o).push(h,g.length-1))}function gw(o,a,l,h){for(let g in o)if(o.hasOwnProperty(g)){l=null===l?{}:l;const _=o[g];null===h?mw(l,a,g,_):h.hasOwnProperty(g)&&mw(l,a,h[g],_)}return l}function mw(o,a,l,h){o.hasOwnProperty(l)?o[l].push(a,h):o[l]=[a,h]}function vs(o,a,l,h,g,_,b,T){const N=rr(a,l);let F,R=a.inputs;!T&&null!=R&&(F=R[h])?(cy(o,l,F,h,g),hl(a)&&yw(l,a.index)):3&a.type&&(h=function _w(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),g=null!=b?b(g,a.value||"",h):g,_.setProperty(N,h,g))}function yw(o,a){const l=Ei(a,o);16&l[2]||(l[2]|=32)}function us(o,a,l,h){let g=!1;if(uE()){const _=null===h?null:{"":-1},b=function vw(o,a){const l=o.directiveRegistry;let h=null,g=null;if(l)for(let _=0;_<l.length;_++){const b=l[_];if(tS(a,b.selectors,!1))if(h||(h=[]),Li(b))if(null!==b.findHostDirectiveDefs){const T=[];g=g||new Map,b.findHostDirectiveDefs(b,T,g),h.unshift(...T,b),Vh(o,a,T.length)}else h.unshift(b),Vh(o,a,0);else g=g||new Map,b.findHostDirectiveDefs?.(b,h,g),h.push(b)}return null===h?null:[h,g]}(o,l);let T,N;null===b?T=N=null:[T,N]=b,null!==T&&(g=!0,Uu(o,a,l,T,_,N)),_&&function Ek(o,a,l){if(a){const h=o.localNames=[];for(let g=0;g<a.length;g+=2){const _=l[a[g+1]];if(null==_)throw new X(-301,!1);h.push(a[g],_)}}}(l,h,_)}return l.mergedAttrs=xc(l.mergedAttrs,l.attrs),g}function Uu(o,a,l,h,g,_){for(let R=0;R<h.length;R++)Ap(Tp(l,a),o,h[R].type);!function wk(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}(l,o.data.length,h.length);for(let R=0;R<h.length;R++){const F=h[R];F.providersResolver&&F.providersResolver(F)}let b=!1,T=!1,N=Fh(o,a,h.length,null);for(let R=0;R<h.length;R++){const F=h[R];l.mergedAttrs=xc(l.mergedAttrs,F.hostAttrs),$B(o,l,a,N,F),Ew(N,F,g),null!==F.contentQueries&&(l.flags|=4),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=64);const Z=F.type.prototype;!b&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),b=!0),!T&&(Z.ngOnChanges||Z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),T=!0),N++}!function bS(o,a,l){const g=a.directiveEnd,_=o.data,b=a.attrs,T=[];let N=null,R=null;for(let F=a.directiveStart;F<g;F++){const Z=_[F],oe=l?l.get(Z):null,$e=oe?oe.outputs:null;N=gw(Z.inputs,F,N,oe?oe.inputs:null),R=gw(Z.outputs,F,R,$e);const ut=null===N||null===b||eS(a)?null:WB(N,F,b);T.push(ut)}null!==N&&(N.hasOwnProperty("class")&&(a.flags|=8),N.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=T,a.inputs=N,a.outputs=R}(o,l,_)}function sg(o,a,l){const h=l.directiveStart,g=l.directiveEnd,_=l.index,b=function KD(){return Kt.lFrame.currentDirectiveIndex}();try{wu(_);for(let T=h;T<g;T++){const N=o.data[T],R=a[T];c_(T),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&ay(N,R)}}finally{wu(-1),c_(b)}}function ay(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Vh(o,a,l){a.componentOffset=l,(o.components||(o.components=[])).push(a.index)}function Ew(o,a,l){if(l){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)l[a.exportAs[h]]=o;Li(a)&&(l[""]=o)}}function $B(o,a,l,h,g){o.data[h]=g;const _=g.factory||(g.factory=Xo(g.type)),b=new Ms(_,Li(g),co);o.blueprint[h]=b,l[h]=b,function CS(o,a,l,h,g){const _=g.hostBindings;if(_){let b=o.hostBindingOpCodes;null===b&&(b=o.hostBindingOpCodes=[]);const T=~a.index;(function BB(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(b)!=T&&b.push(T),b.push(l,h,_)}}(o,a,h,Fh(o,l,g.hostVars,pn),g)}function HB(o,a,l){const h=rr(a,o),g=ES(l),_=o[10],b=Fl(o,ig(o,g,null,l.onPush?32:16,h,a,_,_.createRenderer(h,l),null,null,null));o[a.index]=b}function Bu(o,a,l,h,g,_){const b=rr(o,a);!function DS(o,a,l,h,g,_,b){if(null==_)o.removeAttribute(a,g,l);else{const T=null==b?Se(_):b(_,h||"",g);o.setAttribute(a,g,T,l)}}(a[11],b,_,o.value,l,h,g)}function GB(o,a,l,h,g,_){const b=_[a];if(null!==b){const T=h.setInput;for(let N=0;N<b.length;){const R=b[N++],F=b[N++],Z=b[N++];null!==T?h.setInput(l,Z,R,F):l[F]=Z}}}function WB(o,a,l){let h=null,g=0;for(;g<l.length;){const _=l[g];if(0!==_)if(5!==_){if("number"==typeof _)break;if(o.hasOwnProperty(_)){null===h&&(h=[]);const b=o[_];for(let T=0;T<b.length;T+=2)if(b[T]===a){h.push(_,b[T+1],l[g+1]);break}}g+=2}else g+=2;else g+=4}return h}function bk(o,a,l,h){return[o,!0,!1,a,null,0,h,l,null,null]}function Ck(o,a){const l=Ei(a,o);if(ko(l)){const h=l[1];48&l[2]?sd(h,l,h.template,l[8]):l[5]>0&&ww(l)}}function ww(o){for(let h=yh(o);null!==h;h=jp(h))for(let g=10;g<h.length;g++){const _=h[g];if(ko(_))if(512&_[2]){const b=_[1];sd(b,_,b.template,_[8])}else _[5]>0&&ww(_)}const l=o[1].components;if(null!==l)for(let h=0;h<l.length;h++){const g=Ei(l[h],o);ko(g)&&g[5]>0&&ww(g)}}function Dk(o,a){const l=Ei(a,o),h=l[1];(function bw(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(h,l),ny(h,l,l[8])}function Fl(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Uh(o){for(;o;){o[2]|=32;const a=la(o);if(t_(o)&&!a)return o;o=a}return null}function ju(o,a,l,h=!0){const g=a[10];g.begin&&g.begin();try{sd(o,a,o.template,l)}catch(b){throw h&&Iw(a,b),b}finally{g.end&&g.end()}}function og(o,a,l){bp(0),a(o,l)}function ly(o){return o[7]||(o[7]=[])}function SS(o){return o.cleanup||(o.cleanup=[])}function Iw(o,a){const l=o[9],h=l?l.get(kh,null):null;h&&h.handleError(a)}function cy(o,a,l,h,g){for(let _=0;_<l.length;){const b=l[_++],T=l[_++],N=a[b],R=o.data[b];null!==R.setInput?R.setInput(N,g,h,T):N[T]=g}}function Bo(o,a,l){const h=_r(a,o);!function Ml(o,a,l){o.setValue(a,l)}(o[11],h,l)}function Vl(o,a,l){let h=l?o.styles:null,g=l?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const T=a[b];"number"==typeof T?_=T:1==_?g=ge(g,T):2==_&&(h=ge(h,T+": "+a[++b]+";"))}l?o.styles=h:o.stylesWithoutHost=h,l?o.classes=g:o.classesWithoutHost=g}function Cw(o,a,l,h,g=!1){for(;null!==l;){const _=a[l.index];if(null!==_&&h.push(it(_)),gs(_))for(let T=10;T<_.length;T++){const N=_[T],R=N[1].firstChild;null!==R&&Cw(N[1],N,R,h)}const b=l.type;if(8&b)Cw(o,a,l.child,h);else if(32&b){const T=Nl(l,a);let N;for(;N=T();)h.push(N)}else if(16&b){const T=pT(a,l);if(Array.isArray(T))h.push(...T);else{const N=la(a[16]);Cw(N[1],N,T,h,!0)}}l=g?l.projectionNext:l.next}return h}class dy{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Cw(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(gs(a)){const l=a[8],h=l?l.indexOf(this):-1;h>-1&&(F_(a,h),St(l,h))}this._attachedToViewContainer=!1}PE(this._lView[1],this._lView)}onDestroy(a){fw(this._lView[1],this._lView,null,a)}markForCheck(){Uh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ju(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wR(o,a){Wp(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=a}}class AS extends dy{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;ju(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Tk extends eg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Pt(a);return new $u(l,this.ngModule)}}function od(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class fy{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,h){h=Ot(h);const g=this.injector.get(a,ew,h);return g!==ew||l===ew?g:this.parentInjector.get(a,l,h)}}class $u extends $T{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function ak(o){return o.map(OB).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return od(this.componentDef.inputs)}get outputs(){return od(this.componentDef.outputs)}create(a,l,h,g){let _=(g=g||this.ngModule)instanceof Pl?g:g?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const b=_?new fy(a,_):a,T=b.get(XE,null);if(null===T)throw new X(407,!1);const N=b.get(YR,null),R=T.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",Z=h?function hw(o,a,l){return o.selectRootElement(a,l===Ce.ShadowDom)}(R,h,this.componentDef.encapsulation):cT(R,F,function hy(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(F)),oe=this.componentDef.onPush?288:272,we=oy(0,null,null,1,0,null,null,null,null,null),$e=ig(null,we,null,oe,null,null,T,R,N,b,null);let ut,vt;d_($e);try{const Mt=this.componentDef;let Jt,Xe=null;Mt.findHostDirectiveDefs?(Jt=[],Xe=new Map,Mt.findHostDirectiveDefs(Mt,Jt,Xe),Jt.push(Mt)):Jt=[Mt];const ln=function Sk(o,a){const l=o[1];return o[22]=a,id(l,22,2,"#host",null)}($e,Z),Kr=function Tw(o,a,l,h,g,_,b,T){const N=g[1];!function gy(o,a,l,h){for(const g of o)a.mergedAttrs=xc(a.mergedAttrs,g.hostAttrs);null!==a.mergedAttrs&&(Vl(a,a.mergedAttrs,!0),null!==l&&$E(h,l,a))}(h,o,a,b);const R=_.createRenderer(a,l),F=ig(g,ES(l),null,l.onPush?32:16,g[o.index],o,_,R,T||null,null,null);return N.firstCreatePass&&Vh(N,o,h.length-1),Fl(g,F),g[o.index]=F}(ln,Z,Mt,Jt,$e,T,R);vt=un(we,22),Z&&function xk(o,a,l,h){if(h)Jd(o,l,["ng-version",KT.full]);else{const{attrs:g,classes:_}=function sw(o){const a=[],l=[];let h=1,g=2;for(;h<o.length;){let _=o[h];if("string"==typeof _)2===g?""!==_&&a.push(_,o[++h]):8===g&&l.push(_);else{if(!Uo(g))break;g=_}h++}return{attrs:a,classes:l}}(a.selectors[0]);g&&Jd(o,l,g),_&&_.length>0&&yT(o,l,_.join(" "))}}(R,Mt,Z,h),void 0!==l&&function xS(o,a,l){const h=o.projection=[];for(let g=0;g<a.length;g++){const _=l[g];h.push(null!=_?Array.from(_):null)}}(vt,this.ngContentSelectors,l),ut=function Ak(o,a,l,h,g,_){const b=Zi(),T=g[1],N=rr(b,g);Uu(T,g,b,l,null,h);for(let F=0;F<l.length;F++)S(Il(g,T,b.directiveStart+F,b),g);sg(T,g,b),N&&S(N,g);const R=Il(g,T,b.directiveStart+b.componentOffset,b);if(o[8]=g[8]=R,null!==_)for(const F of _)F(R,a);return ry(T,b,o),R}(Kr,Mt,Jt,Xe,$e,[Nk]),ny(we,$e,null)}finally{Yd()}return new py(this.componentType,ut,Jc(vt,$e),$e,vt)}}class py extends zR{constructor(a,l,h,g,_){super(),this.location=h,this._rootLView=g,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new AS(g),this.componentType=a}setInput(a,l){const h=this._tNode.inputs;let g;if(null!==h&&(g=h[a])){const _=this._rootLView;cy(_[1],_,g,a,l),yw(_,this._tNode.index)}}get injector(){return new Cl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Nk(){const o=Zi();Qd(Ze()[1],o)}function Aw(o){let a=function Sw(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const h=[o];for(;a;){let g;if(Li(o))g=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new X(903,!1);g=a.\u0275dir}if(g){if(l){h.push(g);const b=o;b.inputs=xw(o.inputs),b.declaredInputs=xw(o.declaredInputs),b.outputs=xw(o.outputs);const T=g.hostBindings;T&&ZB(o,T);const N=g.viewQuery,R=g.contentQueries;if(N&&Nw(o,N),R&&KB(o,R),Me(o.inputs,g.inputs),Me(o.declaredInputs,g.declaredInputs),Me(o.outputs,g.outputs),Li(g)&&g.data.animation){const F=o.data;F.animation=(F.animation||[]).concat(g.data.animation)}}const _=g.features;if(_)for(let b=0;b<_.length;b++){const T=_[b];T&&T.ngInherit&&T(o),T===Aw&&(l=!1)}}a=Object.getPrototypeOf(a)}!function qB(o){let a=0,l=null;for(let h=o.length-1;h>=0;h--){const g=o[h];g.hostVars=a+=g.hostVars,g.hostAttrs=xc(g.hostAttrs,l=xc(l,g.hostAttrs))}}(h)}function xw(o){return o===Qe?{}:o===qe?[]:o}function Nw(o,a){const l=o.viewQuery;o.viewQuery=l?(h,g)=>{a(h,g),l(h,g)}:a}function KB(o,a){const l=o.contentQueries;o.contentQueries=l?(h,g,_)=>{a(h,g,_),l(h,g,_)}:a}function ZB(o,a){const l=o.hostBindings;o.hostBindings=l?(h,g)=>{a(h,g),l(h,g)}:a}let lg=null;function Ul(){if(!lg){const o=En.Symbol;if(o&&o.iterator)lg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const h=a[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(lg=h)}}}return lg}function _y(o){return!!kS(o)&&(Array.isArray(o)||!(o instanceof Map)&&Ul()in o)}function kS(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Hu(o,a,l){return o[a]=l}function Es(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Bl(o,a,l,h){const g=Es(o,a,l);return Es(o,a+1,h)||g}function dg(o,a,l,h){const g=Ze();return Es(g,Oo(),a)&&(Rn(),Bu(pr(),g,o,a,l,h)),dg}function Bh(o,a,l,h){return Es(o,Oo(),l)?a+Se(l)+h:pn}function ud(o,a,l,h,g,_){const T=Bl(o,function Zs(){return Kt.lFrame.bindingIndex}(),l,g);return ra(2),T?a+Se(l)+h+Se(g)+_:pn}function fg(o,a,l,h,g,_,b,T){const N=Ze(),R=ud(N,a,l,h,g,_);return R!==pn&&Bu(pr(),N,o,R,b,T),fg}function US(o,a,l,h,g,_,b,T){const N=Ze(),R=Rn(),F=o+22,Z=R.firstCreatePass?function VS(o,a,l,h,g,_,b,T,N){const R=a.consts,F=id(a,o,4,b||null,uo(R,T));us(a,l,F,uo(R,N)),Qd(a,F);const Z=F.tViews=oy(2,F,h,g,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,F),Z.queries=a.queries.embeddedTView(F)),F}(F,R,N,a,l,h,g,_,b):R.data[F];Ks(Z,!1);const oe=N[11].createComment("");U_(R,N,oe,Z),S(oe,N),Fl(N,N[F]=bk(oe,N,oe,Z)),Oa(Z)&&iy(R,N,Z),null!=b&&sy(N,Z,T)}function Iy(o,a,l){const h=Ze();return Es(h,Oo(),a)&&vs(Rn(),pr(),h,o,a,h[11],l,!1),Iy}function Ow(o,a,l,h,g){const b=g?"class":"style";cy(o,l,a.inputs[b],b,h)}function gg(o,a,l,h){const g=Ze(),_=Rn(),b=22+o,T=g[11],N=g[b]=cT(T,a,function f_(){return Kt.lFrame.currentNamespace}()),R=_.firstCreatePass?function Cy(o,a,l,h,g,_,b){const T=a.consts,R=id(a,o,2,g,uo(T,_));return us(a,l,R,uo(T,b)),null!==R.attrs&&Vl(R,R.attrs,!1),null!==R.mergedAttrs&&Vl(R,R.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,R),R}(b,_,g,0,a,l,h):_.data[b];return Ks(R,!0),$E(T,N,R),32!=(32&R.flags)&&U_(_,g,N,R),0===function hi(){return Kt.lFrame.elementDepthCount}()&&S(N,g),function GD(){Kt.lFrame.elementDepthCount++}(),Oa(R)&&(iy(_,g,R),ry(_,R,g)),null!==h&&sy(g,R),gg}function Dy(){let o=Zi();Cc()?na():(o=o.parent,Ks(o,!1));const a=o;!function a_(){Kt.lFrame.elementDepthCount--}();const l=Rn();return l.firstCreatePass&&(Qd(l,o),Mo(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function m_(o){return 0!=(8&o.flags)}(a)&&Ow(l,a,Ze(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Dp(o){return 0!=(16&o.flags)}(a)&&Ow(l,a,Ze(),a.stylesWithoutHost,!1),Dy}function Ty(o,a,l,h){return gg(o,a,l,h),Dy(),Ty}function Pw(o,a,l){const h=Ze(),g=Rn(),_=o+22,b=g.firstCreatePass?function Lk(o,a,l,h,g){const _=a.consts,b=uo(_,h),T=id(a,o,8,"ng-container",b);return null!==b&&Vl(T,b,!0),us(a,l,T,uo(_,g)),null!==a.queries&&a.queries.elementStart(a,T),T}(_,g,h,a,l):g.data[_];Ks(b,!0);const T=h[_]=h[11].createComment("");return U_(g,h,T,b),S(T,h),Oa(b)&&(iy(g,h,b),ry(g,b,h)),null!=l&&sy(h,b),Pw}function Wh(){let o=Zi();const a=Rn();return Cc()?na():(o=o.parent,Ks(o,!1)),a.firstCreatePass&&(Qd(a,o),Mo(o)&&a.queries.elementEnd(o)),Wh}function Fw(){return Ze()}function Sy(o){return!!o&&"function"==typeof o.then}function jl(o){return!!o&&"function"==typeof o.subscribe}const BS=jl;function Ay(o,a,l,h){const g=Ze(),_=Rn(),b=Zi();return function HS(o,a,l,h,g,_,b){const T=Oa(h),R=o.firstCreatePass&&SS(o),F=a[8],Z=ly(a);let oe=!0;if(3&h.type||b){const ut=rr(h,a),vt=b?b(ut):ut,Mt=Z.length,Jt=b?ln=>b(it(ln[h.index])):h.index;let Xe=null;if(!b&&T&&(Xe=function $S(o,a,l,h){const g=o.cleanup;if(null!=g)for(let _=0;_<g.length-1;_+=2){const b=g[_];if(b===l&&g[_+1]===h){const T=a[7],N=g[_+2];return T.length>N?T[N]:null}"string"==typeof b&&(_+=2)}return null}(o,a,g,h.index)),null!==Xe)(Xe.__ngLastListenerFn__||Xe).__ngNextListenerFn__=_,Xe.__ngLastListenerFn__=_,oe=!1;else{_=zh(h,a,F,_,!1);const ln=l.listen(vt,g,_);Z.push(_,ln),R&&R.push(g,Jt,Mt,Mt+1)}}else _=zh(h,a,F,_,!1);const we=h.outputs;let $e;if(oe&&null!==we&&($e=we[g])){const ut=$e.length;if(ut)for(let vt=0;vt<ut;vt+=2){const Kr=a[$e[vt]][$e[vt+1]].subscribe(_),pi=Z.length;Z.push(_,Kr),R&&R.push(g,h.index,pi,-(pi+1))}}}(_,g,g[11],b,o,a,h),Ay}function GS(o,a,l,h){try{return!1!==l(h)}catch(g){return Iw(o,g),!1}}function zh(o,a,l,h,g){return function _(b){if(b===Function)return h;Uh(o.componentOffset>-1?Ei(o.index,a):a);let N=GS(a,0,h,b),R=_.__ngNextListenerFn__;for(;R;)N=GS(a,0,R,b)&&N,R=R.__ngNextListenerFn__;return g&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function Vw(o=1){return function QD(o){return(Kt.lFrame.contextLView=function JD(o,a){for(;o>0;)a=a[15],o--;return a}(o,Kt.lFrame.contextLView))[8]}(o)}function xy(o,a,l){return Ny(o,"",a,"",l),xy}function Ny(o,a,l,h,g){const _=Ze(),b=Bh(_,a,l,h);return b!==pn&&vs(Rn(),pr(),_,o,b,_[11],g,!1),Ny}function mg(o,a){return o<<17|a<<2}function Gu(o){return o>>17&32767}function My(o){return 2|o}function $l(o){return(131068&o)>>2}function KS(o,a){return-131069&o|a<<2}function ZS(o){return 1|o}function YS(o,a,l,h,g){const _=o[l+1],b=null===a;let T=h?Gu(_):$l(_),N=!1;for(;0!==T&&(!1===N||b);){const F=o[T+1];QS(o[T],a)&&(N=!0,o[T+1]=h?ZS(F):My(F)),T=h?Gu(F):$l(F)}N&&(o[l+1]=h?My(_):ZS(_))}function QS(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ba(o,a)>=0}function XS(o,a){return function qa(o,a,l,h){const g=Ze(),_=Rn(),b=ra(2);_.firstUpdatePass&&function Oe(o,a,l,h){const g=o.data;if(null===g[l+1]){const _=g[ms()],b=function qk(o,a){return a>=o.expandoStartIndex}(o,l);(function eA(o,a){return 0!=(o.flags&(a?8:16))})(_,h)&&null===a&&!b&&(a=!1),a=function da(o,a,l,h){const g=function fE(o){const a=Kt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let _=h?a.residualClasses:a.residualStyles;if(null===g)0===(h?a.classBindings:a.styleBindings)&&(l=Zh(l=_g(null,o,a,l,h),a.attrs,h),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==g)if(l=_g(g,o,a,l,h),null===_){let N=function qu(o,a,l){const h=l?a.classBindings:a.styleBindings;if(0!==$l(h))return o[Gu(h)]}(o,a,h);void 0!==N&&Array.isArray(N)&&(N=_g(null,o,a,N[1],h),N=Zh(N,a.attrs,h),function K(o,a,l,h){o[Gu(l?a.classBindings:a.styleBindings)]=h}(o,a,h,N))}else _=function ha(o,a,l){let h;const g=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<g;_++)h=Zh(h,o[_].hostAttrs,l);return Zh(h,a.attrs,l)}(o,a,h)}return void 0!==_&&(h?a.residualClasses=_:a.residualStyles=_),l}(g,_,a,h),function dd(o,a,l,h,g,_){let b=_?a.classBindings:a.styleBindings,T=Gu(b),N=$l(b);o[h]=l;let F,R=!1;if(Array.isArray(l)){const Z=l;F=Z[1],(null===F||Ba(Z,F)>0)&&(R=!0)}else F=l;if(g)if(0!==N){const oe=Gu(o[T+1]);o[h+1]=mg(oe,T),0!==oe&&(o[oe+1]=KS(o[oe+1],h)),o[T+1]=function JB(o,a){return 131071&o|a<<17}(o[T+1],h)}else o[h+1]=mg(T,0),0!==T&&(o[T+1]=KS(o[T+1],h)),T=h;else o[h+1]=mg(N,0),0===T?T=h:o[N+1]=KS(o[N+1],h),N=h;R&&(o[h+1]=My(o[h+1])),YS(o,F,h,!0),YS(o,F,h,!1),function Hk(o,a,l,h,g){const _=g?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&Ba(_,a)>=0&&(l[h+1]=ZS(l[h+1]))}(a,F,o,h,_),b=mg(T,N),_?a.classBindings=b:a.styleBindings=b}(g,_,a,l,b,h)}}(_,o,b,h),a!==pn&&Es(g,b,a)&&function yg(o,a,l,h,g,_,b,T){if(!(3&a.type))return;const N=o.data,R=N[T+1],F=function XB(o){return 1==(1&o)}(R)?ky(N,a,l,g,$l(R),b):void 0;Oy(F)||(Oy(_)||function QB(o){return 2==(2&o)}(R)&&(_=ky(N,null,l,g,T,b)),function mT(o,a,l,h,g){if(a)g?o.addClass(l,h):o.removeClass(l,h);else{let _=-1===h.indexOf("-")?void 0:yr.DashCase;null==g?o.removeStyle(l,h,_):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),_|=yr.Important),o.setStyle(l,h,g,_))}}(h,b,_r(ms(),l),g,_))}(_,_.data[ms()],g,g[11],o,g[b+1]=function Yk(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=be(Fu(o)))),o}(a,l),h,b)}(o,a,null,!0),XS}function _g(o,a,l,h,g){let _=null;const b=l.directiveEnd;let T=l.directiveStylingLast;for(-1===T?T=l.directiveStart:T++;T<b&&(_=a[T],h=Zh(h,_.hostAttrs,g),_!==o);)T++;return null!==o&&(l.directiveStylingLast=T),h}function Zh(o,a,l){const h=l?1:2;let g=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?g=b:g===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),_s(o,b,!!l||a[++_]))}return void 0===o?null:o}function ky(o,a,l,h,g,_){const b=null===a;let T;for(;g>0;){const N=o[g],R=Array.isArray(N),F=R?N[1]:N,Z=null===F;let oe=l[g+1];oe===pn&&(oe=Z?qe:void 0);let we=Z?lh(oe,h):F===h?oe:void 0;if(R&&!Oy(we)&&(we=lh(N,h)),Oy(we)&&(T=we,b))return T;const $e=o[g+1];g=b?Gu($e):$l($e)}if(null!==a){let N=_?a.residualClasses:a.residualStyles;null!=N&&(T=lh(N,h))}return T}function Oy(o){return void 0!==o}function zw(o,a=""){const l=Ze(),h=Rn(),g=o+22,_=h.firstCreatePass?id(h,g,1,a,null):h.data[g],b=l[g]=function RE(o,a){return o.createText(a)}(l[11],a);U_(h,l,b,_),Ks(_,!1)}function qw(o){return Py("",o,""),qw}function Py(o,a,l){const h=Ze(),g=Bh(h,o,a,l);return g!==pn&&Bo(h,ms(),g),Py}function Kw(o,a,l,h,g){const _=Ze(),b=ud(_,o,a,l,h,g);return b!==pn&&Bo(_,ms(),b),Kw}const hd=void 0;var Hy=["en",[["a","p"],["AM","PM"],hd],[["AM","PM"],hd,hd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hd,"{1} 'at' {0}",hd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oO(o){const l=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let Hl={};function bg(o){const a=function uO(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=nb(a);if(l)return l;const h=a.split("-")[0];if(l=nb(h),l)return l;if("en"===h)return Hy;throw new X(701,!1)}function cA(o){return bg(o)[Yt.PluralCase]}function nb(o){return o in Hl||(Hl[o]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[o]),Hl[o]}var Yt=(()=>((Yt=Yt||{})[Yt.LocaleId=0]="LocaleId",Yt[Yt.DayPeriodsFormat=1]="DayPeriodsFormat",Yt[Yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Yt[Yt.DaysFormat=3]="DaysFormat",Yt[Yt.DaysStandalone=4]="DaysStandalone",Yt[Yt.MonthsFormat=5]="MonthsFormat",Yt[Yt.MonthsStandalone=6]="MonthsStandalone",Yt[Yt.Eras=7]="Eras",Yt[Yt.FirstDayOfWeek=8]="FirstDayOfWeek",Yt[Yt.WeekendRange=9]="WeekendRange",Yt[Yt.DateFormat=10]="DateFormat",Yt[Yt.TimeFormat=11]="TimeFormat",Yt[Yt.DateTimeFormat=12]="DateTimeFormat",Yt[Yt.NumberSymbols=13]="NumberSymbols",Yt[Yt.NumberFormats=14]="NumberFormats",Yt[Yt.CurrencyCode=15]="CurrencyCode",Yt[Yt.CurrencySymbol=16]="CurrencySymbol",Yt[Yt.CurrencyName=17]="CurrencyName",Yt[Yt.Currencies=18]="Currencies",Yt[Yt.Directionality=19]="Directionality",Yt[Yt.PluralCase=20]="PluralCase",Yt[Yt.ExtraData=21]="ExtraData",Yt))();const Qh="en-US";let Cg=Qh;function mb(o,a,l,h,g){if(o=ce(o),Array.isArray(o))for(let _=0;_<o.length;_++)mb(o[_],a,l,h,g);else{const _=Rn(),b=Ze();let T=Yc(o)?o:ce(o.provide),N=BT(o);const R=Zi(),F=1048575&R.providerIndexes,Z=R.directiveStart,oe=R.providerIndexes>>20;if(Yc(o)||!o.multi){const we=new Ms(N,g,co),$e=xg(T,a,g?F:F+oe,Z);-1===$e?(Ap(Tp(R,b),_,T),_b(_,o,a.length),a.push(T),R.directiveStart++,R.directiveEnd++,g&&(R.providerIndexes+=1048576),l.push(we),b.push(we)):(l[$e]=we,b[$e]=we)}else{const we=xg(T,a,F+oe,Z),$e=xg(T,a,F,F+oe),ut=we>=0&&l[we],vt=$e>=0&&l[$e];if(g&&!vt||!g&&!ut){Ap(Tp(R,b),_,T);const Mt=function g3(o,a,l,h,g){const _=new Ms(o,l,co);return _.multi=[],_.index=a,_.componentProviders=0,UO(_,g,h&&!l),_}(g?jO:BO,l.length,g,h,N);!g&&vt&&(l[$e].providerFactory=Mt),_b(_,o,a.length,0),a.push(T),R.directiveStart++,R.directiveEnd++,g&&(R.providerIndexes+=1048576),l.push(Mt),b.push(Mt)}else _b(_,o,we>-1?we:$e,UO(l[g?$e:we],N,!g&&h));!g&&h&&vt&&l[$e].componentProviders++}}}function _b(o,a,l,h){const g=Yc(a),_=function jR(o){return!!o.useClass}(a);if(g||_){const N=(_?ce(a.useClass):a).prototype.ngOnDestroy;if(N){const R=o.destroyHooks||(o.destroyHooks=[]);if(!g&&a.multi){const F=R.indexOf(l);-1===F?R.push(l,[h,N]):R[F+1].push(h,N)}else R.push(l,N)}}}function UO(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function xg(o,a,l,h){for(let g=l;g<h;g++)if(a[g]===o)return g;return-1}function BO(o,a,l,h){return SA(this.multi,[])}function jO(o,a,l,h){const g=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=Il(l,l[1],this.providerFactory.index,h);_=T.slice(0,b),SA(g,_);for(let N=b;N<T.length;N++)_.push(T[N])}else _=[],SA(g,_);return _}function SA(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function AA(o,a=[]){return l=>{l.providersResolver=(h,g)=>function gb(o,a,l){const h=Rn();if(h.firstCreatePass){const g=Li(o);mb(l,h.data,h.blueprint,g,!0),mb(a,h.data,h.blueprint,g,!1)}}(h,g?g(o):o,a)}}class Ng{}class xA{}function $O(o,a){return new NA(o,a??null)}class NA extends Ng{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tk(this);const h=hr(a);this._bootstrapComponents=Vu(h.bootstrap),this._r3Injector=uS(a,l,[{provide:Ng,useValue:this},{provide:eg,useValue:this.componentFactoryResolver}],be(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class yb extends xA{constructor(a){super(),this.moduleType=a}create(a){return new NA(this.moduleType,a)}}class HO extends Ng{constructor(a,l,h){super(),this.componentFactoryResolver=new Tk(this),this.instance=null;const g=new Mh([...a,{provide:Ng,useValue:this},{provide:eg,useValue:this.componentFactoryResolver}],l||Qc(),h,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function vb(o,a,l=null){return new HO(o,a,l).injector}let GO=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=PT(0,l.type),g=h.length>0?vb([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,g)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=kt({token:o,providedIn:"environment",factory:()=>new o(Je(Pl))}),o})();function MA(o){o.getStandaloneInjector=a=>a.get(GO).getOrCreateStandaloneInjector(o)}function Yy(o,a,l){const h=Yi()+o,g=Ze();return g[h]===pn?Hu(g,h,l?a.call(l):a()):function yy(o,a){return o[a]}(g,h)}function FA(o,a,l,h,g){return Db(Ze(),Yi(),o,a,l,h,g)}function Ku(o,a){const l=o[a];return l===pn?void 0:l}function Db(o,a,l,h,g,_,b){const T=a+l;return Bl(o,T,g,_)?Hu(o,T+2,b?h.call(b,g,_):h(g,_)):Ku(o,T+2)}function Qy(o,a){const l=Rn();let h;const g=o+22;l.firstCreatePass?(h=function Za(o,a){if(a)for(let l=a.length-1;l>=0;l--){const h=a[l];if(o===h.name)return h}}(a,l.pipeRegistry),l.data[g]=h,h.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(g,h.onDestroy)):h=l.data[g];const _=h.factory||(h.factory=Xo(h.type)),b=Zn(co);try{const T=th(!1),N=_();return th(T),function by(o,a,l,h){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=h}(l,Ze(),g,N),N}finally{Zn(b)}}function jA(o,a,l){const h=o+22,g=Ze(),_=Fi(g,h);return fa(g,h)?function Gl(o,a,l,h,g,_){const b=a+l;return Es(o,b,g)?Hu(o,b+1,_?h.call(_,g):h(g)):Ku(o,b+1)}(g,Yi(),a,_.transform,l,_):_.transform(l)}function Rg(o,a,l,h){const g=o+22,_=Ze(),b=Fi(_,g);return fa(_,g)?Db(_,Yi(),a,b.transform,l,h,b):b.transform(l,h)}function fa(o,a){return o[1].data[a].pure}function md(o){return a=>{setTimeout(o,void 0,a)}}const jo=class QO extends O.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,h){let g=a,_=l||(()=>null),b=h;if(a&&"object"==typeof a){const N=a;g=N.next?.bind(N),_=N.error?.bind(N),b=N.complete?.bind(N)}this.__isAsync&&(_=md(_),g&&(g=md(g)),b&&(b=md(b)));const T=super.subscribe({next:g,error:_,complete:b});return a instanceof f.w0&&a.add(T),T}};function $A(){return this._results[Ul()]()}class Ci{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ul(),h=Ci.prototype;h[l]||(h[l]=$A)}get changes(){return this._changes||(this._changes=new jo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const h=this;h.dirty=!1;const g=Ys(a);(this._changesDetected=!function kp(o,a,l){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let g=o[h],_=a[h];if(l&&(g=l(g),_=l(_)),_!==g)return!1}return!0}(h._results,g,l))&&(h._results=g,h.length=g.length,h.last=g[this.length-1],h.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let sf=(()=>{class o{}return o.__NG_ELEMENT_ID__=eP,o})();const JO=sf,XO=class extends JO{constructor(a,l,h){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(a,l){const h=this._declarationTContainer.tViews,g=ig(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,l||null);g[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(g[19]=b.createEmbeddedView(h)),ny(h,g,a),new dy(g)}};function eP(){return Jy(Zi(),Ze())}function Jy(o,a){return 4&o.type?new XO(a,o,Jc(o,a)):null}let kg=(()=>{class o{}return o.__NG_ELEMENT_ID__=Sb,o})();function Sb(){return GA(Zi(),Ze())}const Xy=kg,_d=class extends Xy{constructor(a,l,h){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=h}get element(){return Jc(this._hostTNode,this._hostLView)}get injector(){return new Cl(this._hostTNode,this._hostLView)}get parentInjector(){const a=ih(this._hostTNode,this._hostLView);if(Tu(a)){const l=wl(a,this._hostLView),h=Xd(a);return new Cl(l[1].data[h+8],l)}return new Cl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=HA(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,h){let g,_;"number"==typeof h?g=h:null!=h&&(g=h.index,_=h.injector);const b=a.createEmbeddedView(l||{},_);return this.insert(b,g),b}createComponent(a,l,h,g,_){const b=a&&!function Sl(o){return"function"==typeof o}(a);let T;if(b)T=l;else{const Z=l||{};T=Z.index,h=Z.injector,g=Z.projectableNodes,_=Z.environmentInjector||Z.ngModuleRef}const N=b?a:new $u(Pt(a)),R=h||this.parentInjector;if(!_&&null==N.ngModule){const oe=(b?R:this.parentInjector).get(Pl,null);oe&&(_=oe)}const F=N.create(R,g,void 0,_);return this.insert(F.hostView,T),F}insert(a,l){const h=a._lView,g=h[1];if(function ea(o){return gs(o[3])}(h)){const F=this.indexOf(a);if(-1!==F)this.detach(F);else{const Z=h[3],oe=new _d(Z,Z[6],Z[3]);oe.detach(oe.indexOf(a))}}const _=this._adjustIndex(l),b=this._lContainer;!function Hp(o,a,l,h){const g=10+h,_=l.length;h>0&&(l[g-1][4]=a),h<_-10?(a[4]=l[g],Po(l,10+h,a)):(l.push(a),a[4]=null),a[3]=l;const b=a[17];null!==b&&l!==b&&function Eh(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(b,a);const T=a[19];null!==T&&T.insertView(o),a[2]|=64}(g,h,b,_);const T=UE(_,b),N=h[11],R=Gp(N,b[7]);return null!==R&&function ER(o,a,l,h,g,_){h[0]=g,h[6]=a,Wp(o,h,l,1,g,_)}(g,b[6],N,h,R,T),a.attachToViewContainerRef(),Po(yd(b),_,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=HA(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),h=F_(this._lContainer,l);h&&(St(yd(this._lContainer),l),PE(h[1],h))}detach(a){const l=this._adjustIndex(a,-1),h=F_(this._lContainer,l);return h&&null!=St(yd(this._lContainer),l)?new dy(h):null}_adjustIndex(a,l=0){return a??this.length+l}};function HA(o){return o[8]}function yd(o){return o[8]||(o[8]=[])}function GA(o,a){let l;const h=a[o.index];if(gs(h))l=h;else{let g;if(8&o.type)g=it(h);else{const _=a[11];g=_.createComment("");const b=rr(o,a);Pu(_,Gp(_,b),g,function fT(o,a){return o.nextSibling(a)}(_,b),!1)}a[o.index]=l=bk(h,a,g,o),Fl(a,l)}return new _d(l,o,a)}class ev{constructor(a){this.queryList=a,this.matches=null}clone(){return new ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class tv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const h=null!==a.contentQueries?a.contentQueries[0]:l.length,g=[];for(let _=0;_<h;_++){const b=l.getByIndex(_);g.push(this.queries[b.indexInDeclarationView].clone())}return new tv(g)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Ob(a,l).matches&&this.queries[l].setDirty()}}class xb{constructor(a,l,h=null){this.predicate=a,this.flags=l,this.read=h}}class nv{constructor(a=[]){this.queries=a}elementStart(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let h=0;h<this.length;h++){const g=null!==l?l.length:0,_=this.getByIndex(h).embeddedTView(a,g);_&&(_.indexInDeclarationView=h,null!==l?l.push(_):l=[_])}return null!==l?new nv(l):null}template(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class rv{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new rv(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let g=0;g<h.length;g++){const _=h[g];this.matchTNodeWithReadOption(a,l,WA(l,_)),this.matchTNodeWithReadOption(a,l,Mc(l,a,_,!1,!1))}else h===sf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Mc(l,a,h,!1,!1))}matchTNodeWithReadOption(a,l,h){if(null!==h){const g=this.metadata.read;if(null!==g)if(g===X_||g===kg||g===sf&&4&l.type)this.addMatch(l.index,-2);else{const _=Mc(l,a,g,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,h)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function WA(o,a){const l=o.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===a)return l[h+1];return null}function Nb(o,a,l,h){return-1===l?function zA(o,a){return 11&o.type?Jc(o,a):4&o.type?Jy(o,a):null}(a,o):-2===l?function qA(o,a,l){return l===X_?Jc(a,o):l===sf?Jy(a,o):l===kg?GA(a,o):void 0}(o,a,h):Il(o,o[1],l,a)}function Mb(o,a,l,h){const g=a[19].queries[h];if(null===g.matches){const _=o.data,b=l.matches,T=[];for(let N=0;N<b.length;N+=2){const R=b[N];T.push(R<0?null:Nb(a,_[R],b[N+1],l.metadata.read))}g.matches=T}return g.matches}function Pg(o,a,l,h){const g=o.queries.getByIndex(l),_=g.matches;if(null!==_){const b=Mb(o,a,g,l);for(let T=0;T<_.length;T+=2){const N=_[T];if(N>0)h.push(b[T/2]);else{const R=_[T+1],F=a[-N];for(let Z=10;Z<F.length;Z++){const oe=F[Z];oe[17]===oe[3]&&Pg(oe[1],oe,R,h)}if(null!==F[9]){const Z=F[9];for(let oe=0;oe<Z.length;oe++){const we=Z[oe];Pg(we[1],we,R,h)}}}}}return h}function KA(o){const a=Ze(),l=Rn(),h=pE();bp(h+1);const g=Ob(l,h);if(o.dirty&&function Pa(o){return 4==(4&o[2])}(a)===(2==(2&g.metadata.flags))){if(null===g.matches)o.reset([]);else{const _=g.crossesNgTemplate?Pg(l,a,h,[]):Mb(l,a,g,h);o.reset(_,zT),o.notifyOnChanges()}return!0}return!1}function Rb(o,a,l){const h=Rn();h.firstCreatePass&&(YA(h,new xb(o,a,l),-1),2==(2&a)&&(h.staticViewQueries=!0)),sv(h,Ze(),a)}function ZA(o,a,l,h){const g=Rn();if(g.firstCreatePass){const _=Zi();YA(g,new xb(a,l,h),_.index),function nP(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(g,o),2==(2&l)&&(g.staticContentQueries=!0)}sv(g,Ze(),l)}function iv(){return function kb(o,a){return o[19].queries[a].queryList}(Ze(),pE())}function sv(o,a,l){const h=new Ci(4==(4&l));fw(o,a,h,h.destroy),null===a[19]&&(a[19]=new tv),a[19].queries.push(new ev(h))}function YA(o,a,l){null===o.queries&&(o.queries=new nv),o.queries.track(new rv(a,l))}function Ob(o,a){return o.queries.getByIndex(a)}function Bg(...o){}const uv=new ur("Application Initializer");let ql=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Bg,this.reject=Bg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,g)=>{this.resolve=h,this.reject=g})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const _=this.appInits[g]();if(Sy(_))l.push(_);else if(BS(_)){const b=new Promise((T,N)=>{_.subscribe({complete:T,error:N})});l.push(b)}}Promise.all(l).then(()=>{h()}).catch(g=>{this.reject(g)}),0===l.length&&h(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Je(uv,8))},o.\u0275prov=kt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const m1=new ur("AppId",{providedIn:"root",factory:function Bb(){return`${jb()}${jb()}${jb()}`}});function jb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _1=new ur("Platform Initializer"),y1=new ur("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kl=new ur("appBootstrapListener");let lv=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=kt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const fo=new ur("LocaleId",{providedIn:"root",factory:()=>gt(fo,It.Optional|It.SkipSelf)||function v1(){return typeof $localize<"u"&&$localize.locale||Qh}()}),cv=new ur("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class gP{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Hb=(()=>{class o{compileModuleSync(l){return new yb(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),_=Vu(hr(l).declarations).reduce((b,T)=>{const N=Pt(T);return N&&b.push(new $u(N)),b},[]);return new gP(h,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=kt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const w1=(()=>Promise.resolve(0))();function qb(o){typeof Zone>"u"?w1.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Un{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jo(!1),this.onMicrotaskEmpty=new jo(!1),this.onStable=new jo(!1),this.onError=new jo(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!h&&l,g.shouldCoalesceRunChangeDetection=h,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function mP(){let o=En.requestAnimationFrame,a=En.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Zb(o){const a=()=>{!function dv(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(En,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Zl(o),o.isCheckStableRunning=!0,Kb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Zl(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,g,_,b,T)=>{try{return Ja(o),l.invokeTask(g,_,b,T)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),cf(o)}},onInvoke:(l,h,g,_,b,T,N)=>{try{return Ja(o),l.invoke(g,_,b,T,N)}finally{o.shouldCoalesceRunChangeDetection&&a(),cf(o)}},onHasTask:(l,h,g,_)=>{l.hasTask(g,_),h===g&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,Zl(o),Kb(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,h,g,_)=>(l.handleError(g,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Un.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(Un.isInAngularZone())throw new X(909,!1)}run(a,l,h){return this._inner.run(a,l,h)}runTask(a,l,h,g){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+g,a,_P,Bg,Bg);try{return _.runTask(b,l,h)}finally{_.cancelTask(b)}}runGuarded(a,l,h){return this._inner.runGuarded(a,l,h)}runOutsideAngular(a){return this._outer.run(a)}}const _P={};function Kb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Zl(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Ja(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function cf(o){o._nesting--,Kb(o)}class mn{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jo,this.onMicrotaskEmpty=new jo,this.onStable=new jo,this.onError=new jo}run(a,l,h){return a.apply(l,h)}runGuarded(a,l,h){return a.apply(l,h)}runOutsideAngular(a){return a()}runTask(a,l,h,g){return a.apply(l,h)}}const b1=new ur(""),df=new ur("");let Qb,yP=(()=>{class o{constructor(l,h,g){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qb||(function Yb(o){Qb=o}(g),g.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Un.assertNotInAngularZone(),qb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qb(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,g){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:g})}whenStable(l,h,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,g){return[]}}return o.\u0275fac=function(l){return new(l||o)(Je(Un),Je(qr),Je(df))},o.\u0275prov=kt({token:o,factory:o.\u0275fac}),o})(),qr=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return Qb?.findTestabilityInTree(this,l,h)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=kt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Xa=null;const Ed=new ur("AllowMultipleToken"),$g=new ur("PlatformDestroyListeners");class D1{constructor(a,l){this.name=a,this.token=l}}function S1(o,a,l=[]){const h=`Platform: ${a}`,g=new ur(h);return(_=[])=>{let b=gf();if(!b||b.injector.get(Ed,!1)){const T=[...l,..._,{provide:g,useValue:!0}];o?o(T):function T1(o){if(Xa&&!Xa.get(Ed,!1))throw new X(400,!1);Xa=o;const a=o.get(A1);(function ff(o){const a=o.get(_1,null);a&&a.forEach(l=>l())})(o)}(function pf(o=[],a){return nd.create({name:a,providers:[{provide:xh,useValue:"platform"},{provide:$g,useValue:new Set([()=>Xa=null])},...o]})}(T,h))}return function Jb(o){const a=gf();if(!a)throw new X(401,!1);return a}()}}function gf(){return Xa?.get(A1)??null}let A1=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const g=function N1(o,a){let l;return l="noop"===o?new mn:("zone.js"===o?void 0:o)||new Un(a),l}(h?.ngZone,function x1(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),_=[{provide:Un,useValue:g}];return g.run(()=>{const b=nd.create({providers:_,parent:this.injector,name:l.moduleType.name}),T=l.create(b),N=T.injector.get(kh,null);if(!N)throw new X(402,!1);return g.runOutsideAngular(()=>{const R=g.onError.subscribe({next:F=>{N.handleError(F)}});T.onDestroy(()=>{pv(this._modules,T),R.unsubscribe()})}),function fv(o,a,l){try{const h=l();return Sy(h)?h.catch(g=>{throw a.runOutsideAngular(()=>o.handleError(g)),g}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(N,g,()=>{const R=T.injector.get(ql);return R.runInitializers(),R.donePromise.then(()=>(function rb(o){Xt(o,"Expected localeId to be defined"),"string"==typeof o&&(Cg=o.toLowerCase().replace(/_/g,"-"))}(T.injector.get(fo,Qh)||Qh),this._moduleDoBootstrap(T),T))})})}bootstrapModule(l,h=[]){const g=M1({},h);return function I1(o,a,l){const h=new yb(l);return Promise.resolve(h)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,g))}_moduleDoBootstrap(l){const h=l.injector.get(mf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>h.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new X(403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get($g,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Je(nd))},o.\u0275prov=kt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function M1(o,a){return Array.isArray(a)?a.reduce(M1,o):{...o,...a}}let mf=(()=>{class o{constructor(l,h,g){this._zone=l,this._injector=h,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new G.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new G.y(T=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Un.assertNotInAngularZone(),qb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Un.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{N.unsubscribe(),R.unsubscribe()}});this.isStable=(0,he.T)(_,b.pipe((0,De.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const g=l instanceof $T;if(!this._injector.get(ql).done)throw!g&&_i(l),new X(405,false);let b;b=g?l:this._injector.get(eg).resolveComponentFactory(l),this.componentTypes.push(b.componentType);const T=function C1(o){return o.isBoundToModule}(b)?void 0:this._injector.get(Ng),R=b.create(nd.NULL,[],h||b.selector,T),F=R.location.nativeElement,Z=R.injector.get(b1,null);return Z?.registerApplication(F),R.onDestroy(()=>{this.detachView(R.hostView),pv(this.components,R),Z?.unregisterApplication(F)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;pv(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Kl,[]).concat(this._bootstrapListeners).forEach(g=>g(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>pv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new X(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(Je(Un),Je(Pl),Je(kh))},o.\u0275prov=kt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function pv(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}function k1(){return!1}let tI=(()=>{class o{}return o.__NG_ELEMENT_ID__=nI,o})();function nI(o){return function vP(o,a,l){if(hl(o)&&!l){const h=Ei(o.index,a);return new dy(h,h)}return 47&o.type?new dy(a[16],a):null}(Zi(),Ze(),16==(16&o))}class Wg{constructor(){}supports(a){return _y(a)}create(a){return new aI(a)}}const Id=(o,a)=>a;class aI{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Id}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,h=this._removalsHead,g=0,_=null;for(;l||h;){const b=!h||l&&l.currentIndex<yf(h,g,_)?l:h,T=yf(b,g,_),N=b.currentIndex;if(b===h)g--,h=h._nextRemoved;else if(l=l._next,null==b.previousIndex)g++;else{_||(_=[]);const R=T-g,F=N-g;if(R!=F){for(let oe=0;oe<R;oe++){const we=oe<_.length?_[oe]:_[oe]=0,$e=we+oe;F<=$e&&$e<R&&(_[oe]=we+1)}_[b.previousIndex]=F-R}}T!==N&&a(b,T,N)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!_y(a))throw new X(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let g,_,b,l=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let T=0;T<this.length;T++)_=a[T],b=this._trackByFn(T,_),null!==l&&Object.is(l.trackById,b)?(h&&(l=this._verifyReinsertion(l,_,b,T)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,b,T),h=!0),l=l._next}else g=0,function RS(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Ul()]();let h;for(;!(h=l.next()).done;)a(h.value)}}(a,T=>{b=this._trackByFn(g,T),null!==l&&Object.is(l.trackById,b)?(h&&(l=this._verifyReinsertion(l,T,b,g)),Object.is(l.item,T)||this._addIdentityChange(l,T)):(l=this._mismatch(l,T,b,g),h=!0),l=l._next,g++}),this.length=g;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,h,g){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,_,g)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,g))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,_,g)):a=this._addAfter(new IP(l,h),_,g),a}_verifyReinsertion(a,l,h,g){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?a=this._reinsertAfter(_,a._prev,g):a.currentIndex!=g&&(a.currentIndex=g,this._addToMoves(a,g)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const g=a._prevRemoved,_=a._nextRemoved;return null===g?this._removalsHead=_:g._nextRemoved=_,null===_?this._removalsTail=g:_._prevRemoved=g,this._insertAfter(a,l,h),this._addToMoves(a,h),a}_moveAfter(a,l,h){return this._unlink(a),this._insertAfter(a,l,h),this._addToMoves(a,h),a}_addAfter(a,l,h){return this._insertAfter(a,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,h){const g=null===l?this._itHead:l._next;return a._next=g,a._prev=l,null===g?this._itTail=a:g._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new Go),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,h=a._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Go),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class IP{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nr{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const l=a._prevDup,h=a._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class Go{constructor(){this.map=new Map}put(a){const l=a.trackById;let h=this.map.get(l);h||(h=new Nr,this.map.set(l,h)),h.add(a)}get(a,l){const g=this.map.get(a);return g?g.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yf(o,a,l){const h=o.previousIndex;if(null===h)return h;let g=0;return l&&h<l.length&&(g=l[h]),h+a+g}class _v{constructor(){}supports(a){return a instanceof Map||kS(a)}create(){return new O1}}class O1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||kS(a)))throw new X(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,g)=>{if(l&&l.key===g)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(g,h);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const h=a._prev;return l._next=a,l._prev=h,a._prev=l,h&&(h._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const g=this._records.get(a);this._maybeAddToChanges(g,l);const _=g._prev,b=g._next;return _&&(_._next=b),b&&(b._prev=_),g._next=null,g._prev=null,g}const h=new uI(a);return this._records.set(a,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(h=>l(a[h],h))}}class uI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jl(){return new yv([new Wg])}let yv=(()=>{class o{constructor(l){this.factories=l}static create(l,h){if(null!=h){const g=h.factories.slice();l=l.concat(g)}return new o(l)}static extend(l){return{provide:o,useFactory:h=>o.create(l,h||Jl()),deps:[[o,new Al,new ja]]}}find(l){const h=this.factories.find(g=>g.supports(l));if(null!=h)return h;throw new X(901,!1)}}return o.\u0275prov=kt({token:o,providedIn:"root",factory:Jl}),o})();function vv(){return new Xl([new _v])}let Xl=(()=>{class o{constructor(l){this.factories=l}static create(l,h){if(h){const g=h.factories.slice();l=l.concat(g)}return new o(l)}static extend(l){return{provide:o,useFactory:h=>o.create(l,h||vv()),deps:[[o,new Al,new ja]]}}find(l){const h=this.factories.find(g=>g.supports(l));if(h)return h;throw new X(901,!1)}}return o.\u0275prov=kt({token:o,providedIn:"root",factory:vv}),o})();const CP=S1(null,"core",[]);let DP=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Je(mf))},o.\u0275mod=_e({type:o}),o.\u0275inj=Or({}),o})();function TP(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},579:(Ee,pe,U)=>{"use strict";U.d(pe,{EI:()=>We,Gb:()=>In,Iv:()=>Wr,Kz:()=>Ot,Xd:()=>Hr,lT:()=>nn,xP:()=>Je});var O=U(5861),f=U(9681),G=U(1877),he=U(2090),De=U(4859);U(2833);const Me="analytics",be="firebase_id",te="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ce="https://www.googletagmanager.com/gtag/js",Ge=new G.Yd("@firebase/analytics");function de(H){return Promise.all(H.map(V=>V.catch(k=>k)))}function ze(H,V){const k=document.createElement("script");k.src=`${ce}?l=${H}&id=${V}`,k.async=!0,document.head.appendChild(k)}function X(H,V,k,j,ie,Ce){return ae.apply(this,arguments)}function ae(){return(ae=(0,O.Z)(function*(H,V,k,j,ie,Ce){const Qe=j[ie];try{if(Qe)yield V[Qe];else{const Dt=(yield de(k)).find(mt=>mt.measurementId===ie);Dt&&(yield V[Dt.appId])}}catch(qe){Ge.error(qe)}H("config",ie,Ce)})).apply(this,arguments)}function Se(H,V,k,j,ie){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(H,V,k,j,ie){try{let Ce=[];if(ie&&ie.send_to){let Qe=ie.send_to;Array.isArray(Qe)||(Qe=[Qe]);const qe=yield de(k);for(const Dt of Qe){const mt=qe.find(Qn=>Qn.measurementId===Dt),Qt=mt&&V[mt.appId];if(!Qt){Ce=[];break}Ce.push(Qt)}}0===Ce.length&&(Ce=Object.values(V)),yield Promise.all(Ce),H("event",j,ie||{})}catch(Ce){Ge.error(Ce)}})).apply(this,arguments)}function Be(H){const V=window.document.getElementsByTagName("script");for(const k of Object.values(V))if(k.src&&k.src.includes(ce)&&k.src.includes(H))return k;return null}const ue=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),me=new class fe{constructor(V={},k=1e3){this.throttleMetadata=V,this.intervalMillis=k}getThrottleMetadata(V){return this.throttleMetadata[V]}setThrottleMetadata(V,k){this.throttleMetadata[V]=k}deleteThrottleMetadata(V){delete this.throttleMetadata[V]}};function Ie(H){return new Headers({Accept:"application/json","x-goog-api-key":H})}function ke(H){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(H){var V;const{appId:k,apiKey:j}=H,ie={method:"GET",headers:Ie(j)},Ce=te.replace("{app-id}",k),Qe=yield fetch(Ce,ie);if(200!==Qe.status&&304!==Qe.status){let qe="";try{const Dt=yield Qe.json();null!==(V=Dt.error)&&void 0!==V&&V.message&&(qe=Dt.error.message)}catch{}throw ue.create("config-fetch-failed",{httpStatus:Qe.status,responseMessage:qe})}return Qe.json()})).apply(this,arguments)}function nt(H){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(H,V=me,k){const{appId:j,apiKey:ie,measurementId:Ce}=H.options;if(!j)throw ue.create("no-app-id");if(!ie){if(Ce)return{measurementId:Ce,appId:j};throw ue.create("no-api-key")}const Qe=V.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Wt;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==k?k:6e4),wn({appId:j,apiKey:ie,measurementId:Ce},Qe,qe,V)})).apply(this,arguments)}function wn(H,V,k){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(H,{throttleEndTimeMillis:V,backoffCount:k},j,ie=me){var Ce,Qe;const{appId:qe,measurementId:Dt}=H;try{yield Ft(j,V)}catch(mt){if(Dt)return Ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null===(Ce=mt)||void 0===Ce?void 0:Ce.message}]`),{appId:qe,measurementId:Dt};throw mt}try{const mt=yield ke(H);return ie.deleteThrottleMetadata(qe),mt}catch(mt){const Qt=mt;if(!Xt(Qt)){if(ie.deleteThrottleMetadata(qe),Dt)return Ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${Qt?.message}]`),{appId:qe,measurementId:Dt};throw mt}const Qn=503===Number(null===(Qe=Qt?.customData)||void 0===Qe?void 0:Qe.httpStatus)?(0,he.$s)(k,ie.intervalMillis,30):(0,he.$s)(k,ie.intervalMillis),zt={throttleEndTimeMillis:Date.now()+Qn,backoffCount:k+1};return ie.setThrottleMetadata(qe,zt),Ge.debug(`Calling attemptFetch again in ${Qn} millis`),wn(H,zt,j,ie)}})).apply(this,arguments)}function Ft(H,V){return new Promise((k,j)=>{const ie=Math.max(V-Date.now(),0),Ce=setTimeout(k,ie);H.addEventListener(()=>{clearTimeout(Ce),j(ue.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}function Xt(H){if(!(H instanceof he.ZR&&H.customData))return!1;const V=Number(H.customData.httpStatus);return 429===V||500===V||503===V||504===V}class Wt{constructor(){this.listeners=[]}addEventListener(V){this.listeners.push(V)}abort(){this.listeners.forEach(V=>V())}}let qn,br;function tn(){return(tn=(0,O.Z)(function*(H,V,k,j,ie){if(ie&&ie.global)H("event",k,j);else{const Ce=yield V;H("event",k,Object.assign(Object.assign({},j),{send_to:Ce}))}})).apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(H,V,k,j){if(j&&j.global)return H("set",{screen_name:k}),Promise.resolve();H("config",yield V,{update:!0,screen_name:k})})).apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(H,V,k,j){if(j&&j.global)return H("set",{user_id:k}),Promise.resolve();H("config",yield V,{update:!0,user_id:k})})).apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(H,V,k,j){if(j&&j.global){const ie={};for(const Ce of Object.keys(k))ie[`user_properties.${Ce}`]=k[Ce];return H("set",ie),Promise.resolve()}H("config",yield V,{update:!0,user_properties:k})})).apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(H,V){const k=yield H;window[`ga-disable-${k}`]=!V})).apply(this,arguments)}function Br(H){br=H}function ri(H){qn=H}function jr(){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(){var H;if(!(0,he.hl)())return Ge.warn(ue.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(V){return Ge.warn(ue.create("indexeddb-unavailable",{errorInfo:null===(H=V)||void 0===H?void 0:H.toString()}).message),!1}return!0})).apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(H,V,k,j,ie,Ce,Qe){var qe;const Dt=nt(H);Dt.then(Gn=>{k[Gn.measurementId]=Gn.appId,H.options.measurementId&&Gn.measurementId!==H.options.measurementId&&Ge.warn(`The measurement ID in the local Firebase config (${H.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>Ge.error(Gn)),V.push(Dt);const mt=jr().then(Gn=>{if(Gn)return j.getId()}),[Qt,Qn]=yield Promise.all([Dt,mt]);Be(Ce)||ze(Ce,Qt.measurementId),br&&(ie("consent","default",br),Br(void 0)),ie("js",new Date);const zt=null!==(qe=Qe?.config)&&void 0!==qe?qe:{};return zt.origin="firebase",zt.update=!0,null!=Qn&&(zt[be]=Qn),ie("config",Qt.measurementId,zt),qn&&(ie("set",qn),ri(void 0)),Qt.measurementId})).apply(this,arguments)}class Yr{constructor(V){this.app=V}_delete(){return delete Zn[this.app.options.appId],Promise.resolve()}}let Zn={},$r=[];const Lr={};let Nt,ft,En="dataLayer",Bn="gtag",Hn=!1;function Hr(H){if(Hn)throw ue.create("already-initialized");H.dataLayerName&&(En=H.dataLayerName),H.gtagName&&(Bn=H.gtagName)}function ci(H,V,k){!function Cr(){const H=[];if((0,he.ru)()&&H.push("This is a browser extension environment."),(0,he.zI)()||H.push("Cookies are not available."),H.length>0){const V=H.map((j,ie)=>`(${ie+1}) ${j}`).join(" "),k=ue.create("invalid-analytics-context",{errorInfo:V});Ge.warn(k.message)}}();const j=H.options.appId;if(!j)throw ue.create("no-app-id");if(!H.options.apiKey){if(!H.options.measurementId)throw ue.create("no-api-key");Ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${H.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zn[j])throw ue.create("already-exists",{id:j});if(!Hn){!function J(H){let V=[];Array.isArray(window[H])?V=window[H]:window[H]=V}(En);const{wrappedGtag:Ce,gtagCore:Qe}=function Ve(H,V,k,j,ie){let Ce=function(...Qe){window[j].push(arguments)};return window[ie]&&"function"==typeof window[ie]&&(Ce=window[ie]),window[ie]=function He(H,V,k,j){function Ce(){return(Ce=(0,O.Z)(function*(Qe,qe,Dt){try{"event"===Qe?yield Se(H,V,k,qe,Dt):"config"===Qe?yield X(H,V,k,j,qe,Dt):"consent"===Qe?H("consent","update",Dt):H("set",qe)}catch(mt){Ge.error(mt)}})).apply(this,arguments)}return function ie(Qe,qe,Dt){return Ce.apply(this,arguments)}}(Ce,H,V,k),{gtagCore:Ce,wrappedGtag:window[ie]}}(Zn,$r,Lr,En,Bn);ft=Ce,Nt=Qe,Hn=!0}return Zn[j]=function It(H,V,k,j,ie,Ce,Qe){return Ir.apply(this,arguments)}(H,$r,Lr,V,Nt,En,k),new Yr(H)}function In(){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}function nn(H,V,k){H=(0,he.m9)(H),function kt(H,V,k,j){return Ln.apply(this,arguments)}(ft,Zn[H.app.options.appId],V,k).catch(j=>Ge.error(j))}function Wr(H,V,k){H=(0,he.m9)(H),function Or(H,V,k,j){return mi.apply(this,arguments)}(ft,Zn[H.app.options.appId],V,k).catch(j=>Ge.error(j))}function Je(H,V,k){H=(0,he.m9)(H),function cr(H,V,k,j){return Pr.apply(this,arguments)}(ft,Zn[H.app.options.appId],V,k).catch(j=>Ge.error(j))}function We(H,V){H=(0,he.m9)(H),function ki(H,V){return ni.apply(this,arguments)}(Zn[H.app.options.appId],V).catch(k=>Ge.error(k))}function Ot(H,V,k,j){H=(0,he.m9)(H),function kr(H,V,k,j,ie){return tn.apply(this,arguments)}(ft,Zn[H.app.options.appId],V,k,j).catch(ie=>Ge.error(ie))}const dn="@firebase/analytics";!function Y(){(0,f._registerComponent)(new De.wA(Me,(V,{options:k})=>ci(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,f._registerComponent)(new De.wA("analytics-internal",function H(V){try{const k=V.getProvider(Me).getImmediate();return{logEvent:(j,ie,Ce)=>Ot(k,j,ie,Ce)}}catch(k){throw ue.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,f.registerVersion)(dn,"0.8.4"),(0,f.registerVersion)(dn,"0.8.4","esm2017")}()},3942:(Ee,pe,U)=>{"use strict";U.d(pe,{Z:()=>ze});var O=U(2090),f=U(4859),G=U(9681),he=U(1877);class De{constructor(X,ae){this._delegate=X,this.firebase=ae,(0,G._addComponent)(X,new f.wA("app-compat",()=>this,"PUBLIC")),this.container=X.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this._delegate.automaticDataCollectionEnabled=X}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(X=>{this._delegate.checkDestroyed(),X()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(X,ae=G._DEFAULT_ENTRY_NAME){var Se;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(X);return!Fe.isInitialized()&&"EXPLICIT"===(null===(Se=Fe.getComponent())||void 0===Se?void 0:Se.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:ae})}_removeServiceInstance(X,ae=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(X).clearInstance(ae)}_addComponent(X){(0,G._addComponent)(this._delegate,X)}_addOrOverwriteComponent(X){(0,G._addOrOverwriteComponent)(this._delegate,X)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new O.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function ge(){const J=function be(J){const X={},ae={__esModule:!0,initializeApp:function He(ue,Re={}){const je=G.initializeApp(ue,Re);if((0,O.r3)(X,je.name))return X[je.name];const fe=new J(je,ae);return X[je.name]=fe,fe},app:Fe,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Be(ue){const Re=ue.name,je=Re.replace("-compat","");if(G._registerComponent(ue)&&"PUBLIC"===ue.type){const fe=(me=Fe())=>{if("function"!=typeof me[je])throw Me.create("invalid-app-argument",{appName:Re});return me[je]()};void 0!==ue.serviceProps&&(0,O.ZB)(fe,ue.serviceProps),ae[je]=fe,J.prototype[je]=function(...me){return this._getService.bind(this,Re).apply(this,ue.multipleInstances?me:[])}}return"PUBLIC"===ue.type?ae[je]:null},removeApp:function Se(ue){delete X[ue]},useAsService:function st(ue,Re){return"serverAuth"===Re?null:Re},modularAPIs:G}};function Fe(ue){if(!(0,O.r3)(X,ue=ue||G._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:ue});return X[ue]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function Ve(){return Object.keys(X).map(ue=>X[ue])}}),Fe.App=J,ae}(De);return J.INTERNAL=Object.assign(Object.assign({},J.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function X(ae){(0,O.ZB)(J,ae)},createSubscribe:O.ne,ErrorFactory:O.LL,deepExtend:O.ZB}),J}(),te=new he.Yd("@firebase/app-compat");if((0,O.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const J=self.firebase.SDK_VERSION;J&&J.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=ne;!function de(J){(0,G.registerVersion)("@firebase/app-compat","0.1.39",J)}()},9681:(Ee,pe,U)=>{"use strict";U.r(pe),U.d(pe,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>bn,_addComponent:()=>qn,_addOrOverwriteComponent:()=>kr,_apps:()=>Xt,_clearComponents:()=>Or,_components:()=>Wt,_getProvider:()=>kt,_registerComponent:()=>tn,_removeServiceInstance:()=>Ln,deleteApp:()=>ri,getApp:()=>br,getApps:()=>Br,initializeApp:()=>ni,onLog:()=>It,registerVersion:()=>vn,setLogLevel:()=>Ir});var O=U(5861),f=U(4859),G=U(1877),he=U(2090),De=U(8766);class Ne{constructor(We){this.container=We}getPlatformInfoString(){return this.container.getProviders().map(gt=>{if(function Me(Je){return"VERSION"===Je.getComponent()?.type}(gt)){const Ot=gt.getImmediate();return`${Ot.library}/${Ot.version}`}return null}).filter(gt=>gt).join(" ")}}const be="@firebase/app",ne=new G.Yd("@firebase/app"),bn="[DEFAULT]",Ft={[be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,Wt=new Map;function qn(Je,We){try{Je.container.addComponent(We)}catch(gt){ne.debug(`Component ${We.name} failed to register with FirebaseApp ${Je.name}`,gt)}}function kr(Je,We){Je.container.addOrOverwriteComponent(We)}function tn(Je){const We=Je.name;if(Wt.has(We))return ne.debug(`There were multiple attempts to register component ${We}.`),!1;Wt.set(We,Je);for(const gt of Xt.values())qn(gt,Je);return!0}function kt(Je,We){const gt=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return gt&&gt.triggerHeartbeat(),Je.container.getProvider(We)}function Ln(Je,We,gt=bn){kt(Je,We).clearInstance(gt)}function Or(){Wt.clear()}const cr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pr{constructor(We,gt,Ot){this._isDeleted=!1,this._options=Object.assign({},We),this._config=Object.assign({},gt),this._name=gt.name,this._automaticDataCollectionEnabled=gt.automaticDataCollectionEnabled,this._container=Ot,this.container.addComponent(new f.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this.checkDestroyed(),this._automaticDataCollectionEnabled=We}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(We){this._isDeleted=We}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const ki="9.14.0";function ni(Je,We={}){let gt=Je;"object"!=typeof We&&(We={name:We});const Ot=Object.assign({name:bn,automaticDataCollectionEnabled:!1},We),$t=Ot.name;if("string"!=typeof $t||!$t)throw cr.create("bad-app-name",{appName:String($t)});if(gt||(gt=(0,he.aH)()),!gt)throw cr.create("no-options");const dn=Xt.get($t);if(dn){if((0,he.vZ)(gt,dn.options)&&(0,he.vZ)(Ot,dn.config))return dn;throw cr.create("duplicate-app",{appName:$t})}const re=new f.H0($t);for(const H of Wt.values())re.addComponent(H);const Y=new Pr(gt,Ot,re);return Xt.set($t,Y),Y}function br(Je=bn){const We=Xt.get(Je);if(!We&&Je===bn)return ni();if(!We)throw cr.create("no-app",{appName:Je});return We}function Br(){return Array.from(Xt.values())}function ri(Je){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(Je){const We=Je.name;Xt.has(We)&&(Xt.delete(We),yield Promise.all(Je.container.getProviders().map(gt=>gt.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function vn(Je,We,gt){var Ot;let $t=null!==(Ot=Ft[Je])&&void 0!==Ot?Ot:Je;gt&&($t+=`-${gt}`);const dn=$t.match(/\s|\//),re=We.match(/\s|\//);if(dn||re){const Y=[`Unable to register library "${$t}" with version "${We}":`];return dn&&Y.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),dn&&re&&Y.push("and"),re&&Y.push(`version name "${We}" contains illegal characters (whitespace or "/")`),void ne.warn(Y.join(" "))}tn(new f.wA(`${$t}-version`,()=>({library:$t,version:We}),"VERSION"))}function It(Je,We){if(null!==Je&&"function"!=typeof Je)throw cr.create("invalid-log-argument");(0,G.Am)(Je,We)}function Ir(Je){(0,G.Ub)(Je)}const $r="firebase-heartbeat-store";let Lr=null;function En(){return Lr||(Lr=(0,De.X3)("firebase-heartbeat-database",1,{upgrade:(Je,We)=>{0===We&&Je.createObjectStore($r)}}).catch(Je=>{throw cr.create("idb-open",{originalErrorMessage:Je.message})})),Lr}function Nt(){return(Nt=(0,O.Z)(function*(Je){var We;try{return(yield En()).transaction($r).objectStore($r).get(Hr(Je))}catch(gt){if(gt instanceof he.ZR)ne.warn(gt.message);else{const Ot=cr.create("idb-get",{originalErrorMessage:null===(We=gt)||void 0===We?void 0:We.message});ne.warn(Ot.message)}}})).apply(this,arguments)}function ft(Je,We){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(Je,We){var gt;try{const $t=(yield En()).transaction($r,"readwrite");return yield $t.objectStore($r).put(We,Hr(Je)),$t.done}catch(Ot){if(Ot instanceof he.ZR)ne.warn(Ot.message);else{const $t=cr.create("idb-set",{originalErrorMessage:null===(gt=Ot)||void 0===gt?void 0:gt.message});ne.warn($t.message)}}})).apply(this,arguments)}function Hr(Je){return`${Je.name}!${Je.options.appId}`}class ar{constructor(We){this.container=We,this._heartbeatsCache=null;const gt=this.container.getProvider("app").getImmediate();this._storage=new Gr(gt),this._heartbeatsCachePromise=this._storage.read().then(Ot=>(this._heartbeatsCache=Ot,Ot))}triggerHeartbeat(){var We=this;return(0,O.Z)(function*(){const Ot=We.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=Yn();if(null===We._heartbeatsCache&&(We._heartbeatsCache=yield We._heartbeatsCachePromise),We._heartbeatsCache.lastSentHeartbeatDate!==$t&&!We._heartbeatsCache.heartbeats.some(dn=>dn.date===$t))return We._heartbeatsCache.heartbeats.push({date:$t,agent:Ot}),We._heartbeatsCache.heartbeats=We._heartbeatsCache.heartbeats.filter(dn=>{const re=new Date(dn.date).valueOf();return Date.now()-re<=2592e6}),We._storage.overwrite(We._heartbeatsCache)})()}getHeartbeatsHeader(){var We=this;return(0,O.Z)(function*(){if(null===We._heartbeatsCache&&(yield We._heartbeatsCachePromise),null===We._heartbeatsCache||0===We._heartbeatsCache.heartbeats.length)return"";const gt=Yn(),{heartbeatsToSend:Ot,unsentEntries:$t}=function In(Je,We=1024){const gt=[];let Ot=Je.slice();for(const $t of Je){const dn=gt.find(re=>re.agent===$t.agent);if(dn){if(dn.dates.push($t.date),nn(gt)>We){dn.dates.pop();break}}else if(gt.push({agent:$t.agent,dates:[$t.date]}),nn(gt)>We){gt.pop();break}Ot=Ot.slice(1)}return{heartbeatsToSend:gt,unsentEntries:Ot}}(We._heartbeatsCache.heartbeats),dn=(0,he.L)(JSON.stringify({version:2,heartbeats:Ot}));return We._heartbeatsCache.lastSentHeartbeatDate=gt,$t.length>0?(We._heartbeatsCache.heartbeats=$t,yield We._storage.overwrite(We._heartbeatsCache)):(We._heartbeatsCache.heartbeats=[],We._storage.overwrite(We._heartbeatsCache)),dn})()}}function Yn(){return(new Date).toISOString().substring(0,10)}class Gr{constructor(We){this.app=We,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var We=this;return(0,O.Z)(function*(){return(yield We._canUseIndexedDBPromise)&&(yield function Bn(Je){return Nt.apply(this,arguments)}(We.app))||{heartbeats:[]}})()}overwrite(We){var gt=this;return(0,O.Z)(function*(){var Ot;if(yield gt._canUseIndexedDBPromise){const dn=yield gt.read();return ft(gt.app,{lastSentHeartbeatDate:null!==(Ot=We.lastSentHeartbeatDate)&&void 0!==Ot?Ot:dn.lastSentHeartbeatDate,heartbeats:We.heartbeats})}})()}add(We){var gt=this;return(0,O.Z)(function*(){var Ot;if(yield gt._canUseIndexedDBPromise){const dn=yield gt.read();return ft(gt.app,{lastSentHeartbeatDate:null!==(Ot=We.lastSentHeartbeatDate)&&void 0!==Ot?Ot:dn.lastSentHeartbeatDate,heartbeats:[...dn.heartbeats,...We.heartbeats]})}})()}}function nn(Je){return(0,he.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Wr(Je){tn(new f.wA("platform-logger",We=>new Ne(We),"PRIVATE")),tn(new f.wA("heartbeat",We=>new ar(We),"PRIVATE")),vn(be,"0.8.4",Je),vn(be,"0.8.4","esm2017"),vn("fire-js","")}("")},4859:(Ee,pe,U)=>{"use strict";U.d(pe,{H0:()=>be,wA:()=>G,zt:()=>De});var O=U(5861),f=U(2090);class G{constructor(ne,te,ce){this.name=ne,this.instanceFactory=te,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const he="[DEFAULT]";class De{constructor(ne,te){this.name=ne,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const te=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(te)){const ce=new f.BH;if(this.instancesDeferred.set(te,ce),this.isInitialized(te)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:te});Ge&&ce.resolve(Ge)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(ne){var te;const ce=this.normalizeInstanceIdentifier(ne?.identifier),Ge=null!==(te=ne?.optional)&&void 0!==te&&te;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(de){if(Ge)return null;throw de}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function Me(ge){return"EAGER"===ge.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[te,ce]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(te);try{const de=this.getOrInitializeService({instanceIdentifier:Ge});ce.resolve(de)}catch{}}}}clearInstance(ne=he){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,O.Z)(function*(){const te=Array.from(ne.instances.values());yield Promise.all([...te.filter(ce=>"INTERNAL"in ce).map(ce=>ce.INTERNAL.delete()),...te.filter(ce=>"_delete"in ce).map(ce=>ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=he){return this.instances.has(ne)}getOptions(ne=he){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:te={}}=ne,ce=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(ce))throw Error(`${this.name}(${ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ce,options:te});for(const[de,ze]of this.instancesDeferred.entries())ce===this.normalizeInstanceIdentifier(de)&&ze.resolve(Ge);return Ge}onInit(ne,te){var ce;const Ge=this.normalizeInstanceIdentifier(te),de=null!==(ce=this.onInitCallbacks.get(Ge))&&void 0!==ce?ce:new Set;de.add(ne),this.onInitCallbacks.set(Ge,de);const ze=this.instances.get(Ge);return ze&&ne(ze,Ge),()=>{de.delete(ne)}}invokeOnInitCallbacks(ne,te){const ce=this.onInitCallbacks.get(te);if(ce)for(const Ge of ce)try{Ge(ne,te)}catch{}}getOrInitializeService({instanceIdentifier:ne,options:te={}}){let ce=this.instances.get(ne);if(!ce&&this.component&&(ce=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=ne,ge===he?void 0:ge),options:te}),this.instances.set(ne,ce),this.instancesOptions.set(ne,te),this.invokeOnInitCallbacks(ce,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,ce)}catch{}var ge;return ce||null}normalizeInstanceIdentifier(ne=he){return this.component?this.component.multipleInstances?ne:he:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const te=this.getProvider(ne.name);if(te.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);te.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const te=new De(ne,this);return this.providers.set(ne,te),te}getProviders(){return Array.from(this.providers.values())}}},2833:(Ee,pe,U)=>{"use strict";var O=U(5861),f=U(9681),G=U(4859),he=U(2090),De=U(8766);const Ne="@firebase/installations",Me="0.5.16",ge=`w:${Me}`,ne="FIS_v2",J=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function X(_e){return _e instanceof he.ZR&&_e.code.includes("request-failed")}function ae({projectId:_e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${_e}/installations`}function Se(_e){return{token:_e.token,requestStatus:2,expiresIn:Re(_e.expiresIn),creationTime:Date.now()}}function Fe(_e,Ue){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(_e,Ue){const Bt=(yield Ue.json()).error;return J.create("request-failed",{requestName:_e,serverCode:Bt.code,serverMessage:Bt.message,serverStatus:Bt.status})})).apply(this,arguments)}function Ve({apiKey:_e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_e})}function Be(_e,{refreshToken:Ue}){const ot=Ve(_e);return ot.append("Authorization",function je(_e){return`${ne} ${_e}`}(Ue)),ot}function st(_e){return ue.apply(this,arguments)}function ue(){return(ue=(0,O.Z)(function*(_e){const Ue=yield _e();return Ue.status>=500&&Ue.status<600?_e():Ue})).apply(this,arguments)}function Re(_e){return Number(_e.replace("s","000"))}function fe(_e,Ue){return me.apply(this,arguments)}function me(){return(me=(0,O.Z)(function*({appConfig:_e,heartbeatServiceProvider:Ue},{fid:ot}){const Bt=ae(_e),dr=Ve(_e),Pt=Ue.getImmediate({optional:!0});if(Pt){const hr=yield Pt.getHeartbeatsHeader();hr&&dr.append("x-firebase-client",hr)}const jn={method:"POST",headers:dr,body:JSON.stringify({fid:ot,authVersion:ne,appId:_e.appId,sdkVersion:ge})},_i=yield st(()=>fetch(Bt,jn));if(_i.ok){const hr=yield _i.json();return{fid:hr.fid||ot,registrationStatus:2,refreshToken:hr.refreshToken,authToken:Se(hr.authToken)}}throw yield Fe("Create Installation",_i)})).apply(this,arguments)}function Ie(_e){return new Promise(Ue=>{setTimeout(Ue,_e)})}const Te=/^[cdef][\w-]{21}$/;function xt(){try{const _e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(_e),_e[0]=112+_e[0]%16;const ot=function wn(_e){return function ke(_e){return btoa(String.fromCharCode(..._e)).replace(/\+/g,"-").replace(/\//g,"_")}(_e).substr(0,22)}(_e);return Te.test(ot)?ot:""}catch{return""}}function bn(_e){return`${_e.appName}!${_e.appId}`}const Ft=new Map;function Xt(_e,Ue){const ot=bn(_e);kr(ot,Ue),function tn(_e,Ue){const ot=function Ln(){return!kt&&"BroadcastChannel"in self&&(kt=new BroadcastChannel("[Firebase] FID Change"),kt.onmessage=_e=>{kr(_e.data.key,_e.data.fid)}),kt}();ot&&ot.postMessage({key:_e,fid:Ue}),function Or(){0===Ft.size&&kt&&(kt.close(),kt=null)}()}(ot,Ue)}function kr(_e,Ue){const ot=Ft.get(_e);if(ot)for(const Bt of ot)Bt(Ue)}let kt=null;const Pr="firebase-installations-store";let ki=null;function ni(){return ki||(ki=(0,De.X3)("firebase-installations-database",1,{upgrade:(_e,Ue)=>{0===Ue&&_e.createObjectStore(Pr)}})),ki}function br(_e,Ue){return Br.apply(this,arguments)}function Br(){return(Br=(0,O.Z)(function*(_e,Ue){const ot=bn(_e),dr=(yield ni()).transaction(Pr,"readwrite"),Pt=dr.objectStore(Pr),Cn=yield Pt.get(ot);return yield Pt.put(Ue,ot),yield dr.done,(!Cn||Cn.fid!==Ue.fid)&&Xt(_e,Ue.fid),Ue})).apply(this,arguments)}function ri(_e){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(_e){const Ue=bn(_e),Bt=(yield ni()).transaction(Pr,"readwrite");yield Bt.objectStore(Pr).delete(Ue),yield Bt.done})).apply(this,arguments)}function vn(_e,Ue){return It.apply(this,arguments)}function It(){return(It=(0,O.Z)(function*(_e,Ue){const ot=bn(_e),dr=(yield ni()).transaction(Pr,"readwrite"),Pt=dr.objectStore(Pr),Cn=yield Pt.get(ot),jn=Ue(Cn);return void 0===jn?yield Pt.delete(ot):yield Pt.put(jn,ot),yield dr.done,jn&&(!Cn||Cn.fid!==jn.fid)&&Xt(_e,jn.fid),jn})).apply(this,arguments)}function Ir(_e){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(_e){let Ue;const ot=yield vn(_e.appConfig,Bt=>{const dr=Zn(Bt),Pt=$r(_e,dr);return Ue=Pt.registrationPromise,Pt.installationEntry});return""===ot.fid?{installationEntry:yield Ue}:{installationEntry:ot,registrationPromise:Ue}})).apply(this,arguments)}function Zn(_e){return Hn(_e||{fid:xt(),registrationStatus:0})}function $r(_e,Ue){if(0===Ue.registrationStatus){if(!navigator.onLine)return{installationEntry:Ue,registrationPromise:Promise.reject(J.create("app-offline"))};const ot={fid:Ue.fid,registrationStatus:1,registrationTime:Date.now()},Bt=function Lr(_e,Ue){return En.apply(this,arguments)}(_e,ot);return{installationEntry:ot,registrationPromise:Bt}}return 1===Ue.registrationStatus?{installationEntry:Ue,registrationPromise:Bn(_e)}:{installationEntry:Ue}}function En(){return(En=(0,O.Z)(function*(_e,Ue){try{const ot=yield fe(_e,Ue);return br(_e.appConfig,ot)}catch(ot){throw X(ot)&&409===ot.customData.serverCode?yield ri(_e.appConfig):yield br(_e.appConfig,{fid:Ue.fid,registrationStatus:0}),ot}})).apply(this,arguments)}function Bn(_e){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(_e){let Ue=yield ft(_e.appConfig);for(;1===Ue.registrationStatus;)yield Ie(100),Ue=yield ft(_e.appConfig);if(0===Ue.registrationStatus){const{installationEntry:ot,registrationPromise:Bt}=yield Ir(_e);return Bt||ot}return Ue})).apply(this,arguments)}function ft(_e){return vn(_e,Ue=>{if(!Ue)throw J.create("installation-not-found");return Hn(Ue)})}function Hn(_e){return function Hr(_e){return 1===_e.registrationStatus&&_e.registrationTime+1e4<Date.now()}(_e)?{fid:_e.fid,registrationStatus:0}:_e}function Cr(_e,Ue){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*({appConfig:_e,heartbeatServiceProvider:Ue},ot){const Bt=ar(_e,ot),dr=Be(_e,ot),Pt=Ue.getImmediate({optional:!0});if(Pt){const hr=yield Pt.getHeartbeatsHeader();hr&&dr.append("x-firebase-client",hr)}const jn={method:"POST",headers:dr,body:JSON.stringify({installation:{sdkVersion:ge,appId:_e.appId}})},_i=yield st(()=>fetch(Bt,jn));if(_i.ok)return Se(yield _i.json());throw yield Fe("Generate Auth Token",_i)})).apply(this,arguments)}function ar(_e,{fid:Ue}){return`${ae(_e)}/${Ue}/authTokens:generate`}function Yn(_e){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(_e,Ue=!1){let ot;const Bt=yield vn(_e.appConfig,Pt=>{if(!gt(Pt))throw J.create("not-registered");const Cn=Pt.authToken;if(!Ue&&Ot(Cn))return Pt;if(1===Cn.requestStatus)return ot=Gr(_e,Ue),Pt;{if(!navigator.onLine)throw J.create("app-offline");const jn=dn(Pt);return ot=Je(_e,jn),jn}});return ot?yield ot:Bt.authToken})).apply(this,arguments)}function Gr(_e,Ue){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(_e,Ue){let ot=yield Wr(_e.appConfig);for(;1===ot.authToken.requestStatus;)yield Ie(100),ot=yield Wr(_e.appConfig);const Bt=ot.authToken;return 0===Bt.requestStatus?Yn(_e,Ue):Bt})).apply(this,arguments)}function Wr(_e){return vn(_e,Ue=>{if(!gt(Ue))throw J.create("not-registered");return function re(_e){return 1===_e.requestStatus&&_e.requestTime+1e4<Date.now()}(Ue.authToken)?Object.assign(Object.assign({},Ue),{authToken:{requestStatus:0}}):Ue})}function Je(_e,Ue){return We.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*(_e,Ue){try{const ot=yield Cr(_e,Ue),Bt=Object.assign(Object.assign({},Ue),{authToken:ot});return yield br(_e.appConfig,Bt),ot}catch(ot){if(!X(ot)||401!==ot.customData.serverCode&&404!==ot.customData.serverCode){const Bt=Object.assign(Object.assign({},Ue),{authToken:{requestStatus:0}});yield br(_e.appConfig,Bt)}else yield ri(_e.appConfig);throw ot}})).apply(this,arguments)}function gt(_e){return void 0!==_e&&2===_e.registrationStatus}function Ot(_e){return 2===_e.requestStatus&&!function $t(_e){const Ue=Date.now();return Ue<_e.creationTime||_e.creationTime+_e.expiresIn<Ue+36e5}(_e)}function dn(_e){const Ue={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},_e),{authToken:Ue})}function H(){return(H=(0,O.Z)(function*(_e){const Ue=_e,{installationEntry:ot,registrationPromise:Bt}=yield Ir(Ue);return Bt?Bt.catch(console.error):Yn(Ue).catch(console.error),ot.fid})).apply(this,arguments)}function k(){return(k=(0,O.Z)(function*(_e,Ue=!1){const ot=_e;return yield j(ot),(yield Yn(ot,Ue)).token})).apply(this,arguments)}function j(_e){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(_e){const{registrationPromise:Ue}=yield Ir(_e);Ue&&(yield Ue)})).apply(this,arguments)}function Gn(_e){return J.create("missing-app-config-values",{valueName:_e})}const Ao="installations",Jo=_e=>{const Ue=_e.getProvider("app").getImmediate(),ot=function zt(_e){if(!_e||!_e.options)throw Gn("App Configuration");if(!_e.name)throw Gn("App Name");const Ue=["projectId","apiKey","appId"];for(const ot of Ue)if(!_e.options[ot])throw Gn(ot);return{appName:_e.name,projectId:_e.options.projectId,apiKey:_e.options.apiKey,appId:_e.options.appId}}(Ue);return{app:Ue,appConfig:ot,heartbeatServiceProvider:(0,f._getProvider)(Ue,"heartbeat"),_delete:()=>Promise.resolve()}},cu=_e=>{const Ue=_e.getProvider("app").getImmediate(),ot=(0,f._getProvider)(Ue,Ao).getImmediate();return{getId:()=>function Y(_e){return H.apply(this,arguments)}(ot),getToken:dr=>function V(_e){return k.apply(this,arguments)}(ot,dr)}};(function Fr(){(0,f._registerComponent)(new G.wA(Ao,Jo,"PUBLIC")),(0,f._registerComponent)(new G.wA("installations-internal",cu,"PRIVATE"))})(),(0,f.registerVersion)(Ne,Me),(0,f.registerVersion)(Ne,Me,"esm2017")},1877:(Ee,pe,U)=>{"use strict";U.d(pe,{Am:()=>ge,Ub:()=>be,Yd:()=>Me,in:()=>f});const O=[];var f=(()=>{return(ne=f||(f={}))[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",f;var ne})();const G={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},he=f.INFO,De={[f.DEBUG]:"log",[f.VERBOSE]:"log",[f.INFO]:"info",[f.WARN]:"warn",[f.ERROR]:"error"},Ne=(ne,te,...ce)=>{if(te<ne.logLevel)return;const Ge=(new Date).toISOString(),de=De[te];if(!de)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[de](`[${Ge}]  ${ne.name}:`,...ce)};class Me{constructor(te){this.name=te,this._logLevel=he,this._logHandler=Ne,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in f))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?G[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,f.DEBUG,...te),this._logHandler(this,f.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,f.VERBOSE,...te),this._logHandler(this,f.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,f.INFO,...te),this._logHandler(this,f.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,f.WARN,...te),this._logHandler(this,f.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,f.ERROR,...te),this._logHandler(this,f.ERROR,...te)}}function be(ne){O.forEach(te=>{te.setLogLevel(ne)})}function ge(ne,te){for(const ce of O){let Ge=null;te&&te.level&&(Ge=G[te.level]),ce.userLogHandler=null===ne?null:(de,ze,...J)=>{const X=J.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch{return null}}).filter(ae=>ae).join(" ");ze>=(Ge??de.logLevel)&&ne({level:f[ze].toLowerCase(),message:X,args:J,type:de.name})}}}},8766:(Ee,pe,U)=>{"use strict";U.d(pe,{Lj:()=>He,X3:()=>Fe});var O=U(5861);let G,he;const Me=new WeakMap,be=new WeakMap,ge=new WeakMap,ne=new WeakMap,te=new WeakMap;let de={get(Re,je,fe){if(Re instanceof IDBTransaction){if("done"===je)return be.get(Re);if("objectStoreNames"===je)return Re.objectStoreNames||ge.get(Re);if("store"===je)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return ae(Re[je])},set:(Re,je,fe)=>(Re[je]=fe,!0),has:(Re,je)=>Re instanceof IDBTransaction&&("done"===je||"store"===je)||je in Re};function X(Re){return"function"==typeof Re?function J(Re){return Re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Re)?function(...je){return Re.apply(Se(this),je),ae(Me.get(this))}:function(...je){return ae(Re.apply(Se(this),je))}:function(je,...fe){const me=Re.call(Se(this),je,...fe);return ge.set(me,je.sort?je.sort():[je]),ae(me)}}(Re):(Re instanceof IDBTransaction&&function Ge(Re){if(be.has(Re))return;const je=new Promise((fe,me)=>{const Ie=()=>{Re.removeEventListener("complete",ke),Re.removeEventListener("error",Te),Re.removeEventListener("abort",Te)},ke=()=>{fe(),Ie()},Te=()=>{me(Re.error||new DOMException("AbortError","AbortError")),Ie()};Re.addEventListener("complete",ke),Re.addEventListener("error",Te),Re.addEventListener("abort",Te)});be.set(Re,je)}(Re),((Re,je)=>je.some(fe=>Re instanceof fe))(Re,function De(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Re,de):Re)}function ae(Re){if(Re instanceof IDBRequest)return function ce(Re){const je=new Promise((fe,me)=>{const Ie=()=>{Re.removeEventListener("success",ke),Re.removeEventListener("error",Te)},ke=()=>{fe(ae(Re.result)),Ie()},Te=()=>{me(Re.error),Ie()};Re.addEventListener("success",ke),Re.addEventListener("error",Te)});return je.then(fe=>{fe instanceof IDBCursor&&Me.set(fe,Re)}).catch(()=>{}),te.set(je,Re),je}(Re);if(ne.has(Re))return ne.get(Re);const je=X(Re);return je!==Re&&(ne.set(Re,je),te.set(je,Re)),je}const Se=Re=>te.get(Re);function Fe(Re,je,{blocked:fe,upgrade:me,blocking:Ie,terminated:ke}={}){const Te=indexedDB.open(Re,je),nt=ae(Te);return me&&Te.addEventListener("upgradeneeded",xt=>{me(ae(Te.result),xt.oldVersion,xt.newVersion,ae(Te.transaction))}),fe&&Te.addEventListener("blocked",()=>fe()),nt.then(xt=>{ke&&xt.addEventListener("close",()=>ke()),Ie&&xt.addEventListener("versionchange",()=>Ie())}).catch(()=>{}),nt}function He(Re,{blocked:je}={}){const fe=indexedDB.deleteDatabase(Re);return je&&fe.addEventListener("blocked",()=>je()),ae(fe).then(()=>{})}const Ve=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],st=new Map;function ue(Re,je){if(!(Re instanceof IDBDatabase)||je in Re||"string"!=typeof je)return;if(st.get(je))return st.get(je);const fe=je.replace(/FromIndex$/,""),me=je!==fe,Ie=Be.includes(fe);if(!(fe in(me?IDBIndex:IDBObjectStore).prototype)||!Ie&&!Ve.includes(fe))return;const ke=function(){var Te=(0,O.Z)(function*(nt,...xt){const wn=this.transaction(nt,Ie?"readwrite":"readonly");let bn=wn.store;return me&&(bn=bn.index(xt.shift())),(yield Promise.all([bn[fe](...xt),Ie&&wn.done]))[0]});return function(xt){return Te.apply(this,arguments)}}();return st.set(je,ke),ke}!function ze(Re){de=Re(de)}(Re=>({...Re,get:(je,fe,me)=>ue(je,fe)||Re.get(je,fe,me),has:(je,fe)=>!!ue(je,fe)||Re.has(je,fe)}))},5861:(Ee,pe,U)=>{"use strict";function O(G,he,De,Ne,Me,be,ge){try{var ne=G[be](ge),te=ne.value}catch(ce){return void De(ce)}ne.done?he(te):Promise.resolve(te).then(Ne,Me)}function f(G){return function(){var he=this,De=arguments;return new Promise(function(Ne,Me){var be=G.apply(he,De);function ge(te){O(be,Ne,Me,ge,ne,"next",te)}function ne(te){O(be,Ne,Me,ge,ne,"throw",te)}ge(void 0)})}}U.d(pe,{Z:()=>f})}},Ee=>{Ee(Ee.s=3460)}]);